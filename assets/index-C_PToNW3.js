(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))o(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const m of h.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function l(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(d){if(d.ep)return;d.ep=!0;const h=l(d);fetch(d.href,h)}})();function h0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Iu={exports:{}},dr={};var gy;function m0(){if(gy)return dr;gy=1;var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function l(o,d,h){var m=null;if(h!==void 0&&(m=""+h),d.key!==void 0&&(m=""+d.key),"key"in d){h={};for(var g in d)g!=="key"&&(h[g]=d[g])}else h=d;return d=h.ref,{$$typeof:n,type:o,key:m,ref:d!==void 0?d:null,props:h}}return dr.Fragment=s,dr.jsx=l,dr.jsxs=l,dr}var vy;function f0(){return vy||(vy=1,Iu.exports=m0()),Iu.exports}var a=f0(),Hu={exports:{}},He={};var by;function p0(){if(by)return He;by=1;var n=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),m=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),w=Symbol.iterator;function T(S){return S===null||typeof S!="object"?null:(S=w&&S[w]||S["@@iterator"],typeof S=="function"?S:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,z={};function Z(S,P,pe){this.props=S,this.context=P,this.refs=z,this.updater=pe||A}Z.prototype.isReactComponent={},Z.prototype.setState=function(S,P){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,P,"setState")},Z.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function D(){}D.prototype=Z.prototype;function B(S,P,pe){this.props=S,this.context=P,this.refs=z,this.updater=pe||A}var R=B.prototype=new D;R.constructor=B,E(R,Z.prototype),R.isPureReactComponent=!0;var W=Array.isArray;function fe(){}var re={H:null,A:null,T:null,S:null},K=Object.prototype.hasOwnProperty;function te(S,P,pe){var ue=pe.ref;return{$$typeof:n,type:S,key:P,ref:ue!==void 0?ue:null,props:pe}}function xe(S,P){return te(S.type,P,S.props)}function U(S){return typeof S=="object"&&S!==null&&S.$$typeof===n}function se(S){var P={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(pe){return P[pe]})}var k=/\/+/g;function ne(S,P){return typeof S=="object"&&S!==null&&S.key!=null?se(""+S.key):P.toString(36)}function L(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(fe,fe):(S.status="pending",S.then(function(P){S.status==="pending"&&(S.status="fulfilled",S.value=P)},function(P){S.status==="pending"&&(S.status="rejected",S.reason=P)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function C(S,P,pe,ue,we){var ve=typeof S;(ve==="undefined"||ve==="boolean")&&(S=null);var ke=!1;if(S===null)ke=!0;else switch(ve){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(S.$$typeof){case n:case s:ke=!0;break;case x:return ke=S._init,C(ke(S._payload),P,pe,ue,we)}}if(ke)return we=we(S),ke=ue===""?"."+ne(S,0):ue,W(we)?(pe="",ke!=null&&(pe=ke.replace(k,"$&/")+"/"),C(we,P,pe,"",function(Q){return Q})):we!=null&&(U(we)&&(we=xe(we,pe+(we.key==null||S&&S.key===we.key?"":(""+we.key).replace(k,"$&/")+"/")+ke)),P.push(we)),1;ke=0;var Ze=ue===""?".":ue+":";if(W(S))for(var me=0;me<S.length;me++)ue=S[me],ve=Ze+ne(ue,me),ke+=C(ue,P,pe,ve,we);else if(me=T(S),typeof me=="function")for(S=me.call(S),me=0;!(ue=S.next()).done;)ue=ue.value,ve=Ze+ne(ue,me++),ke+=C(ue,P,pe,ve,we);else if(ve==="object"){if(typeof S.then=="function")return C(L(S),P,pe,ue,we);throw P=String(S),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return ke}function M(S,P,pe){if(S==null)return S;var ue=[],we=0;return C(S,ue,"","",function(ve){return P.call(pe,ve,we++)}),ue}function G(S){if(S._status===-1){var P=S._result;P=P(),P.then(function(pe){(S._status===0||S._status===-1)&&(S._status=1,S._result=pe)},function(pe){(S._status===0||S._status===-1)&&(S._status=2,S._result=pe)}),S._status===-1&&(S._status=0,S._result=P)}if(S._status===1)return S._result.default;throw S._result}var F=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)},he={map:M,forEach:function(S,P,pe){M(S,function(){P.apply(this,arguments)},pe)},count:function(S){var P=0;return M(S,function(){P++}),P},toArray:function(S){return M(S,function(P){return P})||[]},only:function(S){if(!U(S))throw Error("React.Children.only expected to receive a single React element child.");return S}};return He.Activity=j,He.Children=he,He.Component=Z,He.Fragment=l,He.Profiler=d,He.PureComponent=B,He.StrictMode=o,He.Suspense=v,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=re,He.__COMPILER_RUNTIME={__proto__:null,c:function(S){return re.H.useMemoCache(S)}},He.cache=function(S){return function(){return S.apply(null,arguments)}},He.cacheSignal=function(){return null},He.cloneElement=function(S,P,pe){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var ue=E({},S.props),we=S.key;if(P!=null)for(ve in P.key!==void 0&&(we=""+P.key),P)!K.call(P,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&P.ref===void 0||(ue[ve]=P[ve]);var ve=arguments.length-2;if(ve===1)ue.children=pe;else if(1<ve){for(var ke=Array(ve),Ze=0;Ze<ve;Ze++)ke[Ze]=arguments[Ze+2];ue.children=ke}return te(S.type,we,ue)},He.createContext=function(S){return S={$$typeof:m,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:h,_context:S},S},He.createElement=function(S,P,pe){var ue,we={},ve=null;if(P!=null)for(ue in P.key!==void 0&&(ve=""+P.key),P)K.call(P,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(we[ue]=P[ue]);var ke=arguments.length-2;if(ke===1)we.children=pe;else if(1<ke){for(var Ze=Array(ke),me=0;me<ke;me++)Ze[me]=arguments[me+2];we.children=Ze}if(S&&S.defaultProps)for(ue in ke=S.defaultProps,ke)we[ue]===void 0&&(we[ue]=ke[ue]);return te(S,ve,we)},He.createRef=function(){return{current:null}},He.forwardRef=function(S){return{$$typeof:g,render:S}},He.isValidElement=U,He.lazy=function(S){return{$$typeof:x,_payload:{_status:-1,_result:S},_init:G}},He.memo=function(S,P){return{$$typeof:y,type:S,compare:P===void 0?null:P}},He.startTransition=function(S){var P=re.T,pe={};re.T=pe;try{var ue=S(),we=re.S;we!==null&&we(pe,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(fe,F)}catch(ve){F(ve)}finally{P!==null&&pe.types!==null&&(P.types=pe.types),re.T=P}},He.unstable_useCacheRefresh=function(){return re.H.useCacheRefresh()},He.use=function(S){return re.H.use(S)},He.useActionState=function(S,P,pe){return re.H.useActionState(S,P,pe)},He.useCallback=function(S,P){return re.H.useCallback(S,P)},He.useContext=function(S){return re.H.useContext(S)},He.useDebugValue=function(){},He.useDeferredValue=function(S,P){return re.H.useDeferredValue(S,P)},He.useEffect=function(S,P){return re.H.useEffect(S,P)},He.useEffectEvent=function(S){return re.H.useEffectEvent(S)},He.useId=function(){return re.H.useId()},He.useImperativeHandle=function(S,P,pe){return re.H.useImperativeHandle(S,P,pe)},He.useInsertionEffect=function(S,P){return re.H.useInsertionEffect(S,P)},He.useLayoutEffect=function(S,P){return re.H.useLayoutEffect(S,P)},He.useMemo=function(S,P){return re.H.useMemo(S,P)},He.useOptimistic=function(S,P){return re.H.useOptimistic(S,P)},He.useReducer=function(S,P,pe){return re.H.useReducer(S,P,pe)},He.useRef=function(S){return re.H.useRef(S)},He.useState=function(S){return re.H.useState(S)},He.useSyncExternalStore=function(S,P,pe){return re.H.useSyncExternalStore(S,P,pe)},He.useTransition=function(){return re.H.useTransition()},He.version="19.2.1",He}var xy;function Qd(){return xy||(xy=1,Hu.exports=p0()),Hu.exports}var f=Qd();const ci=h0(f);var Yu={exports:{}},hr={},Zu={exports:{}},Vu={};var jy;function y0(){return jy||(jy=1,(function(n){function s(C,M){var G=C.length;C.push(M);e:for(;0<G;){var F=G-1>>>1,he=C[F];if(0<d(he,M))C[F]=M,C[G]=he,G=F;else break e}}function l(C){return C.length===0?null:C[0]}function o(C){if(C.length===0)return null;var M=C[0],G=C.pop();if(G!==M){C[0]=G;e:for(var F=0,he=C.length,S=he>>>1;F<S;){var P=2*(F+1)-1,pe=C[P],ue=P+1,we=C[ue];if(0>d(pe,G))ue<he&&0>d(we,pe)?(C[F]=we,C[ue]=G,F=ue):(C[F]=pe,C[P]=G,F=P);else if(ue<he&&0>d(we,G))C[F]=we,C[ue]=G,F=ue;else break e}}return M}function d(C,M){var G=C.sortIndex-M.sortIndex;return G!==0?G:C.id-M.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;n.unstable_now=function(){return h.now()}}else{var m=Date,g=m.now();n.unstable_now=function(){return m.now()-g}}var v=[],y=[],x=1,j=null,w=3,T=!1,A=!1,E=!1,z=!1,Z=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function R(C){for(var M=l(y);M!==null;){if(M.callback===null)o(y);else if(M.startTime<=C)o(y),M.sortIndex=M.expirationTime,s(v,M);else break;M=l(y)}}function W(C){if(E=!1,R(C),!A)if(l(v)!==null)A=!0,fe||(fe=!0,se());else{var M=l(y);M!==null&&L(W,M.startTime-C)}}var fe=!1,re=-1,K=5,te=-1;function xe(){return z?!0:!(n.unstable_now()-te<K)}function U(){if(z=!1,fe){var C=n.unstable_now();te=C;var M=!0;try{e:{A=!1,E&&(E=!1,D(re),re=-1),T=!0;var G=w;try{t:{for(R(C),j=l(v);j!==null&&!(j.expirationTime>C&&xe());){var F=j.callback;if(typeof F=="function"){j.callback=null,w=j.priorityLevel;var he=F(j.expirationTime<=C);if(C=n.unstable_now(),typeof he=="function"){j.callback=he,R(C),M=!0;break t}j===l(v)&&o(v),R(C)}else o(v);j=l(v)}if(j!==null)M=!0;else{var S=l(y);S!==null&&L(W,S.startTime-C),M=!1}}break e}finally{j=null,w=G,T=!1}M=void 0}}finally{M?se():fe=!1}}}var se;if(typeof B=="function")se=function(){B(U)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,ne=k.port2;k.port1.onmessage=U,se=function(){ne.postMessage(null)}}else se=function(){Z(U,0)};function L(C,M){re=Z(function(){C(n.unstable_now())},M)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(C){C.callback=null},n.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<C?Math.floor(1e3/C):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(C){switch(w){case 1:case 2:case 3:var M=3;break;default:M=w}var G=w;w=M;try{return C()}finally{w=G}},n.unstable_requestPaint=function(){z=!0},n.unstable_runWithPriority=function(C,M){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var G=w;w=C;try{return M()}finally{w=G}},n.unstable_scheduleCallback=function(C,M,G){var F=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?F+G:F):G=F,C){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=G+he,C={id:x++,callback:M,priorityLevel:C,startTime:G,expirationTime:he,sortIndex:-1},G>F?(C.sortIndex=G,s(y,C),l(v)===null&&C===l(y)&&(E?(D(re),re=-1):E=!0,L(W,G-F))):(C.sortIndex=he,s(v,C),A||T||(A=!0,fe||(fe=!0,se()))),C},n.unstable_shouldYield=xe,n.unstable_wrapCallback=function(C){var M=w;return function(){var G=w;w=M;try{return C.apply(this,arguments)}finally{w=G}}}})(Vu)),Vu}var wy;function g0(){return wy||(wy=1,Zu.exports=y0()),Zu.exports}var qu={exports:{}},Jt={};var Ny;function v0(){if(Ny)return Jt;Ny=1;var n=Qd();function s(v){var y="https://react.dev/errors/"+v;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+v+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var o={d:{f:l,r:function(){throw Error(s(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},d=Symbol.for("react.portal");function h(v,y,x){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:j==null?null:""+j,children:v,containerInfo:y,implementation:x}}var m=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,y){if(v==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Jt.createPortal=function(v,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(s(299));return h(v,y,null,x)},Jt.flushSync=function(v){var y=m.T,x=o.p;try{if(m.T=null,o.p=2,v)return v()}finally{m.T=y,o.p=x,o.d.f()}},Jt.preconnect=function(v,y){typeof v=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,o.d.C(v,y))},Jt.prefetchDNS=function(v){typeof v=="string"&&o.d.D(v)},Jt.preinit=function(v,y){if(typeof v=="string"&&y&&typeof y.as=="string"){var x=y.as,j=g(x,y.crossOrigin),w=typeof y.integrity=="string"?y.integrity:void 0,T=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?o.d.S(v,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:j,integrity:w,fetchPriority:T}):x==="script"&&o.d.X(v,{crossOrigin:j,integrity:w,fetchPriority:T,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Jt.preinitModule=function(v,y){if(typeof v=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=g(y.as,y.crossOrigin);o.d.M(v,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&o.d.M(v)},Jt.preload=function(v,y){if(typeof v=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,j=g(x,y.crossOrigin);o.d.L(v,x,{crossOrigin:j,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Jt.preloadModule=function(v,y){if(typeof v=="string")if(y){var x=g(y.as,y.crossOrigin);o.d.m(v,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else o.d.m(v)},Jt.requestFormReset=function(v){o.d.r(v)},Jt.unstable_batchedUpdates=function(v,y){return v(y)},Jt.useFormState=function(v,y,x){return m.H.useFormState(v,y,x)},Jt.useFormStatus=function(){return m.H.useHostTransitionStatus()},Jt.version="19.2.1",Jt}var Sy;function b0(){if(Sy)return qu.exports;Sy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(s){console.error(s)}}return n(),qu.exports=v0(),qu.exports}var Ey;function x0(){if(Ey)return hr;Ey=1;var n=g0(),s=Qd(),l=b0();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(h(e)!==e)throw Error(o(188))}function y(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(o(188));return t!==e?null:e}for(var i=e,r=t;;){var c=i.return;if(c===null)break;var u=c.alternate;if(u===null){if(r=c.return,r!==null){i=r;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===i)return v(c),e;if(u===r)return v(c),t;u=u.sibling}throw Error(o(188))}if(i.return!==r.return)i=c,r=u;else{for(var p=!1,b=c.child;b;){if(b===i){p=!0,i=c,r=u;break}if(b===r){p=!0,r=c,i=u;break}b=b.sibling}if(!p){for(b=u.child;b;){if(b===i){p=!0,i=u,r=c;break}if(b===r){p=!0,r=u,i=c;break}b=b.sibling}if(!p)throw Error(o(189))}}if(i.alternate!==r)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var j=Object.assign,w=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),B=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),te=Symbol.for("react.activity"),xe=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function se(e){return e===null||typeof e!="object"?null:(e=U&&e[U]||e["@@iterator"],typeof e=="function"?e:null)}var k=Symbol.for("react.client.reference");function ne(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===k?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case Z:return"Profiler";case z:return"StrictMode";case W:return"Suspense";case fe:return"SuspenseList";case te:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case B:return e.displayName||"Context";case D:return(e._context.displayName||"Context")+".Consumer";case R:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case re:return t=e.displayName||null,t!==null?t:ne(e.type)||"Memo";case K:t=e._payload,e=e._init;try{return ne(e(t))}catch{}}return null}var L=Array.isArray,C=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},F=[],he=-1;function S(e){return{current:e}}function P(e){0>he||(e.current=F[he],F[he]=null,he--)}function pe(e,t){he++,F[he]=e.current,e.current=t}var ue=S(null),we=S(null),ve=S(null),ke=S(null);function Ze(e,t){switch(pe(ve,t),pe(we,e),pe(ue,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Pp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Pp(t),e=Ip(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}P(ue),pe(ue,e)}function me(){P(ue),P(we),P(ve)}function Q(e){e.memoizedState!==null&&pe(ke,e);var t=ue.current,i=Ip(t,e.type);t!==i&&(pe(we,e),pe(ue,i))}function be(e){we.current===e&&(P(ue),P(we)),ke.current===e&&(P(ke),lr._currentValue=G)}var J,ye;function Ne(e){if(J===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);J=t&&t[1]||"",ye=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+J+e+ye}var Se=!1;function Pe(e,t){if(!e||Se)return"";Se=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(X){var V=X}Reflect.construct(e,[],ie)}else{try{ie.call()}catch(X){V=X}e.call(ie.prototype)}}else{try{throw Error()}catch(X){V=X}(ie=e())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(X){if(X&&V&&typeof X.stack=="string")return[X.stack,V.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=r.DetermineComponentFrameRoot(),p=u[0],b=u[1];if(p&&b){var _=p.split(`
`),Y=b.split(`
`);for(c=r=0;r<_.length&&!_[r].includes("DetermineComponentFrameRoot");)r++;for(;c<Y.length&&!Y[c].includes("DetermineComponentFrameRoot");)c++;if(r===_.length||c===Y.length)for(r=_.length-1,c=Y.length-1;1<=r&&0<=c&&_[r]!==Y[c];)c--;for(;1<=r&&0<=c;r--,c--)if(_[r]!==Y[c]){if(r!==1||c!==1)do if(r--,c--,0>c||_[r]!==Y[c]){var ee=`
`+_[r].replace(" at new "," at ");return e.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",e.displayName)),ee}while(1<=r&&0<=c);break}}}finally{Se=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ne(i):""}function Ie(e,t){switch(e.tag){case 26:case 27:case 5:return Ne(e.type);case 16:return Ne("Lazy");case 13:return e.child!==t&&t!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return Pe(e.type,!1);case 11:return Pe(e.type.render,!1);case 1:return Pe(e.type,!0);case 31:return Ne("Activity");default:return""}}function $e(e){try{var t="",i=null;do t+=Ie(e,i),i=e,e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var Be=Object.prototype.hasOwnProperty,tt=n.unstable_scheduleCallback,nt=n.unstable_cancelCallback,le=n.unstable_shouldYield,Te=n.unstable_requestPaint,Ee=n.unstable_now,mt=n.unstable_getCurrentPriorityLevel,gt=n.unstable_ImmediatePriority,ft=n.unstable_UserBlockingPriority,de=n.unstable_NormalPriority,ze=n.unstable_LowPriority,N=n.unstable_IdlePriority,q=n.log,je=n.unstable_setDisableYieldValue,Ae=null,_e=null;function Ge(e){if(typeof q=="function"&&je(e),_e&&typeof _e.setStrictMode=="function")try{_e.setStrictMode(Ae,e)}catch{}}var Ke=Math.clz32?Math.clz32:ya,zt=Math.log,pa=Math.LN2;function ya(e){return e>>>=0,e===0?32:31-(zt(e)/pa|0)|0}var jn=256,Fn=262144,zn=4194304;function wn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ga(e,t,i){var r=e.pendingLanes;if(r===0)return 0;var c=0,u=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var b=r&134217727;return b!==0?(r=b&~u,r!==0?c=wn(r):(p&=b,p!==0?c=wn(p):i||(i=b&~e,i!==0&&(c=wn(i))))):(b=r&~u,b!==0?c=wn(b):p!==0?c=wn(p):i||(i=r&~e,i!==0&&(c=wn(i)))),c===0?0:t!==0&&t!==c&&(t&u)===0&&(u=c&-c,i=t&-t,u>=i||u===32&&(i&4194048)!==0)?t:c}function oe(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ue(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lt(){var e=zn;return zn<<=1,(zn&62914560)===0&&(zn=4194304),e}function Xt(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Nn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function va(e,t,i,r,c,u){var p=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var b=e.entanglements,_=e.expirationTimes,Y=e.hiddenUpdates;for(i=p&~i;0<i;){var ee=31-Ke(i),ie=1<<ee;b[ee]=0,_[ee]=-1;var V=Y[ee];if(V!==null)for(Y[ee]=null,ee=0;ee<V.length;ee++){var X=V[ee];X!==null&&(X.lane&=-536870913)}i&=~ie}r!==0&&ba(e,r,0),u!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=u&~(p&~t))}function ba(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Ke(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|i&261930}function dn(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-Ke(i),c=1<<r;c&t|e[r]&t&&(e[r]|=t),i&=~c}}function H(e,t){var i=t&-t;return i=(i&42)!==0?1:ge(i),(i&(e.suspendedLanes|t))!==0?0:i}function ge(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function De(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function jt(){var e=M.p;return e!==0?e:(e=window.event,e===void 0?32:uy(e.type))}function Rn(e,t){var i=M.p;try{return M.p=e,t()}finally{M.p=i}}var kt=Math.random().toString(36).slice(2),Ht="__reactFiber$"+kt,Qt="__reactProps$"+kt,en="__reactContainer$"+kt,ji="__reactEvents$"+kt,tx="__reactListeners$"+kt,nx="__reactHandles$"+kt,Th="__reactResources$"+kt,wi="__reactMarker$"+kt;function Lo(e){delete e[Ht],delete e[Qt],delete e[ji],delete e[tx],delete e[nx]}function ws(e){var t=e[Ht];if(t)return t;for(var i=e.parentNode;i;){if(t=i[en]||i[Ht]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Kp(e);e!==null;){if(i=e[Ht])return i;e=Kp(e)}return t}e=i,i=e.parentNode}return null}function Ns(e){if(e=e[Ht]||e[en]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ni(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function Ss(e){var t=e[Th];return t||(t=e[Th]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Yt(e){e[wi]=!0}var Ch=new Set,Ah={};function Xa(e,t){Es(e,t),Es(e+"Capture",t)}function Es(e,t){for(Ah[e]=t,e=0;e<t.length;e++)Ch.add(t[e])}var ax=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_h={},Mh={};function sx(e){return Be.call(Mh,e)?!0:Be.call(_h,e)?!1:ax.test(e)?Mh[e]=!0:(_h[e]=!0,!1)}function Dr(e,t,i){if(sx(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Lr(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Xn(e,t,i,r){if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+r)}}function Sn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ix(e,t,i){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,u=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(p){i=""+p,u.call(this,p)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(p){i=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Oo(e){if(!e._valueTracker){var t=kh(e)?"checked":"value";e._valueTracker=ix(e,t,""+e[t])}}function Dh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),r="";return e&&(r=kh(e)?e.checked?"true":"false":e.value),e=r,e!==i?(t.setValue(e),!0):!1}function Or(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var rx=/[\n"\\]/g;function En(e){return e.replace(rx,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function zo(e,t,i,r,c,u,p,b){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),t!=null?p==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Sn(t)):e.value!==""+Sn(t)&&(e.value=""+Sn(t)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),t!=null?Ro(e,p,Sn(t)):i!=null?Ro(e,p,Sn(i)):r!=null&&e.removeAttribute("value"),c==null&&u!=null&&(e.defaultChecked=!!u),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+Sn(b):e.removeAttribute("name")}function Lh(e,t,i,r,c,u,p,b){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||i!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Oo(e);return}i=i!=null?""+Sn(i):"",t=t!=null?""+Sn(t):i,b||t===e.value||(e.value=t),e.defaultValue=t}r=r??c,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=b?e.checked:!!r,e.defaultChecked=!!r,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p),Oo(e)}function Ro(e,t,i){t==="number"&&Or(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Ts(e,t,i,r){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&r&&(e[i].defaultSelected=!0)}else{for(i=""+Sn(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,r&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Oh(e,t,i){if(t!=null&&(t=""+Sn(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Sn(i):""}function zh(e,t,i,r){if(t==null){if(r!=null){if(i!=null)throw Error(o(92));if(L(r)){if(1<r.length)throw Error(o(93));r=r[0]}i=r}i==null&&(i=""),t=i}i=Sn(t),e.defaultValue=i,r=e.textContent,r===i&&r!==""&&r!==null&&(e.value=r),Oo(e)}function Cs(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var lx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rh(e,t,i){var r=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,i):typeof i!="number"||i===0||lx.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function $h(e,t,i){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,i!=null){for(var r in i)!i.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var c in t)r=t[c],t.hasOwnProperty(c)&&i[c]!==r&&Rh(e,c,r)}else for(var u in t)t.hasOwnProperty(u)&&Rh(e,u,t[u])}function $o(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ox=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zr(e){return cx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Qn(){}var Bo=null;function Uo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var As=null,_s=null;function Bh(e){var t=Ns(e);if(t&&(e=t.stateNode)){var i=e[Qt]||null;e:switch(e=t.stateNode,t.type){case"input":if(zo(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+En(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var c=r[Qt]||null;if(!c)throw Error(o(90));zo(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<i.length;t++)r=i[t],r.form===e.form&&Dh(r)}break e;case"textarea":Oh(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&Ts(e,!!i.multiple,t,!1)}}}var Po=!1;function Uh(e,t,i){if(Po)return e(t,i);Po=!0;try{var r=e(t);return r}finally{if(Po=!1,(As!==null||_s!==null)&&(wl(),As&&(t=As,e=_s,_s=As=null,Bh(t),e)))for(t=0;t<e.length;t++)Bh(e[t])}}function Si(e,t){var i=e.stateNode;if(i===null)return null;var r=i[Qt]||null;if(r===null)return null;i=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(o(231,t,typeof i));return i}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Io=!1;if(Jn)try{var Ei={};Object.defineProperty(Ei,"passive",{get:function(){Io=!0}}),window.addEventListener("test",Ei,Ei),window.removeEventListener("test",Ei,Ei)}catch{Io=!1}var xa=null,Ho=null,Rr=null;function Ph(){if(Rr)return Rr;var e,t=Ho,i=t.length,r,c="value"in xa?xa.value:xa.textContent,u=c.length;for(e=0;e<i&&t[e]===c[e];e++);var p=i-e;for(r=1;r<=p&&t[i-r]===c[u-r];r++);return Rr=c.slice(e,1<r?1-r:void 0)}function $r(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Br(){return!0}function Ih(){return!1}function tn(e){function t(i,r,c,u,p){this._reactName=i,this._targetInst=c,this.type=r,this.nativeEvent=u,this.target=p,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(i=e[b],this[b]=i?i(u):u[b]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Br:Ih,this.isPropagationStopped=Ih,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Br)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Br)},persist:function(){},isPersistent:Br}),t}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ur=tn(Qa),Ti=j({},Qa,{view:0,detail:0}),ux=tn(Ti),Yo,Zo,Ci,Pr=j({},Ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ci&&(Ci&&e.type==="mousemove"?(Yo=e.screenX-Ci.screenX,Zo=e.screenY-Ci.screenY):Zo=Yo=0,Ci=e),Yo)},movementY:function(e){return"movementY"in e?e.movementY:Zo}}),Hh=tn(Pr),dx=j({},Pr,{dataTransfer:0}),hx=tn(dx),mx=j({},Ti,{relatedTarget:0}),Vo=tn(mx),fx=j({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),px=tn(fx),yx=j({},Qa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gx=tn(yx),vx=j({},Qa,{data:0}),Yh=tn(vx),bx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jx[e])?!!t[e]:!1}function qo(){return wx}var Nx=j({},Ti,{key:function(e){if(e.key){var t=bx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$r(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qo,charCode:function(e){return e.type==="keypress"?$r(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$r(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Sx=tn(Nx),Ex=j({},Pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zh=tn(Ex),Tx=j({},Ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qo}),Cx=tn(Tx),Ax=j({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),_x=tn(Ax),Mx=j({},Pr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kx=tn(Mx),Dx=j({},Qa,{newState:0,oldState:0}),Lx=tn(Dx),Ox=[9,13,27,32],Go=Jn&&"CompositionEvent"in window,Ai=null;Jn&&"documentMode"in document&&(Ai=document.documentMode);var zx=Jn&&"TextEvent"in window&&!Ai,Vh=Jn&&(!Go||Ai&&8<Ai&&11>=Ai),qh=" ",Gh=!1;function Kh(e,t){switch(e){case"keyup":return Ox.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ms=!1;function Rx(e,t){switch(e){case"compositionend":return Fh(t);case"keypress":return t.which!==32?null:(Gh=!0,qh);case"textInput":return e=t.data,e===qh&&Gh?null:e;default:return null}}function $x(e,t){if(Ms)return e==="compositionend"||!Go&&Kh(e,t)?(e=Ph(),Rr=Ho=xa=null,Ms=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vh&&t.locale!=="ko"?null:t.data;default:return null}}var Bx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bx[e.type]:t==="textarea"}function Qh(e,t,i,r){As?_s?_s.push(r):_s=[r]:As=r,t=_l(t,"onChange"),0<t.length&&(i=new Ur("onChange","change",null,i,r),e.push({event:i,listeners:t}))}var _i=null,Mi=null;function Ux(e){Op(e,0)}function Ir(e){var t=Ni(e);if(Dh(t))return e}function Jh(e,t){if(e==="change")return t}var Wh=!1;if(Jn){var Ko;if(Jn){var Fo="oninput"in document;if(!Fo){var em=document.createElement("div");em.setAttribute("oninput","return;"),Fo=typeof em.oninput=="function"}Ko=Fo}else Ko=!1;Wh=Ko&&(!document.documentMode||9<document.documentMode)}function tm(){_i&&(_i.detachEvent("onpropertychange",nm),Mi=_i=null)}function nm(e){if(e.propertyName==="value"&&Ir(Mi)){var t=[];Qh(t,Mi,e,Uo(e)),Uh(Ux,t)}}function Px(e,t,i){e==="focusin"?(tm(),_i=t,Mi=i,_i.attachEvent("onpropertychange",nm)):e==="focusout"&&tm()}function Ix(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ir(Mi)}function Hx(e,t){if(e==="click")return Ir(t)}function Yx(e,t){if(e==="input"||e==="change")return Ir(t)}function Zx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hn=typeof Object.is=="function"?Object.is:Zx;function ki(e,t){if(hn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var c=i[r];if(!Be.call(t,c)||!hn(e[c],t[c]))return!1}return!0}function am(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sm(e,t){var i=am(e);e=0;for(var r;i;){if(i.nodeType===3){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=am(i)}}function im(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?im(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Or(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Or(e.document)}return t}function Xo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Vx=Jn&&"documentMode"in document&&11>=document.documentMode,ks=null,Qo=null,Di=null,Jo=!1;function lm(e,t,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Jo||ks==null||ks!==Or(r)||(r=ks,"selectionStart"in r&&Xo(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Di&&ki(Di,r)||(Di=r,r=_l(Qo,"onSelect"),0<r.length&&(t=new Ur("onSelect","select",null,t,i),e.push({event:t,listeners:r}),t.target=ks)))}function Ja(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Ds={animationend:Ja("Animation","AnimationEnd"),animationiteration:Ja("Animation","AnimationIteration"),animationstart:Ja("Animation","AnimationStart"),transitionrun:Ja("Transition","TransitionRun"),transitionstart:Ja("Transition","TransitionStart"),transitioncancel:Ja("Transition","TransitionCancel"),transitionend:Ja("Transition","TransitionEnd")},Wo={},om={};Jn&&(om=document.createElement("div").style,"AnimationEvent"in window||(delete Ds.animationend.animation,delete Ds.animationiteration.animation,delete Ds.animationstart.animation),"TransitionEvent"in window||delete Ds.transitionend.transition);function Wa(e){if(Wo[e])return Wo[e];if(!Ds[e])return e;var t=Ds[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in om)return Wo[e]=t[i];return e}var cm=Wa("animationend"),um=Wa("animationiteration"),dm=Wa("animationstart"),qx=Wa("transitionrun"),Gx=Wa("transitionstart"),Kx=Wa("transitioncancel"),hm=Wa("transitionend"),mm=new Map,ec="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ec.push("scrollEnd");function $n(e,t){mm.set(e,t),Xa(t,[e])}var Hr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Tn=[],Ls=0,tc=0;function Yr(){for(var e=Ls,t=tc=Ls=0;t<e;){var i=Tn[t];Tn[t++]=null;var r=Tn[t];Tn[t++]=null;var c=Tn[t];Tn[t++]=null;var u=Tn[t];if(Tn[t++]=null,r!==null&&c!==null){var p=r.pending;p===null?c.next=c:(c.next=p.next,p.next=c),r.pending=c}u!==0&&fm(i,c,u)}}function Zr(e,t,i,r){Tn[Ls++]=e,Tn[Ls++]=t,Tn[Ls++]=i,Tn[Ls++]=r,tc|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function nc(e,t,i,r){return Zr(e,t,i,r),Vr(e)}function es(e,t){return Zr(e,null,null,t),Vr(e)}function fm(e,t,i){e.lanes|=i;var r=e.alternate;r!==null&&(r.lanes|=i);for(var c=!1,u=e.return;u!==null;)u.childLanes|=i,r=u.alternate,r!==null&&(r.childLanes|=i),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(c=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,c&&t!==null&&(c=31-Ke(i),e=u.hiddenUpdates,r=e[c],r===null?e[c]=[t]:r.push(t),t.lane=i|536870912),u):null}function Vr(e){if(50<er)throw er=0,du=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Os={};function Fx(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(e,t,i,r){return new Fx(e,t,i,r)}function ac(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wn(e,t){var i=e.alternate;return i===null?(i=mn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function pm(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function qr(e,t,i,r,c,u){var p=0;if(r=e,typeof e=="function")ac(e)&&(p=1);else if(typeof e=="string")p=e0(e,i,ue.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case te:return e=mn(31,i,t,c),e.elementType=te,e.lanes=u,e;case E:return ts(i.children,c,u,t);case z:p=8,c|=24;break;case Z:return e=mn(12,i,t,c|2),e.elementType=Z,e.lanes=u,e;case W:return e=mn(13,i,t,c),e.elementType=W,e.lanes=u,e;case fe:return e=mn(19,i,t,c),e.elementType=fe,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B:p=10;break e;case D:p=9;break e;case R:p=11;break e;case re:p=14;break e;case K:p=16,r=null;break e}p=29,i=Error(o(130,e===null?"null":typeof e,"")),r=null}return t=mn(p,i,t,c),t.elementType=e,t.type=r,t.lanes=u,t}function ts(e,t,i,r){return e=mn(7,e,r,t),e.lanes=i,e}function sc(e,t,i){return e=mn(6,e,null,t),e.lanes=i,e}function ym(e){var t=mn(18,null,null,0);return t.stateNode=e,t}function ic(e,t,i){return t=mn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var gm=new WeakMap;function Cn(e,t){if(typeof e=="object"&&e!==null){var i=gm.get(e);return i!==void 0?i:(t={value:e,source:t,stack:$e(t)},gm.set(e,t),t)}return{value:e,source:t,stack:$e(t)}}var zs=[],Rs=0,Gr=null,Li=0,An=[],_n=0,ja=null,In=1,Hn="";function ea(e,t){zs[Rs++]=Li,zs[Rs++]=Gr,Gr=e,Li=t}function vm(e,t,i){An[_n++]=In,An[_n++]=Hn,An[_n++]=ja,ja=e;var r=In;e=Hn;var c=32-Ke(r)-1;r&=~(1<<c),i+=1;var u=32-Ke(t)+c;if(30<u){var p=c-c%5;u=(r&(1<<p)-1).toString(32),r>>=p,c-=p,In=1<<32-Ke(t)+c|i<<c|r,Hn=u+e}else In=1<<u|i<<c|r,Hn=e}function rc(e){e.return!==null&&(ea(e,1),vm(e,1,0))}function lc(e){for(;e===Gr;)Gr=zs[--Rs],zs[Rs]=null,Li=zs[--Rs],zs[Rs]=null;for(;e===ja;)ja=An[--_n],An[_n]=null,Hn=An[--_n],An[_n]=null,In=An[--_n],An[_n]=null}function bm(e,t){An[_n++]=In,An[_n++]=Hn,An[_n++]=ja,In=t.id,Hn=t.overflow,ja=e}var Vt=null,vt=null,et=!1,wa=null,Mn=!1,oc=Error(o(519));function Na(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oi(Cn(t,e)),oc}function xm(e){var t=e.stateNode,i=e.type,r=e.memoizedProps;switch(t[Ht]=e,t[Qt]=r,i){case"dialog":Xe("cancel",t),Xe("close",t);break;case"iframe":case"object":case"embed":Xe("load",t);break;case"video":case"audio":for(i=0;i<nr.length;i++)Xe(nr[i],t);break;case"source":Xe("error",t);break;case"img":case"image":case"link":Xe("error",t),Xe("load",t);break;case"details":Xe("toggle",t);break;case"input":Xe("invalid",t),Lh(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Xe("invalid",t);break;case"textarea":Xe("invalid",t),zh(t,r.value,r.defaultValue,r.children)}i=r.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||r.suppressHydrationWarning===!0||Bp(t.textContent,i)?(r.popover!=null&&(Xe("beforetoggle",t),Xe("toggle",t)),r.onScroll!=null&&Xe("scroll",t),r.onScrollEnd!=null&&Xe("scrollend",t),r.onClick!=null&&(t.onclick=Qn),t=!0):t=!1,t||Na(e,!0)}function jm(e){for(Vt=e.return;Vt;)switch(Vt.tag){case 5:case 31:case 13:Mn=!1;return;case 27:case 3:Mn=!0;return;default:Vt=Vt.return}}function $s(e){if(e!==Vt)return!1;if(!et)return jm(e),et=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Tu(e.type,e.memoizedProps)),i=!i),i&&vt&&Na(e),jm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));vt=Gp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));vt=Gp(e)}else t===27?(t=vt,$a(e.type)?(e=ku,ku=null,vt=e):vt=t):vt=Vt?Dn(e.stateNode.nextSibling):null;return!0}function ns(){vt=Vt=null,et=!1}function cc(){var e=wa;return e!==null&&(rn===null?rn=e:rn.push.apply(rn,e),wa=null),e}function Oi(e){wa===null?wa=[e]:wa.push(e)}var uc=S(null),as=null,ta=null;function Sa(e,t,i){pe(uc,t._currentValue),t._currentValue=i}function na(e){e._currentValue=uc.current,P(uc)}function dc(e,t,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function hc(e,t,i,r){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var u=c.dependencies;if(u!==null){var p=c.child;u=u.firstContext;e:for(;u!==null;){var b=u;u=c;for(var _=0;_<t.length;_++)if(b.context===t[_]){u.lanes|=i,b=u.alternate,b!==null&&(b.lanes|=i),dc(u.return,i,e),r||(p=null);break e}u=b.next}}else if(c.tag===18){if(p=c.return,p===null)throw Error(o(341));p.lanes|=i,u=p.alternate,u!==null&&(u.lanes|=i),dc(p,i,e),p=null}else p=c.child;if(p!==null)p.return=c;else for(p=c;p!==null;){if(p===e){p=null;break}if(c=p.sibling,c!==null){c.return=p.return,p=c;break}p=p.return}c=p}}function Bs(e,t,i,r){e=null;for(var c=t,u=!1;c!==null;){if(!u){if((c.flags&524288)!==0)u=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var p=c.alternate;if(p===null)throw Error(o(387));if(p=p.memoizedProps,p!==null){var b=c.type;hn(c.pendingProps.value,p.value)||(e!==null?e.push(b):e=[b])}}else if(c===ke.current){if(p=c.alternate,p===null)throw Error(o(387));p.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(lr):e=[lr])}c=c.return}e!==null&&hc(t,e,i,r),t.flags|=262144}function Kr(e){for(e=e.firstContext;e!==null;){if(!hn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ss(e){as=e,ta=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function qt(e){return wm(as,e)}function Fr(e,t){return as===null&&ss(e),wm(e,t)}function wm(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},ta===null){if(e===null)throw Error(o(308));ta=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ta=ta.next=t;return i}var Xx=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},Qx=n.unstable_scheduleCallback,Jx=n.unstable_NormalPriority,Rt={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mc(){return{controller:new Xx,data:new Map,refCount:0}}function zi(e){e.refCount--,e.refCount===0&&Qx(Jx,function(){e.controller.abort()})}var Ri=null,fc=0,Us=0,Ps=null;function Wx(e,t){if(Ri===null){var i=Ri=[];fc=0,Us=gu(),Ps={status:"pending",value:void 0,then:function(r){i.push(r)}}}return fc++,t.then(Nm,Nm),t}function Nm(){if(--fc===0&&Ri!==null){Ps!==null&&(Ps.status="fulfilled");var e=Ri;Ri=null,Us=0,Ps=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ej(e,t){var i=[],r={status:"pending",value:null,reason:null,then:function(c){i.push(c)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var c=0;c<i.length;c++)(0,i[c])(t)},function(c){for(r.status="rejected",r.reason=c,c=0;c<i.length;c++)(0,i[c])(void 0)}),r}var Sm=C.S;C.S=function(e,t){op=Ee(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Wx(e,t),Sm!==null&&Sm(e,t)};var is=S(null);function pc(){var e=is.current;return e!==null?e:pt.pooledCache}function Xr(e,t){t===null?pe(is,is.current):pe(is,t.pool)}function Em(){var e=pc();return e===null?null:{parent:Rt._currentValue,pool:e}}var Is=Error(o(460)),yc=Error(o(474)),Qr=Error(o(542)),Jr={then:function(){}};function Tm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Cm(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(Qn,Qn),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,_m(e),e;default:if(typeof t.status=="string")t.then(Qn,Qn);else{if(e=pt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=r}},function(r){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,_m(e),e}throw ls=t,Is}}function rs(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(ls=i,Is):i}}var ls=null;function Am(){if(ls===null)throw Error(o(459));var e=ls;return ls=null,e}function _m(e){if(e===Is||e===Qr)throw Error(o(483))}var Hs=null,$i=0;function Wr(e){var t=$i;return $i+=1,Hs===null&&(Hs=[]),Cm(Hs,e,t)}function Bi(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function el(e,t){throw t.$$typeof===w?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Mm(e){function t($,O){if(e){var I=$.deletions;I===null?($.deletions=[O],$.flags|=16):I.push(O)}}function i($,O){if(!e)return null;for(;O!==null;)t($,O),O=O.sibling;return null}function r($){for(var O=new Map;$!==null;)$.key!==null?O.set($.key,$):O.set($.index,$),$=$.sibling;return O}function c($,O){return $=Wn($,O),$.index=0,$.sibling=null,$}function u($,O,I){return $.index=I,e?(I=$.alternate,I!==null?(I=I.index,I<O?($.flags|=67108866,O):I):($.flags|=67108866,O)):($.flags|=1048576,O)}function p($){return e&&$.alternate===null&&($.flags|=67108866),$}function b($,O,I,ae){return O===null||O.tag!==6?(O=sc(I,$.mode,ae),O.return=$,O):(O=c(O,I),O.return=$,O)}function _($,O,I,ae){var Le=I.type;return Le===E?ee($,O,I.props.children,ae,I.key):O!==null&&(O.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===K&&rs(Le)===O.type)?(O=c(O,I.props),Bi(O,I),O.return=$,O):(O=qr(I.type,I.key,I.props,null,$.mode,ae),Bi(O,I),O.return=$,O)}function Y($,O,I,ae){return O===null||O.tag!==4||O.stateNode.containerInfo!==I.containerInfo||O.stateNode.implementation!==I.implementation?(O=ic(I,$.mode,ae),O.return=$,O):(O=c(O,I.children||[]),O.return=$,O)}function ee($,O,I,ae,Le){return O===null||O.tag!==7?(O=ts(I,$.mode,ae,Le),O.return=$,O):(O=c(O,I),O.return=$,O)}function ie($,O,I){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=sc(""+O,$.mode,I),O.return=$,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case T:return I=qr(O.type,O.key,O.props,null,$.mode,I),Bi(I,O),I.return=$,I;case A:return O=ic(O,$.mode,I),O.return=$,O;case K:return O=rs(O),ie($,O,I)}if(L(O)||se(O))return O=ts(O,$.mode,I,null),O.return=$,O;if(typeof O.then=="function")return ie($,Wr(O),I);if(O.$$typeof===B)return ie($,Fr($,O),I);el($,O)}return null}function V($,O,I,ae){var Le=O!==null?O.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return Le!==null?null:b($,O,""+I,ae);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case T:return I.key===Le?_($,O,I,ae):null;case A:return I.key===Le?Y($,O,I,ae):null;case K:return I=rs(I),V($,O,I,ae)}if(L(I)||se(I))return Le!==null?null:ee($,O,I,ae,null);if(typeof I.then=="function")return V($,O,Wr(I),ae);if(I.$$typeof===B)return V($,O,Fr($,I),ae);el($,I)}return null}function X($,O,I,ae,Le){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return $=$.get(I)||null,b(O,$,""+ae,Le);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case T:return $=$.get(ae.key===null?I:ae.key)||null,_(O,$,ae,Le);case A:return $=$.get(ae.key===null?I:ae.key)||null,Y(O,$,ae,Le);case K:return ae=rs(ae),X($,O,I,ae,Le)}if(L(ae)||se(ae))return $=$.get(I)||null,ee(O,$,ae,Le,null);if(typeof ae.then=="function")return X($,O,I,Wr(ae),Le);if(ae.$$typeof===B)return X($,O,I,Fr(O,ae),Le);el(O,ae)}return null}function Ce($,O,I,ae){for(var Le=null,at=null,Me=O,qe=O=0,Je=null;Me!==null&&qe<I.length;qe++){Me.index>qe?(Je=Me,Me=null):Je=Me.sibling;var st=V($,Me,I[qe],ae);if(st===null){Me===null&&(Me=Je);break}e&&Me&&st.alternate===null&&t($,Me),O=u(st,O,qe),at===null?Le=st:at.sibling=st,at=st,Me=Je}if(qe===I.length)return i($,Me),et&&ea($,qe),Le;if(Me===null){for(;qe<I.length;qe++)Me=ie($,I[qe],ae),Me!==null&&(O=u(Me,O,qe),at===null?Le=Me:at.sibling=Me,at=Me);return et&&ea($,qe),Le}for(Me=r(Me);qe<I.length;qe++)Je=X(Me,$,qe,I[qe],ae),Je!==null&&(e&&Je.alternate!==null&&Me.delete(Je.key===null?qe:Je.key),O=u(Je,O,qe),at===null?Le=Je:at.sibling=Je,at=Je);return e&&Me.forEach(function(Ha){return t($,Ha)}),et&&ea($,qe),Le}function Re($,O,I,ae){if(I==null)throw Error(o(151));for(var Le=null,at=null,Me=O,qe=O=0,Je=null,st=I.next();Me!==null&&!st.done;qe++,st=I.next()){Me.index>qe?(Je=Me,Me=null):Je=Me.sibling;var Ha=V($,Me,st.value,ae);if(Ha===null){Me===null&&(Me=Je);break}e&&Me&&Ha.alternate===null&&t($,Me),O=u(Ha,O,qe),at===null?Le=Ha:at.sibling=Ha,at=Ha,Me=Je}if(st.done)return i($,Me),et&&ea($,qe),Le;if(Me===null){for(;!st.done;qe++,st=I.next())st=ie($,st.value,ae),st!==null&&(O=u(st,O,qe),at===null?Le=st:at.sibling=st,at=st);return et&&ea($,qe),Le}for(Me=r(Me);!st.done;qe++,st=I.next())st=X(Me,$,qe,st.value,ae),st!==null&&(e&&st.alternate!==null&&Me.delete(st.key===null?qe:st.key),O=u(st,O,qe),at===null?Le=st:at.sibling=st,at=st);return e&&Me.forEach(function(d0){return t($,d0)}),et&&ea($,qe),Le}function ht($,O,I,ae){if(typeof I=="object"&&I!==null&&I.type===E&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case T:e:{for(var Le=I.key;O!==null;){if(O.key===Le){if(Le=I.type,Le===E){if(O.tag===7){i($,O.sibling),ae=c(O,I.props.children),ae.return=$,$=ae;break e}}else if(O.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===K&&rs(Le)===O.type){i($,O.sibling),ae=c(O,I.props),Bi(ae,I),ae.return=$,$=ae;break e}i($,O);break}else t($,O);O=O.sibling}I.type===E?(ae=ts(I.props.children,$.mode,ae,I.key),ae.return=$,$=ae):(ae=qr(I.type,I.key,I.props,null,$.mode,ae),Bi(ae,I),ae.return=$,$=ae)}return p($);case A:e:{for(Le=I.key;O!==null;){if(O.key===Le)if(O.tag===4&&O.stateNode.containerInfo===I.containerInfo&&O.stateNode.implementation===I.implementation){i($,O.sibling),ae=c(O,I.children||[]),ae.return=$,$=ae;break e}else{i($,O);break}else t($,O);O=O.sibling}ae=ic(I,$.mode,ae),ae.return=$,$=ae}return p($);case K:return I=rs(I),ht($,O,I,ae)}if(L(I))return Ce($,O,I,ae);if(se(I)){if(Le=se(I),typeof Le!="function")throw Error(o(150));return I=Le.call(I),Re($,O,I,ae)}if(typeof I.then=="function")return ht($,O,Wr(I),ae);if(I.$$typeof===B)return ht($,O,Fr($,I),ae);el($,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,O!==null&&O.tag===6?(i($,O.sibling),ae=c(O,I),ae.return=$,$=ae):(i($,O),ae=sc(I,$.mode,ae),ae.return=$,$=ae),p($)):i($,O)}return function($,O,I,ae){try{$i=0;var Le=ht($,O,I,ae);return Hs=null,Le}catch(Me){if(Me===Is||Me===Qr)throw Me;var at=mn(29,Me,null,$.mode);return at.lanes=ae,at.return=$,at}finally{}}}var os=Mm(!0),km=Mm(!1),Ea=!1;function gc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ta(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ca(e,t,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(rt&2)!==0){var c=r.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),r.pending=t,t=Vr(e),fm(e,null,i),t}return Zr(e,r,t,i),Vr(e)}function Ui(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,dn(e,i)}}function bc(e,t){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var c=null,u=null;if(i=i.firstBaseUpdate,i!==null){do{var p={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};u===null?c=u=p:u=u.next=p,i=i.next}while(i!==null);u===null?c=u=t:u=u.next=t}else c=u=t;i={baseState:r.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:r.shared,callbacks:r.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var xc=!1;function Pi(){if(xc){var e=Ps;if(e!==null)throw e}}function Ii(e,t,i,r){xc=!1;var c=e.updateQueue;Ea=!1;var u=c.firstBaseUpdate,p=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var _=b,Y=_.next;_.next=null,p===null?u=Y:p.next=Y,p=_;var ee=e.alternate;ee!==null&&(ee=ee.updateQueue,b=ee.lastBaseUpdate,b!==p&&(b===null?ee.firstBaseUpdate=Y:b.next=Y,ee.lastBaseUpdate=_))}if(u!==null){var ie=c.baseState;p=0,ee=Y=_=null,b=u;do{var V=b.lane&-536870913,X=V!==b.lane;if(X?(Qe&V)===V:(r&V)===V){V!==0&&V===Us&&(xc=!0),ee!==null&&(ee=ee.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Ce=e,Re=b;V=t;var ht=i;switch(Re.tag){case 1:if(Ce=Re.payload,typeof Ce=="function"){ie=Ce.call(ht,ie,V);break e}ie=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Re.payload,V=typeof Ce=="function"?Ce.call(ht,ie,V):Ce,V==null)break e;ie=j({},ie,V);break e;case 2:Ea=!0}}V=b.callback,V!==null&&(e.flags|=64,X&&(e.flags|=8192),X=c.callbacks,X===null?c.callbacks=[V]:X.push(V))}else X={lane:V,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ee===null?(Y=ee=X,_=ie):ee=ee.next=X,p|=V;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;X=b,b=X.next,X.next=null,c.lastBaseUpdate=X,c.shared.pending=null}}while(!0);ee===null&&(_=ie),c.baseState=_,c.firstBaseUpdate=Y,c.lastBaseUpdate=ee,u===null&&(c.shared.lanes=0),Da|=p,e.lanes=p,e.memoizedState=ie}}function Dm(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function Lm(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Dm(i[e],t)}var Ys=S(null),tl=S(0);function Om(e,t){e=da,pe(tl,e),pe(Ys,t),da=e|t.baseLanes}function jc(){pe(tl,da),pe(Ys,Ys.current)}function wc(){da=tl.current,P(Ys),P(tl)}var fn=S(null),kn=null;function Aa(e){var t=e.alternate;pe(Dt,Dt.current&1),pe(fn,e),kn===null&&(t===null||Ys.current!==null||t.memoizedState!==null)&&(kn=e)}function Nc(e){pe(Dt,Dt.current),pe(fn,e),kn===null&&(kn=e)}function zm(e){e.tag===22?(pe(Dt,Dt.current),pe(fn,e),kn===null&&(kn=e)):_a()}function _a(){pe(Dt,Dt.current),pe(fn,fn.current)}function pn(e){P(fn),kn===e&&(kn=null),P(Dt)}var Dt=S(0);function nl(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||_u(i)||Mu(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var aa=0,Ve=null,ut=null,$t=null,al=!1,Zs=!1,cs=!1,sl=0,Hi=0,Vs=null,tj=0;function At(){throw Error(o(321))}function Sc(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!hn(e[i],t[i]))return!1;return!0}function Ec(e,t,i,r,c,u){return aa=u,Ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,C.H=e===null||e.memoizedState===null?bf:Pc,cs=!1,u=i(r,c),cs=!1,Zs&&(u=$m(t,i,r,c)),Rm(e),u}function Rm(e){C.H=Vi;var t=ut!==null&&ut.next!==null;if(aa=0,$t=ut=Ve=null,al=!1,Hi=0,Vs=null,t)throw Error(o(300));e===null||Bt||(e=e.dependencies,e!==null&&Kr(e)&&(Bt=!0))}function $m(e,t,i,r){Ve=e;var c=0;do{if(Zs&&(Vs=null),Hi=0,Zs=!1,25<=c)throw Error(o(301));if(c+=1,$t=ut=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}C.H=xf,u=t(i,r)}while(Zs);return u}function nj(){var e=C.H,t=e.useState()[0];return t=typeof t.then=="function"?Yi(t):t,e=e.useState()[0],(ut!==null?ut.memoizedState:null)!==e&&(Ve.flags|=1024),t}function Tc(){var e=sl!==0;return sl=0,e}function Cc(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Ac(e){if(al){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}al=!1}aa=0,$t=ut=Ve=null,Zs=!1,Hi=sl=0,Vs=null}function Wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?Ve.memoizedState=$t=e:$t=$t.next=e,$t}function Lt(){if(ut===null){var e=Ve.alternate;e=e!==null?e.memoizedState:null}else e=ut.next;var t=$t===null?Ve.memoizedState:$t.next;if(t!==null)$t=t,ut=e;else{if(e===null)throw Ve.alternate===null?Error(o(467)):Error(o(310));ut=e,e={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},$t===null?Ve.memoizedState=$t=e:$t=$t.next=e}return $t}function il(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yi(e){var t=Hi;return Hi+=1,Vs===null&&(Vs=[]),e=Cm(Vs,e,t),t=Ve,($t===null?t.memoizedState:$t.next)===null&&(t=t.alternate,C.H=t===null||t.memoizedState===null?bf:Pc),e}function rl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Yi(e);if(e.$$typeof===B)return qt(e)}throw Error(o(438,String(e)))}function _c(e){var t=null,i=Ve.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var r=Ve.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=il(),Ve.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),r=0;r<e;r++)i[r]=xe;return t.index++,i}function sa(e,t){return typeof t=="function"?t(e):t}function ll(e){var t=Lt();return Mc(t,ut,e)}function Mc(e,t,i){var r=e.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=i;var c=e.baseQueue,u=r.pending;if(u!==null){if(c!==null){var p=c.next;c.next=u.next,u.next=p}t.baseQueue=c=u,r.pending=null}if(u=e.baseState,c===null)e.memoizedState=u;else{t=c.next;var b=p=null,_=null,Y=t,ee=!1;do{var ie=Y.lane&-536870913;if(ie!==Y.lane?(Qe&ie)===ie:(aa&ie)===ie){var V=Y.revertLane;if(V===0)_!==null&&(_=_.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ie===Us&&(ee=!0);else if((aa&V)===V){Y=Y.next,V===Us&&(ee=!0);continue}else ie={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},_===null?(b=_=ie,p=u):_=_.next=ie,Ve.lanes|=V,Da|=V;ie=Y.action,cs&&i(u,ie),u=Y.hasEagerState?Y.eagerState:i(u,ie)}else V={lane:ie,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},_===null?(b=_=V,p=u):_=_.next=V,Ve.lanes|=ie,Da|=ie;Y=Y.next}while(Y!==null&&Y!==t);if(_===null?p=u:_.next=b,!hn(u,e.memoizedState)&&(Bt=!0,ee&&(i=Ps,i!==null)))throw i;e.memoizedState=u,e.baseState=p,e.baseQueue=_,r.lastRenderedState=u}return c===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function kc(e){var t=Lt(),i=t.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=e;var r=i.dispatch,c=i.pending,u=t.memoizedState;if(c!==null){i.pending=null;var p=c=c.next;do u=e(u,p.action),p=p.next;while(p!==c);hn(u,t.memoizedState)||(Bt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),i.lastRenderedState=u}return[u,r]}function Bm(e,t,i){var r=Ve,c=Lt(),u=et;if(u){if(i===void 0)throw Error(o(407));i=i()}else i=t();var p=!hn((ut||c).memoizedState,i);if(p&&(c.memoizedState=i,Bt=!0),c=c.queue,Oc(Im.bind(null,r,c,e),[e]),c.getSnapshot!==t||p||$t!==null&&$t.memoizedState.tag&1){if(r.flags|=2048,qs(9,{destroy:void 0},Pm.bind(null,r,c,i,t),null),pt===null)throw Error(o(349));u||(aa&127)!==0||Um(r,t,i)}return i}function Um(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ve.updateQueue,t===null?(t=il(),Ve.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Pm(e,t,i,r){t.value=i,t.getSnapshot=r,Hm(t)&&Ym(e)}function Im(e,t,i){return i(function(){Hm(t)&&Ym(e)})}function Hm(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!hn(e,i)}catch{return!0}}function Ym(e){var t=es(e,2);t!==null&&ln(t,e,2)}function Dc(e){var t=Wt();if(typeof e=="function"){var i=e;if(e=i(),cs){Ge(!0);try{i()}finally{Ge(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:e},t}function Zm(e,t,i,r){return e.baseState=i,Mc(e,ut,typeof r=="function"?r:sa)}function aj(e,t,i,r,c){if(ul(e))throw Error(o(485));if(e=t.action,e!==null){var u={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){u.listeners.push(p)}};C.T!==null?i(!0):u.isTransition=!1,r(u),i=t.pending,i===null?(u.next=t.pending=u,Vm(t,u)):(u.next=i.next,t.pending=i.next=u)}}function Vm(e,t){var i=t.action,r=t.payload,c=e.state;if(t.isTransition){var u=C.T,p={};C.T=p;try{var b=i(c,r),_=C.S;_!==null&&_(p,b),qm(e,t,b)}catch(Y){Lc(e,t,Y)}finally{u!==null&&p.types!==null&&(u.types=p.types),C.T=u}}else try{u=i(c,r),qm(e,t,u)}catch(Y){Lc(e,t,Y)}}function qm(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(r){Gm(e,t,r)},function(r){return Lc(e,t,r)}):Gm(e,t,i)}function Gm(e,t,i){t.status="fulfilled",t.value=i,Km(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,Vm(e,i)))}function Lc(e,t,i){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=i,Km(t),t=t.next;while(t!==r)}e.action=null}function Km(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Fm(e,t){return t}function Xm(e,t){if(et){var i=pt.formState;if(i!==null){e:{var r=Ve;if(et){if(vt){t:{for(var c=vt,u=Mn;c.nodeType!==8;){if(!u){c=null;break t}if(c=Dn(c.nextSibling),c===null){c=null;break t}}u=c.data,c=u==="F!"||u==="F"?c:null}if(c){vt=Dn(c.nextSibling),r=c.data==="F!";break e}}Na(r)}r=!1}r&&(t=i[0])}}return i=Wt(),i.memoizedState=i.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fm,lastRenderedState:t},i.queue=r,i=yf.bind(null,Ve,r),r.dispatch=i,r=Dc(!1),u=Uc.bind(null,Ve,!1,r.queue),r=Wt(),c={state:t,dispatch:null,action:e,pending:null},r.queue=c,i=aj.bind(null,Ve,c,u,i),c.dispatch=i,r.memoizedState=e,[t,i,!1]}function Qm(e){var t=Lt();return Jm(t,ut,e)}function Jm(e,t,i){if(t=Mc(e,t,Fm)[0],e=ll(sa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=Yi(t)}catch(p){throw p===Is?Qr:p}else r=t;t=Lt();var c=t.queue,u=c.dispatch;return i!==t.memoizedState&&(Ve.flags|=2048,qs(9,{destroy:void 0},sj.bind(null,c,i),null)),[r,u,e]}function sj(e,t){e.action=t}function Wm(e){var t=Lt(),i=ut;if(i!==null)return Jm(t,i,e);Lt(),t=t.memoizedState,i=Lt();var r=i.queue.dispatch;return i.memoizedState=e,[t,r,!1]}function qs(e,t,i,r){return e={tag:e,create:i,deps:r,inst:t,next:null},t=Ve.updateQueue,t===null&&(t=il(),Ve.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e),e}function ef(){return Lt().memoizedState}function ol(e,t,i,r){var c=Wt();Ve.flags|=e,c.memoizedState=qs(1|t,{destroy:void 0},i,r===void 0?null:r)}function cl(e,t,i,r){var c=Lt();r=r===void 0?null:r;var u=c.memoizedState.inst;ut!==null&&r!==null&&Sc(r,ut.memoizedState.deps)?c.memoizedState=qs(t,u,i,r):(Ve.flags|=e,c.memoizedState=qs(1|t,u,i,r))}function tf(e,t){ol(8390656,8,e,t)}function Oc(e,t){cl(2048,8,e,t)}function ij(e){Ve.flags|=4;var t=Ve.updateQueue;if(t===null)t=il(),Ve.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function nf(e){var t=Lt().memoizedState;return ij({ref:t,nextImpl:e}),function(){if((rt&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function af(e,t){return cl(4,2,e,t)}function sf(e,t){return cl(4,4,e,t)}function rf(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function lf(e,t,i){i=i!=null?i.concat([e]):null,cl(4,4,rf.bind(null,t,e),i)}function zc(){}function of(e,t){var i=Lt();t=t===void 0?null:t;var r=i.memoizedState;return t!==null&&Sc(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function cf(e,t){var i=Lt();t=t===void 0?null:t;var r=i.memoizedState;if(t!==null&&Sc(t,r[1]))return r[0];if(r=e(),cs){Ge(!0);try{e()}finally{Ge(!1)}}return i.memoizedState=[r,t],r}function Rc(e,t,i){return i===void 0||(aa&1073741824)!==0&&(Qe&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=up(),Ve.lanes|=e,Da|=e,i)}function uf(e,t,i,r){return hn(i,t)?i:Ys.current!==null?(e=Rc(e,i,r),hn(e,t)||(Bt=!0),e):(aa&42)===0||(aa&1073741824)!==0&&(Qe&261930)===0?(Bt=!0,e.memoizedState=i):(e=up(),Ve.lanes|=e,Da|=e,t)}function df(e,t,i,r,c){var u=M.p;M.p=u!==0&&8>u?u:8;var p=C.T,b={};C.T=b,Uc(e,!1,t,i);try{var _=c(),Y=C.S;if(Y!==null&&Y(b,_),_!==null&&typeof _=="object"&&typeof _.then=="function"){var ee=ej(_,r);Zi(e,t,ee,vn(e))}else Zi(e,t,r,vn(e))}catch(ie){Zi(e,t,{then:function(){},status:"rejected",reason:ie},vn())}finally{M.p=u,p!==null&&b.types!==null&&(p.types=b.types),C.T=p}}function rj(){}function $c(e,t,i,r){if(e.tag!==5)throw Error(o(476));var c=hf(e).queue;df(e,c,t,G,i===null?rj:function(){return mf(e),i(r)})}function hf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:G},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function mf(e){var t=hf(e);t.next===null&&(t=e.alternate.memoizedState),Zi(e,t.next.queue,{},vn())}function Bc(){return qt(lr)}function ff(){return Lt().memoizedState}function pf(){return Lt().memoizedState}function lj(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=vn();e=Ta(i);var r=Ca(t,e,i);r!==null&&(ln(r,t,i),Ui(r,t,i)),t={cache:mc()},e.payload=t;return}t=t.return}}function oj(e,t,i){var r=vn();i={lane:r,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},ul(e)?gf(t,i):(i=nc(e,t,i,r),i!==null&&(ln(i,e,r),vf(i,t,r)))}function yf(e,t,i){var r=vn();Zi(e,t,i,r)}function Zi(e,t,i,r){var c={lane:r,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(ul(e))gf(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var p=t.lastRenderedState,b=u(p,i);if(c.hasEagerState=!0,c.eagerState=b,hn(b,p))return Zr(e,t,c,0),pt===null&&Yr(),!1}catch{}finally{}if(i=nc(e,t,c,r),i!==null)return ln(i,e,r),vf(i,t,r),!0}return!1}function Uc(e,t,i,r){if(r={lane:2,revertLane:gu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ul(e)){if(t)throw Error(o(479))}else t=nc(e,i,r,2),t!==null&&ln(t,e,2)}function ul(e){var t=e.alternate;return e===Ve||t!==null&&t===Ve}function gf(e,t){Zs=al=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function vf(e,t,i){if((i&4194048)!==0){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,dn(e,i)}}var Vi={readContext:qt,use:rl,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At};Vi.useEffectEvent=At;var bf={readContext:qt,use:rl,useCallback:function(e,t){return Wt().memoizedState=[e,t===void 0?null:t],e},useContext:qt,useEffect:tf,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,ol(4194308,4,rf.bind(null,t,e),i)},useLayoutEffect:function(e,t){return ol(4194308,4,e,t)},useInsertionEffect:function(e,t){ol(4,2,e,t)},useMemo:function(e,t){var i=Wt();t=t===void 0?null:t;var r=e();if(cs){Ge(!0);try{e()}finally{Ge(!1)}}return i.memoizedState=[r,t],r},useReducer:function(e,t,i){var r=Wt();if(i!==void 0){var c=i(t);if(cs){Ge(!0);try{i(t)}finally{Ge(!1)}}}else c=t;return r.memoizedState=r.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},r.queue=e,e=e.dispatch=oj.bind(null,Ve,e),[r.memoizedState,e]},useRef:function(e){var t=Wt();return e={current:e},t.memoizedState=e},useState:function(e){e=Dc(e);var t=e.queue,i=yf.bind(null,Ve,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:zc,useDeferredValue:function(e,t){var i=Wt();return Rc(i,e,t)},useTransition:function(){var e=Dc(!1);return e=df.bind(null,Ve,e.queue,!0,!1),Wt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var r=Ve,c=Wt();if(et){if(i===void 0)throw Error(o(407));i=i()}else{if(i=t(),pt===null)throw Error(o(349));(Qe&127)!==0||Um(r,t,i)}c.memoizedState=i;var u={value:i,getSnapshot:t};return c.queue=u,tf(Im.bind(null,r,u,e),[e]),r.flags|=2048,qs(9,{destroy:void 0},Pm.bind(null,r,u,i,t),null),i},useId:function(){var e=Wt(),t=pt.identifierPrefix;if(et){var i=Hn,r=In;i=(r&~(1<<32-Ke(r)-1)).toString(32)+i,t="_"+t+"R_"+i,i=sl++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=tj++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Bc,useFormState:Xm,useActionState:Xm,useOptimistic:function(e){var t=Wt();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Uc.bind(null,Ve,!0,i),i.dispatch=t,[e,t]},useMemoCache:_c,useCacheRefresh:function(){return Wt().memoizedState=lj.bind(null,Ve)},useEffectEvent:function(e){var t=Wt(),i={impl:e};return t.memoizedState=i,function(){if((rt&2)!==0)throw Error(o(440));return i.impl.apply(void 0,arguments)}}},Pc={readContext:qt,use:rl,useCallback:of,useContext:qt,useEffect:Oc,useImperativeHandle:lf,useInsertionEffect:af,useLayoutEffect:sf,useMemo:cf,useReducer:ll,useRef:ef,useState:function(){return ll(sa)},useDebugValue:zc,useDeferredValue:function(e,t){var i=Lt();return uf(i,ut.memoizedState,e,t)},useTransition:function(){var e=ll(sa)[0],t=Lt().memoizedState;return[typeof e=="boolean"?e:Yi(e),t]},useSyncExternalStore:Bm,useId:ff,useHostTransitionStatus:Bc,useFormState:Qm,useActionState:Qm,useOptimistic:function(e,t){var i=Lt();return Zm(i,ut,e,t)},useMemoCache:_c,useCacheRefresh:pf};Pc.useEffectEvent=nf;var xf={readContext:qt,use:rl,useCallback:of,useContext:qt,useEffect:Oc,useImperativeHandle:lf,useInsertionEffect:af,useLayoutEffect:sf,useMemo:cf,useReducer:kc,useRef:ef,useState:function(){return kc(sa)},useDebugValue:zc,useDeferredValue:function(e,t){var i=Lt();return ut===null?Rc(i,e,t):uf(i,ut.memoizedState,e,t)},useTransition:function(){var e=kc(sa)[0],t=Lt().memoizedState;return[typeof e=="boolean"?e:Yi(e),t]},useSyncExternalStore:Bm,useId:ff,useHostTransitionStatus:Bc,useFormState:Wm,useActionState:Wm,useOptimistic:function(e,t){var i=Lt();return ut!==null?Zm(i,ut,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:_c,useCacheRefresh:pf};xf.useEffectEvent=nf;function Ic(e,t,i,r){t=e.memoizedState,i=i(r,t),i=i==null?t:j({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Hc={enqueueSetState:function(e,t,i){e=e._reactInternals;var r=vn(),c=Ta(r);c.payload=t,i!=null&&(c.callback=i),t=Ca(e,c,r),t!==null&&(ln(t,e,r),Ui(t,e,r))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=vn(),c=Ta(r);c.tag=1,c.payload=t,i!=null&&(c.callback=i),t=Ca(e,c,r),t!==null&&(ln(t,e,r),Ui(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=vn(),r=Ta(i);r.tag=2,t!=null&&(r.callback=t),t=Ca(e,r,i),t!==null&&(ln(t,e,i),Ui(t,e,i))}};function jf(e,t,i,r,c,u,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,u,p):t.prototype&&t.prototype.isPureReactComponent?!ki(i,r)||!ki(c,u):!0}function wf(e,t,i,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&Hc.enqueueReplaceState(t,t.state,null)}function us(e,t){var i=t;if("ref"in t){i={};for(var r in t)r!=="ref"&&(i[r]=t[r])}if(e=e.defaultProps){i===t&&(i=j({},i));for(var c in e)i[c]===void 0&&(i[c]=e[c])}return i}function Nf(e){Hr(e)}function Sf(e){console.error(e)}function Ef(e){Hr(e)}function dl(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function Tf(e,t,i){try{var r=e.onCaughtError;r(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Yc(e,t,i){return i=Ta(i),i.tag=3,i.payload={element:null},i.callback=function(){dl(e,t)},i}function Cf(e){return e=Ta(e),e.tag=3,e}function Af(e,t,i,r){var c=i.type.getDerivedStateFromError;if(typeof c=="function"){var u=r.value;e.payload=function(){return c(u)},e.callback=function(){Tf(t,i,r)}}var p=i.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){Tf(t,i,r),typeof c!="function"&&(La===null?La=new Set([this]):La.add(this));var b=r.stack;this.componentDidCatch(r.value,{componentStack:b!==null?b:""})})}function cj(e,t,i,r,c){if(i.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=i.alternate,t!==null&&Bs(t,i,c,!0),i=fn.current,i!==null){switch(i.tag){case 31:case 13:return kn===null?Nl():i.alternate===null&&_t===0&&(_t=3),i.flags&=-257,i.flags|=65536,i.lanes=c,r===Jr?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([r]):t.add(r),fu(e,r,c)),!1;case 22:return i.flags|=65536,r===Jr?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([r]):i.add(r)),fu(e,r,c)),!1}throw Error(o(435,i.tag))}return fu(e,r,c),Nl(),!1}if(et)return t=fn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,r!==oc&&(e=Error(o(422),{cause:r}),Oi(Cn(e,i)))):(r!==oc&&(t=Error(o(423),{cause:r}),Oi(Cn(t,i))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,r=Cn(r,i),c=Yc(e.stateNode,r,c),bc(e,c),_t!==4&&(_t=2)),!1;var u=Error(o(520),{cause:r});if(u=Cn(u,i),Wi===null?Wi=[u]:Wi.push(u),_t!==4&&(_t=2),t===null)return!0;r=Cn(r,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=c&-c,i.lanes|=e,e=Yc(i.stateNode,r,e),bc(i,e),!1;case 1:if(t=i.type,u=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(La===null||!La.has(u))))return i.flags|=65536,c&=-c,i.lanes|=c,c=Cf(c),Af(c,e,i,r),bc(i,c),!1}i=i.return}while(i!==null);return!1}var Zc=Error(o(461)),Bt=!1;function Gt(e,t,i,r){t.child=e===null?km(t,null,i,r):os(t,e.child,i,r)}function _f(e,t,i,r,c){i=i.render;var u=t.ref;if("ref"in r){var p={};for(var b in r)b!=="ref"&&(p[b]=r[b])}else p=r;return ss(t),r=Ec(e,t,i,p,u,c),b=Tc(),e!==null&&!Bt?(Cc(e,t,c),ia(e,t,c)):(et&&b&&rc(t),t.flags|=1,Gt(e,t,r,c),t.child)}function Mf(e,t,i,r,c){if(e===null){var u=i.type;return typeof u=="function"&&!ac(u)&&u.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=u,kf(e,t,u,r,c)):(e=qr(i.type,null,r,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Jc(e,c)){var p=u.memoizedProps;if(i=i.compare,i=i!==null?i:ki,i(p,r)&&e.ref===t.ref)return ia(e,t,c)}return t.flags|=1,e=Wn(u,r),e.ref=t.ref,e.return=t,t.child=e}function kf(e,t,i,r,c){if(e!==null){var u=e.memoizedProps;if(ki(u,r)&&e.ref===t.ref)if(Bt=!1,t.pendingProps=r=u,Jc(e,c))(e.flags&131072)!==0&&(Bt=!0);else return t.lanes=e.lanes,ia(e,t,c)}return Vc(e,t,i,r,c)}function Df(e,t,i,r){var c=r.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|i:i,e!==null){for(r=t.child=e.child,c=0;r!==null;)c=c|r.lanes|r.childLanes,r=r.sibling;r=c&~u}else r=0,t.child=null;return Lf(e,t,u,i,r)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Xr(t,u!==null?u.cachePool:null),u!==null?Om(t,u):jc(),zm(t);else return r=t.lanes=536870912,Lf(e,t,u!==null?u.baseLanes|i:i,i,r)}else u!==null?(Xr(t,u.cachePool),Om(t,u),_a(),t.memoizedState=null):(e!==null&&Xr(t,null),jc(),_a());return Gt(e,t,c,i),t.child}function qi(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Lf(e,t,i,r,c){var u=pc();return u=u===null?null:{parent:Rt._currentValue,pool:u},t.memoizedState={baseLanes:i,cachePool:u},e!==null&&Xr(t,null),jc(),zm(t),e!==null&&Bs(e,t,r,!0),t.childLanes=c,null}function hl(e,t){return t=fl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Of(e,t,i){return os(t,e.child,null,i),e=hl(t,t.pendingProps),e.flags|=2,pn(t),t.memoizedState=null,e}function uj(e,t,i){var r=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(et){if(r.mode==="hidden")return e=hl(t,r),t.lanes=536870912,qi(null,e);if(Nc(t),(e=vt)?(e=qp(e,Mn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ja!==null?{id:In,overflow:Hn}:null,retryLane:536870912,hydrationErrors:null},i=ym(e),i.return=t,t.child=i,Vt=t,vt=null)):e=null,e===null)throw Na(t);return t.lanes=536870912,null}return hl(t,r)}var u=e.memoizedState;if(u!==null){var p=u.dehydrated;if(Nc(t),c)if(t.flags&256)t.flags&=-257,t=Of(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(Bt||Bs(e,t,i,!1),c=(i&e.childLanes)!==0,Bt||c){if(r=pt,r!==null&&(p=H(r,i),p!==0&&p!==u.retryLane))throw u.retryLane=p,es(e,p),ln(r,e,p),Zc;Nl(),t=Of(e,t,i)}else e=u.treeContext,vt=Dn(p.nextSibling),Vt=t,et=!0,wa=null,Mn=!1,e!==null&&bm(t,e),t=hl(t,r),t.flags|=4096;return t}return e=Wn(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ml(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(o(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Vc(e,t,i,r,c){return ss(t),i=Ec(e,t,i,r,void 0,c),r=Tc(),e!==null&&!Bt?(Cc(e,t,c),ia(e,t,c)):(et&&r&&rc(t),t.flags|=1,Gt(e,t,i,c),t.child)}function zf(e,t,i,r,c,u){return ss(t),t.updateQueue=null,i=$m(t,r,i,c),Rm(e),r=Tc(),e!==null&&!Bt?(Cc(e,t,u),ia(e,t,u)):(et&&r&&rc(t),t.flags|=1,Gt(e,t,i,u),t.child)}function Rf(e,t,i,r,c){if(ss(t),t.stateNode===null){var u=Os,p=i.contextType;typeof p=="object"&&p!==null&&(u=qt(p)),u=new i(r,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Hc,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=r,u.state=t.memoizedState,u.refs={},gc(t),p=i.contextType,u.context=typeof p=="object"&&p!==null?qt(p):Os,u.state=t.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(Ic(t,i,p,r),u.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(p=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),p!==u.state&&Hc.enqueueReplaceState(u,u.state,null),Ii(t,r,u,c),Pi(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){u=t.stateNode;var b=t.memoizedProps,_=us(i,b);u.props=_;var Y=u.context,ee=i.contextType;p=Os,typeof ee=="object"&&ee!==null&&(p=qt(ee));var ie=i.getDerivedStateFromProps;ee=typeof ie=="function"||typeof u.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,ee||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(b||Y!==p)&&wf(t,u,r,p),Ea=!1;var V=t.memoizedState;u.state=V,Ii(t,r,u,c),Pi(),Y=t.memoizedState,b||V!==Y||Ea?(typeof ie=="function"&&(Ic(t,i,ie,r),Y=t.memoizedState),(_=Ea||jf(t,i,_,r,V,Y,p))?(ee||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=Y),u.props=r,u.state=Y,u.context=p,r=_):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,vc(e,t),p=t.memoizedProps,ee=us(i,p),u.props=ee,ie=t.pendingProps,V=u.context,Y=i.contextType,_=Os,typeof Y=="object"&&Y!==null&&(_=qt(Y)),b=i.getDerivedStateFromProps,(Y=typeof b=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(p!==ie||V!==_)&&wf(t,u,r,_),Ea=!1,V=t.memoizedState,u.state=V,Ii(t,r,u,c),Pi();var X=t.memoizedState;p!==ie||V!==X||Ea||e!==null&&e.dependencies!==null&&Kr(e.dependencies)?(typeof b=="function"&&(Ic(t,i,b,r),X=t.memoizedState),(ee=Ea||jf(t,i,ee,r,V,X,_)||e!==null&&e.dependencies!==null&&Kr(e.dependencies))?(Y||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,X,_),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,X,_)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||p===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=X),u.props=r,u.state=X,u.context=_,r=ee):(typeof u.componentDidUpdate!="function"||p===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),r=!1)}return u=r,ml(e,t),r=(t.flags&128)!==0,u||r?(u=t.stateNode,i=r&&typeof i.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&r?(t.child=os(t,e.child,null,c),t.child=os(t,null,i,c)):Gt(e,t,i,c),t.memoizedState=u.state,e=t.child):e=ia(e,t,c),e}function $f(e,t,i,r){return ns(),t.flags|=256,Gt(e,t,i,r),t.child}var qc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gc(e){return{baseLanes:e,cachePool:Em()}}function Kc(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=gn),e}function Bf(e,t,i){var r=t.pendingProps,c=!1,u=(t.flags&128)!==0,p;if((p=u)||(p=e!==null&&e.memoizedState===null?!1:(Dt.current&2)!==0),p&&(c=!0,t.flags&=-129),p=(t.flags&32)!==0,t.flags&=-33,e===null){if(et){if(c?Aa(t):_a(),(e=vt)?(e=qp(e,Mn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ja!==null?{id:In,overflow:Hn}:null,retryLane:536870912,hydrationErrors:null},i=ym(e),i.return=t,t.child=i,Vt=t,vt=null)):e=null,e===null)throw Na(t);return Mu(e)?t.lanes=32:t.lanes=536870912,null}var b=r.children;return r=r.fallback,c?(_a(),c=t.mode,b=fl({mode:"hidden",children:b},c),r=ts(r,c,i,null),b.return=t,r.return=t,b.sibling=r,t.child=b,r=t.child,r.memoizedState=Gc(i),r.childLanes=Kc(e,p,i),t.memoizedState=qc,qi(null,r)):(Aa(t),Fc(t,b))}var _=e.memoizedState;if(_!==null&&(b=_.dehydrated,b!==null)){if(u)t.flags&256?(Aa(t),t.flags&=-257,t=Xc(e,t,i)):t.memoizedState!==null?(_a(),t.child=e.child,t.flags|=128,t=null):(_a(),b=r.fallback,c=t.mode,r=fl({mode:"visible",children:r.children},c),b=ts(b,c,i,null),b.flags|=2,r.return=t,b.return=t,r.sibling=b,t.child=r,os(t,e.child,null,i),r=t.child,r.memoizedState=Gc(i),r.childLanes=Kc(e,p,i),t.memoizedState=qc,t=qi(null,r));else if(Aa(t),Mu(b)){if(p=b.nextSibling&&b.nextSibling.dataset,p)var Y=p.dgst;p=Y,r=Error(o(419)),r.stack="",r.digest=p,Oi({value:r,source:null,stack:null}),t=Xc(e,t,i)}else if(Bt||Bs(e,t,i,!1),p=(i&e.childLanes)!==0,Bt||p){if(p=pt,p!==null&&(r=H(p,i),r!==0&&r!==_.retryLane))throw _.retryLane=r,es(e,r),ln(p,e,r),Zc;_u(b)||Nl(),t=Xc(e,t,i)}else _u(b)?(t.flags|=192,t.child=e.child,t=null):(e=_.treeContext,vt=Dn(b.nextSibling),Vt=t,et=!0,wa=null,Mn=!1,e!==null&&bm(t,e),t=Fc(t,r.children),t.flags|=4096);return t}return c?(_a(),b=r.fallback,c=t.mode,_=e.child,Y=_.sibling,r=Wn(_,{mode:"hidden",children:r.children}),r.subtreeFlags=_.subtreeFlags&65011712,Y!==null?b=Wn(Y,b):(b=ts(b,c,i,null),b.flags|=2),b.return=t,r.return=t,r.sibling=b,t.child=r,qi(null,r),r=t.child,b=e.child.memoizedState,b===null?b=Gc(i):(c=b.cachePool,c!==null?(_=Rt._currentValue,c=c.parent!==_?{parent:_,pool:_}:c):c=Em(),b={baseLanes:b.baseLanes|i,cachePool:c}),r.memoizedState=b,r.childLanes=Kc(e,p,i),t.memoizedState=qc,qi(e.child,r)):(Aa(t),i=e.child,e=i.sibling,i=Wn(i,{mode:"visible",children:r.children}),i.return=t,i.sibling=null,e!==null&&(p=t.deletions,p===null?(t.deletions=[e],t.flags|=16):p.push(e)),t.child=i,t.memoizedState=null,i)}function Fc(e,t){return t=fl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function fl(e,t){return e=mn(22,e,null,t),e.lanes=0,e}function Xc(e,t,i){return os(t,e.child,null,i),e=Fc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Uf(e,t,i){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),dc(e.return,t,i)}function Qc(e,t,i,r,c,u){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:c,treeForkCount:u}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=r,p.tail=i,p.tailMode=c,p.treeForkCount=u)}function Pf(e,t,i){var r=t.pendingProps,c=r.revealOrder,u=r.tail;r=r.children;var p=Dt.current,b=(p&2)!==0;if(b?(p=p&1|2,t.flags|=128):p&=1,pe(Dt,p),Gt(e,t,r,i),r=et?Li:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Uf(e,i,t);else if(e.tag===19)Uf(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&nl(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),Qc(t,!1,c,i,u,r);break;case"backwards":case"unstable_legacy-backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&nl(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Qc(t,!0,i,null,u,r);break;case"together":Qc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function ia(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Da|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Bs(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,i=Wn(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Wn(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Jc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Kr(e)))}function dj(e,t,i){switch(t.tag){case 3:Ze(t,t.stateNode.containerInfo),Sa(t,Rt,e.memoizedState.cache),ns();break;case 27:case 5:Q(t);break;case 4:Ze(t,t.stateNode.containerInfo);break;case 10:Sa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Nc(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Aa(t),t.flags|=128,null):(i&t.child.childLanes)!==0?Bf(e,t,i):(Aa(t),e=ia(e,t,i),e!==null?e.sibling:null);Aa(t);break;case 19:var c=(e.flags&128)!==0;if(r=(i&t.childLanes)!==0,r||(Bs(e,t,i,!1),r=(i&t.childLanes)!==0),c){if(r)return Pf(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),pe(Dt,Dt.current),r)break;return null;case 22:return t.lanes=0,Df(e,t,i,t.pendingProps);case 24:Sa(t,Rt,e.memoizedState.cache)}return ia(e,t,i)}function If(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)Bt=!0;else{if(!Jc(e,i)&&(t.flags&128)===0)return Bt=!1,dj(e,t,i);Bt=(e.flags&131072)!==0}else Bt=!1,et&&(t.flags&1048576)!==0&&vm(t,Li,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=rs(t.elementType),t.type=e,typeof e=="function")ac(e)?(r=us(e,r),t.tag=1,t=Rf(null,t,e,r,i)):(t.tag=0,t=Vc(null,t,e,r,i));else{if(e!=null){var c=e.$$typeof;if(c===R){t.tag=11,t=_f(null,t,e,r,i);break e}else if(c===re){t.tag=14,t=Mf(null,t,e,r,i);break e}}throw t=ne(e)||e,Error(o(306,t,""))}}return t;case 0:return Vc(e,t,t.type,t.pendingProps,i);case 1:return r=t.type,c=us(r,t.pendingProps),Rf(e,t,r,c,i);case 3:e:{if(Ze(t,t.stateNode.containerInfo),e===null)throw Error(o(387));r=t.pendingProps;var u=t.memoizedState;c=u.element,vc(e,t),Ii(t,r,null,i);var p=t.memoizedState;if(r=p.cache,Sa(t,Rt,r),r!==u.cache&&hc(t,[Rt],i,!0),Pi(),r=p.element,u.isDehydrated)if(u={element:r,isDehydrated:!1,cache:p.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=$f(e,t,r,i);break e}else if(r!==c){c=Cn(Error(o(424)),t),Oi(c),t=$f(e,t,r,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(vt=Dn(e.firstChild),Vt=t,et=!0,wa=null,Mn=!0,i=km(t,null,r,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ns(),r===c){t=ia(e,t,i);break e}Gt(e,t,r,i)}t=t.child}return t;case 26:return ml(e,t),e===null?(i=Jp(t.type,null,t.pendingProps,null))?t.memoizedState=i:et||(i=t.type,e=t.pendingProps,r=Ml(ve.current).createElement(i),r[Ht]=t,r[Qt]=e,Kt(r,i,e),Yt(r),t.stateNode=r):t.memoizedState=Jp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),e===null&&et&&(r=t.stateNode=Fp(t.type,t.pendingProps,ve.current),Vt=t,Mn=!0,c=vt,$a(t.type)?(ku=c,vt=Dn(r.firstChild)):vt=c),Gt(e,t,t.pendingProps.children,i),ml(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&et&&((c=r=vt)&&(r=Ij(r,t.type,t.pendingProps,Mn),r!==null?(t.stateNode=r,Vt=t,vt=Dn(r.firstChild),Mn=!1,c=!0):c=!1),c||Na(t)),Q(t),c=t.type,u=t.pendingProps,p=e!==null?e.memoizedProps:null,r=u.children,Tu(c,u)?r=null:p!==null&&Tu(c,p)&&(t.flags|=32),t.memoizedState!==null&&(c=Ec(e,t,nj,null,null,i),lr._currentValue=c),ml(e,t),Gt(e,t,r,i),t.child;case 6:return e===null&&et&&((e=i=vt)&&(i=Hj(i,t.pendingProps,Mn),i!==null?(t.stateNode=i,Vt=t,vt=null,e=!0):e=!1),e||Na(t)),null;case 13:return Bf(e,t,i);case 4:return Ze(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=os(t,null,r,i):Gt(e,t,r,i),t.child;case 11:return _f(e,t,t.type,t.pendingProps,i);case 7:return Gt(e,t,t.pendingProps,i),t.child;case 8:return Gt(e,t,t.pendingProps.children,i),t.child;case 12:return Gt(e,t,t.pendingProps.children,i),t.child;case 10:return r=t.pendingProps,Sa(t,t.type,r.value),Gt(e,t,r.children,i),t.child;case 9:return c=t.type._context,r=t.pendingProps.children,ss(t),c=qt(c),r=r(c),t.flags|=1,Gt(e,t,r,i),t.child;case 14:return Mf(e,t,t.type,t.pendingProps,i);case 15:return kf(e,t,t.type,t.pendingProps,i);case 19:return Pf(e,t,i);case 31:return uj(e,t,i);case 22:return Df(e,t,i,t.pendingProps);case 24:return ss(t),r=qt(Rt),e===null?(c=pc(),c===null&&(c=pt,u=mc(),c.pooledCache=u,u.refCount++,u!==null&&(c.pooledCacheLanes|=i),c=u),t.memoizedState={parent:r,cache:c},gc(t),Sa(t,Rt,c)):((e.lanes&i)!==0&&(vc(e,t),Ii(t,null,null,i),Pi()),c=e.memoizedState,u=t.memoizedState,c.parent!==r?(c={parent:r,cache:r},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),Sa(t,Rt,r)):(r=u.cache,Sa(t,Rt,r),r!==c.cache&&hc(t,[Rt],i,!0))),Gt(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function ra(e){e.flags|=4}function Wc(e,t,i,r,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(fp())e.flags|=8192;else throw ls=Jr,yc}else e.flags&=-16777217}function Hf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ay(t))if(fp())e.flags|=8192;else throw ls=Jr,yc}function pl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?lt():536870912,e.lanes|=t,Xs|=t)}function Gi(e,t){if(!et)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,r|=c.subtreeFlags&65011712,r|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,r|=c.subtreeFlags,r|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function hj(e,t,i){var r=t.pendingProps;switch(lc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(t),null;case 1:return bt(t),null;case 3:return i=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),na(Rt),me(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&($s(t)?ra(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,cc())),bt(t),null;case 26:var c=t.type,u=t.memoizedState;return e===null?(ra(t),u!==null?(bt(t),Hf(t,u)):(bt(t),Wc(t,c,null,r,i))):u?u!==e.memoizedState?(ra(t),bt(t),Hf(t,u)):(bt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==r&&ra(t),bt(t),Wc(t,c,e,r,i)),null;case 27:if(be(t),i=ve.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&ra(t);else{if(!r){if(t.stateNode===null)throw Error(o(166));return bt(t),null}e=ue.current,$s(t)?xm(t):(e=Fp(c,r,i),t.stateNode=e,ra(t))}return bt(t),null;case 5:if(be(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&ra(t);else{if(!r){if(t.stateNode===null)throw Error(o(166));return bt(t),null}if(u=ue.current,$s(t))xm(t);else{var p=Ml(ve.current);switch(u){case 1:u=p.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:u=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":u=p.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":u=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":u=p.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof r.is=="string"?p.createElement("select",{is:r.is}):p.createElement("select"),r.multiple?u.multiple=!0:r.size&&(u.size=r.size);break;default:u=typeof r.is=="string"?p.createElement(c,{is:r.is}):p.createElement(c)}}u[Ht]=t,u[Qt]=r;e:for(p=t.child;p!==null;){if(p.tag===5||p.tag===6)u.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}t.stateNode=u;e:switch(Kt(u,c,r),c){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ra(t)}}return bt(t),Wc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&ra(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(o(166));if(e=ve.current,$s(t)){if(e=t.stateNode,i=t.memoizedProps,r=null,c=Vt,c!==null)switch(c.tag){case 27:case 5:r=c.memoizedProps}e[Ht]=t,e=!!(e.nodeValue===i||r!==null&&r.suppressHydrationWarning===!0||Bp(e.nodeValue,i)),e||Na(t,!0)}else e=Ml(e).createTextNode(r),e[Ht]=t,t.stateNode=e}return bt(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(r=$s(t),i!==null){if(e===null){if(!r)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[Ht]=t}else ns(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;bt(t),e=!1}else i=cc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(pn(t),t):(pn(t),null);if((t.flags&128)!==0)throw Error(o(558))}return bt(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=$s(t),r!==null&&r.dehydrated!==null){if(e===null){if(!c)throw Error(o(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));c[Ht]=t}else ns(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;bt(t),c=!1}else c=cc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(pn(t),t):(pn(t),null)}return pn(t),(t.flags&128)!==0?(t.lanes=i,t):(i=r!==null,e=e!==null&&e.memoizedState!==null,i&&(r=t.child,c=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(c=r.alternate.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==c&&(r.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),pl(t,t.updateQueue),bt(t),null);case 4:return me(),e===null&&ju(t.stateNode.containerInfo),bt(t),null;case 10:return na(t.type),bt(t),null;case 19:if(P(Dt),r=t.memoizedState,r===null)return bt(t),null;if(c=(t.flags&128)!==0,u=r.rendering,u===null)if(c)Gi(r,!1);else{if(_t!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=nl(e),u!==null){for(t.flags|=128,Gi(r,!1),e=u.updateQueue,t.updateQueue=e,pl(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)pm(i,e),i=i.sibling;return pe(Dt,Dt.current&1|2),et&&ea(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&Ee()>xl&&(t.flags|=128,c=!0,Gi(r,!1),t.lanes=4194304)}else{if(!c)if(e=nl(u),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,pl(t,e),Gi(r,!0),r.tail===null&&r.tailMode==="hidden"&&!u.alternate&&!et)return bt(t),null}else 2*Ee()-r.renderingStartTime>xl&&i!==536870912&&(t.flags|=128,c=!0,Gi(r,!1),t.lanes=4194304);r.isBackwards?(u.sibling=t.child,t.child=u):(e=r.last,e!==null?e.sibling=u:t.child=u,r.last=u)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Ee(),e.sibling=null,i=Dt.current,pe(Dt,c?i&1|2:i&1),et&&ea(t,r.treeForkCount),e):(bt(t),null);case 22:case 23:return pn(t),wc(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?(i&536870912)!==0&&(t.flags&128)===0&&(bt(t),t.subtreeFlags&6&&(t.flags|=8192)):bt(t),i=t.updateQueue,i!==null&&pl(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==i&&(t.flags|=2048),e!==null&&P(is),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),na(Rt),bt(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function mj(e,t){switch(lc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return na(Rt),me(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return be(t),null;case 31:if(t.memoizedState!==null){if(pn(t),t.alternate===null)throw Error(o(340));ns()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(pn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));ns()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return P(Dt),null;case 4:return me(),null;case 10:return na(t.type),null;case 22:case 23:return pn(t),wc(),e!==null&&P(is),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return na(Rt),null;case 25:return null;default:return null}}function Yf(e,t){switch(lc(t),t.tag){case 3:na(Rt),me();break;case 26:case 27:case 5:be(t);break;case 4:me();break;case 31:t.memoizedState!==null&&pn(t);break;case 13:pn(t);break;case 19:P(Dt);break;case 10:na(t.type);break;case 22:case 23:pn(t),wc(),e!==null&&P(is);break;case 24:na(Rt)}}function Ki(e,t){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var c=r.next;i=c;do{if((i.tag&e)===e){r=void 0;var u=i.create,p=i.inst;r=u(),p.destroy=r}i=i.next}while(i!==c)}}catch(b){ct(t,t.return,b)}}function Ma(e,t,i){try{var r=t.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var u=c.next;r=u;do{if((r.tag&e)===e){var p=r.inst,b=p.destroy;if(b!==void 0){p.destroy=void 0,c=t;var _=i,Y=b;try{Y()}catch(ee){ct(c,_,ee)}}}r=r.next}while(r!==u)}}catch(ee){ct(t,t.return,ee)}}function Zf(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{Lm(t,i)}catch(r){ct(e,e.return,r)}}}function Vf(e,t,i){i.props=us(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(r){ct(e,t,r)}}function Fi(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof i=="function"?e.refCleanup=i(r):i.current=r}}catch(c){ct(e,t,c)}}function Yn(e,t){var i=e.ref,r=e.refCleanup;if(i!==null)if(typeof r=="function")try{r()}catch(c){ct(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(c){ct(e,t,c)}else i.current=null}function qf(e){var t=e.type,i=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&r.focus();break e;case"img":i.src?r.src=i.src:i.srcSet&&(r.srcset=i.srcSet)}}catch(c){ct(e,e.return,c)}}function eu(e,t,i){try{var r=e.stateNode;zj(r,e.type,i,t),r[Qt]=t}catch(c){ct(e,e.return,c)}}function Gf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&$a(e.type)||e.tag===4}function tu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&$a(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nu(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Qn));else if(r!==4&&(r===27&&$a(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(nu(e,t,i),e=e.sibling;e!==null;)nu(e,t,i),e=e.sibling}function yl(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(r!==4&&(r===27&&$a(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(yl(e,t,i),e=e.sibling;e!==null;)yl(e,t,i),e=e.sibling}function Kf(e){var t=e.stateNode,i=e.memoizedProps;try{for(var r=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);Kt(t,r,i),t[Ht]=e,t[Qt]=i}catch(u){ct(e,e.return,u)}}var la=!1,Ut=!1,au=!1,Ff=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function fj(e,t){if(e=e.containerInfo,Su=$l,e=rm(e),Xo(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var c=r.anchorOffset,u=r.focusNode;r=r.focusOffset;try{i.nodeType,u.nodeType}catch{i=null;break e}var p=0,b=-1,_=-1,Y=0,ee=0,ie=e,V=null;t:for(;;){for(var X;ie!==i||c!==0&&ie.nodeType!==3||(b=p+c),ie!==u||r!==0&&ie.nodeType!==3||(_=p+r),ie.nodeType===3&&(p+=ie.nodeValue.length),(X=ie.firstChild)!==null;)V=ie,ie=X;for(;;){if(ie===e)break t;if(V===i&&++Y===c&&(b=p),V===u&&++ee===r&&(_=p),(X=ie.nextSibling)!==null)break;ie=V,V=ie.parentNode}ie=X}i=b===-1||_===-1?null:{start:b,end:_}}else i=null}i=i||{start:0,end:0}}else i=null;for(Eu={focusedElem:e,selectionRange:i},$l=!1,Zt=t;Zt!==null;)if(t=Zt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Zt=e;else for(;Zt!==null;){switch(t=Zt,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)c=e[i],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,i=t,c=u.memoizedProps,u=u.memoizedState,r=i.stateNode;try{var Ce=us(i.type,c);e=r.getSnapshotBeforeUpdate(Ce,u),r.__reactInternalSnapshotBeforeUpdate=e}catch(Re){ct(i,i.return,Re)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Au(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Au(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,Zt=e;break}Zt=t.return}}function Xf(e,t,i){var r=i.flags;switch(i.tag){case 0:case 11:case 15:ca(e,i),r&4&&Ki(5,i);break;case 1:if(ca(e,i),r&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(p){ct(i,i.return,p)}else{var c=us(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(p){ct(i,i.return,p)}}r&64&&Zf(i),r&512&&Fi(i,i.return);break;case 3:if(ca(e,i),r&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{Lm(e,t)}catch(p){ct(i,i.return,p)}}break;case 27:t===null&&r&4&&Kf(i);case 26:case 5:ca(e,i),t===null&&r&4&&qf(i),r&512&&Fi(i,i.return);break;case 12:ca(e,i);break;case 31:ca(e,i),r&4&&Wf(e,i);break;case 13:ca(e,i),r&4&&ep(e,i),r&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Nj.bind(null,i),Yj(e,i))));break;case 22:if(r=i.memoizedState!==null||la,!r){t=t!==null&&t.memoizedState!==null||Ut,c=la;var u=Ut;la=r,(Ut=t)&&!u?ua(e,i,(i.subtreeFlags&8772)!==0):ca(e,i),la=c,Ut=u}break;case 30:break;default:ca(e,i)}}function Qf(e){var t=e.alternate;t!==null&&(e.alternate=null,Qf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Lo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var wt=null,nn=!1;function oa(e,t,i){for(i=i.child;i!==null;)Jf(e,t,i),i=i.sibling}function Jf(e,t,i){if(_e&&typeof _e.onCommitFiberUnmount=="function")try{_e.onCommitFiberUnmount(Ae,i)}catch{}switch(i.tag){case 26:Ut||Yn(i,t),oa(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Ut||Yn(i,t);var r=wt,c=nn;$a(i.type)&&(wt=i.stateNode,nn=!1),oa(e,t,i),sr(i.stateNode),wt=r,nn=c;break;case 5:Ut||Yn(i,t);case 6:if(r=wt,c=nn,wt=null,oa(e,t,i),wt=r,nn=c,wt!==null)if(nn)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(i.stateNode)}catch(u){ct(i,t,u)}else try{wt.removeChild(i.stateNode)}catch(u){ct(i,t,u)}break;case 18:wt!==null&&(nn?(e=wt,Zp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),si(e)):Zp(wt,i.stateNode));break;case 4:r=wt,c=nn,wt=i.stateNode.containerInfo,nn=!0,oa(e,t,i),wt=r,nn=c;break;case 0:case 11:case 14:case 15:Ma(2,i,t),Ut||Ma(4,i,t),oa(e,t,i);break;case 1:Ut||(Yn(i,t),r=i.stateNode,typeof r.componentWillUnmount=="function"&&Vf(i,t,r)),oa(e,t,i);break;case 21:oa(e,t,i);break;case 22:Ut=(r=Ut)||i.memoizedState!==null,oa(e,t,i),Ut=r;break;default:oa(e,t,i)}}function Wf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{si(e)}catch(i){ct(t,t.return,i)}}}function ep(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{si(e)}catch(i){ct(t,t.return,i)}}function pj(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ff),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ff),t;default:throw Error(o(435,e.tag))}}function gl(e,t){var i=pj(e);t.forEach(function(r){if(!i.has(r)){i.add(r);var c=Sj.bind(null,e,r);r.then(c,c)}})}function an(e,t){var i=t.deletions;if(i!==null)for(var r=0;r<i.length;r++){var c=i[r],u=e,p=t,b=p;e:for(;b!==null;){switch(b.tag){case 27:if($a(b.type)){wt=b.stateNode,nn=!1;break e}break;case 5:wt=b.stateNode,nn=!1;break e;case 3:case 4:wt=b.stateNode.containerInfo,nn=!0;break e}b=b.return}if(wt===null)throw Error(o(160));Jf(u,p,c),wt=null,nn=!1,u=c.alternate,u!==null&&(u.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)tp(t,e),t=t.sibling}var Bn=null;function tp(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:an(t,e),sn(e),r&4&&(Ma(3,e,e.return),Ki(3,e),Ma(5,e,e.return));break;case 1:an(t,e),sn(e),r&512&&(Ut||i===null||Yn(i,i.return)),r&64&&la&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?r:i.concat(r))));break;case 26:var c=Bn;if(an(t,e),sn(e),r&512&&(Ut||i===null||Yn(i,i.return)),r&4){var u=i!==null?i.memoizedState:null;if(r=e.memoizedState,i===null)if(r===null)if(e.stateNode===null){e:{r=e.type,i=e.memoizedProps,c=c.ownerDocument||c;t:switch(r){case"title":u=c.getElementsByTagName("title")[0],(!u||u[wi]||u[Ht]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=c.createElement(r),c.head.insertBefore(u,c.querySelector("head > title"))),Kt(u,r,i),u[Ht]=e,Yt(u),r=u;break e;case"link":var p=ty("link","href",c).get(r+(i.href||""));if(p){for(var b=0;b<p.length;b++)if(u=p[b],u.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&u.getAttribute("rel")===(i.rel==null?null:i.rel)&&u.getAttribute("title")===(i.title==null?null:i.title)&&u.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){p.splice(b,1);break t}}u=c.createElement(r),Kt(u,r,i),c.head.appendChild(u);break;case"meta":if(p=ty("meta","content",c).get(r+(i.content||""))){for(b=0;b<p.length;b++)if(u=p[b],u.getAttribute("content")===(i.content==null?null:""+i.content)&&u.getAttribute("name")===(i.name==null?null:i.name)&&u.getAttribute("property")===(i.property==null?null:i.property)&&u.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&u.getAttribute("charset")===(i.charSet==null?null:i.charSet)){p.splice(b,1);break t}}u=c.createElement(r),Kt(u,r,i),c.head.appendChild(u);break;default:throw Error(o(468,r))}u[Ht]=e,Yt(u),r=u}e.stateNode=r}else ny(c,e.type,e.stateNode);else e.stateNode=ey(c,r,e.memoizedProps);else u!==r?(u===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):u.count--,r===null?ny(c,e.type,e.stateNode):ey(c,r,e.memoizedProps)):r===null&&e.stateNode!==null&&eu(e,e.memoizedProps,i.memoizedProps)}break;case 27:an(t,e),sn(e),r&512&&(Ut||i===null||Yn(i,i.return)),i!==null&&r&4&&eu(e,e.memoizedProps,i.memoizedProps);break;case 5:if(an(t,e),sn(e),r&512&&(Ut||i===null||Yn(i,i.return)),e.flags&32){c=e.stateNode;try{Cs(c,"")}catch(Ce){ct(e,e.return,Ce)}}r&4&&e.stateNode!=null&&(c=e.memoizedProps,eu(e,c,i!==null?i.memoizedProps:c)),r&1024&&(au=!0);break;case 6:if(an(t,e),sn(e),r&4){if(e.stateNode===null)throw Error(o(162));r=e.memoizedProps,i=e.stateNode;try{i.nodeValue=r}catch(Ce){ct(e,e.return,Ce)}}break;case 3:if(Ll=null,c=Bn,Bn=kl(t.containerInfo),an(t,e),Bn=c,sn(e),r&4&&i!==null&&i.memoizedState.isDehydrated)try{si(t.containerInfo)}catch(Ce){ct(e,e.return,Ce)}au&&(au=!1,np(e));break;case 4:r=Bn,Bn=kl(e.stateNode.containerInfo),an(t,e),sn(e),Bn=r;break;case 12:an(t,e),sn(e);break;case 31:an(t,e),sn(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,gl(e,r)));break;case 13:an(t,e),sn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(bl=Ee()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,gl(e,r)));break;case 22:c=e.memoizedState!==null;var _=i!==null&&i.memoizedState!==null,Y=la,ee=Ut;if(la=Y||c,Ut=ee||_,an(t,e),Ut=ee,la=Y,sn(e),r&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(i===null||_||la||Ut||ds(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){_=i=t;try{if(u=_.stateNode,c)p=u.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{b=_.stateNode;var ie=_.memoizedProps.style,V=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;b.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(Ce){ct(_,_.return,Ce)}}}else if(t.tag===6){if(i===null){_=t;try{_.stateNode.nodeValue=c?"":_.memoizedProps}catch(Ce){ct(_,_.return,Ce)}}}else if(t.tag===18){if(i===null){_=t;try{var X=_.stateNode;c?Vp(X,!0):Vp(_.stateNode,!1)}catch(Ce){ct(_,_.return,Ce)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(i=r.retryQueue,i!==null&&(r.retryQueue=null,gl(e,i))));break;case 19:an(t,e),sn(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,gl(e,r)));break;case 30:break;case 21:break;default:an(t,e),sn(e)}}function sn(e){var t=e.flags;if(t&2){try{for(var i,r=e.return;r!==null;){if(Gf(r)){i=r;break}r=r.return}if(i==null)throw Error(o(160));switch(i.tag){case 27:var c=i.stateNode,u=tu(e);yl(e,u,c);break;case 5:var p=i.stateNode;i.flags&32&&(Cs(p,""),i.flags&=-33);var b=tu(e);yl(e,b,p);break;case 3:case 4:var _=i.stateNode.containerInfo,Y=tu(e);nu(e,Y,_);break;default:throw Error(o(161))}}catch(ee){ct(e,e.return,ee)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function np(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;np(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ca(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Xf(e,t.alternate,t),t=t.sibling}function ds(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ma(4,t,t.return),ds(t);break;case 1:Yn(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&Vf(t,t.return,i),ds(t);break;case 27:sr(t.stateNode);case 26:case 5:Yn(t,t.return),ds(t);break;case 22:t.memoizedState===null&&ds(t);break;case 30:ds(t);break;default:ds(t)}e=e.sibling}}function ua(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,c=e,u=t,p=u.flags;switch(u.tag){case 0:case 11:case 15:ua(c,u,i),Ki(4,u);break;case 1:if(ua(c,u,i),r=u,c=r.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(Y){ct(r,r.return,Y)}if(r=u,c=r.updateQueue,c!==null){var b=r.stateNode;try{var _=c.shared.hiddenCallbacks;if(_!==null)for(c.shared.hiddenCallbacks=null,c=0;c<_.length;c++)Dm(_[c],b)}catch(Y){ct(r,r.return,Y)}}i&&p&64&&Zf(u),Fi(u,u.return);break;case 27:Kf(u);case 26:case 5:ua(c,u,i),i&&r===null&&p&4&&qf(u),Fi(u,u.return);break;case 12:ua(c,u,i);break;case 31:ua(c,u,i),i&&p&4&&Wf(c,u);break;case 13:ua(c,u,i),i&&p&4&&ep(c,u);break;case 22:u.memoizedState===null&&ua(c,u,i),Fi(u,u.return);break;case 30:break;default:ua(c,u,i)}t=t.sibling}}function su(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&zi(i))}function iu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&zi(e))}function Un(e,t,i,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ap(e,t,i,r),t=t.sibling}function ap(e,t,i,r){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Un(e,t,i,r),c&2048&&Ki(9,t);break;case 1:Un(e,t,i,r);break;case 3:Un(e,t,i,r),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&zi(e)));break;case 12:if(c&2048){Un(e,t,i,r),e=t.stateNode;try{var u=t.memoizedProps,p=u.id,b=u.onPostCommit;typeof b=="function"&&b(p,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(_){ct(t,t.return,_)}}else Un(e,t,i,r);break;case 31:Un(e,t,i,r);break;case 13:Un(e,t,i,r);break;case 23:break;case 22:u=t.stateNode,p=t.alternate,t.memoizedState!==null?u._visibility&2?Un(e,t,i,r):Xi(e,t):u._visibility&2?Un(e,t,i,r):(u._visibility|=2,Gs(e,t,i,r,(t.subtreeFlags&10256)!==0||!1)),c&2048&&su(p,t);break;case 24:Un(e,t,i,r),c&2048&&iu(t.alternate,t);break;default:Un(e,t,i,r)}}function Gs(e,t,i,r,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,p=t,b=i,_=r,Y=p.flags;switch(p.tag){case 0:case 11:case 15:Gs(u,p,b,_,c),Ki(8,p);break;case 23:break;case 22:var ee=p.stateNode;p.memoizedState!==null?ee._visibility&2?Gs(u,p,b,_,c):Xi(u,p):(ee._visibility|=2,Gs(u,p,b,_,c)),c&&Y&2048&&su(p.alternate,p);break;case 24:Gs(u,p,b,_,c),c&&Y&2048&&iu(p.alternate,p);break;default:Gs(u,p,b,_,c)}t=t.sibling}}function Xi(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,r=t,c=r.flags;switch(r.tag){case 22:Xi(i,r),c&2048&&su(r.alternate,r);break;case 24:Xi(i,r),c&2048&&iu(r.alternate,r);break;default:Xi(i,r)}t=t.sibling}}var Qi=8192;function Ks(e,t,i){if(e.subtreeFlags&Qi)for(e=e.child;e!==null;)sp(e,t,i),e=e.sibling}function sp(e,t,i){switch(e.tag){case 26:Ks(e,t,i),e.flags&Qi&&e.memoizedState!==null&&t0(i,Bn,e.memoizedState,e.memoizedProps);break;case 5:Ks(e,t,i);break;case 3:case 4:var r=Bn;Bn=kl(e.stateNode.containerInfo),Ks(e,t,i),Bn=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Qi,Qi=16777216,Ks(e,t,i),Qi=r):Ks(e,t,i));break;default:Ks(e,t,i)}}function ip(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ji(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];Zt=r,lp(r,e)}ip(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)rp(e),e=e.sibling}function rp(e){switch(e.tag){case 0:case 11:case 15:Ji(e),e.flags&2048&&Ma(9,e,e.return);break;case 3:Ji(e);break;case 12:Ji(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,vl(e)):Ji(e);break;default:Ji(e)}}function vl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];Zt=r,lp(r,e)}ip(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ma(8,t,t.return),vl(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,vl(t));break;default:vl(t)}e=e.sibling}}function lp(e,t){for(;Zt!==null;){var i=Zt;switch(i.tag){case 0:case 11:case 15:Ma(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var r=i.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:zi(i.memoizedState.cache)}if(r=i.child,r!==null)r.return=i,Zt=r;else e:for(i=e;Zt!==null;){r=Zt;var c=r.sibling,u=r.return;if(Qf(r),r===i){Zt=null;break e}if(c!==null){c.return=u,Zt=c;break e}Zt=u}}}var yj={getCacheForType:function(e){var t=qt(Rt),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return qt(Rt).controller.signal}},gj=typeof WeakMap=="function"?WeakMap:Map,rt=0,pt=null,Fe=null,Qe=0,ot=0,yn=null,ka=!1,Fs=!1,ru=!1,da=0,_t=0,Da=0,hs=0,lu=0,gn=0,Xs=0,Wi=null,rn=null,ou=!1,bl=0,op=0,xl=1/0,jl=null,La=null,It=0,Oa=null,Qs=null,ha=0,cu=0,uu=null,cp=null,er=0,du=null;function vn(){return(rt&2)!==0&&Qe!==0?Qe&-Qe:C.T!==null?gu():jt()}function up(){if(gn===0)if((Qe&536870912)===0||et){var e=Fn;Fn<<=1,(Fn&3932160)===0&&(Fn=262144),gn=e}else gn=536870912;return e=fn.current,e!==null&&(e.flags|=32),gn}function ln(e,t,i){(e===pt&&(ot===2||ot===9)||e.cancelPendingCommit!==null)&&(Js(e,0),za(e,Qe,gn,!1)),Nn(e,i),((rt&2)===0||e!==pt)&&(e===pt&&((rt&2)===0&&(hs|=i),_t===4&&za(e,Qe,gn,!1)),Zn(e))}function dp(e,t,i){if((rt&6)!==0)throw Error(o(327));var r=!i&&(t&127)===0&&(t&e.expiredLanes)===0||oe(e,t),c=r?xj(e,t):mu(e,t,!0),u=r;do{if(c===0){Fs&&!r&&za(e,t,0,!1);break}else{if(i=e.current.alternate,u&&!vj(i)){c=mu(e,t,!1),u=!1;continue}if(c===2){if(u=t,e.errorRecoveryDisabledLanes&u)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){t=p;e:{var b=e;c=Wi;var _=b.current.memoizedState.isDehydrated;if(_&&(Js(b,p).flags|=256),p=mu(b,p,!1),p!==2){if(ru&&!_){b.errorRecoveryDisabledLanes|=u,hs|=u,c=4;break e}u=rn,rn=c,u!==null&&(rn===null?rn=u:rn.push.apply(rn,u))}c=p}if(u=!1,c!==2)continue}}if(c===1){Js(e,0),za(e,t,0,!0);break}e:{switch(r=e,u=c,u){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:za(r,t,gn,!ka);break e;case 2:rn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(c=bl+300-Ee(),10<c)){if(za(r,t,gn,!ka),ga(r,0,!0)!==0)break e;ha=t,r.timeoutHandle=Hp(hp.bind(null,r,i,rn,jl,ou,t,gn,hs,Xs,ka,u,"Throttled",-0,0),c);break e}hp(r,i,rn,jl,ou,t,gn,hs,Xs,ka,u,null,-0,0)}}break}while(!0);Zn(e)}function hp(e,t,i,r,c,u,p,b,_,Y,ee,ie,V,X){if(e.timeoutHandle=-1,ie=t.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qn},sp(t,u,ie);var Ce=(u&62914560)===u?bl-Ee():(u&4194048)===u?op-Ee():0;if(Ce=n0(ie,Ce),Ce!==null){ha=u,e.cancelPendingCommit=Ce(xp.bind(null,e,t,u,i,r,c,p,b,_,ee,ie,null,V,X)),za(e,u,p,!Y);return}}xp(e,t,u,i,r,c,p,b,_)}function vj(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var r=0;r<i.length;r++){var c=i[r],u=c.getSnapshot;c=c.value;try{if(!hn(u(),c))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function za(e,t,i,r){t&=~lu,t&=~hs,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var c=t;0<c;){var u=31-Ke(c),p=1<<u;r[u]=-1,c&=~p}i!==0&&ba(e,i,t)}function wl(){return(rt&6)===0?(tr(0),!1):!0}function hu(){if(Fe!==null){if(ot===0)var e=Fe.return;else e=Fe,ta=as=null,Ac(e),Hs=null,$i=0,e=Fe;for(;e!==null;)Yf(e.alternate,e),e=e.return;Fe=null}}function Js(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Bj(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),ha=0,hu(),pt=e,Fe=i=Wn(e.current,null),Qe=t,ot=0,yn=null,ka=!1,Fs=oe(e,t),ru=!1,Xs=gn=lu=hs=Da=_t=0,rn=Wi=null,ou=!1,(t&8)!==0&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var c=31-Ke(r),u=1<<c;t|=e[c],r&=~u}return da=t,Yr(),i}function mp(e,t){Ve=null,C.H=Vi,t===Is||t===Qr?(t=Am(),ot=3):t===yc?(t=Am(),ot=4):ot=t===Zc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,yn=t,Fe===null&&(_t=1,dl(e,Cn(t,e.current)))}function fp(){var e=fn.current;return e===null?!0:(Qe&4194048)===Qe?kn===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?e===kn:!1}function pp(){var e=C.H;return C.H=Vi,e===null?Vi:e}function yp(){var e=C.A;return C.A=yj,e}function Nl(){_t=4,ka||(Qe&4194048)!==Qe&&fn.current!==null||(Fs=!0),(Da&134217727)===0&&(hs&134217727)===0||pt===null||za(pt,Qe,gn,!1)}function mu(e,t,i){var r=rt;rt|=2;var c=pp(),u=yp();(pt!==e||Qe!==t)&&(jl=null,Js(e,t)),t=!1;var p=_t;e:do try{if(ot!==0&&Fe!==null){var b=Fe,_=yn;switch(ot){case 8:hu(),p=6;break e;case 3:case 2:case 9:case 6:fn.current===null&&(t=!0);var Y=ot;if(ot=0,yn=null,Ws(e,b,_,Y),i&&Fs){p=0;break e}break;default:Y=ot,ot=0,yn=null,Ws(e,b,_,Y)}}bj(),p=_t;break}catch(ee){mp(e,ee)}while(!0);return t&&e.shellSuspendCounter++,ta=as=null,rt=r,C.H=c,C.A=u,Fe===null&&(pt=null,Qe=0,Yr()),p}function bj(){for(;Fe!==null;)gp(Fe)}function xj(e,t){var i=rt;rt|=2;var r=pp(),c=yp();pt!==e||Qe!==t?(jl=null,xl=Ee()+500,Js(e,t)):Fs=oe(e,t);e:do try{if(ot!==0&&Fe!==null){t=Fe;var u=yn;t:switch(ot){case 1:ot=0,yn=null,Ws(e,t,u,1);break;case 2:case 9:if(Tm(u)){ot=0,yn=null,vp(t);break}t=function(){ot!==2&&ot!==9||pt!==e||(ot=7),Zn(e)},u.then(t,t);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:Tm(u)?(ot=0,yn=null,vp(t)):(ot=0,yn=null,Ws(e,t,u,7));break;case 5:var p=null;switch(Fe.tag){case 26:p=Fe.memoizedState;case 5:case 27:var b=Fe;if(p?ay(p):b.stateNode.complete){ot=0,yn=null;var _=b.sibling;if(_!==null)Fe=_;else{var Y=b.return;Y!==null?(Fe=Y,Sl(Y)):Fe=null}break t}}ot=0,yn=null,Ws(e,t,u,5);break;case 6:ot=0,yn=null,Ws(e,t,u,6);break;case 8:hu(),_t=6;break e;default:throw Error(o(462))}}jj();break}catch(ee){mp(e,ee)}while(!0);return ta=as=null,C.H=r,C.A=c,rt=i,Fe!==null?0:(pt=null,Qe=0,Yr(),_t)}function jj(){for(;Fe!==null&&!le();)gp(Fe)}function gp(e){var t=If(e.alternate,e,da);e.memoizedProps=e.pendingProps,t===null?Sl(e):Fe=t}function vp(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=zf(i,t,t.pendingProps,t.type,void 0,Qe);break;case 11:t=zf(i,t,t.pendingProps,t.type.render,t.ref,Qe);break;case 5:Ac(t);default:Yf(i,t),t=Fe=pm(t,da),t=If(i,t,da)}e.memoizedProps=e.pendingProps,t===null?Sl(e):Fe=t}function Ws(e,t,i,r){ta=as=null,Ac(t),Hs=null,$i=0;var c=t.return;try{if(cj(e,c,t,i,Qe)){_t=1,dl(e,Cn(i,e.current)),Fe=null;return}}catch(u){if(c!==null)throw Fe=c,u;_t=1,dl(e,Cn(i,e.current)),Fe=null;return}t.flags&32768?(et||r===1?e=!0:Fs||(Qe&536870912)!==0?e=!1:(ka=e=!0,(r===2||r===9||r===3||r===6)&&(r=fn.current,r!==null&&r.tag===13&&(r.flags|=16384))),bp(t,e)):Sl(t)}function Sl(e){var t=e;do{if((t.flags&32768)!==0){bp(t,ka);return}e=t.return;var i=hj(t.alternate,t,da);if(i!==null){Fe=i;return}if(t=t.sibling,t!==null){Fe=t;return}Fe=t=e}while(t!==null);_t===0&&(_t=5)}function bp(e,t){do{var i=mj(e.alternate,e);if(i!==null){i.flags&=32767,Fe=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){Fe=e;return}Fe=e=i}while(e!==null);_t=6,Fe=null}function xp(e,t,i,r,c,u,p,b,_){e.cancelPendingCommit=null;do El();while(It!==0);if((rt&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(u=t.lanes|t.childLanes,u|=tc,va(e,i,u,p,b,_),e===pt&&(Fe=pt=null,Qe=0),Qs=t,Oa=e,ha=i,cu=u,uu=c,cp=r,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ej(de,function(){return Ep(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||r){r=C.T,C.T=null,c=M.p,M.p=2,p=rt,rt|=4;try{fj(e,t,i)}finally{rt=p,M.p=c,C.T=r}}It=1,jp(),wp(),Np()}}function jp(){if(It===1){It=0;var e=Oa,t=Qs,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=C.T,C.T=null;var r=M.p;M.p=2;var c=rt;rt|=4;try{tp(t,e);var u=Eu,p=rm(e.containerInfo),b=u.focusedElem,_=u.selectionRange;if(p!==b&&b&&b.ownerDocument&&im(b.ownerDocument.documentElement,b)){if(_!==null&&Xo(b)){var Y=_.start,ee=_.end;if(ee===void 0&&(ee=Y),"selectionStart"in b)b.selectionStart=Y,b.selectionEnd=Math.min(ee,b.value.length);else{var ie=b.ownerDocument||document,V=ie&&ie.defaultView||window;if(V.getSelection){var X=V.getSelection(),Ce=b.textContent.length,Re=Math.min(_.start,Ce),ht=_.end===void 0?Re:Math.min(_.end,Ce);!X.extend&&Re>ht&&(p=ht,ht=Re,Re=p);var $=sm(b,Re),O=sm(b,ht);if($&&O&&(X.rangeCount!==1||X.anchorNode!==$.node||X.anchorOffset!==$.offset||X.focusNode!==O.node||X.focusOffset!==O.offset)){var I=ie.createRange();I.setStart($.node,$.offset),X.removeAllRanges(),Re>ht?(X.addRange(I),X.extend(O.node,O.offset)):(I.setEnd(O.node,O.offset),X.addRange(I))}}}}for(ie=[],X=b;X=X.parentNode;)X.nodeType===1&&ie.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ie.length;b++){var ae=ie[b];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}$l=!!Su,Eu=Su=null}finally{rt=c,M.p=r,C.T=i}}e.current=t,It=2}}function wp(){if(It===2){It=0;var e=Oa,t=Qs,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=C.T,C.T=null;var r=M.p;M.p=2;var c=rt;rt|=4;try{Xf(e,t.alternate,t)}finally{rt=c,M.p=r,C.T=i}}It=3}}function Np(){if(It===4||It===3){It=0,Te();var e=Oa,t=Qs,i=ha,r=cp;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?It=5:(It=0,Qs=Oa=null,Sp(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(La=null),De(i),t=t.stateNode,_e&&typeof _e.onCommitFiberRoot=="function")try{_e.onCommitFiberRoot(Ae,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=C.T,c=M.p,M.p=2,C.T=null;try{for(var u=e.onRecoverableError,p=0;p<r.length;p++){var b=r[p];u(b.value,{componentStack:b.stack})}}finally{C.T=t,M.p=c}}(ha&3)!==0&&El(),Zn(e),c=e.pendingLanes,(i&261930)!==0&&(c&42)!==0?e===du?er++:(er=0,du=e):er=0,tr(0)}}function Sp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,zi(t)))}function El(){return jp(),wp(),Np(),Ep()}function Ep(){if(It!==5)return!1;var e=Oa,t=cu;cu=0;var i=De(ha),r=C.T,c=M.p;try{M.p=32>i?32:i,C.T=null,i=uu,uu=null;var u=Oa,p=ha;if(It=0,Qs=Oa=null,ha=0,(rt&6)!==0)throw Error(o(331));var b=rt;if(rt|=4,rp(u.current),ap(u,u.current,p,i),rt=b,tr(0,!1),_e&&typeof _e.onPostCommitFiberRoot=="function")try{_e.onPostCommitFiberRoot(Ae,u)}catch{}return!0}finally{M.p=c,C.T=r,Sp(e,t)}}function Tp(e,t,i){t=Cn(i,t),t=Yc(e.stateNode,t,2),e=Ca(e,t,2),e!==null&&(Nn(e,2),Zn(e))}function ct(e,t,i){if(e.tag===3)Tp(e,e,i);else for(;t!==null;){if(t.tag===3){Tp(t,e,i);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(La===null||!La.has(r))){e=Cn(i,e),i=Cf(2),r=Ca(t,i,2),r!==null&&(Af(i,r,t,e),Nn(r,2),Zn(r));break}}t=t.return}}function fu(e,t,i){var r=e.pingCache;if(r===null){r=e.pingCache=new gj;var c=new Set;r.set(t,c)}else c=r.get(t),c===void 0&&(c=new Set,r.set(t,c));c.has(i)||(ru=!0,c.add(i),e=wj.bind(null,e,t,i),t.then(e,e))}function wj(e,t,i){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,pt===e&&(Qe&i)===i&&(_t===4||_t===3&&(Qe&62914560)===Qe&&300>Ee()-bl?(rt&2)===0&&Js(e,0):lu|=i,Xs===Qe&&(Xs=0)),Zn(e)}function Cp(e,t){t===0&&(t=lt()),e=es(e,t),e!==null&&(Nn(e,t),Zn(e))}function Nj(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Cp(e,i)}function Sj(e,t){var i=0;switch(e.tag){case 31:case 13:var r=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}r!==null&&r.delete(t),Cp(e,i)}function Ej(e,t){return tt(e,t)}var Tl=null,ei=null,pu=!1,Cl=!1,yu=!1,Ra=0;function Zn(e){e!==ei&&e.next===null&&(ei===null?Tl=ei=e:ei=ei.next=e),Cl=!0,pu||(pu=!0,Cj())}function tr(e,t){if(!yu&&Cl){yu=!0;do for(var i=!1,r=Tl;r!==null;){if(e!==0){var c=r.pendingLanes;if(c===0)var u=0;else{var p=r.suspendedLanes,b=r.pingedLanes;u=(1<<31-Ke(42|e)+1)-1,u&=c&~(p&~b),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(i=!0,kp(r,u))}else u=Qe,u=ga(r,r===pt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(u&3)===0||oe(r,u)||(i=!0,kp(r,u));r=r.next}while(i);yu=!1}}function Tj(){Ap()}function Ap(){Cl=pu=!1;var e=0;Ra!==0&&$j()&&(e=Ra);for(var t=Ee(),i=null,r=Tl;r!==null;){var c=r.next,u=_p(r,t);u===0?(r.next=null,i===null?Tl=c:i.next=c,c===null&&(ei=i)):(i=r,(e!==0||(u&3)!==0)&&(Cl=!0)),r=c}It!==0&&It!==5||tr(e),Ra!==0&&(Ra=0)}function _p(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var p=31-Ke(u),b=1<<p,_=c[p];_===-1?((b&i)===0||(b&r)!==0)&&(c[p]=Ue(b,t)):_<=t&&(e.expiredLanes|=b),u&=~b}if(t=pt,i=Qe,i=ga(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,i===0||e===t&&(ot===2||ot===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&nt(r),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||oe(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(r!==null&&nt(r),De(i)){case 2:case 8:i=ft;break;case 32:i=de;break;case 268435456:i=N;break;default:i=de}return r=Mp.bind(null,e),i=tt(i,r),e.callbackPriority=t,e.callbackNode=i,t}return r!==null&&r!==null&&nt(r),e.callbackPriority=2,e.callbackNode=null,2}function Mp(e,t){if(It!==0&&It!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(El()&&e.callbackNode!==i)return null;var r=Qe;return r=ga(e,e===pt?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(dp(e,r,t),_p(e,Ee()),e.callbackNode!=null&&e.callbackNode===i?Mp.bind(null,e):null)}function kp(e,t){if(El())return null;dp(e,t,!0)}function Cj(){Uj(function(){(rt&6)!==0?tt(gt,Tj):Ap()})}function gu(){if(Ra===0){var e=Us;e===0&&(e=jn,jn<<=1,(jn&261888)===0&&(jn=256)),Ra=e}return Ra}function Dp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:zr(""+e)}function Lp(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function Aj(e,t,i,r,c){if(t==="submit"&&i&&i.stateNode===c){var u=Dp((c[Qt]||null).action),p=r.submitter;p&&(t=(t=p[Qt]||null)?Dp(t.formAction):p.getAttribute("formAction"),t!==null&&(u=t,p=null));var b=new Ur("action","action",null,r,c);e.push({event:b,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Ra!==0){var _=p?Lp(c,p):new FormData(c);$c(i,{pending:!0,data:_,method:c.method,action:u},null,_)}}else typeof u=="function"&&(b.preventDefault(),_=p?Lp(c,p):new FormData(c),$c(i,{pending:!0,data:_,method:c.method,action:u},u,_))},currentTarget:c}]})}}for(var vu=0;vu<ec.length;vu++){var bu=ec[vu],_j=bu.toLowerCase(),Mj=bu[0].toUpperCase()+bu.slice(1);$n(_j,"on"+Mj)}$n(cm,"onAnimationEnd"),$n(um,"onAnimationIteration"),$n(dm,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(qx,"onTransitionRun"),$n(Gx,"onTransitionStart"),$n(Kx,"onTransitionCancel"),$n(hm,"onTransitionEnd"),Es("onMouseEnter",["mouseout","mouseover"]),Es("onMouseLeave",["mouseout","mouseover"]),Es("onPointerEnter",["pointerout","pointerover"]),Es("onPointerLeave",["pointerout","pointerover"]),Xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nr));function Op(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var r=e[i],c=r.event;r=r.listeners;e:{var u=void 0;if(t)for(var p=r.length-1;0<=p;p--){var b=r[p],_=b.instance,Y=b.currentTarget;if(b=b.listener,_!==u&&c.isPropagationStopped())break e;u=b,c.currentTarget=Y;try{u(c)}catch(ee){Hr(ee)}c.currentTarget=null,u=_}else for(p=0;p<r.length;p++){if(b=r[p],_=b.instance,Y=b.currentTarget,b=b.listener,_!==u&&c.isPropagationStopped())break e;u=b,c.currentTarget=Y;try{u(c)}catch(ee){Hr(ee)}c.currentTarget=null,u=_}}}}function Xe(e,t){var i=t[ji];i===void 0&&(i=t[ji]=new Set);var r=e+"__bubble";i.has(r)||(zp(t,e,2,!1),i.add(r))}function xu(e,t,i){var r=0;t&&(r|=4),zp(i,e,r,t)}var Al="_reactListening"+Math.random().toString(36).slice(2);function ju(e){if(!e[Al]){e[Al]=!0,Ch.forEach(function(i){i!=="selectionchange"&&(kj.has(i)||xu(i,!1,e),xu(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Al]||(t[Al]=!0,xu("selectionchange",!1,t))}}function zp(e,t,i,r){switch(uy(t)){case 2:var c=i0;break;case 8:c=r0;break;default:c=Ru}i=c.bind(null,t,i,e),c=void 0,!Io||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),r?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function wu(e,t,i,r,c){var u=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var p=r.tag;if(p===3||p===4){var b=r.stateNode.containerInfo;if(b===c)break;if(p===4)for(p=r.return;p!==null;){var _=p.tag;if((_===3||_===4)&&p.stateNode.containerInfo===c)return;p=p.return}for(;b!==null;){if(p=ws(b),p===null)return;if(_=p.tag,_===5||_===6||_===26||_===27){r=u=p;continue e}b=b.parentNode}}r=r.return}Uh(function(){var Y=u,ee=Uo(i),ie=[];e:{var V=mm.get(e);if(V!==void 0){var X=Ur,Ce=e;switch(e){case"keypress":if($r(i)===0)break e;case"keydown":case"keyup":X=Sx;break;case"focusin":Ce="focus",X=Vo;break;case"focusout":Ce="blur",X=Vo;break;case"beforeblur":case"afterblur":X=Vo;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Hh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=hx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=Cx;break;case cm:case um:case dm:X=px;break;case hm:X=_x;break;case"scroll":case"scrollend":X=ux;break;case"wheel":X=kx;break;case"copy":case"cut":case"paste":X=gx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Zh;break;case"toggle":case"beforetoggle":X=Lx}var Re=(t&4)!==0,ht=!Re&&(e==="scroll"||e==="scrollend"),$=Re?V!==null?V+"Capture":null:V;Re=[];for(var O=Y,I;O!==null;){var ae=O;if(I=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||I===null||$===null||(ae=Si(O,$),ae!=null&&Re.push(ar(O,ae,I))),ht)break;O=O.return}0<Re.length&&(V=new X(V,Ce,null,i,ee),ie.push({event:V,listeners:Re}))}}if((t&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",V&&i!==Bo&&(Ce=i.relatedTarget||i.fromElement)&&(ws(Ce)||Ce[en]))break e;if((X||V)&&(V=ee.window===ee?ee:(V=ee.ownerDocument)?V.defaultView||V.parentWindow:window,X?(Ce=i.relatedTarget||i.toElement,X=Y,Ce=Ce?ws(Ce):null,Ce!==null&&(ht=h(Ce),Re=Ce.tag,Ce!==ht||Re!==5&&Re!==27&&Re!==6)&&(Ce=null)):(X=null,Ce=Y),X!==Ce)){if(Re=Hh,ae="onMouseLeave",$="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(Re=Zh,ae="onPointerLeave",$="onPointerEnter",O="pointer"),ht=X==null?V:Ni(X),I=Ce==null?V:Ni(Ce),V=new Re(ae,O+"leave",X,i,ee),V.target=ht,V.relatedTarget=I,ae=null,ws(ee)===Y&&(Re=new Re($,O+"enter",Ce,i,ee),Re.target=I,Re.relatedTarget=ht,ae=Re),ht=ae,X&&Ce)t:{for(Re=Dj,$=X,O=Ce,I=0,ae=$;ae;ae=Re(ae))I++;ae=0;for(var Le=O;Le;Le=Re(Le))ae++;for(;0<I-ae;)$=Re($),I--;for(;0<ae-I;)O=Re(O),ae--;for(;I--;){if($===O||O!==null&&$===O.alternate){Re=$;break t}$=Re($),O=Re(O)}Re=null}else Re=null;X!==null&&Rp(ie,V,X,Re,!1),Ce!==null&&ht!==null&&Rp(ie,ht,Ce,Re,!0)}}e:{if(V=Y?Ni(Y):window,X=V.nodeName&&V.nodeName.toLowerCase(),X==="select"||X==="input"&&V.type==="file")var at=Jh;else if(Xh(V))if(Wh)at=Yx;else{at=Ix;var Me=Px}else X=V.nodeName,!X||X.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?Y&&$o(Y.elementType)&&(at=Jh):at=Hx;if(at&&(at=at(e,Y))){Qh(ie,at,i,ee);break e}Me&&Me(e,V,Y),e==="focusout"&&Y&&V.type==="number"&&Y.memoizedProps.value!=null&&Ro(V,"number",V.value)}switch(Me=Y?Ni(Y):window,e){case"focusin":(Xh(Me)||Me.contentEditable==="true")&&(ks=Me,Qo=Y,Di=null);break;case"focusout":Di=Qo=ks=null;break;case"mousedown":Jo=!0;break;case"contextmenu":case"mouseup":case"dragend":Jo=!1,lm(ie,i,ee);break;case"selectionchange":if(Vx)break;case"keydown":case"keyup":lm(ie,i,ee)}var qe;if(Go)e:{switch(e){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else Ms?Kh(e,i)&&(Je="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Je="onCompositionStart");Je&&(Vh&&i.locale!=="ko"&&(Ms||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&Ms&&(qe=Ph()):(xa=ee,Ho="value"in xa?xa.value:xa.textContent,Ms=!0)),Me=_l(Y,Je),0<Me.length&&(Je=new Yh(Je,e,null,i,ee),ie.push({event:Je,listeners:Me}),qe?Je.data=qe:(qe=Fh(i),qe!==null&&(Je.data=qe)))),(qe=zx?Rx(e,i):$x(e,i))&&(Je=_l(Y,"onBeforeInput"),0<Je.length&&(Me=new Yh("onBeforeInput","beforeinput",null,i,ee),ie.push({event:Me,listeners:Je}),Me.data=qe)),Aj(ie,e,Y,i,ee)}Op(ie,t)})}function ar(e,t,i){return{instance:e,listener:t,currentTarget:i}}function _l(e,t){for(var i=t+"Capture",r=[];e!==null;){var c=e,u=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||u===null||(c=Si(e,i),c!=null&&r.unshift(ar(e,c,u)),c=Si(e,t),c!=null&&r.push(ar(e,c,u))),e.tag===3)return r;e=e.return}return[]}function Dj(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Rp(e,t,i,r,c){for(var u=t._reactName,p=[];i!==null&&i!==r;){var b=i,_=b.alternate,Y=b.stateNode;if(b=b.tag,_!==null&&_===r)break;b!==5&&b!==26&&b!==27||Y===null||(_=Y,c?(Y=Si(i,u),Y!=null&&p.unshift(ar(i,Y,_))):c||(Y=Si(i,u),Y!=null&&p.push(ar(i,Y,_)))),i=i.return}p.length!==0&&e.push({event:t,listeners:p})}var Lj=/\r\n?/g,Oj=/\u0000|\uFFFD/g;function $p(e){return(typeof e=="string"?e:""+e).replace(Lj,`
`).replace(Oj,"")}function Bp(e,t){return t=$p(t),$p(e)===t}function dt(e,t,i,r,c,u){switch(i){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||Cs(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&Cs(e,""+r);break;case"className":Lr(e,"class",r);break;case"tabIndex":Lr(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Lr(e,i,r);break;case"style":$h(e,r,u);break;case"data":if(t!=="object"){Lr(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(i);break}r=zr(""+r),e.setAttribute(i,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(i==="formAction"?(t!=="input"&&dt(e,t,"name",c.name,c,null),dt(e,t,"formEncType",c.formEncType,c,null),dt(e,t,"formMethod",c.formMethod,c,null),dt(e,t,"formTarget",c.formTarget,c,null)):(dt(e,t,"encType",c.encType,c,null),dt(e,t,"method",c.method,c,null),dt(e,t,"target",c.target,c,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(i);break}r=zr(""+r),e.setAttribute(i,r);break;case"onClick":r!=null&&(e.onclick=Qn);break;case"onScroll":r!=null&&Xe("scroll",e);break;case"onScrollEnd":r!=null&&Xe("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(o(61));if(i=r.__html,i!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}i=zr(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,""+r):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":r===!0?e.setAttribute(i,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,r):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(i,r):e.removeAttribute(i);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(i):e.setAttribute(i,r);break;case"popover":Xe("beforetoggle",e),Xe("toggle",e),Dr(e,"popover",r);break;case"xlinkActuate":Xn(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Xn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Xn(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Xn(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Xn(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Xn(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Xn(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Xn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Xn(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Dr(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=ox.get(i)||i,Dr(e,i,r))}}function Nu(e,t,i,r,c,u){switch(i){case"style":$h(e,r,u);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(o(61));if(i=r.__html,i!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"children":typeof r=="string"?Cs(e,r):(typeof r=="number"||typeof r=="bigint")&&Cs(e,""+r);break;case"onScroll":r!=null&&Xe("scroll",e);break;case"onScrollEnd":r!=null&&Xe("scrollend",e);break;case"onClick":r!=null&&(e.onclick=Qn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ah.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(c=i.endsWith("Capture"),t=i.slice(2,c?i.length-7:void 0),u=e[Qt]||null,u=u!=null?u[i]:null,typeof u=="function"&&e.removeEventListener(t,u,c),typeof r=="function")){typeof u!="function"&&u!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,r,c);break e}i in e?e[i]=r:r===!0?e.setAttribute(i,""):Dr(e,i,r)}}}function Kt(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",e),Xe("load",e);var r=!1,c=!1,u;for(u in i)if(i.hasOwnProperty(u)){var p=i[u];if(p!=null)switch(u){case"src":r=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:dt(e,t,u,p,i,null)}}c&&dt(e,t,"srcSet",i.srcSet,i,null),r&&dt(e,t,"src",i.src,i,null);return;case"input":Xe("invalid",e);var b=u=p=c=null,_=null,Y=null;for(r in i)if(i.hasOwnProperty(r)){var ee=i[r];if(ee!=null)switch(r){case"name":c=ee;break;case"type":p=ee;break;case"checked":_=ee;break;case"defaultChecked":Y=ee;break;case"value":u=ee;break;case"defaultValue":b=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(o(137,t));break;default:dt(e,t,r,ee,i,null)}}Lh(e,u,b,_,Y,p,c,!1);return;case"select":Xe("invalid",e),r=p=u=null;for(c in i)if(i.hasOwnProperty(c)&&(b=i[c],b!=null))switch(c){case"value":u=b;break;case"defaultValue":p=b;break;case"multiple":r=b;default:dt(e,t,c,b,i,null)}t=u,i=p,e.multiple=!!r,t!=null?Ts(e,!!r,t,!1):i!=null&&Ts(e,!!r,i,!0);return;case"textarea":Xe("invalid",e),u=c=r=null;for(p in i)if(i.hasOwnProperty(p)&&(b=i[p],b!=null))switch(p){case"value":r=b;break;case"defaultValue":c=b;break;case"children":u=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(o(91));break;default:dt(e,t,p,b,i,null)}zh(e,r,c,u);return;case"option":for(_ in i)if(i.hasOwnProperty(_)&&(r=i[_],r!=null))switch(_){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:dt(e,t,_,r,i,null)}return;case"dialog":Xe("beforetoggle",e),Xe("toggle",e),Xe("cancel",e),Xe("close",e);break;case"iframe":case"object":Xe("load",e);break;case"video":case"audio":for(r=0;r<nr.length;r++)Xe(nr[r],e);break;case"image":Xe("error",e),Xe("load",e);break;case"details":Xe("toggle",e);break;case"embed":case"source":case"link":Xe("error",e),Xe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in i)if(i.hasOwnProperty(Y)&&(r=i[Y],r!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:dt(e,t,Y,r,i,null)}return;default:if($o(t)){for(ee in i)i.hasOwnProperty(ee)&&(r=i[ee],r!==void 0&&Nu(e,t,ee,r,i,void 0));return}}for(b in i)i.hasOwnProperty(b)&&(r=i[b],r!=null&&dt(e,t,b,r,i,null))}function zj(e,t,i,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,u=null,p=null,b=null,_=null,Y=null,ee=null;for(X in i){var ie=i[X];if(i.hasOwnProperty(X)&&ie!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":_=ie;default:r.hasOwnProperty(X)||dt(e,t,X,null,r,ie)}}for(var V in r){var X=r[V];if(ie=i[V],r.hasOwnProperty(V)&&(X!=null||ie!=null))switch(V){case"type":u=X;break;case"name":c=X;break;case"checked":Y=X;break;case"defaultChecked":ee=X;break;case"value":p=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(o(137,t));break;default:X!==ie&&dt(e,t,V,X,r,ie)}}zo(e,p,b,_,Y,ee,u,c);return;case"select":X=p=b=V=null;for(u in i)if(_=i[u],i.hasOwnProperty(u)&&_!=null)switch(u){case"value":break;case"multiple":X=_;default:r.hasOwnProperty(u)||dt(e,t,u,null,r,_)}for(c in r)if(u=r[c],_=i[c],r.hasOwnProperty(c)&&(u!=null||_!=null))switch(c){case"value":V=u;break;case"defaultValue":b=u;break;case"multiple":p=u;default:u!==_&&dt(e,t,c,u,r,_)}t=b,i=p,r=X,V!=null?Ts(e,!!i,V,!1):!!r!=!!i&&(t!=null?Ts(e,!!i,t,!0):Ts(e,!!i,i?[]:"",!1));return;case"textarea":X=V=null;for(b in i)if(c=i[b],i.hasOwnProperty(b)&&c!=null&&!r.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:dt(e,t,b,null,r,c)}for(p in r)if(c=r[p],u=i[p],r.hasOwnProperty(p)&&(c!=null||u!=null))switch(p){case"value":V=c;break;case"defaultValue":X=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(o(91));break;default:c!==u&&dt(e,t,p,c,r,u)}Oh(e,V,X);return;case"option":for(var Ce in i)if(V=i[Ce],i.hasOwnProperty(Ce)&&V!=null&&!r.hasOwnProperty(Ce))switch(Ce){case"selected":e.selected=!1;break;default:dt(e,t,Ce,null,r,V)}for(_ in r)if(V=r[_],X=i[_],r.hasOwnProperty(_)&&V!==X&&(V!=null||X!=null))switch(_){case"selected":e.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:dt(e,t,_,V,r,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in i)V=i[Re],i.hasOwnProperty(Re)&&V!=null&&!r.hasOwnProperty(Re)&&dt(e,t,Re,null,r,V);for(Y in r)if(V=r[Y],X=i[Y],r.hasOwnProperty(Y)&&V!==X&&(V!=null||X!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(137,t));break;default:dt(e,t,Y,V,r,X)}return;default:if($o(t)){for(var ht in i)V=i[ht],i.hasOwnProperty(ht)&&V!==void 0&&!r.hasOwnProperty(ht)&&Nu(e,t,ht,void 0,r,V);for(ee in r)V=r[ee],X=i[ee],!r.hasOwnProperty(ee)||V===X||V===void 0&&X===void 0||Nu(e,t,ee,V,r,X);return}}for(var $ in i)V=i[$],i.hasOwnProperty($)&&V!=null&&!r.hasOwnProperty($)&&dt(e,t,$,null,r,V);for(ie in r)V=r[ie],X=i[ie],!r.hasOwnProperty(ie)||V===X||V==null&&X==null||dt(e,t,ie,V,r,X)}function Up(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Rj(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),r=0;r<i.length;r++){var c=i[r],u=c.transferSize,p=c.initiatorType,b=c.duration;if(u&&b&&Up(p)){for(p=0,b=c.responseEnd,r+=1;r<i.length;r++){var _=i[r],Y=_.startTime;if(Y>b)break;var ee=_.transferSize,ie=_.initiatorType;ee&&Up(ie)&&(_=_.responseEnd,p+=ee*(_<b?1:(b-Y)/(_-Y)))}if(--r,t+=8*(u+p)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Su=null,Eu=null;function Ml(e){return e.nodeType===9?e:e.ownerDocument}function Pp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ip(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Tu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Cu=null;function $j(){var e=window.event;return e&&e.type==="popstate"?e===Cu?!1:(Cu=e,!0):(Cu=null,!1)}var Hp=typeof setTimeout=="function"?setTimeout:void 0,Bj=typeof clearTimeout=="function"?clearTimeout:void 0,Yp=typeof Promise=="function"?Promise:void 0,Uj=typeof queueMicrotask=="function"?queueMicrotask:typeof Yp<"u"?function(e){return Yp.resolve(null).then(e).catch(Pj)}:Hp;function Pj(e){setTimeout(function(){throw e})}function $a(e){return e==="head"}function Zp(e,t){var i=t,r=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"||i==="/&"){if(r===0){e.removeChild(c),si(t);return}r--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")r++;else if(i==="html")sr(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,sr(i);for(var u=i.firstChild;u;){var p=u.nextSibling,b=u.nodeName;u[wi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&u.rel.toLowerCase()==="stylesheet"||i.removeChild(u),u=p}}else i==="body"&&sr(e.ownerDocument.body);i=c}while(i);si(t)}function Vp(e,t){var i=e;e=0;do{var r=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),r&&r.nodeType===8)if(i=r.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=r}while(i)}function Au(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Au(i),Lo(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Ij(e,t,i,r){for(;e.nodeType===1;){var c=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[wi])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Dn(e.nextSibling),e===null)break}return null}function Hj(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Dn(e.nextSibling),e===null))return null;return e}function qp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Dn(e.nextSibling),e===null))return null;return e}function _u(e){return e.data==="$?"||e.data==="$~"}function Mu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Yj(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var r=function(){t(),i.removeEventListener("DOMContentLoaded",r)};i.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function Dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var ku=null;function Gp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return Dn(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function Kp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function Fp(e,t,i){switch(t=Ml(i),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function sr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Lo(e)}var Ln=new Map,Xp=new Set;function kl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ma=M.d;M.d={f:Zj,r:Vj,D:qj,C:Gj,L:Kj,m:Fj,X:Qj,S:Xj,M:Jj};function Zj(){var e=ma.f(),t=wl();return e||t}function Vj(e){var t=Ns(e);t!==null&&t.tag===5&&t.type==="form"?mf(t):ma.r(e)}var ti=typeof document>"u"?null:document;function Qp(e,t,i){var r=ti;if(r&&typeof t=="string"&&t){var c=En(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof i=="string"&&(c+='[crossorigin="'+i+'"]'),Xp.has(c)||(Xp.add(c),e={rel:e,crossOrigin:i,href:t},r.querySelector(c)===null&&(t=r.createElement("link"),Kt(t,"link",e),Yt(t),r.head.appendChild(t)))}}function qj(e){ma.D(e),Qp("dns-prefetch",e,null)}function Gj(e,t){ma.C(e,t),Qp("preconnect",e,t)}function Kj(e,t,i){ma.L(e,t,i);var r=ti;if(r&&e&&t){var c='link[rel="preload"][as="'+En(t)+'"]';t==="image"&&i&&i.imageSrcSet?(c+='[imagesrcset="'+En(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(c+='[imagesizes="'+En(i.imageSizes)+'"]')):c+='[href="'+En(e)+'"]';var u=c;switch(t){case"style":u=ni(e);break;case"script":u=ai(e)}Ln.has(u)||(e=j({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),Ln.set(u,e),r.querySelector(c)!==null||t==="style"&&r.querySelector(ir(u))||t==="script"&&r.querySelector(rr(u))||(t=r.createElement("link"),Kt(t,"link",e),Yt(t),r.head.appendChild(t)))}}function Fj(e,t){ma.m(e,t);var i=ti;if(i&&e){var r=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+En(r)+'"][href="'+En(e)+'"]',u=c;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=ai(e)}if(!Ln.has(u)&&(e=j({rel:"modulepreload",href:e},t),Ln.set(u,e),i.querySelector(c)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(rr(u)))return}r=i.createElement("link"),Kt(r,"link",e),Yt(r),i.head.appendChild(r)}}}function Xj(e,t,i){ma.S(e,t,i);var r=ti;if(r&&e){var c=Ss(r).hoistableStyles,u=ni(e);t=t||"default";var p=c.get(u);if(!p){var b={loading:0,preload:null};if(p=r.querySelector(ir(u)))b.loading=5;else{e=j({rel:"stylesheet",href:e,"data-precedence":t},i),(i=Ln.get(u))&&Du(e,i);var _=p=r.createElement("link");Yt(_),Kt(_,"link",e),_._p=new Promise(function(Y,ee){_.onload=Y,_.onerror=ee}),_.addEventListener("load",function(){b.loading|=1}),_.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Dl(p,t,r)}p={type:"stylesheet",instance:p,count:1,state:b},c.set(u,p)}}}function Qj(e,t){ma.X(e,t);var i=ti;if(i&&e){var r=Ss(i).hoistableScripts,c=ai(e),u=r.get(c);u||(u=i.querySelector(rr(c)),u||(e=j({src:e,async:!0},t),(t=Ln.get(c))&&Lu(e,t),u=i.createElement("script"),Yt(u),Kt(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},r.set(c,u))}}function Jj(e,t){ma.M(e,t);var i=ti;if(i&&e){var r=Ss(i).hoistableScripts,c=ai(e),u=r.get(c);u||(u=i.querySelector(rr(c)),u||(e=j({src:e,async:!0,type:"module"},t),(t=Ln.get(c))&&Lu(e,t),u=i.createElement("script"),Yt(u),Kt(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},r.set(c,u))}}function Jp(e,t,i,r){var c=(c=ve.current)?kl(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=ni(i.href),i=Ss(c).hoistableStyles,r=i.get(t),r||(r={type:"style",instance:null,count:0,state:null},i.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=ni(i.href);var u=Ss(c).hoistableStyles,p=u.get(e);if(p||(c=c.ownerDocument||c,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,p),(u=c.querySelector(ir(e)))&&!u._p&&(p.instance=u,p.state.loading=5),Ln.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Ln.set(e,i),u||Wj(c,e,i,p.state))),t&&r===null)throw Error(o(528,""));return p}if(t&&r!==null)throw Error(o(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ai(i),i=Ss(c).hoistableScripts,r=i.get(t),r||(r={type:"script",instance:null,count:0,state:null},i.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function ni(e){return'href="'+En(e)+'"'}function ir(e){return'link[rel="stylesheet"]['+e+"]"}function Wp(e){return j({},e,{"data-precedence":e.precedence,precedence:null})}function Wj(e,t,i,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),Kt(t,"link",i),Yt(t),e.head.appendChild(t))}function ai(e){return'[src="'+En(e)+'"]'}function rr(e){return"script[async]"+e}function ey(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+En(i.href)+'"]');if(r)return t.instance=r,Yt(r),r;var c=j({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),Yt(r),Kt(r,"style",c),Dl(r,i.precedence,e),t.instance=r;case"stylesheet":c=ni(i.href);var u=e.querySelector(ir(c));if(u)return t.state.loading|=4,t.instance=u,Yt(u),u;r=Wp(i),(c=Ln.get(c))&&Du(r,c),u=(e.ownerDocument||e).createElement("link"),Yt(u);var p=u;return p._p=new Promise(function(b,_){p.onload=b,p.onerror=_}),Kt(u,"link",r),t.state.loading|=4,Dl(u,i.precedence,e),t.instance=u;case"script":return u=ai(i.src),(c=e.querySelector(rr(u)))?(t.instance=c,Yt(c),c):(r=i,(c=Ln.get(u))&&(r=j({},i),Lu(r,c)),e=e.ownerDocument||e,c=e.createElement("script"),Yt(c),Kt(c,"link",r),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(r=t.instance,t.state.loading|=4,Dl(r,i.precedence,e));return t.instance}function Dl(e,t,i){for(var r=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=r.length?r[r.length-1]:null,u=c,p=0;p<r.length;p++){var b=r[p];if(b.dataset.precedence===t)u=b;else if(u!==c)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Du(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Lu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ll=null;function ty(e,t,i){if(Ll===null){var r=new Map,c=Ll=new Map;c.set(i,r)}else c=Ll,r=c.get(i),r||(r=new Map,c.set(i,r));if(r.has(e))return r;for(r.set(e,null),i=i.getElementsByTagName(e),c=0;c<i.length;c++){var u=i[c];if(!(u[wi]||u[Ht]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var p=u.getAttribute(t)||"";p=e+p;var b=r.get(p);b?b.push(u):r.set(p,[u])}}return r}function ny(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function e0(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function ay(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function t0(e,t,i,r){if(i.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var c=ni(r.href),u=t.querySelector(ir(c));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ol.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=u,Yt(u);return}u=t.ownerDocument||t,r=Wp(r),(c=Ln.get(c))&&Du(r,c),u=u.createElement("link"),Yt(u);var p=u;p._p=new Promise(function(b,_){p.onload=b,p.onerror=_}),Kt(u,"link",r),i.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Ol.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var Ou=0;function n0(e,t){return e.stylesheets&&e.count===0&&Rl(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var r=setTimeout(function(){if(e.stylesheets&&Rl(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Ou===0&&(Ou=62500*Rj());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Rl(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Ou?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(c)}}:null}function Ol(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var zl=null;function Rl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,zl=new Map,t.forEach(a0,e),zl=null,Ol.call(e))}function a0(e,t){if(!(t.state.loading&4)){var i=zl.get(e);if(i)var r=i.get(null);else{i=new Map,zl.set(e,i);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<c.length;u++){var p=c[u];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(i.set(p.dataset.precedence,p),r=p)}r&&i.set(null,r)}c=t.instance,p=c.getAttribute("data-precedence"),u=i.get(p)||r,u===r&&i.set(null,c),i.set(p,c),this.count++,r=Ol.bind(this),c.addEventListener("load",r),c.addEventListener("error",r),u?u.parentNode.insertBefore(c,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var lr={$$typeof:B,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function s0(e,t,i,r,c,u,p,b,_){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xt(0),this.hiddenUpdates=Xt(null),this.identifierPrefix=r,this.onUncaughtError=c,this.onCaughtError=u,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function sy(e,t,i,r,c,u,p,b,_,Y,ee,ie){return e=new s0(e,t,i,p,_,Y,ee,ie,b),t=1,u===!0&&(t|=24),u=mn(3,null,null,t),e.current=u,u.stateNode=e,t=mc(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:r,isDehydrated:i,cache:t},gc(u),e}function iy(e){return e?(e=Os,e):Os}function ry(e,t,i,r,c,u){c=iy(c),r.context===null?r.context=c:r.pendingContext=c,r=Ta(t),r.payload={element:i},u=u===void 0?null:u,u!==null&&(r.callback=u),i=Ca(e,r,t),i!==null&&(ln(i,e,t),Ui(i,e,t))}function ly(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function zu(e,t){ly(e,t),(e=e.alternate)&&ly(e,t)}function oy(e){if(e.tag===13||e.tag===31){var t=es(e,67108864);t!==null&&ln(t,e,67108864),zu(e,67108864)}}function cy(e){if(e.tag===13||e.tag===31){var t=vn();t=ge(t);var i=es(e,t);i!==null&&ln(i,e,t),zu(e,t)}}var $l=!0;function i0(e,t,i,r){var c=C.T;C.T=null;var u=M.p;try{M.p=2,Ru(e,t,i,r)}finally{M.p=u,C.T=c}}function r0(e,t,i,r){var c=C.T;C.T=null;var u=M.p;try{M.p=8,Ru(e,t,i,r)}finally{M.p=u,C.T=c}}function Ru(e,t,i,r){if($l){var c=$u(r);if(c===null)wu(e,t,r,Bl,i),dy(e,r);else if(o0(c,e,t,i,r))r.stopPropagation();else if(dy(e,r),t&4&&-1<l0.indexOf(e)){for(;c!==null;){var u=Ns(c);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var p=wn(u.pendingLanes);if(p!==0){var b=u;for(b.pendingLanes|=2,b.entangledLanes|=2;p;){var _=1<<31-Ke(p);b.entanglements[1]|=_,p&=~_}Zn(u),(rt&6)===0&&(xl=Ee()+500,tr(0))}}break;case 31:case 13:b=es(u,2),b!==null&&ln(b,u,2),wl(),zu(u,2)}if(u=$u(r),u===null&&wu(e,t,r,Bl,i),u===c)break;c=u}c!==null&&r.stopPropagation()}else wu(e,t,r,null,i)}}function $u(e){return e=Uo(e),Bu(e)}var Bl=null;function Bu(e){if(Bl=null,e=ws(e),e!==null){var t=h(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=m(t),e!==null)return e;e=null}else if(i===31){if(e=g(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Bl=e,null}function uy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mt()){case gt:return 2;case ft:return 8;case de:case ze:return 32;case N:return 268435456;default:return 32}default:return 32}}var Uu=!1,Ba=null,Ua=null,Pa=null,or=new Map,cr=new Map,Ia=[],l0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dy(e,t){switch(e){case"focusin":case"focusout":Ba=null;break;case"dragenter":case"dragleave":Ua=null;break;case"mouseover":case"mouseout":Pa=null;break;case"pointerover":case"pointerout":or.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cr.delete(t.pointerId)}}function ur(e,t,i,r,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:i,eventSystemFlags:r,nativeEvent:u,targetContainers:[c]},t!==null&&(t=Ns(t),t!==null&&oy(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function o0(e,t,i,r,c){switch(t){case"focusin":return Ba=ur(Ba,e,t,i,r,c),!0;case"dragenter":return Ua=ur(Ua,e,t,i,r,c),!0;case"mouseover":return Pa=ur(Pa,e,t,i,r,c),!0;case"pointerover":var u=c.pointerId;return or.set(u,ur(or.get(u)||null,e,t,i,r,c)),!0;case"gotpointercapture":return u=c.pointerId,cr.set(u,ur(cr.get(u)||null,e,t,i,r,c)),!0}return!1}function hy(e){var t=ws(e.target);if(t!==null){var i=h(t);if(i!==null){if(t=i.tag,t===13){if(t=m(i),t!==null){e.blockedOn=t,Rn(e.priority,function(){cy(i)});return}}else if(t===31){if(t=g(i),t!==null){e.blockedOn=t,Rn(e.priority,function(){cy(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ul(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=$u(e.nativeEvent);if(i===null){i=e.nativeEvent;var r=new i.constructor(i.type,i);Bo=r,i.target.dispatchEvent(r),Bo=null}else return t=Ns(i),t!==null&&oy(t),e.blockedOn=i,!1;t.shift()}return!0}function my(e,t,i){Ul(e)&&i.delete(t)}function c0(){Uu=!1,Ba!==null&&Ul(Ba)&&(Ba=null),Ua!==null&&Ul(Ua)&&(Ua=null),Pa!==null&&Ul(Pa)&&(Pa=null),or.forEach(my),cr.forEach(my)}function Pl(e,t){e.blockedOn===t&&(e.blockedOn=null,Uu||(Uu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,c0)))}var Il=null;function fy(e){Il!==e&&(Il=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Il===e&&(Il=null);for(var t=0;t<e.length;t+=3){var i=e[t],r=e[t+1],c=e[t+2];if(typeof r!="function"){if(Bu(r||i)===null)continue;break}var u=Ns(i);u!==null&&(e.splice(t,3),t-=3,$c(u,{pending:!0,data:c,method:i.method,action:r},r,c))}}))}function si(e){function t(_){return Pl(_,e)}Ba!==null&&Pl(Ba,e),Ua!==null&&Pl(Ua,e),Pa!==null&&Pl(Pa,e),or.forEach(t),cr.forEach(t);for(var i=0;i<Ia.length;i++){var r=Ia[i];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Ia.length&&(i=Ia[0],i.blockedOn===null);)hy(i),i.blockedOn===null&&Ia.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(r=0;r<i.length;r+=3){var c=i[r],u=i[r+1],p=c[Qt]||null;if(typeof u=="function")p||fy(i);else if(p){var b=null;if(u&&u.hasAttribute("formAction")){if(c=u,p=u[Qt]||null)b=p.formAction;else if(Bu(c)!==null)continue}else b=p.action;typeof b=="function"?i[r+1]=b:(i.splice(r,3),r-=3),fy(i)}}}function py(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(p){return c=p})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),r||setTimeout(i,20)}function i(){if(!r&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function Pu(e){this._internalRoot=e}Hl.prototype.render=Pu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var i=t.current,r=vn();ry(i,r,e,t,null,null)},Hl.prototype.unmount=Pu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ry(e.current,2,null,e,null,null),wl(),t[en]=null}};function Hl(e){this._internalRoot=e}Hl.prototype.unstable_scheduleHydration=function(e){if(e){var t=jt();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Ia.length&&t!==0&&t<Ia[i].priority;i++);Ia.splice(i,0,e),i===0&&hy(e)}};var yy=s.version;if(yy!=="19.2.1")throw Error(o(527,yy,"19.2.1"));M.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=y(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var u0={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:C,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yl.isDisabled&&Yl.supportsFiber)try{Ae=Yl.inject(u0),_e=Yl}catch{}}return hr.createRoot=function(e,t){if(!d(e))throw Error(o(299));var i=!1,r="",c=Nf,u=Sf,p=Ef;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(p=t.onRecoverableError)),t=sy(e,1,!1,null,null,i,r,null,c,u,p,py),e[en]=t.current,ju(e),new Pu(t)},hr.hydrateRoot=function(e,t,i){if(!d(e))throw Error(o(299));var r=!1,c="",u=Nf,p=Sf,b=Ef,_=null;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(u=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError),i.formState!==void 0&&(_=i.formState)),t=sy(e,1,!0,t,i??null,r,c,_,u,p,b,py),t.context=iy(null),i=t.current,r=vn(),r=ge(r),c=Ta(r),c.callback=null,Ca(i,c,r),i=r,t.current.lanes=i,Nn(t,i),Zn(t),e[en]=t.current,ju(e),new Hl(t)},hr.version="19.2.1",hr}var Ty;function j0(){if(Ty)return Yu.exports;Ty=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(s){console.error(s)}}return n(),Yu.exports=x0(),Yu.exports}var w0=j0();const Cy="lunaPreferences",N0=[{value:"USD",label:"USD  US Dollar"},{value:"EUR",label:"EUR  Euro"},{value:"GBP",label:"GBP  British Pound"},{value:"CAD",label:"CAD  Canadian Dollar"}],wv=[{value:"US",label:"United States",currency:"USD"},{value:"CA",label:"Canada",currency:"CAD"},{value:"EU",label:"Eurozone",currency:"EUR"},{value:"GB",label:"United Kingdom",currency:"GBP"}],S0=n=>wv.find(s=>s.value===n)?.currency,Ay=n=>n.replace(/^([^\d\s.,]+)(?=\d)/,"$1 ").replace(/(\d)([^\d\s.,]+)$/,"$1 $2"),Nv={language:"en-US",currency:"USD",region:"US",premiumAccess:!1,businessFeatures:!1,budgetPeriod:"monthly",budgetPeriodStartDay:1,budgetPeriodAnchor:"",privacyShieldEnabled:!1,hardwareKeyEnabled:!1,theme:"light",guidanceLevel:"normal",notificationLevel:"normal",tonePreference:"supportive"},Sv=f.createContext({preferences:Nv,setCurrency:()=>{},setRegion:()=>{},setPremiumAccess:()=>{},setBusinessFeatures:()=>{},setThemePreference:()=>{},formatCurrency:()=>"",formatNumber:()=>"",setGuidanceLevel:()=>{},setNotificationLevel:()=>{},setTonePreference:()=>{}}),E0=({children:n})=>{const[s,l]=f.useState(Nv),o=f.useRef(!0);f.useEffect(()=>{try{const y=localStorage.getItem(Cy);if(y){const x=JSON.parse(y);l(j=>({...j,...x}))}}catch{}},[]),f.useEffect(()=>{if(o.current){o.current=!1;return}try{localStorage.setItem(Cy,JSON.stringify(s))}catch{}},[s]);const d=f.useCallback((y={})=>new Intl.NumberFormat(s.language,{style:"currency",currency:s.currency,minimumFractionDigits:2,maximumFractionDigits:2,...y}),[s.language,s.currency]),h=f.useCallback((y={})=>new Intl.NumberFormat(s.language,{minimumFractionDigits:0,maximumFractionDigits:2,...y}),[s.language]),m=f.useCallback((y,x={})=>{const j=d(x),w=Number(y);return Number.isFinite(w)?Ay(j.format(w)):Ay(j.format(0))},[d]),g=f.useCallback((y,x={})=>{const j=h(x),w=Number(y);return Number.isFinite(w)?j.format(w):j.format(0)},[h]),v=f.useMemo(()=>({preferences:s,themePreference:s.theme,setCurrency:y=>l(x=>({...x,currency:y})),setRegion:y=>l(x=>{const j=S0(y);return{...x,region:y,currency:j||x.currency}}),setPremiumAccess:y=>l(x=>({...x,premiumAccess:!!y,...y?{}:{businessFeatures:!1}})),setBusinessFeatures:y=>l(x=>({...x,businessFeatures:!!y})),setPrivacyShieldEnabled:y=>l(x=>({...x,privacyShieldEnabled:!!y})),setHardwareKeyEnabled:y=>l(x=>({...x,hardwareKeyEnabled:!!y})),setThemePreference:y=>l(x=>({...x,theme:y||"system"})),setBudgetPeriod:y=>l(x=>({...x,budgetPeriod:y})),setBudgetPeriodStartDay:y=>l(x=>({...x,budgetPeriodStartDay:y})),setBudgetPeriodAnchor:y=>l(x=>({...x,budgetPeriodAnchor:y})),setGuidanceLevel:y=>l(x=>({...x,guidanceLevel:y||"normal"})),setNotificationLevel:y=>l(x=>({...x,notificationLevel:y||"normal"})),setTonePreference:y=>l(x=>({...x,tonePreference:y||"supportive"})),formatCurrency:m,formatNumber:g}),[s,m,g]);return a.jsx(Sv.Provider,{value:v,children:n})},xt=()=>f.useContext(Sv),T0=n=>{let s=0;for(let l=0;l<n.length;l+=1)s=s*31+n.charCodeAt(l)|0;return s},C0=n=>Math.max(0,n),Ev=n=>n.leftoverTrend>=0,A0=n=>n.timeInTierDays<=21||n.improvements,Jd=(n,s,l)=>{if(!n||!n.length)return"";const o=Math.abs(T0(s)+Math.round(l.bufferMonths*100)+l.timeInTierDays*3+(l.leftoverTrend||0)*5+(l.improvements?7:0))%n.length;return n[o]},_0=n=>n.driftFlag||n.leftoverTrend<0||n.bufferMonths<0,M0=n=>n.bufferMonths>=.25&&n.bufferMonths<.75&&!n.driftFlag&&Ev(n),k0=n=>n.bufferMonths<.25&&Ev(n)&&A0(n),D0=n=>C0(n.bufferMonths),_y="Essentials are covered, but theres no protection yet. A small cushion turns okay into safe. Even $25$100 per period builds surprising calm when momentum holds.",My=["Lean into tiny deposits this weekthe calm overshadows how small the number feels.","Every steady deposit whispers Im protecting the life I already love."],L0="Your cushion is forming. Staying consistent turns vulnerability into resilience. Youre building safety, one calm decision at a time.",O0=["This rhythmic buffer growth is the quiet hero of every future plan.","Consistency today softens the ripple of tomorrows surprises."],z0="Youve made progress  now lets keep it. A tiny reset keeps things from tipping backward and protects the safety youre growing.",R0=["A short pause and a small deposit reset the guardrails before stress arrives.","Keep the shield closesteady habits now prevent panic later."],Zl=(n,s,l,o,d,h)=>({eyebrow:n,title:s,body:`${l} ${Jd(o,`${s}-${d}`,h)}`,tone:d}),$0=n=>_0(n)?Zl("Protect your progress","Lets guard what youve built",z0,R0,"protective",n):M0(n)?Zl("Next tier path","Youre close  keep the rhythm steady",L0,O0,"confidence",n):k0(n)?Zl("Next tier path","You found footing  now lets make it safer",_y,My,"reassurance",n):{...Zl("Next tier path","You found footing  now lets make it safer",_y,My,"reassurance",n),body:`Youre still early in fragile. Keep building a cushion  ${Math.round(D0(n)*100)}% of one month is already there.`},B0=n=>n.bufferMonths>=.5&&n.bufferMonths<.85&&n.leftoverTrend>=0,U0=n=>n.bufferMonths>=.85&&n.bufferMonths<1.1&&n.leftoverTrend>=0,P0=n=>n.bufferMonths>=1.1||n.timeInTierDays>=60,Gu="Cooling the chaos mattered, and now you have stability. Hold the consistency and resist overreaching so this calm can settle.",ky=["Gentle guards protect this new stillnessno need to sprint.","Subtle repetition keeps this fresh calm wired into habit."],I0="Youre building cushion muscle and the rhythm is easier. Keep smoothing volatility so every period feels softer.",H0=["The steadiness youre chairing now is a launchpad for thoughtful goals.","Confidence arrives when consistent habits ripple through the weeks."],Y0="Stability opens room for purpose. Sketch early goals and use the cushion as the foundation for what comes next.",Z0=["Pull on the horizon gentlyyour safety net already lets you plan further.","Think of the cushion as freedom currency; start designing how it serves you."],Vl=(n,s,l,o,d,h)=>({eyebrow:n,title:s,body:`${l} ${Jd(o,`${s}-${d}`,h)}`,tone:d}),V0=n=>P0(n)?Vl("Planning horizon","Now you can look ahead",Y0,Z0,"inspired",n):U0(n)?Vl("Momentum matters","Strength is compounding",I0,H0,"confidence",n):B0(n)?Vl("Balanced path","You earned this calm",Gu,ky,"reassurance",n):{...Vl("Balanced path","You earned this calm",Gu,ky,"reassurance",n),body:`${Gu} Stay gentlestability is new, and every calm choice protects it.`},q0=n=>n.bufferMonths>=1&&n.leftoverTrend>=0&&!n.driftFlag,G0=n=>n.bufferMonths>=1&&n.improvements&&n.timeInTierDays>=30,K0=n=>n.bufferMonths>=1.4||n.timeInTierDays>=90,Dy="You built this  not by luck but by steady choices. Keep the systems consistent to protect everything here.",Ly=["The quiet rituals that got you here should keep runningtheyre the real engine.","Hold the systems steady; each deposit keeps the optionality you already enjoy."],F0="You have room to shape life on purpose. Let goals, rituals, and generosity be the next moves.",X0=["Use the cushion to craft what freedom actually feels like for you.","Let intention guide the next moves instead of reacting to the clock."],Q0="Its not about hoarding  its about preserving freedom and giving back. Let long-term resilience guide you.",J0=["The margin youve safeguarded now becomes a platform for meaningful impact.","Protecting what you built lets you lean into generosity without panic."],ql=(n,s,l,o,d,h)=>({eyebrow:n,title:s,body:`${l} ${Jd(o,`${s}-${d}`,h)}`,tone:d}),W0=n=>K0(n)?ql("Stewardship path","Freedom with impact",Q0,J0,"confidence",n):G0(n)?ql("Purposeful living","Design what comes next",F0,X0,"inspired",n):(q0(n),ql("Thriving direction","Momentum is real",Dy,Ly,"confidence",n)),ew=n=>{if(!(n===void 0||Number.isNaN(n)))return n<0?0:n>1?1:n},tw=n=>n===void 0?null:n<=0?"Payday is todaykeep essentials locked and let autopay breathe.":n<=2?"Payday is just around the corner; confirm automatic deposits so nothing slips.":n<=5?"A few days remain before paydayuse this window to steady essentials and plan the next deposit.":null,nw=n=>n==="down"?"Drift is nudging downward; protect this progress with small, steady moves.":n==="up"?"Momentum is heading upwardkeep the habits that are tilting the scale.":null,aw=n=>{if(n===void 0)return null;const s=ew(n);return s>=.85?"This period is drawing to a close; wrap the numbers before the next one starts.":s<=.15?"Fresh period aheaduse this calm moment to steady essentials before activity peaks.":null},sw=(n,s)=>n?n==="year-end"?s==="thriving"?"Year-end is herepair your momentum with purpose-driven giving or planning.":"Year-end brings extra cash flow pressure; keep cushions steady and timeless.":n==="spring"?"Spring momentum is a great reminder to revisit your buffer and stay gentle with progress.":null:null,iw=(n,s,l)=>{if(!s)return n;const o=v=>v===void 0?null:v<=30?"Youre still settling intake the time to learn the rhythm.":v<=90?"Patterns are formingkeep the steady moves that calm the week.":"This tier is becoming part of your identity; keep guarding the habits that built it.",d=v=>{if(!v)return null;switch(v){case"firstCushion":return"Your first full month of cushion is realeach quiet deposit gave you that strength.";case"backToSafety":return"You slipped back toward safety and held the line; thats resoundingly steady.";case"thrivingStability":return"Thriving for 90 days? That calm momentum deserves a breath and a gentle smile.";default:return null}},h=[tw(s.daysUntilPayday),nw(s.driftSignal),aw(s.periodProgress),sw(s.season,l),o(s.tierAgeDays),d(s.milestoneEvent)].filter(Boolean);if(!h.length)return n;const m=n.body.toLowerCase(),g=h.find(v=>!m.includes(v.toLowerCase()));return g?{...n,body:`${n.body} ${g}`}:n},rw="guidance_seen_",lw="lunaPreferences",Gl="normal",Kl="supportive",Tv=n=>`${rw}${n}`,ow=n=>`${n.eyebrow}|${n.title}|${n.body}`,cw=n=>{const s=n?.periodStart,l=n?.periodEnd;return!s||!l?null:`${s}_${l}`},uw=()=>{if(typeof window>"u")return{guidanceLevel:Gl,tonePreference:Kl};try{const n=window.localStorage.getItem(lw);if(!n)return{guidanceLevel:Gl,tonePreference:Kl};const s=JSON.parse(n);return{guidanceLevel:typeof s.guidanceLevel=="string"?s.guidanceLevel:Gl,tonePreference:typeof s.tonePreference=="string"?s.tonePreference:Kl}}catch{return{guidanceLevel:Gl,tonePreference:Kl}}},dw=(n,s)=>{if(s==="neutral"){if(n.tone==="inspired")return{...n,tone:"confidence"};if(n.tone==="reassurance")return{...n,tone:"confidence"}}return n},hw=n=>n.tone==="inspired",mw=n=>{if(typeof window>"u")return null;try{const s=window.localStorage.getItem(Tv(n));if(!s)return null;const l=JSON.parse(s);if(typeof l=="object"&&l!==null&&typeof l.lastGuidanceHash=="string"&&typeof l.lastShownAt=="number")return l}catch{}return null},fw=(n,s)=>{if(!(typeof window>"u"))try{window.localStorage.setItem(Tv(n),JSON.stringify(s))}catch{}};function To(n){const s={eyebrow:"Next step",title:"Lets get steady",body:"Right now stability matters most. Luna will help you regain footing calmly.",tone:"protective"};let l;switch(n.tier){case"fragile":l=$0(n);break;case"balanced":case"stable":l=V0(n);break;case"thriving":l=W0(n);break;default:l=s}const o=iw(l,n.context,n.tier),d=uw(),h=dw(o,d.tonePreference),m=cw(n.context),g=ow(h);if(d.guidanceLevel==="off")return{...h,suppressed:!0,suppressionReason:"guidance-level-off",periodKey:m??void 0,guidanceHash:g};if(d.guidanceLevel==="minimal"&&hw(h))return{...h,suppressed:!0,suppressionReason:"guidance-level-minimal",periodKey:m??void 0,guidanceHash:g};if(m){const v=mw(m);if(v&&v.lastGuidanceHash===g)return{...h,suppressed:!0,suppressionReason:"duplicate",periodKey:m,guidanceHash:g};fw(m,{lastGuidanceHash:g,lastShownAt:Date.now()})}return{...h,periodKey:m??void 0,guidanceHash:g}}const Nd={moneyProfile:2,liveBudgetTransactions:1,financialHealthScore:2,debtCashForm:2,payPeriodPlans:1,payPeriodLatestPlanId:1},pw={moneyProfile:{1:n=>({...{...n,incomes:Array.isArray(n?.incomes)?n.incomes:[],expenses:Array.isArray(n?.expenses)?n.expenses:[],savingsBalance:n?.savingsBalance??"",savingsMonthly:n?.savingsMonthly??"",name:n?.name??""},_version:2})},financialHealthScore:{1:n=>({...{...n,pillars:n?.pillars||{buffer:0,freedom:0,stability:0},explanations:n?.explanations||{buffer:"",freedom:"",stability:""},confidence:n?.confidence||{label:"Early Confidence",detail:"",periods:0},milestones:Array.isArray(n?.milestones)?n.milestones:[]},_version:2})},debtCashForm:{1:n=>({...{...n,manualDebts:(n?.manualDebts||[]).map(l=>({...l,source:l?.source||"manual"}))},_version:2})}},yw=(n,s,l)=>{let o=s,d=Number(l)||1;const h=Nd[n]||d;for(;d<h;){const m=pw[n]?.[d];if(!m)break;o=m(o)??o;const v=Number(o?._version)||d+1;if(v<=d)break;d=v}return{data:o,version:d}},Ye={vmk:null,userId:null,vaultSalt:null,vaultKdf:null,isUnlocked:!1,unlockedAt:null,lastActiveAt:null,vaultData:{},dirty:!1,metadata:{}},Mt={setUnlocked({vmk:n,userId:s,vaultSalt:l,vaultKdf:o,data:d}){Ye.vmk=n,Ye.userId=s,Ye.vaultSalt=l,Ye.vaultKdf=o,Ye.vaultData=d||{},Ye.isUnlocked=!0,Ye.unlockedAt=Date.now(),Ye.lastActiveAt=Date.now(),Ye.dirty=!1,Ye.metadata={}},clearUnlocked(){Ye.vmk=null,Ye.userId=null,Ye.vaultSalt=null,Ye.vaultKdf=null,Ye.isUnlocked=!1,Ye.unlockedAt=null,Ye.lastActiveAt=null,Ye.vaultData={},Ye.dirty=!1,Ye.metadata={}},touchActivity(){Ye.isUnlocked&&(Ye.lastActiveAt=Date.now())},markDirty(){Ye.dirty=!0},markClean(){Ye.dirty=!1},getField(n){return Ye.isUnlocked?Ye.vaultData[n]??null:null},setField(n,s,l=null){Ye.isUnlocked&&(Ye.vaultData[n]=s,Ye.dirty=!0,l&&(Ye.metadata[n]={...Ye.metadata[n],...l}))},getVaultData(){return Ye.vaultData},getMetadata(n){return Ye.metadata[n]||null},deleteField(n){Ye.isUnlocked&&n in Ye.vaultData&&(delete Ye.vaultData[n],Ye.dirty=!0)},getVmk(){return Ye.vmk},getVaultSalt(){return Ye.vaultSalt},getVaultKdf(){return Ye.vaultKdf},isUnlocked(){return Ye.isUnlocked},getLastActiveAt(){return Ye.lastActiveAt},getUserId(){return Ye.userId},isDirty(){return Ye.dirty}},gw=1,vw=10,bw=5e3,xw="vault:sentinel",Cv="vault:root",jr="argon2id",jw="pbkdf2",Wd=["moneyProfile","liveBudgetTransactions","financialHealthScore","debtCashForm","payPeriodPlans","payPeriodLatestPlanId"],Av=["periodHistory_","periodHistoryIndex_","monthlyHistory_","monthlyHistoryIndex_"],ww=new Set(Wd),_v=n=>`luna_${n}_vault_blob_v${gw}`,Nw=n=>`luna_${n}_vault_sentinel`,Tr=n=>`luna_${n}_vault_encrypted`,Sw=n=>`luna_${n}_vault_migration_complete`,Ew="luna",Mv="luna_currentUser",Tw=new Set([Mv]),eh=()=>typeof window>"u"||!window.localStorage?null:window.localStorage.getItem(Mv),th=(n,s=eh())=>s?`${Ew}_${s}_${n}`:n,Cw=n=>{const s=/^luna_[^_]+_(.+)$/.exec(String(n));return s?s[1]:n},Aw=new Set(["moneyProfile","liveBudgetTransactions"]),kv=n=>Av.some(s=>n.startsWith(s)||n.startsWith(th(s))),_w=n=>{const s=Cw(n);return Aw.has(s)||kv(n)},Mw=()=>{if(typeof window>"u"||!window.localStorage)return!1;const n=eh();if(!n)return!1;try{const s=localStorage.getItem(Tr(n))==="1",l=localStorage.getItem(Sw(n))==="1";return s&&l}catch{return!1}},Ku=n=>{if(!Mw()||!_w(n))return!0;const s=`Legacy vault key access blocked: ${n}`;return console.warn(s),!1},Fu=n=>Tw.has(n)?n:th(n),fa={get(n,s=null){if(typeof window>"u")return s;const l=Fu(n);if(pi(n))return it.get(l);if(!Ku(l))return null;const o=localStorage.getItem(l);return o!==null?o:localStorage.getItem(n)??s},set(n,s){if(typeof window>"u")return;const l=Fu(n);if(pi(n)){it.set(l,s);return}Ku(l)&&(localStorage.setItem(l,s),l!==n&&localStorage.removeItem(n))},remove(n){if(typeof window>"u")return;const s=Fu(n);if(pi(n)){it.remove(s);return}Ku(s)&&(localStorage.removeItem(s),localStorage.removeItem(n))},clearVaultOnly(){if(typeof window>"u")return;const n=eh();if(!n)return;if(!(localStorage.getItem(Tr(n))==="1")){console.warn("Vault not marked encrypted; skipping clearVaultOnly");return}["moneyProfile","liveBudgetTransactions"].forEach(o=>{localStorage.removeItem(th(o,n)),localStorage.removeItem(o)});for(const o of Object.keys(localStorage))kv(o)&&localStorage.removeItem(o)}},Dv="luna_currentUser",kw="luna",Sd="luna-current-user-changed",Ed="luna-onboarding-status-changed",Dw=n=>String(n||"").trim().toLowerCase(),Lw=n=>{let s=0;for(let l=0;l<n.length;l+=1){const o=n.charCodeAt(l);s=(s<<5)-s+o,s|=0}return Math.abs(s).toString(36)},fo=n=>{const s=Dw(n);return s?`user-${Lw(s)}`:`user-${Date.now()}`},Ow=n=>{typeof window>"u"||window.dispatchEvent(new CustomEvent(Sd,{detail:{userId:n}}))},zw=(n,s)=>{typeof window>"u"||window.dispatchEvent(new CustomEvent(Ed,{detail:{userId:n,completed:!!s}}))},ps=()=>fa.get(Dv),Lv=n=>{typeof window>"u"||!n||(fa.set(Dv,n),Ow(n))},We=(n,s=ps())=>s?`${kw}_${s}_${n}`:n,Nt=(n,s=null)=>fa.get(n,s),bs=(n,s)=>fa.set(n,s),Rw=(n=ps())=>{n&&(bs("onboardingCompleted","true"),zw(n,!0))},Xu=(n=ps())=>n?Nt("onboardingCompleted")==="true":!1;var $w={};const Fl={time:3,mem:65536,parallelism:1,hashLen:32},Bw=31e4,Uw=new TextEncoder,Pw=typeof process<"u"&&$w.VITEST,Iw=async()=>null,bo=n=>{if(!n)return new Uint8Array;const s=window.atob(n),l=new Uint8Array(s.length);for(let o=0;o<s.length;o+=1)l[o]=s.charCodeAt(o);return l},Hw=async(n,s,l=jr)=>{if(!n)throw new Error("Password is required for VMK derivation");l=jw;const o=s instanceof Uint8Array?s:new Uint8Array(s||[]);if(l===jr&&!Pw){const g=await Iw();if(g){const v=await g.hash({pass:n,salt:o,time:Fl.time,mem:Fl.mem,parallelism:Fl.parallelism,hashLen:Fl.hashLen,type:g.ArgonType.Argon2id,raw:!0});return window.crypto.subtle.importKey("raw",v.hash,"AES-GCM",!1,["encrypt","decrypt"])}console.warn("Argon2 derivation failed, using PBKDF2 fallback")}const d=await window.crypto.subtle.importKey("raw",Uw.encode(n),"PBKDF2",!1,["deriveBits"]),h=await window.crypto.subtle.deriveBits({name:"PBKDF2",salt:o,iterations:Bw,hash:"SHA-256"},d,256),m=new Uint8Array(h);return window.crypto.subtle.importKey("raw",m,"AES-GCM",!1,["encrypt","decrypt"])},mi={LOCKED:"VAULT_LOCKED",INVALID_FORMAT:"INVALID_FORMAT",DECRYPT_FAILED:"DECRYPT_FAILED",INVALID_PASSWORD:"INVALID_PASSWORD"};class fi extends Error{constructor(s,l){super(l),this.code=s,this.name="VaultError"}}const Yw="A256GCM",Zw=1,Vw=new Set(["argon2id","pbkdf2"]),qw=n=>!(!n||typeof n!="object"||n.v!==Zw||n.alg!==Yw||!Vw.has(n.kdf)||typeof n.salt_b64!="string"||!n.salt_b64||typeof n.iv_b64!="string"||!n.iv_b64||typeof n.ct_b64!="string"||!n.ct_b64||n.aad&&typeof n.aad!="string"),Ov=new TextEncoder,Gw=new TextDecoder,Qu=n=>{n instanceof Uint8Array||(n=new Uint8Array(n));const s=32768;let l="";for(let o=0;o<n.length;o+=s){const d=n.subarray(o,o+s);l+=String.fromCharCode(...d)}return window.btoa(l)},zv=n=>n?Ov.encode(n):void 0,Rv=async(n,s,{salt:l,aad:o,kdf:d})=>{if(!n)throw new fi(mi.LOCKED,"Vault must be unlocked to encrypt data.");try{const h=window.crypto.getRandomValues(new Uint8Array(12)),m=Ov.encode(JSON.stringify(s)),g=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:h,additionalData:zv(o)},n,m);return{v:1,alg:"A256GCM",kdf:d||"argon2id",salt_b64:Qu(l),iv_b64:Qu(h),ct_b64:Qu(new Uint8Array(g)),aad:o||void 0}}catch{throw new fi(mi.DECRYPT_FAILED,"Unable to encrypt vault payload.")}},Kw=async(n,s,{aad:l})=>{if(!n)throw new fi(mi.LOCKED,"Vault is locked.");const o=qw(s)?s:null;if(!o)throw new fi(mi.INVALID_FORMAT,"Vault envelope malformed.");try{const d=bo(o.iv_b64),h=bo(o.ct_b64),m=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:d,additionalData:zv(l??o.aad)},n,h);return JSON.parse(Gw.decode(m))}catch{throw new fi(mi.DECRYPT_FAILED,"Unable to decrypt vault payload.")}};let Oy=Promise.resolve(),ii=null,Ju=[];const nh=n=>{if(!n)return null;try{return JSON.parse(n)}catch{return null}},$v=(n,s)=>Av.some(l=>n.startsWith(l)||n.startsWith(We(l,s))),Fw=async(n,s,l,o)=>{const d=Nw(s);if(localStorage.getItem(d))return;const h=await Rv(n,{ok:!0,createdAt:new Date().toISOString()},{aad:xw,kdf:l,salt:o});localStorage.setItem(d,JSON.stringify(h))},Bv=async(n=!1)=>{if(!Mt.isUnlocked()||!n&&!Mt.isDirty())return;const s=Mt.getUserId();if(!s)return;const l=bo(Mt.getVaultSalt()),o=await Rv(Mt.getVmk(),Mt.getVaultData(),{aad:Cv,kdf:Mt.getVaultKdf()||jr,salt:l});localStorage.setItem(_v(s),JSON.stringify(o)),Mt.markClean()},zy=()=>{Oy=Oy.then(()=>Bv()).catch(n=>{console.error("Vault persistence failed",n)})},Xw=(n,s)=>{if(typeof localStorage>"u")return null;const l=We(n,s),o=localStorage.getItem(l)??localStorage.getItem(n);return o?nh(o):null},Qw=n=>{const s={};if(typeof localStorage>"u")return s;for(const l of Object.keys(localStorage))$v(l,n)&&(s[l]=nh(localStorage.getItem(l)));return s},Jw=n=>{if(!(!n||typeof localStorage>"u"))try{Wd.forEach(s=>{localStorage.removeItem(s),localStorage.removeItem(We(s,n))});for(const s of Object.keys(localStorage))$v(s,n)&&localStorage.removeItem(s);localStorage.setItem(Tr(n),"1")}catch(s){console.warn("Unable to clear legacy vault keys",s)}},Ww=n=>{if(!n||typeof localStorage>"u")return{};if(localStorage.getItem(Tr(n))==="1")return{};const l={};let o=!1;for(const h of Wd){const m=Xw(h,n);m!==null&&(l[h]=m,o=!0)}const d=Qw(n);return Object.keys(d).length&&(l.legacyPrefixes=d,o=!0),o?l:{}},ah=(n="manual")=>{Mt.isUnlocked()&&(Mt.clearUnlocked(),typeof window<"u"&&window.dispatchEvent(new CustomEvent("vault-locked",{detail:{reason:n}})))},eN=async({password:n,userId:s,vaultSalt:l,vaultKdf:o=jr})=>{if(!n||!s||!l)throw new fi(mi.INVALID_PASSWORD,"Missing vault unlocking parameters.");const d=bo(l),h=await Hw(n,d,o);await Fw(h,s,o,d);const m=nh(localStorage.getItem(_v(s)));let g={};return m?g=await Kw(h,m,{aad:Cv}):(g=Ww(s),Object.keys(g).length&&(Mt.setUnlocked({vmk:h,userId:s,vaultSalt:l,vaultKdf:o,data:g}),await Bv(!0),Jw(s))),Mt.setUnlocked({vmk:h,userId:s,vaultSalt:l,vaultKdf:o,data:g}),typeof window<"u"&&window.dispatchEvent(new CustomEvent("vault-unlocked",{detail:{userId:s}})),g},Ry=()=>{Mt.touchActivity()},tN=()=>typeof window>"u"?()=>{}:(["mousemove","keydown","mousedown","touchstart","visibilitychange"].forEach(s=>{window.addEventListener(s,Ry),Ju.push(s)}),ii&&clearInterval(ii),ii=setInterval(()=>{if(!Mt.isUnlocked())return;const s=Mt.getLastActiveAt()||0;Date.now()-s>vw*60*1e3&&ah("idle")},bw),()=>{Ju.forEach(s=>window.removeEventListener(s,Ry)),Ju=[],ii&&(clearInterval(ii),ii=null)}),sh="__meta",$y="storageState",Td="storage-state-change",Xl="localOnly",po=n=>{try{return JSON.parse(n)}catch{return null}},Cd=n=>po(localStorage.getItem(`${n}${sh}`)),xo=(n,s)=>{if(Array.isArray(s)){const l=Cd(n);return Number(l?._version)||1}return Number(s?._version)||1},nN=(n,s)=>{const l={_version:Number(s)||1,_lastUpdated:new Date().toISOString()};localStorage.setItem(`${n}${sh}`,JSON.stringify(l))},By=(n,s)=>`${n}_backup_v${s}`,aN=n=>{window.dispatchEvent(new CustomEvent(Td,{detail:{state:n}}))},yo=n=>{const s=/^luna_[^_]+_(.+)$/.exec(String(n));return s?s[1]:n},sN=n=>ww.has(yo(n)),iN=()=>{if(typeof window>"u"||typeof localStorage>"u")return!1;const n=ps();return n?localStorage.getItem(Tr(n))==="1":!1},pi=n=>sN(n)&&iN(),rN=(n,s)=>{if(!s)return n;try{return Array.isArray(n)?(Object.defineProperty(n,"_version",{value:s._version,enumerable:!1}),Object.defineProperty(n,"_lastUpdated",{value:s._lastUpdated,enumerable:!1}),n):{...n,_version:s._version,_lastUpdated:s._lastUpdated}}catch{return n}},it={get:n=>{if(typeof window>"u")return null;if(pi(n)){const h=yo(n);if(!Mt.isUnlocked())return null;const m=Mt.getField(h);return m===null||typeof m>"u"?null:rN(m,Mt.getMetadata(h))}const s=localStorage.getItem(n);if(!s)return null;const l=po(s);if(Array.isArray(l)&&l.length===0)return[];if(l===null)return null;const o=xo(n,l),d=Nd[n]||o;if(o<d){try{if(localStorage.setItem(By(n,o),s),Array.isArray(l)){const m=Cd(n);m&&localStorage.setItem(`${By(n,o)}${sh}`,JSON.stringify(m))}}catch{}const h=yw(n,l,o);return it.set(n,h.data,h.version),h.data}return Array.isArray(l)&&(Cd(n)||it.set(n,l,o)),l},set:(n,s,l)=>{if(typeof window>"u")return!1;const o=Number(l)||Nd[n]||1,d=new Date().toISOString(),h=o;if(pi(n)){const v=yo(n),y={_version:o,_lastUpdated:d},x=Array.isArray(s)?s:{...s};return Mt.setField(v,x,y),zy(),!0}const m=localStorage.getItem(n);if(m){const v=po(m),y=v?xo(n,v):1;if(y>h)return console.warn(`Blocked write to ${n}: storage v${y} > tab v${h}. Dispatching storage-collision.`),window.dispatchEvent(new CustomEvent("storage-collision",{detail:{key:n,existingVersion:y,targetVersion:h}})),!1}if(Array.isArray(s))return localStorage.setItem(n,JSON.stringify(s)),nN(n,o),!0;const g={...s,_version:o,_lastUpdated:d};return localStorage.setItem(n,JSON.stringify(g)),!0},remove:n=>{if(!(typeof window>"u")){if(pi(n)){const s=yo(n);Mt.deleteField(s),zy();return}localStorage.removeItem(n)}},init:(n=[])=>{n.forEach(s=>{try{it.get(s)}catch{}})},setState:n=>{if(typeof window>"u")return;const s=n||Xl;localStorage.setItem($y,JSON.stringify(s)),aN(s)},getState:()=>{if(typeof window>"u")return Xl;const n=localStorage.getItem($y);if(!n)return Xl;const s=po(n);return typeof s=="string"?s:Xl},onStateChange:n=>(window.addEventListener(Td,n),()=>window.removeEventListener(Td,n)),clear:()=>{typeof window>"u"||console.warn("storageManager.clear is deprecated; use storageFacade.clearVaultOnly instead.")}},Uv="notificationStore",Ad="notification-store-updated",lN=n=>n||(typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`notification-${Date.now()}-${Math.floor(Math.random()*1e6)}`),_d=n=>({notifications:n}),oN=()=>{const n=it.get(We(Uv));if(!n||typeof n!="object")return _d([]);const s=Array.isArray(n.notifications)?n.notifications:[];return _d(s)},cN=()=>{typeof window>"u"||window.dispatchEvent(new Event(Ad))},ih=n=>{const s=_d(n);return it.set(We(Uv),s),cN(),s},uN=n=>({...n,id:lN(n.id),createdAt:n.createdAt||new Date().toISOString(),acknowledged:!1}),Cr=()=>oN(),Md=()=>Cr().notifications,dN=()=>Cr().notifications.filter(n=>!n.acknowledged),Uy=()=>dN().length,Co=n=>{const s=uN(n),l=Cr();return l.notifications.some(o=>o.id===s.id)?l.notifications.find(o=>o.id===s.id):(ih([s,...l.notifications]),s)},hN=n=>{const s=Cr(),l=s.notifications.filter(o=>o.id!==n);return l.length===s.notifications.length?s.notifications:(ih(l),l)},mN=n=>{const s=Cr();let l=null;const o=s.notifications.map(d=>d.id!==n||d.acknowledged?d:(l={...d,acknowledged:!0,acknowledgedAt:new Date().toISOString()},l));return l?(ih(o),l):null},fN=n=>typeof window>"u"?()=>{}:(window.addEventListener(Ad,n),()=>window.removeEventListener(Ad,n));function ce(n,s,l){function o(g,v){if(g._zod||Object.defineProperty(g,"_zod",{value:{def:v,constr:m,traits:new Set},enumerable:!1}),g._zod.traits.has(n))return;g._zod.traits.add(n),s(g,v);const y=m.prototype,x=Object.keys(y);for(let j=0;j<x.length;j++){const w=x[j];w in g||(g[w]=y[w].bind(g))}}const d=l?.Parent??Object;class h extends d{}Object.defineProperty(h,"name",{value:n});function m(g){var v;const y=l?.Parent?new h:this;o(y,g),(v=y._zod).deferred??(v.deferred=[]);for(const x of y._zod.deferred)x();return y}return Object.defineProperty(m,"init",{value:o}),Object.defineProperty(m,Symbol.hasInstance,{value:g=>l?.Parent&&g instanceof l.Parent?!0:g?._zod?.traits?.has(n)}),Object.defineProperty(m,"name",{value:n}),m}class yi extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Pv extends Error{constructor(s){super(`Encountered unidirectional transform during encode: ${s}`),this.name="ZodEncodeError"}}const Iv={};function ys(n){return Iv}function pN(n){const s=Object.values(n).filter(o=>typeof o=="number");return Object.entries(n).filter(([o,d])=>s.indexOf(+o)===-1).map(([o,d])=>d)}function kd(n,s){return typeof s=="bigint"?s.toString():s}function rh(n){return{get value(){{const s=n();return Object.defineProperty(this,"value",{value:s}),s}}}}function lh(n){return n==null}function oh(n){const s=n.startsWith("^")?1:0,l=n.endsWith("$")?n.length-1:n.length;return n.slice(s,l)}function yN(n,s){const l=(n.toString().split(".")[1]||"").length,o=s.toString();let d=(o.split(".")[1]||"").length;if(d===0&&/\d?e-\d?/.test(o)){const v=o.match(/\d?e-(\d?)/);v?.[1]&&(d=Number.parseInt(v[1]))}const h=l>d?l:d,m=Number.parseInt(n.toFixed(h).replace(".","")),g=Number.parseInt(s.toFixed(h).replace(".",""));return m%g/10**h}const Py=Symbol("evaluating");function yt(n,s,l){let o;Object.defineProperty(n,s,{get(){if(o!==Py)return o===void 0&&(o=Py,o=l()),o},set(d){Object.defineProperty(n,s,{value:d})},configurable:!0})}function xs(n,s,l){Object.defineProperty(n,s,{value:l,writable:!0,enumerable:!0,configurable:!0})}function js(...n){const s={};for(const l of n){const o=Object.getOwnPropertyDescriptors(l);Object.assign(s,o)}return Object.defineProperties({},s)}function Iy(n){return JSON.stringify(n)}function gN(n){return n.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Hv="captureStackTrace"in Error?Error.captureStackTrace:(...n)=>{};function jo(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}const vN=rh(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const n=Function;return new n(""),!0}catch{return!1}});function wr(n){if(jo(n)===!1)return!1;const s=n.constructor;if(s===void 0||typeof s!="function")return!0;const l=s.prototype;return!(jo(l)===!1||Object.prototype.hasOwnProperty.call(l,"isPrototypeOf")===!1)}function Yv(n){return wr(n)?{...n}:Array.isArray(n)?[...n]:n}const bN=new Set(["string","number","symbol"]);function vi(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ka(n,s,l){const o=new n._zod.constr(s??n._zod.def);return(!s||l?.parent)&&(o._zod.parent=n),o}function Oe(n){const s=n;if(!s)return{};if(typeof s=="string")return{error:()=>s};if(s?.message!==void 0){if(s?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");s.error=s.message}return delete s.message,typeof s.error=="string"?{...s,error:()=>s.error}:s}function xN(n){return Object.keys(n).filter(s=>n[s]._zod.optin==="optional"&&n[s]._zod.optout==="optional")}const jN={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function wN(n,s){const l=n._zod.def,o=js(n._zod.def,{get shape(){const d={};for(const h in s){if(!(h in l.shape))throw new Error(`Unrecognized key: "${h}"`);s[h]&&(d[h]=l.shape[h])}return xs(this,"shape",d),d},checks:[]});return Ka(n,o)}function NN(n,s){const l=n._zod.def,o=js(n._zod.def,{get shape(){const d={...n._zod.def.shape};for(const h in s){if(!(h in l.shape))throw new Error(`Unrecognized key: "${h}"`);s[h]&&delete d[h]}return xs(this,"shape",d),d},checks:[]});return Ka(n,o)}function SN(n,s){if(!wr(s))throw new Error("Invalid input to extend: expected a plain object");const l=n._zod.def.checks;if(l&&l.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const d=js(n._zod.def,{get shape(){const h={...n._zod.def.shape,...s};return xs(this,"shape",h),h},checks:[]});return Ka(n,d)}function EN(n,s){if(!wr(s))throw new Error("Invalid input to safeExtend: expected a plain object");const l={...n._zod.def,get shape(){const o={...n._zod.def.shape,...s};return xs(this,"shape",o),o},checks:n._zod.def.checks};return Ka(n,l)}function TN(n,s){const l=js(n._zod.def,{get shape(){const o={...n._zod.def.shape,...s._zod.def.shape};return xs(this,"shape",o),o},get catchall(){return s._zod.def.catchall},checks:[]});return Ka(n,l)}function CN(n,s,l){const o=js(s._zod.def,{get shape(){const d=s._zod.def.shape,h={...d};if(l)for(const m in l){if(!(m in d))throw new Error(`Unrecognized key: "${m}"`);l[m]&&(h[m]=n?new n({type:"optional",innerType:d[m]}):d[m])}else for(const m in d)h[m]=n?new n({type:"optional",innerType:d[m]}):d[m];return xs(this,"shape",h),h},checks:[]});return Ka(s,o)}function AN(n,s,l){const o=js(s._zod.def,{get shape(){const d=s._zod.def.shape,h={...d};if(l)for(const m in l){if(!(m in h))throw new Error(`Unrecognized key: "${m}"`);l[m]&&(h[m]=new n({type:"nonoptional",innerType:d[m]}))}else for(const m in d)h[m]=new n({type:"nonoptional",innerType:d[m]});return xs(this,"shape",h),h},checks:[]});return Ka(s,o)}function di(n,s=0){if(n.aborted===!0)return!0;for(let l=s;l<n.issues.length;l++)if(n.issues[l]?.continue!==!0)return!0;return!1}function Zv(n,s){return s.map(l=>{var o;return(o=l).path??(o.path=[]),l.path.unshift(n),l})}function Ql(n){return typeof n=="string"?n:n?.message}function gs(n,s,l){const o={...n,path:n.path??[]};if(!n.message){const d=Ql(n.inst?._zod.def?.error?.(n))??Ql(s?.error?.(n))??Ql(l.customError?.(n))??Ql(l.localeError?.(n))??"Invalid input";o.message=d}return delete o.inst,delete o.continue,s?.reportInput||delete o.input,o}function ch(n){return Array.isArray(n)?"array":typeof n=="string"?"string":"unknown"}function Nr(...n){const[s,l,o]=n;return typeof s=="string"?{message:s,code:"custom",input:l,inst:o}:{...s}}const Vv=(n,s)=>{n.name="$ZodError",Object.defineProperty(n,"_zod",{value:n._zod,enumerable:!1}),Object.defineProperty(n,"issues",{value:s,enumerable:!1}),n.message=JSON.stringify(s,kd,2),Object.defineProperty(n,"toString",{value:()=>n.message,enumerable:!1})},qv=ce("$ZodError",Vv),Gv=ce("$ZodError",Vv,{Parent:Error});function _N(n,s=l=>l.message){const l={},o=[];for(const d of n.issues)d.path.length>0?(l[d.path[0]]=l[d.path[0]]||[],l[d.path[0]].push(s(d))):o.push(s(d));return{formErrors:o,fieldErrors:l}}function MN(n,s=l=>l.message){const l={_errors:[]},o=d=>{for(const h of d.issues)if(h.code==="invalid_union"&&h.errors.length)h.errors.map(m=>o({issues:m}));else if(h.code==="invalid_key")o({issues:h.issues});else if(h.code==="invalid_element")o({issues:h.issues});else if(h.path.length===0)l._errors.push(s(h));else{let m=l,g=0;for(;g<h.path.length;){const v=h.path[g];g===h.path.length-1?(m[v]=m[v]||{_errors:[]},m[v]._errors.push(s(h))):m[v]=m[v]||{_errors:[]},m=m[v],g++}}};return o(n),l}const uh=n=>(s,l,o,d)=>{const h=o?Object.assign(o,{async:!1}):{async:!1},m=s._zod.run({value:l,issues:[]},h);if(m instanceof Promise)throw new yi;if(m.issues.length){const g=new(d?.Err??n)(m.issues.map(v=>gs(v,h,ys())));throw Hv(g,d?.callee),g}return m.value},dh=n=>async(s,l,o,d)=>{const h=o?Object.assign(o,{async:!0}):{async:!0};let m=s._zod.run({value:l,issues:[]},h);if(m instanceof Promise&&(m=await m),m.issues.length){const g=new(d?.Err??n)(m.issues.map(v=>gs(v,h,ys())));throw Hv(g,d?.callee),g}return m.value},Ao=n=>(s,l,o)=>{const d=o?{...o,async:!1}:{async:!1},h=s._zod.run({value:l,issues:[]},d);if(h instanceof Promise)throw new yi;return h.issues.length?{success:!1,error:new(n??qv)(h.issues.map(m=>gs(m,d,ys())))}:{success:!0,data:h.value}},kN=Ao(Gv),_o=n=>async(s,l,o)=>{const d=o?Object.assign(o,{async:!0}):{async:!0};let h=s._zod.run({value:l,issues:[]},d);return h instanceof Promise&&(h=await h),h.issues.length?{success:!1,error:new n(h.issues.map(m=>gs(m,d,ys())))}:{success:!0,data:h.value}},DN=_o(Gv),LN=n=>(s,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return uh(n)(s,l,d)},ON=n=>(s,l,o)=>uh(n)(s,l,o),zN=n=>async(s,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return dh(n)(s,l,d)},RN=n=>async(s,l,o)=>dh(n)(s,l,o),$N=n=>(s,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Ao(n)(s,l,d)},BN=n=>(s,l,o)=>Ao(n)(s,l,o),UN=n=>async(s,l,o)=>{const d=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return _o(n)(s,l,d)},PN=n=>async(s,l,o)=>_o(n)(s,l,o),IN=/^[cC][^\s-]{8,}$/,HN=/^[0-9a-z]+$/,YN=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,ZN=/^[0-9a-vA-V]{20}$/,VN=/^[A-Za-z0-9]{27}$/,qN=/^[a-zA-Z0-9_-]{21}$/,GN=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,KN=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Hy=n=>n?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${n}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,FN=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,XN="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function QN(){return new RegExp(XN,"u")}const JN=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,WN=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,eS=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,tS=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,nS=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Kv=/^[A-Za-z0-9_-]*$/,aS=/^\+(?:[0-9]){6,14}[0-9]$/,Fv="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",sS=new RegExp(`^${Fv}$`);function Xv(n){const s="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof n.precision=="number"?n.precision===-1?`${s}`:n.precision===0?`${s}:[0-5]\\d`:`${s}:[0-5]\\d\\.\\d{${n.precision}}`:`${s}(?::[0-5]\\d(?:\\.\\d+)?)?`}function iS(n){return new RegExp(`^${Xv(n)}$`)}function rS(n){const s=Xv({precision:n.precision}),l=["Z"];n.local&&l.push(""),n.offset&&l.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const o=`${s}(?:${l.join("|")})`;return new RegExp(`^${Fv}T(?:${o})$`)}const lS=n=>{const s=n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${s}$`)},oS=/^-?\d+$/,cS=/^-?\d+(?:\.\d+)?/,uS=/^[^A-Z]*$/,dS=/^[^a-z]*$/,un=ce("$ZodCheck",(n,s)=>{var l;n._zod??(n._zod={}),n._zod.def=s,(l=n._zod).onattach??(l.onattach=[])}),Qv={number:"number",bigint:"bigint",object:"date"},Jv=ce("$ZodCheckLessThan",(n,s)=>{un.init(n,s);const l=Qv[typeof s.value];n._zod.onattach.push(o=>{const d=o._zod.bag,h=(s.inclusive?d.maximum:d.exclusiveMaximum)??Number.POSITIVE_INFINITY;s.value<h&&(s.inclusive?d.maximum=s.value:d.exclusiveMaximum=s.value)}),n._zod.check=o=>{(s.inclusive?o.value<=s.value:o.value<s.value)||o.issues.push({origin:l,code:"too_big",maximum:s.value,input:o.value,inclusive:s.inclusive,inst:n,continue:!s.abort})}}),Wv=ce("$ZodCheckGreaterThan",(n,s)=>{un.init(n,s);const l=Qv[typeof s.value];n._zod.onattach.push(o=>{const d=o._zod.bag,h=(s.inclusive?d.minimum:d.exclusiveMinimum)??Number.NEGATIVE_INFINITY;s.value>h&&(s.inclusive?d.minimum=s.value:d.exclusiveMinimum=s.value)}),n._zod.check=o=>{(s.inclusive?o.value>=s.value:o.value>s.value)||o.issues.push({origin:l,code:"too_small",minimum:s.value,input:o.value,inclusive:s.inclusive,inst:n,continue:!s.abort})}}),hS=ce("$ZodCheckMultipleOf",(n,s)=>{un.init(n,s),n._zod.onattach.push(l=>{var o;(o=l._zod.bag).multipleOf??(o.multipleOf=s.value)}),n._zod.check=l=>{if(typeof l.value!=typeof s.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof l.value=="bigint"?l.value%s.value===BigInt(0):yN(l.value,s.value)===0)||l.issues.push({origin:typeof l.value,code:"not_multiple_of",divisor:s.value,input:l.value,inst:n,continue:!s.abort})}}),mS=ce("$ZodCheckNumberFormat",(n,s)=>{un.init(n,s),s.format=s.format||"float64";const l=s.format?.includes("int"),o=l?"int":"number",[d,h]=jN[s.format];n._zod.onattach.push(m=>{const g=m._zod.bag;g.format=s.format,g.minimum=d,g.maximum=h,l&&(g.pattern=oS)}),n._zod.check=m=>{const g=m.value;if(l){if(!Number.isInteger(g)){m.issues.push({expected:o,format:s.format,code:"invalid_type",continue:!1,input:g,inst:n});return}if(!Number.isSafeInteger(g)){g>0?m.issues.push({input:g,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:n,origin:o,continue:!s.abort}):m.issues.push({input:g,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:n,origin:o,continue:!s.abort});return}}g<d&&m.issues.push({origin:"number",input:g,code:"too_small",minimum:d,inclusive:!0,inst:n,continue:!s.abort}),g>h&&m.issues.push({origin:"number",input:g,code:"too_big",maximum:h,inst:n})}}),fS=ce("$ZodCheckMaxLength",(n,s)=>{var l;un.init(n,s),(l=n._zod.def).when??(l.when=o=>{const d=o.value;return!lh(d)&&d.length!==void 0}),n._zod.onattach.push(o=>{const d=o._zod.bag.maximum??Number.POSITIVE_INFINITY;s.maximum<d&&(o._zod.bag.maximum=s.maximum)}),n._zod.check=o=>{const d=o.value;if(d.length<=s.maximum)return;const m=ch(d);o.issues.push({origin:m,code:"too_big",maximum:s.maximum,inclusive:!0,input:d,inst:n,continue:!s.abort})}}),pS=ce("$ZodCheckMinLength",(n,s)=>{var l;un.init(n,s),(l=n._zod.def).when??(l.when=o=>{const d=o.value;return!lh(d)&&d.length!==void 0}),n._zod.onattach.push(o=>{const d=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;s.minimum>d&&(o._zod.bag.minimum=s.minimum)}),n._zod.check=o=>{const d=o.value;if(d.length>=s.minimum)return;const m=ch(d);o.issues.push({origin:m,code:"too_small",minimum:s.minimum,inclusive:!0,input:d,inst:n,continue:!s.abort})}}),yS=ce("$ZodCheckLengthEquals",(n,s)=>{var l;un.init(n,s),(l=n._zod.def).when??(l.when=o=>{const d=o.value;return!lh(d)&&d.length!==void 0}),n._zod.onattach.push(o=>{const d=o._zod.bag;d.minimum=s.length,d.maximum=s.length,d.length=s.length}),n._zod.check=o=>{const d=o.value,h=d.length;if(h===s.length)return;const m=ch(d),g=h>s.length;o.issues.push({origin:m,...g?{code:"too_big",maximum:s.length}:{code:"too_small",minimum:s.length},inclusive:!0,exact:!0,input:o.value,inst:n,continue:!s.abort})}}),Mo=ce("$ZodCheckStringFormat",(n,s)=>{var l,o;un.init(n,s),n._zod.onattach.push(d=>{const h=d._zod.bag;h.format=s.format,s.pattern&&(h.patterns??(h.patterns=new Set),h.patterns.add(s.pattern))}),s.pattern?(l=n._zod).check??(l.check=d=>{s.pattern.lastIndex=0,!s.pattern.test(d.value)&&d.issues.push({origin:"string",code:"invalid_format",format:s.format,input:d.value,...s.pattern?{pattern:s.pattern.toString()}:{},inst:n,continue:!s.abort})}):(o=n._zod).check??(o.check=()=>{})}),gS=ce("$ZodCheckRegex",(n,s)=>{Mo.init(n,s),n._zod.check=l=>{s.pattern.lastIndex=0,!s.pattern.test(l.value)&&l.issues.push({origin:"string",code:"invalid_format",format:"regex",input:l.value,pattern:s.pattern.toString(),inst:n,continue:!s.abort})}}),vS=ce("$ZodCheckLowerCase",(n,s)=>{s.pattern??(s.pattern=uS),Mo.init(n,s)}),bS=ce("$ZodCheckUpperCase",(n,s)=>{s.pattern??(s.pattern=dS),Mo.init(n,s)}),xS=ce("$ZodCheckIncludes",(n,s)=>{un.init(n,s);const l=vi(s.includes),o=new RegExp(typeof s.position=="number"?`^.{${s.position}}${l}`:l);s.pattern=o,n._zod.onattach.push(d=>{const h=d._zod.bag;h.patterns??(h.patterns=new Set),h.patterns.add(o)}),n._zod.check=d=>{d.value.includes(s.includes,s.position)||d.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:s.includes,input:d.value,inst:n,continue:!s.abort})}}),jS=ce("$ZodCheckStartsWith",(n,s)=>{un.init(n,s);const l=new RegExp(`^${vi(s.prefix)}.*`);s.pattern??(s.pattern=l),n._zod.onattach.push(o=>{const d=o._zod.bag;d.patterns??(d.patterns=new Set),d.patterns.add(l)}),n._zod.check=o=>{o.value.startsWith(s.prefix)||o.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:s.prefix,input:o.value,inst:n,continue:!s.abort})}}),wS=ce("$ZodCheckEndsWith",(n,s)=>{un.init(n,s);const l=new RegExp(`.*${vi(s.suffix)}$`);s.pattern??(s.pattern=l),n._zod.onattach.push(o=>{const d=o._zod.bag;d.patterns??(d.patterns=new Set),d.patterns.add(l)}),n._zod.check=o=>{o.value.endsWith(s.suffix)||o.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:s.suffix,input:o.value,inst:n,continue:!s.abort})}}),NS=ce("$ZodCheckOverwrite",(n,s)=>{un.init(n,s),n._zod.check=l=>{l.value=s.tx(l.value)}});class SS{constructor(s=[]){this.content=[],this.indent=0,this&&(this.args=s)}indented(s){this.indent+=1,s(this),this.indent-=1}write(s){if(typeof s=="function"){s(this,{execution:"sync"}),s(this,{execution:"async"});return}const o=s.split(`
`).filter(m=>m),d=Math.min(...o.map(m=>m.length-m.trimStart().length)),h=o.map(m=>m.slice(d)).map(m=>" ".repeat(this.indent*2)+m);for(const m of h)this.content.push(m)}compile(){const s=Function,l=this?.args,d=[...(this?.content??[""]).map(h=>`  ${h}`)];return new s(...l,d.join(`
`))}}const ES={major:4,minor:1,patch:13},Ot=ce("$ZodType",(n,s)=>{var l;n??(n={}),n._zod.def=s,n._zod.bag=n._zod.bag||{},n._zod.version=ES;const o=[...n._zod.def.checks??[]];n._zod.traits.has("$ZodCheck")&&o.unshift(n);for(const d of o)for(const h of d._zod.onattach)h(n);if(o.length===0)(l=n._zod).deferred??(l.deferred=[]),n._zod.deferred?.push(()=>{n._zod.run=n._zod.parse});else{const d=(m,g,v)=>{let y=di(m),x;for(const j of g){if(j._zod.def.when){if(!j._zod.def.when(m))continue}else if(y)continue;const w=m.issues.length,T=j._zod.check(m);if(T instanceof Promise&&v?.async===!1)throw new yi;if(x||T instanceof Promise)x=(x??Promise.resolve()).then(async()=>{await T,m.issues.length!==w&&(y||(y=di(m,w)))});else{if(m.issues.length===w)continue;y||(y=di(m,w))}}return x?x.then(()=>m):m},h=(m,g,v)=>{if(di(m))return m.aborted=!0,m;const y=d(g,o,v);if(y instanceof Promise){if(v.async===!1)throw new yi;return y.then(x=>n._zod.parse(x,v))}return n._zod.parse(y,v)};n._zod.run=(m,g)=>{if(g.skipChecks)return n._zod.parse(m,g);if(g.direction==="backward"){const y=n._zod.parse({value:m.value,issues:[]},{...g,skipChecks:!0});return y instanceof Promise?y.then(x=>h(x,m,g)):h(y,m,g)}const v=n._zod.parse(m,g);if(v instanceof Promise){if(g.async===!1)throw new yi;return v.then(y=>d(y,o,g))}return d(v,o,g)}}n["~standard"]={validate:d=>{try{const h=kN(n,d);return h.success?{value:h.data}:{issues:h.error?.issues}}catch{return DN(n,d).then(m=>m.success?{value:m.data}:{issues:m.error?.issues})}},vendor:"zod",version:1}}),hh=ce("$ZodString",(n,s)=>{Ot.init(n,s),n._zod.pattern=[...n?._zod.bag?.patterns??[]].pop()??lS(n._zod.bag),n._zod.parse=(l,o)=>{if(s.coerce)try{l.value=String(l.value)}catch{}return typeof l.value=="string"||l.issues.push({expected:"string",code:"invalid_type",input:l.value,inst:n}),l}}),Et=ce("$ZodStringFormat",(n,s)=>{Mo.init(n,s),hh.init(n,s)}),TS=ce("$ZodGUID",(n,s)=>{s.pattern??(s.pattern=KN),Et.init(n,s)}),CS=ce("$ZodUUID",(n,s)=>{if(s.version){const o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[s.version];if(o===void 0)throw new Error(`Invalid UUID version: "${s.version}"`);s.pattern??(s.pattern=Hy(o))}else s.pattern??(s.pattern=Hy());Et.init(n,s)}),AS=ce("$ZodEmail",(n,s)=>{s.pattern??(s.pattern=FN),Et.init(n,s)}),_S=ce("$ZodURL",(n,s)=>{Et.init(n,s),n._zod.check=l=>{try{const o=l.value.trim(),d=new URL(o);s.hostname&&(s.hostname.lastIndex=0,s.hostname.test(d.hostname)||l.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:s.hostname.source,input:l.value,inst:n,continue:!s.abort})),s.protocol&&(s.protocol.lastIndex=0,s.protocol.test(d.protocol.endsWith(":")?d.protocol.slice(0,-1):d.protocol)||l.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:s.protocol.source,input:l.value,inst:n,continue:!s.abort})),s.normalize?l.value=d.href:l.value=o;return}catch{l.issues.push({code:"invalid_format",format:"url",input:l.value,inst:n,continue:!s.abort})}}}),MS=ce("$ZodEmoji",(n,s)=>{s.pattern??(s.pattern=QN()),Et.init(n,s)}),kS=ce("$ZodNanoID",(n,s)=>{s.pattern??(s.pattern=qN),Et.init(n,s)}),DS=ce("$ZodCUID",(n,s)=>{s.pattern??(s.pattern=IN),Et.init(n,s)}),LS=ce("$ZodCUID2",(n,s)=>{s.pattern??(s.pattern=HN),Et.init(n,s)}),OS=ce("$ZodULID",(n,s)=>{s.pattern??(s.pattern=YN),Et.init(n,s)}),zS=ce("$ZodXID",(n,s)=>{s.pattern??(s.pattern=ZN),Et.init(n,s)}),RS=ce("$ZodKSUID",(n,s)=>{s.pattern??(s.pattern=VN),Et.init(n,s)}),$S=ce("$ZodISODateTime",(n,s)=>{s.pattern??(s.pattern=rS(s)),Et.init(n,s)}),BS=ce("$ZodISODate",(n,s)=>{s.pattern??(s.pattern=sS),Et.init(n,s)}),US=ce("$ZodISOTime",(n,s)=>{s.pattern??(s.pattern=iS(s)),Et.init(n,s)}),PS=ce("$ZodISODuration",(n,s)=>{s.pattern??(s.pattern=GN),Et.init(n,s)}),IS=ce("$ZodIPv4",(n,s)=>{s.pattern??(s.pattern=JN),Et.init(n,s),n._zod.bag.format="ipv4"}),HS=ce("$ZodIPv6",(n,s)=>{s.pattern??(s.pattern=WN),Et.init(n,s),n._zod.bag.format="ipv6",n._zod.check=l=>{try{new URL(`http://[${l.value}]`)}catch{l.issues.push({code:"invalid_format",format:"ipv6",input:l.value,inst:n,continue:!s.abort})}}}),YS=ce("$ZodCIDRv4",(n,s)=>{s.pattern??(s.pattern=eS),Et.init(n,s)}),ZS=ce("$ZodCIDRv6",(n,s)=>{s.pattern??(s.pattern=tS),Et.init(n,s),n._zod.check=l=>{const o=l.value.split("/");try{if(o.length!==2)throw new Error;const[d,h]=o;if(!h)throw new Error;const m=Number(h);if(`${m}`!==h)throw new Error;if(m<0||m>128)throw new Error;new URL(`http://[${d}]`)}catch{l.issues.push({code:"invalid_format",format:"cidrv6",input:l.value,inst:n,continue:!s.abort})}}});function eb(n){if(n==="")return!0;if(n.length%4!==0)return!1;try{return atob(n),!0}catch{return!1}}const VS=ce("$ZodBase64",(n,s)=>{s.pattern??(s.pattern=nS),Et.init(n,s),n._zod.bag.contentEncoding="base64",n._zod.check=l=>{eb(l.value)||l.issues.push({code:"invalid_format",format:"base64",input:l.value,inst:n,continue:!s.abort})}});function qS(n){if(!Kv.test(n))return!1;const s=n.replace(/[-_]/g,o=>o==="-"?"+":"/"),l=s.padEnd(Math.ceil(s.length/4)*4,"=");return eb(l)}const GS=ce("$ZodBase64URL",(n,s)=>{s.pattern??(s.pattern=Kv),Et.init(n,s),n._zod.bag.contentEncoding="base64url",n._zod.check=l=>{qS(l.value)||l.issues.push({code:"invalid_format",format:"base64url",input:l.value,inst:n,continue:!s.abort})}}),KS=ce("$ZodE164",(n,s)=>{s.pattern??(s.pattern=aS),Et.init(n,s)});function FS(n,s=null){try{const l=n.split(".");if(l.length!==3)return!1;const[o]=l;if(!o)return!1;const d=JSON.parse(atob(o));return!("typ"in d&&d?.typ!=="JWT"||!d.alg||s&&(!("alg"in d)||d.alg!==s))}catch{return!1}}const XS=ce("$ZodJWT",(n,s)=>{Et.init(n,s),n._zod.check=l=>{FS(l.value,s.alg)||l.issues.push({code:"invalid_format",format:"jwt",input:l.value,inst:n,continue:!s.abort})}}),tb=ce("$ZodNumber",(n,s)=>{Ot.init(n,s),n._zod.pattern=n._zod.bag.pattern??cS,n._zod.parse=(l,o)=>{if(s.coerce)try{l.value=Number(l.value)}catch{}const d=l.value;if(typeof d=="number"&&!Number.isNaN(d)&&Number.isFinite(d))return l;const h=typeof d=="number"?Number.isNaN(d)?"NaN":Number.isFinite(d)?void 0:"Infinity":void 0;return l.issues.push({expected:"number",code:"invalid_type",input:d,inst:n,...h?{received:h}:{}}),l}}),QS=ce("$ZodNumberFormat",(n,s)=>{mS.init(n,s),tb.init(n,s)}),JS=ce("$ZodUnknown",(n,s)=>{Ot.init(n,s),n._zod.parse=l=>l}),WS=ce("$ZodNever",(n,s)=>{Ot.init(n,s),n._zod.parse=(l,o)=>(l.issues.push({expected:"never",code:"invalid_type",input:l.value,inst:n}),l)});function Yy(n,s,l){n.issues.length&&s.issues.push(...Zv(l,n.issues)),s.value[l]=n.value}const eE=ce("$ZodArray",(n,s)=>{Ot.init(n,s),n._zod.parse=(l,o)=>{const d=l.value;if(!Array.isArray(d))return l.issues.push({expected:"array",code:"invalid_type",input:d,inst:n}),l;l.value=Array(d.length);const h=[];for(let m=0;m<d.length;m++){const g=d[m],v=s.element._zod.run({value:g,issues:[]},o);v instanceof Promise?h.push(v.then(y=>Yy(y,l,m))):Yy(v,l,m)}return h.length?Promise.all(h).then(()=>l):l}});function wo(n,s,l,o){n.issues.length&&s.issues.push(...Zv(l,n.issues)),n.value===void 0?l in o&&(s.value[l]=void 0):s.value[l]=n.value}function nb(n){const s=Object.keys(n.shape);for(const o of s)if(!n.shape?.[o]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${o}": expected a Zod schema`);const l=xN(n.shape);return{...n,keys:s,keySet:new Set(s),numKeys:s.length,optionalKeys:new Set(l)}}function ab(n,s,l,o,d,h){const m=[],g=d.keySet,v=d.catchall._zod,y=v.def.type;for(const x in s){if(g.has(x))continue;if(y==="never"){m.push(x);continue}const j=v.run({value:s[x],issues:[]},o);j instanceof Promise?n.push(j.then(w=>wo(w,l,x,s))):wo(j,l,x,s)}return m.length&&l.issues.push({code:"unrecognized_keys",keys:m,input:s,inst:h}),n.length?Promise.all(n).then(()=>l):l}const tE=ce("$ZodObject",(n,s)=>{if(Ot.init(n,s),!Object.getOwnPropertyDescriptor(s,"shape")?.get){const g=s.shape;Object.defineProperty(s,"shape",{get:()=>{const v={...g};return Object.defineProperty(s,"shape",{value:v}),v}})}const o=rh(()=>nb(s));yt(n._zod,"propValues",()=>{const g=s.shape,v={};for(const y in g){const x=g[y]._zod;if(x.values){v[y]??(v[y]=new Set);for(const j of x.values)v[y].add(j)}}return v});const d=jo,h=s.catchall;let m;n._zod.parse=(g,v)=>{m??(m=o.value);const y=g.value;if(!d(y))return g.issues.push({expected:"object",code:"invalid_type",input:y,inst:n}),g;g.value={};const x=[],j=m.shape;for(const w of m.keys){const A=j[w]._zod.run({value:y[w],issues:[]},v);A instanceof Promise?x.push(A.then(E=>wo(E,g,w,y))):wo(A,g,w,y)}return h?ab(x,y,g,v,o.value,n):x.length?Promise.all(x).then(()=>g):g}}),nE=ce("$ZodObjectJIT",(n,s)=>{tE.init(n,s);const l=n._zod.parse,o=rh(()=>nb(s)),d=w=>{const T=new SS(["shape","payload","ctx"]),A=o.value,E=B=>{const R=Iy(B);return`shape[${R}]._zod.run({ value: input[${R}], issues: [] }, ctx)`};T.write("const input = payload.value;");const z=Object.create(null);let Z=0;for(const B of A.keys)z[B]=`key_${Z++}`;T.write("const newResult = {};");for(const B of A.keys){const R=z[B],W=Iy(B);T.write(`const ${R} = ${E(B)};`),T.write(`
        if (${R}.issues.length) {
          payload.issues = payload.issues.concat(${R}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${W}, ...iss.path] : [${W}]
          })));
        }
        
        
        if (${R}.value === undefined) {
          if (${W} in input) {
            newResult[${W}] = undefined;
          }
        } else {
          newResult[${W}] = ${R}.value;
        }
        
      `)}T.write("payload.value = newResult;"),T.write("return payload;");const D=T.compile();return(B,R)=>D(w,B,R)};let h;const m=jo,g=!Iv.jitless,y=g&&vN.value,x=s.catchall;let j;n._zod.parse=(w,T)=>{j??(j=o.value);const A=w.value;return m(A)?g&&y&&T?.async===!1&&T.jitless!==!0?(h||(h=d(s.shape)),w=h(w,T),x?ab([],A,w,T,j,n):w):l(w,T):(w.issues.push({expected:"object",code:"invalid_type",input:A,inst:n}),w)}});function Zy(n,s,l,o){for(const h of n)if(h.issues.length===0)return s.value=h.value,s;const d=n.filter(h=>!di(h));return d.length===1?(s.value=d[0].value,d[0]):(s.issues.push({code:"invalid_union",input:s.value,inst:l,errors:n.map(h=>h.issues.map(m=>gs(m,o,ys())))}),s)}const aE=ce("$ZodUnion",(n,s)=>{Ot.init(n,s),yt(n._zod,"optin",()=>s.options.some(d=>d._zod.optin==="optional")?"optional":void 0),yt(n._zod,"optout",()=>s.options.some(d=>d._zod.optout==="optional")?"optional":void 0),yt(n._zod,"values",()=>{if(s.options.every(d=>d._zod.values))return new Set(s.options.flatMap(d=>Array.from(d._zod.values)))}),yt(n._zod,"pattern",()=>{if(s.options.every(d=>d._zod.pattern)){const d=s.options.map(h=>h._zod.pattern);return new RegExp(`^(${d.map(h=>oh(h.source)).join("|")})$`)}});const l=s.options.length===1,o=s.options[0]._zod.run;n._zod.parse=(d,h)=>{if(l)return o(d,h);let m=!1;const g=[];for(const v of s.options){const y=v._zod.run({value:d.value,issues:[]},h);if(y instanceof Promise)g.push(y),m=!0;else{if(y.issues.length===0)return y;g.push(y)}}return m?Promise.all(g).then(v=>Zy(v,d,n,h)):Zy(g,d,n,h)}}),sE=ce("$ZodIntersection",(n,s)=>{Ot.init(n,s),n._zod.parse=(l,o)=>{const d=l.value,h=s.left._zod.run({value:d,issues:[]},o),m=s.right._zod.run({value:d,issues:[]},o);return h instanceof Promise||m instanceof Promise?Promise.all([h,m]).then(([v,y])=>Vy(l,v,y)):Vy(l,h,m)}});function Dd(n,s){if(n===s)return{valid:!0,data:n};if(n instanceof Date&&s instanceof Date&&+n==+s)return{valid:!0,data:n};if(wr(n)&&wr(s)){const l=Object.keys(s),o=Object.keys(n).filter(h=>l.indexOf(h)!==-1),d={...n,...s};for(const h of o){const m=Dd(n[h],s[h]);if(!m.valid)return{valid:!1,mergeErrorPath:[h,...m.mergeErrorPath]};d[h]=m.data}return{valid:!0,data:d}}if(Array.isArray(n)&&Array.isArray(s)){if(n.length!==s.length)return{valid:!1,mergeErrorPath:[]};const l=[];for(let o=0;o<n.length;o++){const d=n[o],h=s[o],m=Dd(d,h);if(!m.valid)return{valid:!1,mergeErrorPath:[o,...m.mergeErrorPath]};l.push(m.data)}return{valid:!0,data:l}}return{valid:!1,mergeErrorPath:[]}}function Vy(n,s,l){if(s.issues.length&&n.issues.push(...s.issues),l.issues.length&&n.issues.push(...l.issues),di(n))return n;const o=Dd(s.value,l.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return n.value=o.data,n}const iE=ce("$ZodEnum",(n,s)=>{Ot.init(n,s);const l=pN(s.entries),o=new Set(l);n._zod.values=o,n._zod.pattern=new RegExp(`^(${l.filter(d=>bN.has(typeof d)).map(d=>typeof d=="string"?vi(d):d.toString()).join("|")})$`),n._zod.parse=(d,h)=>{const m=d.value;return o.has(m)||d.issues.push({code:"invalid_value",values:l,input:m,inst:n}),d}}),rE=ce("$ZodLiteral",(n,s)=>{if(Ot.init(n,s),s.values.length===0)throw new Error("Cannot create literal schema with no valid values");const l=new Set(s.values);n._zod.values=l,n._zod.pattern=new RegExp(`^(${s.values.map(o=>typeof o=="string"?vi(o):o?vi(o.toString()):String(o)).join("|")})$`),n._zod.parse=(o,d)=>{const h=o.value;return l.has(h)||o.issues.push({code:"invalid_value",values:s.values,input:h,inst:n}),o}}),lE=ce("$ZodTransform",(n,s)=>{Ot.init(n,s),n._zod.parse=(l,o)=>{if(o.direction==="backward")throw new Pv(n.constructor.name);const d=s.transform(l.value,l);if(o.async)return(d instanceof Promise?d:Promise.resolve(d)).then(m=>(l.value=m,l));if(d instanceof Promise)throw new yi;return l.value=d,l}});function qy(n,s){return n.issues.length&&s===void 0?{issues:[],value:void 0}:n}const oE=ce("$ZodOptional",(n,s)=>{Ot.init(n,s),n._zod.optin="optional",n._zod.optout="optional",yt(n._zod,"values",()=>s.innerType._zod.values?new Set([...s.innerType._zod.values,void 0]):void 0),yt(n._zod,"pattern",()=>{const l=s.innerType._zod.pattern;return l?new RegExp(`^(${oh(l.source)})?$`):void 0}),n._zod.parse=(l,o)=>{if(s.innerType._zod.optin==="optional"){const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(h=>qy(h,l.value)):qy(d,l.value)}return l.value===void 0?l:s.innerType._zod.run(l,o)}}),cE=ce("$ZodNullable",(n,s)=>{Ot.init(n,s),yt(n._zod,"optin",()=>s.innerType._zod.optin),yt(n._zod,"optout",()=>s.innerType._zod.optout),yt(n._zod,"pattern",()=>{const l=s.innerType._zod.pattern;return l?new RegExp(`^(${oh(l.source)}|null)$`):void 0}),yt(n._zod,"values",()=>s.innerType._zod.values?new Set([...s.innerType._zod.values,null]):void 0),n._zod.parse=(l,o)=>l.value===null?l:s.innerType._zod.run(l,o)}),uE=ce("$ZodDefault",(n,s)=>{Ot.init(n,s),n._zod.optin="optional",yt(n._zod,"values",()=>s.innerType._zod.values),n._zod.parse=(l,o)=>{if(o.direction==="backward")return s.innerType._zod.run(l,o);if(l.value===void 0)return l.value=s.defaultValue,l;const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(h=>Gy(h,s)):Gy(d,s)}});function Gy(n,s){return n.value===void 0&&(n.value=s.defaultValue),n}const dE=ce("$ZodPrefault",(n,s)=>{Ot.init(n,s),n._zod.optin="optional",yt(n._zod,"values",()=>s.innerType._zod.values),n._zod.parse=(l,o)=>(o.direction==="backward"||l.value===void 0&&(l.value=s.defaultValue),s.innerType._zod.run(l,o))}),hE=ce("$ZodNonOptional",(n,s)=>{Ot.init(n,s),yt(n._zod,"values",()=>{const l=s.innerType._zod.values;return l?new Set([...l].filter(o=>o!==void 0)):void 0}),n._zod.parse=(l,o)=>{const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(h=>Ky(h,n)):Ky(d,n)}});function Ky(n,s){return!n.issues.length&&n.value===void 0&&n.issues.push({code:"invalid_type",expected:"nonoptional",input:n.value,inst:s}),n}const mE=ce("$ZodCatch",(n,s)=>{Ot.init(n,s),yt(n._zod,"optin",()=>s.innerType._zod.optin),yt(n._zod,"optout",()=>s.innerType._zod.optout),yt(n._zod,"values",()=>s.innerType._zod.values),n._zod.parse=(l,o)=>{if(o.direction==="backward")return s.innerType._zod.run(l,o);const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(h=>(l.value=h.value,h.issues.length&&(l.value=s.catchValue({...l,error:{issues:h.issues.map(m=>gs(m,o,ys()))},input:l.value}),l.issues=[]),l)):(l.value=d.value,d.issues.length&&(l.value=s.catchValue({...l,error:{issues:d.issues.map(h=>gs(h,o,ys()))},input:l.value}),l.issues=[]),l)}}),fE=ce("$ZodPipe",(n,s)=>{Ot.init(n,s),yt(n._zod,"values",()=>s.in._zod.values),yt(n._zod,"optin",()=>s.in._zod.optin),yt(n._zod,"optout",()=>s.out._zod.optout),yt(n._zod,"propValues",()=>s.in._zod.propValues),n._zod.parse=(l,o)=>{if(o.direction==="backward"){const h=s.out._zod.run(l,o);return h instanceof Promise?h.then(m=>Jl(m,s.in,o)):Jl(h,s.in,o)}const d=s.in._zod.run(l,o);return d instanceof Promise?d.then(h=>Jl(h,s.out,o)):Jl(d,s.out,o)}});function Jl(n,s,l){return n.issues.length?(n.aborted=!0,n):s._zod.run({value:n.value,issues:n.issues},l)}const pE=ce("$ZodReadonly",(n,s)=>{Ot.init(n,s),yt(n._zod,"propValues",()=>s.innerType._zod.propValues),yt(n._zod,"values",()=>s.innerType._zod.values),yt(n._zod,"optin",()=>s.innerType?._zod?.optin),yt(n._zod,"optout",()=>s.innerType?._zod?.optout),n._zod.parse=(l,o)=>{if(o.direction==="backward")return s.innerType._zod.run(l,o);const d=s.innerType._zod.run(l,o);return d instanceof Promise?d.then(Fy):Fy(d)}});function Fy(n){return n.value=Object.freeze(n.value),n}const yE=ce("$ZodCustom",(n,s)=>{un.init(n,s),Ot.init(n,s),n._zod.parse=(l,o)=>l,n._zod.check=l=>{const o=l.value,d=s.fn(o);if(d instanceof Promise)return d.then(h=>Xy(h,l,o,n));Xy(d,l,o,n)}});function Xy(n,s,l,o){if(!n){const d={code:"custom",input:l,inst:o,path:[...o._zod.def.path??[]],continue:!o._zod.def.abort};o._zod.def.params&&(d.params=o._zod.def.params),s.issues.push(Nr(d))}}var Qy;class gE{constructor(){this._map=new WeakMap,this._idmap=new Map}add(s,...l){const o=l[0];if(this._map.set(s,o),o&&typeof o=="object"&&"id"in o){if(this._idmap.has(o.id))throw new Error(`ID ${o.id} already exists in the registry`);this._idmap.set(o.id,s)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(s){const l=this._map.get(s);return l&&typeof l=="object"&&"id"in l&&this._idmap.delete(l.id),this._map.delete(s),this}get(s){const l=s._zod.parent;if(l){const o={...this.get(l)??{}};delete o.id;const d={...o,...this._map.get(s)};return Object.keys(d).length?d:void 0}return this._map.get(s)}has(s){return this._map.has(s)}}function vE(){return new gE}(Qy=globalThis).__zod_globalRegistry??(Qy.__zod_globalRegistry=vE());const Wl=globalThis.__zod_globalRegistry;function bE(n,s){return new n({type:"string",...Oe(s)})}function xE(n,s){return new n({type:"string",format:"email",check:"string_format",abort:!1,...Oe(s)})}function Jy(n,s){return new n({type:"string",format:"guid",check:"string_format",abort:!1,...Oe(s)})}function jE(n,s){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,...Oe(s)})}function wE(n,s){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Oe(s)})}function NE(n,s){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Oe(s)})}function SE(n,s){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Oe(s)})}function EE(n,s){return new n({type:"string",format:"url",check:"string_format",abort:!1,...Oe(s)})}function TE(n,s){return new n({type:"string",format:"emoji",check:"string_format",abort:!1,...Oe(s)})}function CE(n,s){return new n({type:"string",format:"nanoid",check:"string_format",abort:!1,...Oe(s)})}function AE(n,s){return new n({type:"string",format:"cuid",check:"string_format",abort:!1,...Oe(s)})}function _E(n,s){return new n({type:"string",format:"cuid2",check:"string_format",abort:!1,...Oe(s)})}function ME(n,s){return new n({type:"string",format:"ulid",check:"string_format",abort:!1,...Oe(s)})}function kE(n,s){return new n({type:"string",format:"xid",check:"string_format",abort:!1,...Oe(s)})}function DE(n,s){return new n({type:"string",format:"ksuid",check:"string_format",abort:!1,...Oe(s)})}function LE(n,s){return new n({type:"string",format:"ipv4",check:"string_format",abort:!1,...Oe(s)})}function OE(n,s){return new n({type:"string",format:"ipv6",check:"string_format",abort:!1,...Oe(s)})}function zE(n,s){return new n({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Oe(s)})}function RE(n,s){return new n({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Oe(s)})}function $E(n,s){return new n({type:"string",format:"base64",check:"string_format",abort:!1,...Oe(s)})}function BE(n,s){return new n({type:"string",format:"base64url",check:"string_format",abort:!1,...Oe(s)})}function UE(n,s){return new n({type:"string",format:"e164",check:"string_format",abort:!1,...Oe(s)})}function PE(n,s){return new n({type:"string",format:"jwt",check:"string_format",abort:!1,...Oe(s)})}function IE(n,s){return new n({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Oe(s)})}function HE(n,s){return new n({type:"string",format:"date",check:"string_format",...Oe(s)})}function YE(n,s){return new n({type:"string",format:"time",check:"string_format",precision:null,...Oe(s)})}function ZE(n,s){return new n({type:"string",format:"duration",check:"string_format",...Oe(s)})}function VE(n,s){return new n({type:"number",checks:[],...Oe(s)})}function qE(n,s){return new n({type:"number",check:"number_format",abort:!1,format:"safeint",...Oe(s)})}function GE(n){return new n({type:"unknown"})}function KE(n,s){return new n({type:"never",...Oe(s)})}function Wy(n,s){return new Jv({check:"less_than",...Oe(s),value:n,inclusive:!1})}function Wu(n,s){return new Jv({check:"less_than",...Oe(s),value:n,inclusive:!0})}function eg(n,s){return new Wv({check:"greater_than",...Oe(s),value:n,inclusive:!1})}function ed(n,s){return new Wv({check:"greater_than",...Oe(s),value:n,inclusive:!0})}function tg(n,s){return new hS({check:"multiple_of",...Oe(s),value:n})}function sb(n,s){return new fS({check:"max_length",...Oe(s),maximum:n})}function No(n,s){return new pS({check:"min_length",...Oe(s),minimum:n})}function ib(n,s){return new yS({check:"length_equals",...Oe(s),length:n})}function FE(n,s){return new gS({check:"string_format",format:"regex",...Oe(s),pattern:n})}function XE(n){return new vS({check:"string_format",format:"lowercase",...Oe(n)})}function QE(n){return new bS({check:"string_format",format:"uppercase",...Oe(n)})}function JE(n,s){return new xS({check:"string_format",format:"includes",...Oe(s),includes:n})}function WE(n,s){return new jS({check:"string_format",format:"starts_with",...Oe(s),prefix:n})}function e1(n,s){return new wS({check:"string_format",format:"ends_with",...Oe(s),suffix:n})}function bi(n){return new NS({check:"overwrite",tx:n})}function t1(n){return bi(s=>s.normalize(n))}function n1(){return bi(n=>n.trim())}function a1(){return bi(n=>n.toLowerCase())}function s1(){return bi(n=>n.toUpperCase())}function i1(){return bi(n=>gN(n))}function r1(n,s,l){return new n({type:"array",element:s,...Oe(l)})}function l1(n,s,l){return new n({type:"custom",check:"custom",fn:s,...Oe(l)})}function o1(n){const s=c1(l=>(l.addIssue=o=>{if(typeof o=="string")l.issues.push(Nr(o,l.value,s._zod.def));else{const d=o;d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=l.value),d.inst??(d.inst=s),d.continue??(d.continue=!s._zod.def.abort),l.issues.push(Nr(d))}},n(l.value,l)));return s}function c1(n,s){const l=new un({check:"custom",...Oe(s)});return l._zod.check=n,l}const u1=ce("ZodISODateTime",(n,s)=>{$S.init(n,s),Ct.init(n,s)});function d1(n){return IE(u1,n)}const h1=ce("ZodISODate",(n,s)=>{BS.init(n,s),Ct.init(n,s)});function m1(n){return HE(h1,n)}const f1=ce("ZodISOTime",(n,s)=>{US.init(n,s),Ct.init(n,s)});function p1(n){return YE(f1,n)}const y1=ce("ZodISODuration",(n,s)=>{PS.init(n,s),Ct.init(n,s)});function g1(n){return ZE(y1,n)}const v1=(n,s)=>{qv.init(n,s),n.name="ZodError",Object.defineProperties(n,{format:{value:l=>MN(n,l)},flatten:{value:l=>_N(n,l)},addIssue:{value:l=>{n.issues.push(l),n.message=JSON.stringify(n.issues,kd,2)}},addIssues:{value:l=>{n.issues.push(...l),n.message=JSON.stringify(n.issues,kd,2)}},isEmpty:{get(){return n.issues.length===0}}})},On=ce("ZodError",v1,{Parent:Error}),b1=uh(On),x1=dh(On),j1=Ao(On),w1=_o(On),N1=LN(On),S1=ON(On),E1=zN(On),T1=RN(On),C1=$N(On),A1=BN(On),_1=UN(On),M1=PN(On),Pt=ce("ZodType",(n,s)=>(Ot.init(n,s),n.def=s,n.type=s.type,Object.defineProperty(n,"_def",{value:s}),n.check=(...l)=>n.clone(js(s,{checks:[...s.checks??[],...l.map(o=>typeof o=="function"?{_zod:{check:o,def:{check:"custom"},onattach:[]}}:o)]})),n.clone=(l,o)=>Ka(n,l,o),n.brand=()=>n,n.register=((l,o)=>(l.add(n,o),n)),n.parse=(l,o)=>b1(n,l,o,{callee:n.parse}),n.safeParse=(l,o)=>j1(n,l,o),n.parseAsync=async(l,o)=>x1(n,l,o,{callee:n.parseAsync}),n.safeParseAsync=async(l,o)=>w1(n,l,o),n.spa=n.safeParseAsync,n.encode=(l,o)=>N1(n,l,o),n.decode=(l,o)=>S1(n,l,o),n.encodeAsync=async(l,o)=>E1(n,l,o),n.decodeAsync=async(l,o)=>T1(n,l,o),n.safeEncode=(l,o)=>C1(n,l,o),n.safeDecode=(l,o)=>A1(n,l,o),n.safeEncodeAsync=async(l,o)=>_1(n,l,o),n.safeDecodeAsync=async(l,o)=>M1(n,l,o),n.refine=(l,o)=>n.check(wT(l,o)),n.superRefine=l=>n.check(NT(l)),n.overwrite=l=>n.check(bi(l)),n.optional=()=>ig(n),n.nullable=()=>rg(n),n.nullish=()=>ig(rg(n)),n.nonoptional=l=>pT(n,l),n.array=()=>eT(n),n.or=l=>aT([n,l]),n.and=l=>iT(n,l),n.transform=l=>lg(n,cT(l)),n.default=l=>hT(n,l),n.prefault=l=>fT(n,l),n.catch=l=>gT(n,l),n.pipe=l=>lg(n,l),n.readonly=()=>xT(n),n.describe=l=>{const o=n.clone();return Wl.add(o,{description:l}),o},Object.defineProperty(n,"description",{get(){return Wl.get(n)?.description},configurable:!0}),n.meta=(...l)=>{if(l.length===0)return Wl.get(n);const o=n.clone();return Wl.add(o,l[0]),o},n.isOptional=()=>n.safeParse(void 0).success,n.isNullable=()=>n.safeParse(null).success,n)),rb=ce("_ZodString",(n,s)=>{hh.init(n,s),Pt.init(n,s);const l=n._zod.bag;n.format=l.format??null,n.minLength=l.minimum??null,n.maxLength=l.maximum??null,n.regex=(...o)=>n.check(FE(...o)),n.includes=(...o)=>n.check(JE(...o)),n.startsWith=(...o)=>n.check(WE(...o)),n.endsWith=(...o)=>n.check(e1(...o)),n.min=(...o)=>n.check(No(...o)),n.max=(...o)=>n.check(sb(...o)),n.length=(...o)=>n.check(ib(...o)),n.nonempty=(...o)=>n.check(No(1,...o)),n.lowercase=o=>n.check(XE(o)),n.uppercase=o=>n.check(QE(o)),n.trim=()=>n.check(n1()),n.normalize=(...o)=>n.check(t1(...o)),n.toLowerCase=()=>n.check(a1()),n.toUpperCase=()=>n.check(s1()),n.slugify=()=>n.check(i1())}),k1=ce("ZodString",(n,s)=>{hh.init(n,s),rb.init(n,s),n.email=l=>n.check(xE(D1,l)),n.url=l=>n.check(EE(L1,l)),n.jwt=l=>n.check(PE(K1,l)),n.emoji=l=>n.check(TE(O1,l)),n.guid=l=>n.check(Jy(ng,l)),n.uuid=l=>n.check(jE(eo,l)),n.uuidv4=l=>n.check(wE(eo,l)),n.uuidv6=l=>n.check(NE(eo,l)),n.uuidv7=l=>n.check(SE(eo,l)),n.nanoid=l=>n.check(CE(z1,l)),n.guid=l=>n.check(Jy(ng,l)),n.cuid=l=>n.check(AE(R1,l)),n.cuid2=l=>n.check(_E($1,l)),n.ulid=l=>n.check(ME(B1,l)),n.base64=l=>n.check($E(V1,l)),n.base64url=l=>n.check(BE(q1,l)),n.xid=l=>n.check(kE(U1,l)),n.ksuid=l=>n.check(DE(P1,l)),n.ipv4=l=>n.check(LE(I1,l)),n.ipv6=l=>n.check(OE(H1,l)),n.cidrv4=l=>n.check(zE(Y1,l)),n.cidrv6=l=>n.check(RE(Z1,l)),n.e164=l=>n.check(UE(G1,l)),n.datetime=l=>n.check(d1(l)),n.date=l=>n.check(m1(l)),n.time=l=>n.check(p1(l)),n.duration=l=>n.check(g1(l))});function Pn(n){return bE(k1,n)}const Ct=ce("ZodStringFormat",(n,s)=>{Et.init(n,s),rb.init(n,s)}),D1=ce("ZodEmail",(n,s)=>{AS.init(n,s),Ct.init(n,s)}),ng=ce("ZodGUID",(n,s)=>{TS.init(n,s),Ct.init(n,s)}),eo=ce("ZodUUID",(n,s)=>{CS.init(n,s),Ct.init(n,s)}),L1=ce("ZodURL",(n,s)=>{_S.init(n,s),Ct.init(n,s)}),O1=ce("ZodEmoji",(n,s)=>{MS.init(n,s),Ct.init(n,s)}),z1=ce("ZodNanoID",(n,s)=>{kS.init(n,s),Ct.init(n,s)}),R1=ce("ZodCUID",(n,s)=>{DS.init(n,s),Ct.init(n,s)}),$1=ce("ZodCUID2",(n,s)=>{LS.init(n,s),Ct.init(n,s)}),B1=ce("ZodULID",(n,s)=>{OS.init(n,s),Ct.init(n,s)}),U1=ce("ZodXID",(n,s)=>{zS.init(n,s),Ct.init(n,s)}),P1=ce("ZodKSUID",(n,s)=>{RS.init(n,s),Ct.init(n,s)}),I1=ce("ZodIPv4",(n,s)=>{IS.init(n,s),Ct.init(n,s)}),H1=ce("ZodIPv6",(n,s)=>{HS.init(n,s),Ct.init(n,s)}),Y1=ce("ZodCIDRv4",(n,s)=>{YS.init(n,s),Ct.init(n,s)}),Z1=ce("ZodCIDRv6",(n,s)=>{ZS.init(n,s),Ct.init(n,s)}),V1=ce("ZodBase64",(n,s)=>{VS.init(n,s),Ct.init(n,s)}),q1=ce("ZodBase64URL",(n,s)=>{GS.init(n,s),Ct.init(n,s)}),G1=ce("ZodE164",(n,s)=>{KS.init(n,s),Ct.init(n,s)}),K1=ce("ZodJWT",(n,s)=>{XS.init(n,s),Ct.init(n,s)}),lb=ce("ZodNumber",(n,s)=>{tb.init(n,s),Pt.init(n,s),n.gt=(o,d)=>n.check(eg(o,d)),n.gte=(o,d)=>n.check(ed(o,d)),n.min=(o,d)=>n.check(ed(o,d)),n.lt=(o,d)=>n.check(Wy(o,d)),n.lte=(o,d)=>n.check(Wu(o,d)),n.max=(o,d)=>n.check(Wu(o,d)),n.int=o=>n.check(ag(o)),n.safe=o=>n.check(ag(o)),n.positive=o=>n.check(eg(0,o)),n.nonnegative=o=>n.check(ed(0,o)),n.negative=o=>n.check(Wy(0,o)),n.nonpositive=o=>n.check(Wu(0,o)),n.multipleOf=(o,d)=>n.check(tg(o,d)),n.step=(o,d)=>n.check(tg(o,d)),n.finite=()=>n;const l=n._zod.bag;n.minValue=Math.max(l.minimum??Number.NEGATIVE_INFINITY,l.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,n.maxValue=Math.min(l.maximum??Number.POSITIVE_INFINITY,l.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,n.isInt=(l.format??"").includes("int")||Number.isSafeInteger(l.multipleOf??.5),n.isFinite=!0,n.format=l.format??null});function Ya(n){return VE(lb,n)}const F1=ce("ZodNumberFormat",(n,s)=>{QS.init(n,s),lb.init(n,s)});function ag(n){return qE(F1,n)}const X1=ce("ZodUnknown",(n,s)=>{JS.init(n,s),Pt.init(n,s)});function sg(){return GE(X1)}const Q1=ce("ZodNever",(n,s)=>{WS.init(n,s),Pt.init(n,s)});function J1(n){return KE(Q1,n)}const W1=ce("ZodArray",(n,s)=>{eE.init(n,s),Pt.init(n,s),n.element=s.element,n.min=(l,o)=>n.check(No(l,o)),n.nonempty=l=>n.check(No(1,l)),n.max=(l,o)=>n.check(sb(l,o)),n.length=(l,o)=>n.check(ib(l,o)),n.unwrap=()=>n.element});function eT(n,s){return r1(W1,n,s)}const tT=ce("ZodObject",(n,s)=>{nE.init(n,s),Pt.init(n,s),yt(n,"shape",()=>s.shape),n.keyof=()=>hi(Object.keys(n._zod.def.shape)),n.catchall=l=>n.clone({...n._zod.def,catchall:l}),n.passthrough=()=>n.clone({...n._zod.def,catchall:sg()}),n.loose=()=>n.clone({...n._zod.def,catchall:sg()}),n.strict=()=>n.clone({...n._zod.def,catchall:J1()}),n.strip=()=>n.clone({...n._zod.def,catchall:void 0}),n.extend=l=>SN(n,l),n.safeExtend=l=>EN(n,l),n.merge=l=>TN(n,l),n.pick=l=>wN(n,l),n.omit=l=>NN(n,l),n.partial=(...l)=>CN(ob,n,l[0]),n.required=(...l)=>AN(cb,n,l[0])});function fs(n,s){const l={type:"object",shape:n??{},...Oe(s)};return new tT(l)}const nT=ce("ZodUnion",(n,s)=>{aE.init(n,s),Pt.init(n,s),n.options=s.options});function aT(n,s){return new nT({type:"union",options:n,...Oe(s)})}const sT=ce("ZodIntersection",(n,s)=>{sE.init(n,s),Pt.init(n,s)});function iT(n,s){return new sT({type:"intersection",left:n,right:s})}const Ld=ce("ZodEnum",(n,s)=>{iE.init(n,s),Pt.init(n,s),n.enum=s.entries,n.options=Object.values(s.entries);const l=new Set(Object.keys(s.entries));n.extract=(o,d)=>{const h={};for(const m of o)if(l.has(m))h[m]=s.entries[m];else throw new Error(`Key ${m} not found in enum`);return new Ld({...s,checks:[],...Oe(d),entries:h})},n.exclude=(o,d)=>{const h={...s.entries};for(const m of o)if(l.has(m))delete h[m];else throw new Error(`Key ${m} not found in enum`);return new Ld({...s,checks:[],...Oe(d),entries:h})}});function hi(n,s){const l=Array.isArray(n)?Object.fromEntries(n.map(o=>[o,o])):n;return new Ld({type:"enum",entries:l,...Oe(s)})}const rT=ce("ZodLiteral",(n,s)=>{rE.init(n,s),Pt.init(n,s),n.values=new Set(s.values),Object.defineProperty(n,"value",{get(){if(s.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return s.values[0]}})});function lT(n,s){return new rT({type:"literal",values:Array.isArray(n)?n:[n],...Oe(s)})}const oT=ce("ZodTransform",(n,s)=>{lE.init(n,s),Pt.init(n,s),n._zod.parse=(l,o)=>{if(o.direction==="backward")throw new Pv(n.constructor.name);l.addIssue=h=>{if(typeof h=="string")l.issues.push(Nr(h,l.value,s));else{const m=h;m.fatal&&(m.continue=!1),m.code??(m.code="custom"),m.input??(m.input=l.value),m.inst??(m.inst=n),l.issues.push(Nr(m))}};const d=s.transform(l.value,l);return d instanceof Promise?d.then(h=>(l.value=h,l)):(l.value=d,l)}});function cT(n){return new oT({type:"transform",transform:n})}const ob=ce("ZodOptional",(n,s)=>{oE.init(n,s),Pt.init(n,s),n.unwrap=()=>n._zod.def.innerType});function ig(n){return new ob({type:"optional",innerType:n})}const uT=ce("ZodNullable",(n,s)=>{cE.init(n,s),Pt.init(n,s),n.unwrap=()=>n._zod.def.innerType});function rg(n){return new uT({type:"nullable",innerType:n})}const dT=ce("ZodDefault",(n,s)=>{uE.init(n,s),Pt.init(n,s),n.unwrap=()=>n._zod.def.innerType,n.removeDefault=n.unwrap});function hT(n,s){return new dT({type:"default",innerType:n,get defaultValue(){return typeof s=="function"?s():Yv(s)}})}const mT=ce("ZodPrefault",(n,s)=>{dE.init(n,s),Pt.init(n,s),n.unwrap=()=>n._zod.def.innerType});function fT(n,s){return new mT({type:"prefault",innerType:n,get defaultValue(){return typeof s=="function"?s():Yv(s)}})}const cb=ce("ZodNonOptional",(n,s)=>{hE.init(n,s),Pt.init(n,s),n.unwrap=()=>n._zod.def.innerType});function pT(n,s){return new cb({type:"nonoptional",innerType:n,...Oe(s)})}const yT=ce("ZodCatch",(n,s)=>{mE.init(n,s),Pt.init(n,s),n.unwrap=()=>n._zod.def.innerType,n.removeCatch=n.unwrap});function gT(n,s){return new yT({type:"catch",innerType:n,catchValue:typeof s=="function"?s:()=>s})}const vT=ce("ZodPipe",(n,s)=>{fE.init(n,s),Pt.init(n,s),n.in=s.in,n.out=s.out});function lg(n,s){return new vT({type:"pipe",in:n,out:s})}const bT=ce("ZodReadonly",(n,s)=>{pE.init(n,s),Pt.init(n,s),n.unwrap=()=>n._zod.def.innerType});function xT(n){return new bT({type:"readonly",innerType:n})}const jT=ce("ZodCustom",(n,s)=>{yE.init(n,s),Pt.init(n,s)});function wT(n,s={}){return l1(jT,n,s)}function NT(n){return o1(n)}const ub=fs({id:Pn(),period:fs({schedule:hi(["weekly","biweekly","monthly","flex"]),start:Pn(),end:Pn(),createdAt:Pn()}),tierAtCreation:hi(["critical","fragile","steady","thriving"]),snapshot:fs({incomeThisPeriod:Ya().optional(),essentialsThisPeriod:Ya().optional(),bufferCurrent:Ya().optional(),leftoverProjected:Ya().optional(),driftSignal:hi(["up","down"]).optional(),currency:Pn()}).strict(),recommendation:fs({essentials:Ya(),buffer:Ya(),debt:Ya(),breathingRoom:Ya(),summaryLine:Pn(),supportiveLine:Pn()}),status:fs({version:lT(1),state:hi(["active","acknowledged","superseded","expired"]),acknowledgedAt:Pn().optional(),rationale:Pn().optional()})}),ST=fs({plan:ub,metadata:fs({triggeredBy:hi(["income","tierChange","manual","drift","fallback"]),noticeText:Pn().optional(),reason:Pn().optional()})}),ET="USD",TT=n=>({incomeThisPeriod:n.incomeThisPeriod,essentialsThisPeriod:n.essentialsThisPeriod,bufferCurrent:n.bufferCurrent,leftoverProjected:n.leftoverProjected,driftSignal:n.driftSignal,currency:n.currency??ET}),CT="payPeriodPlans",AT="payPeriodLatestPlanId",Od="pay-period-plan-updated",db=()=>We(CT),hb=()=>We(AT),Ar=()=>{const n=it.get(db());return Array.isArray(n)?n:[]},mh=n=>{it.set(db(),n)},_T=()=>{const n=it.get(hb());return n&&typeof n=="object"&&typeof n.id=="string"?n.id:null},mb=n=>{it.set(hb(),{id:n})},MT=n=>n.status.state==="active"?{...n,status:{...n.status,state:"superseded"}}:n,kT=(n,s)=>{if(n.status.state==="expired")return!1;const l=n.period?.end?new Date(n.period.end):null;return l!==null&&!Number.isNaN(l.getTime())&&l<s},fh=()=>{typeof window>"u"||window.dispatchEvent(new Event(Od))},DT=()=>Ar(),zd=()=>{const n=Ar(),s=_T();return s?n.find(o=>o.id===s)||null:n.length?n[n.length-1]:null},LT=n=>{const s=ub.parse(n),d=[...Ar().map(MT),s];return mh(d),mb(s.id),fh(),s},Rd=(n=new Date)=>{const s=Ar();let l=!1;const o=s.map(d=>kT(d,n)?(l=!0,{...d,status:{...d.status,state:"expired"}}):d);return l&&(mh(o),fh()),o},OT=n=>{const s=Ar();let l=null;const o=s.map(d=>d.id!==n?d:(l={...d,status:{...d.status,state:"acknowledged",acknowledgedAt:new Date().toISOString()}},l));return l?(mh(o),mb(n),fh(),l):null},zT=n=>typeof window>"u"?()=>{}:(window.addEventListener(Od,n),()=>window.removeEventListener(Od,n)),og=(n,s)=>{if(!n||!s)return"";try{const l=new Date(n),o=new Date(s);if(Number.isNaN(l.getTime())||Number.isNaN(o.getTime()))return"";const d=l.toLocaleDateString(void 0,{month:"short",day:"numeric"}),h=o.toLocaleDateString(void 0,{month:"short",day:"numeric"});return`${d} - ${h}`}catch{return""}},RT={critical:"Critical tier means we're steadying essentials and guarding what matters most.",fragile:"Fragile isn't failure; it's a signal to keep the buffer growing with gentle habits.",steady:"Steady tier keeps things calm while you protect the cushion you built.",thriving:"Thriving means momentum can expand without ever losing the cushion."},cg="notificationSeen_",$T=n=>n?n==="steady"?"balanced":n:"fragile",BT=(n,s,l)=>{const o=s?.snapshot,d=s?.recommendation?.essentials||0,h=o?.bufferCurrent&&d>0?o.bufferCurrent/d:0,m=n.payload?.projectedLeftover??o?.leftoverProjected??n.payload?.supportiveLine??0,g=n.type==="DRIFT_ALERT"||o?.driftSignal==="down"||!!n.payload?.driftMagnitude,v=n.type==="PAY_PERIOD_PLAN"||n.type==="TIER_CHANGE";return To({tier:$T(l),bufferMonths:h,leftoverTrend:m>=0?1:-1,driftFlag:g,improvements:v,timeInTierDays:0,context:{periodStart:s?.period.start||n.payload?.periodStart,periodEnd:s?.period.end||n.payload?.periodEnd}})},UT=({onNavigate:n=()=>{}})=>{const[s,l]=f.useState(!1),[o,d]=f.useState(()=>Uy()),[h,m]=f.useState(()=>Md()),g=f.useMemo(()=>DT(),[h]),{preferences:v}=xt(),y=f.useRef({}),x=v.notificationLevel||"normal",j=f.useCallback(D=>{if(!D)return null;if(y.current[D])return y.current[D];const B=new Set;if(typeof window<"u"){const R=window.localStorage.getItem(`${cg}${D}`);if(R)try{const W=JSON.parse(R);Array.isArray(W)&&W.forEach(fe=>{typeof fe=="string"&&B.add(fe)})}catch{}}return y.current[D]=B,B},[]),w=f.useCallback((D,B)=>{if(!(typeof window>"u"))try{window.localStorage.setItem(`${cg}${D}`,JSON.stringify(Array.from(B)))}catch{}},[]);f.useCallback(D=>{if(!D||D.suppressed||x==="off"||x==="important_only"&&D.tone==="inspired")return!1;const B=D.periodKey,R=D.guidanceHash;if(!B||!R)return!0;const W=j(B);return W.has(R)?!1:(W.add(R),w(B,W),!0)},[j,w,x]),f.useEffect(()=>fN(()=>{d(Uy()),m(Md())}),[]);const T=()=>l(D=>!D),A=()=>l(!1),E=D=>{D.payload?.planId&&(n("split-gps"),mN(D.id),l(!1))},z=o>1?`${o} new updates`:o===1?"1 new update":"No new updates",Z=D=>`notification-item__tier-badge notification-item__tier-badge--${D?D.toLowerCase():"neutral"}`;return a.jsxs(a.Fragment,{children:[a.jsxs("button",{type:"button",className:`notification-bell ${s?"notification-bell--active":""}`,onClick:T,"aria-label":`Open notifications (${z})`,"aria-expanded":s,children:[a.jsxs("svg",{className:"notification-bell__icon",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:[a.jsx("path",{d:"M12 3a4 4 0 0 1 4 4v1.1c0 .7.2 1.4.6 2l.8 1.3c.4.7.6 1.4.6 2.1v.5H6v-.5c0-.7.2-1.4.6-2.1l.8-1.3c.4-.6.6-1.3.6-2V7a4 4 0 0 1 4-4z",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M10 19a2 2 0 0 0 4 0",fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"})]}),o>0&&a.jsx("span",{className:"notification-bell__dot"})]}),s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"notification-drawer-backdrop",onClick:A,"aria-hidden":"true"}),a.jsxs("aside",{className:"notification-drawer",role:"dialog","aria-modal":"true",children:[a.jsxs("header",{className:"notification-drawer__header",children:[a.jsxs("div",{children:[a.jsx("p",{className:"notification-drawer__title",children:"Financial briefings"}),a.jsx("p",{className:"notification-drawer__subtitle",children:"Updates tuned to your resilience - calm, supportive, purposeful."})]}),a.jsx("span",{className:"notification-drawer__count",children:z}),a.jsx("button",{type:"button",className:"notification-drawer__close","aria-label":"Close notifications",onClick:A,children:a.jsx("span",{"aria-hidden":"true",children:""})})]}),a.jsx("div",{className:"notification-drawer__list",children:h.length===0?a.jsx("p",{className:"notification-drawer__empty",children:"We'll share important shifts right here."}):h.map(D=>{const B=D.payload?.planId?g.find(U=>U.id===D.payload.planId):null,R=B?.tierAtCreation||D.payload?.tierAtCreation,W=R?RT[R]:null,fe=BT(D,B,R),re=og(B?.period.start,B?.period.end)||og(D.payload?.periodStart,D.payload?.periodEnd),K=B?.snapshot.leftoverProjected??D.payload?.projectedLeftover;B?.snapshot.currency??D.payload?.currency;const te=D.payload?.summaryLine||D.message,xe=D.payload?.supportiveLine||"Weve prepared guidance to keep things steady.";return a.jsxs("article",{className:`notification-item guidance-tone--${fe.tone} ${D.acknowledged?"notification-item--acknowledged":""}`,onClick:()=>hN(D.id),children:[a.jsxs("div",{className:"notification-item__top",children:[a.jsxs("div",{children:[a.jsx("p",{className:"notification-item__title",children:D.title}),te&&a.jsx("p",{className:"notification-item__subtitle",children:te})]}),D.tone&&a.jsx("span",{className:`notification-item__tone notification-item__tone--${D.tone}`,children:D.tone})]}),a.jsx("p",{className:"notification-item__guidance-eyebrow",children:fe.eyebrow}),a.jsx("p",{className:"notification-item__supportive",children:fe.body}),a.jsx("p",{className:"notification-item__supportive notification-item__supportive--secondary",children:xe}),a.jsx("div",{className:"notification-item__actions",children:D.payload?.planId&&a.jsx("button",{type:"button",className:"notification-item__action",onClick:U=>{U.stopPropagation(),E(D)},children:"View plan"})}),(re||R||K!==void 0)&&a.jsxs("div",{className:"notification-item__footer",children:[re&&a.jsx("span",{children:re}),R&&a.jsxs("span",{className:Z(R),children:[R.charAt(0).toUpperCase()+R.slice(1)," tier"]}),W&&a.jsx("span",{className:"notification-item__reassurance",children:W})]})]},D.id)})})]})]})]})},PT=[{label:"Dashboard",page:"dashboard"},{label:"Track Spending",page:"livebudget"},{label:"Money Coach",page:"budget"},{label:"Money Map",page:"split-gps"},{label:"Debt & Payoff",page:"total-debt"},{label:"Savings & Cash",page:"savings"},{label:"Assets & Net Worth",page:"assets"},{label:"Goals",page:"goals"},{label:"Bank Statements",page:"import"},{label:"Refine your numbers",page:"refine"},{label:"Settings",page:"settings"}],IT=({activePage:n,onNavigate:s=()=>{},closeMenu:l=()=>{}})=>{const{preferences:o}=xt(),d=o.premiumAccess&&o.businessFeatures,h=f.useMemo(()=>PT.filter(m=>m.page!=="business-tools"||d),[d]);return a.jsx(a.Fragment,{children:h.map(m=>a.jsx("a",{href:"#",onClick:g=>{g.preventDefault(),l(),s(m.page)},className:m.page===n?"active":"",children:m.label},m.page))})},HT=80,YT=({activePage:n,onNavigate:s=()=>{},closeMenu:l=()=>{},logoutHref:o="/Local/BudgetIQ Login",logoutLabel:d="Logout",logoutPage:h="login"})=>{const m=f.useRef(null);f.useCallback(v=>{m.current&&m.current.scrollBy({top:v*HT,behavior:"smooth"})},[m]);const g=v=>{v.preventDefault(),l();try{localStorage.removeItem("lunaLoggedIn"),localStorage.removeItem("lunaStayLoggedIn"),sessionStorage.removeItem("lunaLoggedIn"),window.dispatchEvent(new Event("auth-updated"))}catch{}if(h){s(h);return}window.location.replace(o)};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"menu-scroll",ref:m,children:[a.jsx(IT,{activePage:n,onNavigate:s,closeMenu:l}),a.jsx("a",{href:o,onClick:g,children:d})]})})},ZT="/Local/BudgetIQ Login",VT=({activePage:n,onNavigate:s=()=>{},logoutHref:l=ZT})=>{const[o,d]=f.useState(!1),h=f.useRef(null),m=f.useRef(null),g=f.useMemo(()=>Array.from({length:9}),[]);f.useEffect(()=>{if(typeof document>"u")return;const y=x=>{o&&(h.current&&h.current.contains(x.target)||m.current&&m.current.contains(x.target)||d(!1))};return document.addEventListener("click",y),()=>document.removeEventListener("click",y)},[o]);const v=y=>{d(!1),s(y)};return a.jsxs("div",{className:"menu-container",children:[o&&a.jsx("div",{className:"menu-overlay",onClick:()=>d(!1)}),a.jsx("div",{className:"hamburger",ref:h,onClick:y=>{y.stopPropagation(),d(x=>!x)},children:g.map((y,x)=>a.jsx("span",{className:"hamburger-dot","aria-hidden":"true"},x))}),a.jsx("div",{className:"dropdown-menu",ref:m,style:{display:o?"block":"none"},children:a.jsx(YT,{activePage:n,onNavigate:v,closeMenu:()=>d(!1),logoutHref:l,menuOpen:o})})]})},St=({className:n="",onNavigate:s=()=>{},...l})=>{const o=["topRightControls",n].filter(Boolean).join(" ");return a.jsxs("div",{className:o,children:[a.jsx(UT,{onNavigate:s}),a.jsx(VT,{onNavigate:s,...l})]})},qT=(n,s,l)=>Math.min(l,Math.max(s,n)),ui=[{key:"needs",label:"Stability / Buffer",detail:"Money that protects you from surprises and keeps life steady. This strengthens your safety net so essential bills, income stability, and peace of mind stay secure."},{key:"wants",label:"Joy / Lifestyle",detail:"Spending that makes life feel livable and enjoyable -- intentional, steady, and done after stability is protected."},{key:"savings",label:"Progress (Savings & Debt)",detail:"Money that moves you forward: building savings, reducing debt faster, and improving long-term financial security with consistency."}],Za=[{key:"critical",label:"Critical / Survival",ratioMax:.05,experience:"Every dollar needs a job right now - mostly essentials and rebuilding a small safety buffer.",focus:"Cover essentials, stop discretionary drains, and rebuild a buffer.",variants:[{label:"Crisis (90 / 5 / 5)",needs:90,wants:5,savings:5,note:"Lock spending to essentials and stabilize cash flow before expanding any buckets."},{label:"Survival (85 / 10 / 5)",needs:85,wants:10,savings:5,note:"Keep joy/lifestyle minimal while slowly rebuilding a small safety buffer to handle shocks."}]},{key:"tight",label:"Steady",ratioMax:.12,experience:"Bills are covered but leftover cash still feels fragile.",focus:"Protect buffers, control spending, and celebrate small wins.",variants:[{label:"Steady (60 / 25 / 15)",needs:60,wants:25,savings:15,note:"Hold spending steady so leftover builds the next safety net layer."}]},{key:"balanced",label:"Balanced Reality",ratioMax:.2,experience:"Meaningful discretion; you can save and enjoy life.",focus:"Consistency and optimization on joy/lifestyle and progress.",variants:[{label:"Balanced (55 / 25 / 20)",needs:55,wants:25,savings:20,note:"Automate progress and keep joy/lifestyle meaningful, not reckless."}]},{key:"traditional",label:"Traditional / Optimized",ratioMax:.5,experience:"Leftover is healthy enough that traditional budgeting benchmarks can work without strain.",focus:"Growth, investing, and long-term planning become primary.",variants:[{label:"Traditional (50 / 30 / 20)",needs:50,wants:30,savings:20,note:"Traditional benchmarks like 50/30/20 are common, but Luna still prioritizes leftover health."},{label:"Optimized (45 / 35 / 20)",needs:45,wants:35,savings:20,note:"Push joy/lifestyle slightly higher while funneling more to investing."}]},{key:"sovereign",label:"Sovereign / Elite",ratioMax:1/0,experience:"Your money is now engineering your future. Lifestyle creep is the enemy.",focus:"Cap lifestyle, build opportunity capital, and accelerate asset velocity.",variants:[{label:"Sovereign (40 / 30 / 30)",needs:40,wants:30,savings:30,note:"Preserve the margin: keep lifestyle flat, build a strike fund, and pour every raise into progress."}]}],GT=.25,qn=({income:n=0,leftover:s=0})=>{const l=n>0?Math.max(s/n,0):0,o=Za.findIndex(R=>l<=R.ratioMax),d=o===-1?Za.length-1:Math.max(o,0),h=Za[Math.min(d,Za.length-1)],m=d>0?Za[d-1].ratioMax:0,g=Math.max(h.ratioMax-m,Number.EPSILON),v=h.ratioMax===1/0?1:qT((l-m)/g,0,1),y=Math.min(h.variants.length-1,Math.floor(v*h.variants.length)),x=h.variants[Math.max(0,y)]||h.variants[0],j={needs:x.needs/100,wants:x.wants/100,savings:x.savings/100},w=Math.max(s,0),T=ui.map(R=>({...R,ratio:j[R.key]??0,amount:w*(j[R.key]??0)})),A=T.reduce((R,W)=>({...R,[W.key]:W.amount}),{}),E=n>0?Math.min(l/GT,1)*100:0,z=n>0?`Leftover ratio: ${(l*100).toFixed(1)}%`:"Add income to unlock the view",Z=Za[Math.min(d+1,Za.length-1)],D=d<Za.length-1,B=D&&Number.isFinite(h.ratioMax)?h.ratioMax:null;return{safeRatio:l,sliderPercent:E,flowPercentLabel:z,stageIndex:d,currentStage:h,nextStage:D?Z:null,nextThreshold:B,recommendedVariant:x,allocationRows:T,recommendedAmounts:A}},go=n=>String(n).padStart(2,"0"),KT="monthly",FT=(n={})=>({mode:n.budgetPeriod||KT,startDay:Number(n.budgetPeriodStartDay||1),anchorDate:n.budgetPeriodAnchor||""}),ri=n=>new Date(n.getFullYear(),n.getMonth(),n.getDate()),mr=n=>`${n.getFullYear()}-${go(n.getMonth()+1)}`,td=(n,s)=>{const l=new Date(n);return l.setMonth(l.getMonth()+s),l},nd=(n,s)=>{const l=new Date(n);return l.setDate(l.getDate()+s),l},XT=(n,s)=>{const l=Math.min(Math.max(s,1),28),o=new Date(n.getFullYear(),n.getMonth(),l);return n>=o?o:new Date(n.getFullYear(),n.getMonth()-1,l)},QT=n=>{const s=n.getMonth(),l=s-s%3;return new Date(n.getFullYear(),l,1)},JT=(n=[])=>{const s=(n||[]).filter(l=>l?.type==="income").map(l=>new Date(l.date||Date.now())).filter(l=>!Number.isNaN(l.getTime()));return s.length?(s.sort((l,o)=>o-l),s[0]):null},Gn=(n={},s=[],l=new Date)=>{const{mode:o,startDay:d,anchorDate:h}=FT(n),m=l instanceof Date?l:new Date;if(o==="custom-day"){const y=ri(XT(m,d)),x=td(y,1);return{mode:o,start:y,end:x,key:`${o}:${mr(y)}-${go(y.getDate())}`}}if(o==="quarterly"){const y=ri(QT(m)),x=td(y,3);return{mode:o,start:y,end:x,key:`${o}:${mr(y)}`}}if(o==="weekly"||o==="biweekly"||o==="four-week"){const y=o==="weekly"?7:o==="biweekly"?14:28,x=h?new Date(h):m,j=ri(x),w=Math.floor((ri(m)-j)/(1e3*60*60*24)),T=Math.floor(w/y),A=nd(j,Math.max(T,0)*y),E=nd(A,y);return{mode:o,start:A,end:E,key:`${o}:${mr(A)}-${go(A.getDate())}`}}if(o==="paycheck"){const y=JT(s),x=ri(y||m),j=nd(ri(m),1);return{mode:o,start:x,end:j,key:`${o}:${mr(x)}-${go(x.getDate())}`}}const g=new Date(m.getFullYear(),m.getMonth(),1),v=td(g,1);return{mode:o,start:g,end:v,key:`${o}:${mr(g)}`}},ph=(n=[],s)=>s?(n||[]).filter(l=>{const o=new Date(l?.date||Date.now());return Number.isNaN(o.getTime())?!1:o>=s.start&&o<s.end}):[],WT="periodHistory_",eC="periodHistoryIndex_",tC=n=>String(n||"").replace(/[:]/g,"_"),nC=n=>`${WT}${tC(n)}`,aC=n=>`${eC}${n||"monthly"}`,xi=n=>{try{const s=localStorage.getItem(aC(n)),l=s?JSON.parse(s):[];return Array.isArray(l)?l:[]}catch{return[]}},So=n=>{try{const s=localStorage.getItem(nC(n));return s?JSON.parse(s):null}catch{return null}},sC=(n,s)=>{const l=h=>{if(!h)return null;const m=h.split(":");if(m.length!==2)return null;const g=m[1].split("-").slice(0,3).join("-"),v=new Date(g);return Number.isNaN(v.getTime())?null:v},o=l(n),d=l(s);return!o||!d?0:o.getTime()-d.getTime()},ko=(n,s,l)=>{const{mode:o}=Gn(n);if(!s||!l||o==="paycheck"||sC(s,l)<=0)return 0;const h=xi(o),m=h.indexOf(s),g=h.indexOf(l);return m>-1&&g>-1?Math.max(m-g-1,0):0},ug="budgetMode",fb="liveBudgetTransactions",iC="savedBudgetSplit",rC="budgetBestLeftover",to={incomes:[],expenses:[],savingsBalance:"",savingsMonthly:""},lC=()=>{try{const n=fa.get("moneyProfile");if(!n)return{...to};const s=JSON.parse(n);return!s||typeof s!="object"?{...to}:{...to,...s}}catch{return{...to}}},dg=()=>{try{const n=fa.get(fb,"[]"),s=JSON.parse(n);return Array.isArray(s)?s:[]}catch{return[]}},oC="Plan",cC="This split keeps leftover aligned across stability, debt, and savings.",uC="Calm targets protect essentials and keep progress steady.",hg=()=>(Rd(),zd()),dC=({onNavigate:n=()=>{}})=>{const{formatCurrency:s,preferences:l}=xt(),[o,d]=f.useState(()=>readNamespacedItem(ug,"")||""),[h,m]=f.useState(()=>lC()),[g,v]=f.useState(()=>dg()),[y,x]=f.useState(!0),j=f.useMemo(()=>Gn(l,g),[l,g]),w=f.useMemo(()=>{if(!j?.start||!j?.end)return"";const N=new Date(j.end);N.setDate(N.getDate()-1);const q={month:"short",day:"numeric"},je=j.start.toLocaleDateString(void 0,q),Ae=N.toLocaleDateString(void 0,q);return je===Ae?`Current period: ${je}`:`Current period: ${je} - ${Ae}`},[j]);f.useEffect(()=>{const N=()=>v(dg()),q=je=>{je.key===fb&&N()};return window.addEventListener("storage",q),window.addEventListener("live-budget-updated",N),()=>{window.removeEventListener("storage",q),window.removeEventListener("live-budget-updated",N)}},[]);const T=N=>N.type==="expense"?N.expenseType||"personal":N.incomeType||"personal",A=N=>T(N)==="personal",E=f.useMemo(()=>(h.incomes||[]).filter(N=>!N.linkedTxnId&&(N.incomeType||"personal")==="personal"),[h.incomes]),z=f.useMemo(()=>(h.expenses||[]).filter(N=>!N.linkedTxnId&&(N.expenseType||"personal")==="personal"),[h.expenses]),Z=f.useMemo(()=>(h.expenses||[]).filter(N=>!N.linkedTxnId&&(N.expenseType||"personal")==="business"),[h.expenses]),D=f.useMemo(()=>E.reduce((N,q)=>N+(q.monthly??q.amount??0),0),[E]),B=f.useMemo(()=>z.reduce((N,q)=>N+(q.monthly??q.amount??0),0),[z]),R=f.useMemo(()=>z.reduce((N,q)=>N+(Number(q.monthly??q.amount??0)||0),0),[z]),W=f.useMemo(()=>Z.reduce((N,q)=>N+(Number(q.monthly??q.amount??0)||0),0),[Z]),fe=f.useMemo(()=>ph(g,j),[g,j]),re=f.useMemo(()=>fe.filter(N=>N.type==="income"&&A(N)&&!N.baselineSync).reduce((N,q)=>N+(Number(q.amount)||0),0),[fe]),K=f.useMemo(()=>fe.filter(N=>N.type==="expense"&&A(N)).reduce((N,q)=>N+(Number(q.amount)||0),0),[fe]),te=f.useMemo(()=>{const N=D+re,q=B+K,je=N-q;return{income:N,expenses:q,leftover:je}},[D,B,re,K]),xe=te.leftover<0,U=f.useMemo(()=>xi(j.mode),[j.mode,fe.length]),se=U.length?U[U.length-1]:null,k=f.useMemo(()=>ko(l,j.key,se),[l,j.key,se]),ne=fe.length>0,L=re===0&&D>0;f.useEffect(()=>{if(!ne||L){x(!0);const N=setTimeout(()=>x(!1),45e3);return()=>clearTimeout(N)}x(!1)},[ne,L]);const C=f.useMemo(()=>Number(h.savingsBalance)||0,[h.savingsBalance]),M=f.useMemo(()=>qn({income:te.income,leftover:te.leftover}),[te.income,te.leftover]);f.useEffect(()=>{console.log("Budget totals",te),console.log("Split plan",M)},[te,M]);const[G,F]=f.useState(null),[he,S]=f.useState(!1),[P,pe]=f.useState(!1),[ue,we]=f.useState(!1),[ve,ke]=f.useState(()=>hg());f.useEffect(()=>zT(()=>ke(hg())),[]);const Ze=N=>{const q=String(N??"").replace(/,/g,""),je=Number(q);return Number.isFinite(je)?je:0};f.useEffect(()=>{if(typeof window>"u")return;const N=()=>{try{const q=readNamespacedItem(iC);F(q?JSON.parse(q):null)}catch{F(null)}};return N(),window.addEventListener("storage",N),window.addEventListener("budget-split-updated",N),()=>{window.removeEventListener("storage",N),window.removeEventListener("budget-split-updated",N)}},[]);const me=ve?.recommendation.summaryLine,Q=ve?.recommendation.supportiveLine,be=ve?ve.status.state==="active"?"Plan active":"Plan recorded":"Plan pending",J=f.useMemo(()=>{if(!ve)return[];const N=ve.recommendation;return[{label:"Buffer",value:N.buffer},{label:"Debt progress",value:N.debt},{label:"Breathing room",value:N.breathingRoom}]},[ve]),ye=ve?.status.rationale,Ne=f.useMemo(()=>{if(!G||typeof G!="object")return null;const q=["needs","wants","savings"].reduce((Ae,_e)=>(Ae[_e]=Ze(G[_e]),Ae),{}),je=q.needs+q.wants+q.savings;return je<=0?null:{values:q,total:je}},[G]);f.useMemo(()=>{const N=Math.max(te.leftover,0);return M.allocationRows.map(q=>{if(Ne?.values&&Ne.values[q.key]>0){const je=Ne.values[q.key],Ae=Ne.total||0,_e=Ae>0&&N>0?je/Ae*N:je,Ge=N>0?_e/N:q.ratio,Ke=N>0?Math.round(Ge*100):0;return{label:q.label,value:`${Ke}% of leftover`,detail:q.detail,amount:_e,ratio:Ge}}return{label:q.label,value:`${Math.round(q.ratio*100)}% of leftover`,detail:q.detail,amount:q.amount}})},[Ne,M,te.leftover]);const Se=f.useMemo(()=>{const{income:N,expenses:q,leftover:je}=te,Ae=M.currentStage?.key||"critical",_e=M.currentStage?.label||"Critical / Survival";return je<=0||N===0||Ae==="critical"?{mode:"critical",title:_e,allocations:[{label:"Bare Essentials",value:"Keep: housing, utilities, food, transport",detail:"Pay rent/mortgage, basic utilities, groceries, and the transport you actually need for work. Pause everything else until cash flow is positive."},{label:"Trim Joy / Lifestyle",value:"Cut joy/lifestyle for 60-90 days",detail:"Freeze eating out, subscriptions, impulse buys, and upgrades. Set a hard weekly cash cap for anything discretionary."},{label:"Quick Cash Boost",value:"Sell 1-2 items + extra shifts",detail:"List unused electronics/furniture locally, and add short-term overtime/side shifts to create a fast $300-$700 buffer within 2-3 weeks."},{label:"Debt Strategy",value:"Avalanche on highest APR",detail:"Keep every minimum on auto-pay to avoid fees, then throw every spare dollar at the highest-interest balance first. Call lenders to ask for lower rates or hardship plans."}],tone:"Focus on essentials and small wins until cash flow turns positive. We'll expand the plan once it's stable."}:Ae==="tight"||Ae==="balanced"?{mode:Ae,title:_e,allocations:[{label:"Debt Above Minimums",value:"50% of leftover + hybrid",pct:.5,detail:"Pay minimums on auto, then target the highest APR. If motivation lags, clear a small balance first, then return to highest APR to minimize interest."},{label:"Emergency Buffer",value:"30% of leftover + $1k-$3k",pct:.3,detail:"Auto-transfer on payday into savings until you hit $1k-$3k. Keep this in a HYSA for instant access."},{label:"Goals/Fun",value:"20% leftover",pct:.2,detail:"Pick 1-2 goals only. Keep a tiny fun line (even $10-$20/week) to avoid burnout while you build momentum."}],tone:"Stay consistent for 90-180 days, then revisit percentages."}:Ae==="traditional"?{mode:"traditional",title:_e,allocations:[{label:"Emergency Growth",value:"10-20% leftover",pct:.15,detail:"Grow to 3-6 months of expenses in a HYSA. Keep one month instantly accessible; rest can be in a high-yield account."},{label:"Debt Payoff",value:"40-50% leftover",pct:.45,detail:"Attack the highest interest balance; refinance if possible. Keep auto-pay minimums on everything else."},{label:"Investing",value:"Always take the match",detail:"Even in payoff mode, capture employer 401k/403b match. After the match, focus leftover cash on high-APR debt until it's gone."},{label:"Goals/Fun",value:"10-20% leftover",pct:.15,detail:"Automate transfers for 1-2 goals (move, car, trip) and a small lifestyle bucket to prevent creep and keep morale high."}],tone:"Lean into growth while protecting the habits that keep you consistent."}:Ae==="sovereign"?{mode:"sovereign",title:"Sovereign Status",allocations:[{label:"Lifestyle Capping",value:"Keep expenses flat as income climbs",detail:"Youve optimized your lifeevery future raise should shift into Progress or Opportunity, not lifestyle creep."},{label:"Opportunity Fund",value:"12 months of expenses",detail:"This isn't an emergency stash. It's strike capital for major moves: investments, business pivots, or a bold career shift."},{label:"Asset Velocity",value:"Debt liquidation & income assets",detail:"Debt is your only anchor now. Target remaining low-interest balances or pour surplus into income-producing, tax-advantaged assets."}],tone:"Sovereignty is maintained, not earned once. Guard the 50% margin and keep directing surplus toward opportunity."}:{mode:"traditional",title:_e,allocations:[{label:"Emergency Growth",value:"10-20% leftover",pct:.15,detail:"Grow to 3-6 months of expenses in a HYSA. Keep one month instantly accessible; rest can be in a high-yield account."},{label:"Debt Payoff",value:"40-50% leftover",pct:.45,detail:"Attack the highest interest balance; refinance if possible. Keep auto-pay minimums on everything else."},{label:"Investing",value:"Always take the match",detail:"Even in payoff mode, capture employer 401k/403b match. After the match, focus leftover cash on high-APR debt until it's gone."},{label:"Goals/Fun",value:"10-20% leftover",pct:.15,detail:"Automate transfers for 1-2 goals (move, car, trip) and a small lifestyle bucket to prevent creep and keep morale high."}],tone:"Lean into growth while protecting the habits that keep you consistent."}},[te,M]),Pe=f.useMemo(()=>{const N=M.currentStage?.key,je={critical:300,tight:1e3,balanced:1e3,traditional:te.expenses>0?te.expenses*3:0,sovereign:te.expenses>0?te.expenses*12:0}[N]??1e3,Ae={critical:"Start small. Even a small amount matters. Build toward a $300 safety cushion so surprises do not derail you.",tight:"You are stabilizing. Aim for a $1,000 buffer next to cover common surprises.",balanced:"You are building momentum. A $1,000 buffer protects steady progress.",traditional:"You are in a strong place. Aim for 3 months of essentials to secure long-term resilience.",sovereign:"Sovereign status means your margin is strong. Build a 12-month opportunity fund to stay unstoppable."},_e=N==="traditional"&&te.expenses>0?3:N==="sovereign"&&te.expenses>0?12:null;return{target:je,message:Ae[N]||Ae.balanced,multiplier:_e}},[M.currentStage,te.expenses]);f.useMemo(()=>{const N=M.currentStage?.key;return N==="traditional"&&te.expenses>0?`Based on monthly expenses (${s(te.expenses)})  3`:N==="sovereign"&&te.expenses>0?`Based on monthly expenses (${s(te.expenses)})  12 (Opportunity Fund)`:{critical:"Fixed $300 target",tight:"Fixed $1,000 target",balanced:"Fixed $1,000 target",sovereign:"Annual Opportunity Fund target"}[N]||"Fixed $1,000 target"},[M.currentStage,te.expenses,s]);const Ie=f.useMemo(()=>Pe.target?Math.min(C/Pe.target,1):0,[C,Pe.target]),$e=R+W;$e>0||te.expenses;const Be=Pe.target?Math.min(C/Pe.target*100,100):0,tt=f.useMemo(()=>[{title:"Lifestyle Capping",body:"Every dollar of future raises should go straight to Progress or Opportunity. You've already optimized your life; now optimize your freedom."},{title:"Opportunity Fund",body:"Shift your Stability target to 12 months. This isn't a safety netit is 'strike' capital for when life-changing chances appear."},{title:"Asset Velocity",body:"Your surplus is a powerful engine. Focus on tax-advantaged growth and liquidity-rich assets to keep the momentum going."}],[]),nt=f.useMemo(()=>{if(Se.mode==="sovereign")return tt;const N=Se.mode==="critical"?"Critical mode protects essentials first, keeps joy/lifestyle minimal, and builds a small buffer as cash flow improves.":Se.mode==="tight"||Se.mode==="balanced"?"Leftover split: prioritize stability, keep joy/lifestyle intentional, and build steady progress (savings & debt).":"In Traditional mode, keep stability/buffer steady, keep joy/lifestyle purposeful, and keep growing progress (savings & debt) using leftover momentum.";return[{title:"Essentials First",body:"Cover housing, utilities, food, and transport before accelerating other priorities."},{title:"Split Guidance",body:N},{title:"Pay Yourself",body:"Automate transfers on payday to savings and debt above minimums."},{title:"One Fun Line",body:"Give yourself a modest fun bucket to avoid burnout and rebound spending."},{title:"Sinking Funds",body:"Save monthly for irregulars: car, medical, gifts, travel, renewals."}]},[Se.mode,tt]);f.useEffect(()=>{if(Se.mode&&Se.mode!==o){try{fa.set(ug,Se.mode)}catch{}d(Se.mode)}},[Se.mode,o]);const le=f.useMemo(()=>{const{income:N,leftover:q}=te,je=rC;let Ae=0;try{const zt=readNamespacedItem(je,"0");Ae=Number(zt)||0}catch{Ae=0}if(q>Ae){try{fa.set(je,String(q))}catch{}Ae=q}const _e=M?.nextThreshold,Ge=Number.isFinite(_e)&&N>0?Math.max(_e*N,0):null;return{steps:[{label:"Get to $0 or better",achieved:q>0},{label:"Stay positive for 90 days (stability)",achieved:q>0},{label:"Beat your best leftover and lock in long-term stability",achieved:q>=Ae}],nextTierTarget:Ge,best:Ae}},[te,M,s]),Te=f.useMemo(()=>!Number.isFinite(le.nextTierTarget)||le.nextTierTarget<=0?null:Math.min(Math.max(te.leftover/le.nextTierTarget*100,0),100),[le.nextTierTarget,te.leftover]),Ee=f.useMemo(()=>{const N=Se.mode==="critical"?"Hold optional spend to zero, log every transaction, and let leftover recover.":"Keep essentials steady, review spending regularly, and prevent drift.",q=Pe.target?`Move something small toward ${s(Pe.target)} this week.`:"Log income + expenses to unlock your new target.",je=Number.isFinite(le.nextTierTarget)&&le.nextTierTarget>0,Ae=je?Te??0:le.steps.filter(zt=>zt.achieved).length/le.steps.length*100,_e=je?`Next milestone: reach ${s(le.nextTierTarget)}`:"Keep stability steady for 90 days.",Ge=je?`${Math.round(Ae)}% toward the next tier`:"Hold leftover steady and log nightly.";return[{key:"protect",title:"Protect essentials",description:Se.tone,action:N},{key:"buffer",title:"Rebuild your buffer",description:Pe.message,action:q},{key:"milestone",title:"Milestone momentum",description:_e,action:Ge,progress:Math.round(Math.min(Math.max(Ae,0),100)),progressLabel:je?`${Math.round(Ae)}% of target`:`${le.steps.filter(zt=>zt.achieved).length} of ${le.steps.length} steps`}]},[Se.tone,Se.mode,Pe.message,Pe.target,s,le.nextTierTarget,Te,le]),mt=f.useMemo(()=>Se.mode==="critical"?"Take it one step at a time: cover essentials, get to positive leftover, and protect your buffer.":Se.mode==="tight"||Se.mode==="balanced"?"Stick to the plan: grow leftover to the next tier target and hold it for 90-180 days.":Se.mode==="sovereign"?"Sovereign Status: keep expenses flat, bank raises in Progress/Opportunity, and treat your 12-month fund as mobility capital.":"You're in a strong position: keep momentum, invest in your future, and protect your gains.",[Se.mode]),gt=xe?"Cash flow is tight, and that is okay. We'll steady essentials and take the next calm step together.":`${Se.title}. ${mt}`,ft=xe?"Critical  Cash flow negative":Se.title,de=xe?"critical":["tight","balanced","fragile"].includes(Se.mode)?"fragile":["stable","traditional"].includes(Se.mode)?"stable":"thriving",ze=xe?"We're steadying essentials so leftover can breathe again.":"We've got a plan  you're moving forward.";return f.useEffect(()=>{const N=()=>{try{const je=readNamespacedItem("moneyProfile");je&&m(JSON.parse(je))}catch{}},q=()=>N();return window.addEventListener("storage",N),window.addEventListener("profile-updated",q),()=>{window.removeEventListener("storage",N),window.removeEventListener("profile-updated",q)}},[]),a.jsxs("div",{className:"budget-page",children:[a.jsxs("header",{className:"budget-header",children:[a.jsx(St,{className:"top-controls",activePage:"budget",onNavigate:n,logoutHref:"/Local/BudgetIQ Login"}),a.jsxs("div",{className:"header-text",children:[a.jsx("div",{className:"title",children:"Money Coach"}),a.jsx("div",{className:"subtitle",children:"Guidance that reflects your real numbers and helps you move forward."}),w&&a.jsx("div",{className:"budget-period",children:w})]})]}),a.jsxs("div",{className:"budget-container",children:[y&&!ne&&a.jsxs("div",{className:"budget-monthly-note",children:["No activity logged yet this period. We're showing estimates from your baseline until income is confirmed.",L&&a.jsxs(a.Fragment,{children:[" ","Add your first paycheck to confirm this period's numbers."]})]}),k>0&&a.jsxs("div",{className:"budget-monthly-note",children:["We haven't seen activity for ",k," period",k===1?"":"s",". This period starts fresh once you log new income or spending."]}),a.jsxs("div",{className:"money-coach-body",children:[a.jsxs("section",{className:"coach-summary-block",children:[a.jsxs("div",{className:"coach-summary-top",children:[a.jsx("span",{className:`coach-mode-tag coach-mode-${de} coach-mode-${Se.mode}`,children:ft}),a.jsx("div",{className:"coach-avatar","aria-hidden":"true",children:a.jsx("span",{children:""})})]}),a.jsx("p",{className:"coach-summary-copy",children:gt}),a.jsx("p",{className:"coach-summary-reassurance",children:ze})]}),a.jsxs("section",{className:"coach-plan-interpretation interactive-card",children:[a.jsxs("div",{className:"coach-plan-interpretation-header",children:[a.jsx("span",{className:"coach-plan-role",children:be}),a.jsx("span",{className:"coach-plan-tag",children:ve?ve.status.state==="active"?"Active":"Logged":"Pending"})]}),a.jsx("p",{className:"coach-plan-interpretation-summary",children:me||"Luna gathers your income and tier signals before sharing the calm recommendation for this period."}),a.jsx("p",{className:"coach-plan-interpretation-support",children:Q||"Check back once the income cadence is clear and this plan will describe next steps with gentle clarity."}),J.length>0&&a.jsx("div",{className:"coach-plan-interpretation-row",children:J.map(N=>a.jsxs("div",{className:"coach-plan-interpretation-column",children:[a.jsx("span",{className:"coach-plan-interpretation-label",children:N.label}),a.jsx("strong",{children:s(N.value)})]},N.label))}),ye&&a.jsx("p",{className:"coach-plan-interpretation-rationale",children:ye}),a.jsx("button",{type:"button",className:"coach-plan-interpretation-action interactive-cta",onClick:()=>n("split-gps"),children:"View it in Money Map"})]}),a.jsxs("section",{className:"coach-focus-area",children:[a.jsx("div",{className:"coach-focus-row",children:Ee.filter(N=>N.key!=="milestone").map(N=>a.jsxs("article",{className:"coach-focus-card interactive-card",children:[a.jsx("div",{className:"coach-focus-title",children:N.title}),a.jsx("p",{className:"coach-focus-copy",children:N.description}),a.jsx("p",{className:"coach-focus-action",children:N.action})]},N.key))}),Ee.filter(N=>N.key==="milestone").map(N=>a.jsx("div",{className:"coach-focus-hero",children:a.jsxs("article",{className:"coach-focus-card coach-focus-hero-card interactive-card",children:[a.jsx("div",{className:"coach-focus-title",children:N.title}),a.jsx("p",{className:"coach-focus-copy",children:N.description}),a.jsx("p",{className:"coach-focus-action",children:N.action}),N.progress!==void 0&&N.progress!==null&&a.jsxs("div",{className:"coach-focus-progress",children:[a.jsx("div",{className:"coach-focus-progress-track",children:a.jsx("span",{style:{width:`${N.progress}%`}})}),a.jsx("span",{className:"coach-focus-progress-label",children:N.progressLabel})]})]})},N.key))]}),a.jsx("section",{className:"coach-plan-details",children:a.jsxs("details",{className:"coach-plan-details-panel",children:[a.jsx("summary",{children:a.jsxs("div",{className:"coach-plan-details-summary-text",children:[a.jsx("span",{className:"coach-plan-role",children:oC}),a.jsx("span",{children:"About your plan"})]})}),a.jsx("p",{children:cC}),a.jsx("p",{className:"coach-plan-reassurance",children:uC})]})}),a.jsxs("section",{className:"coach-depth-stack",children:[a.jsxs("div",{className:"coach-collapse-section",children:[a.jsxs("button",{className:"coach-collapse-toggle interactive-cta",type:"button","aria-expanded":he,"aria-controls":"coach-starter-content",onClick:()=>S(N=>!N),children:[a.jsx("span",{children:"Starter Plan"}),a.jsx("span",{className:"coach-collapse-status",children:he?"Hide details":"Show the plan"})]}),a.jsxs("div",{id:"coach-starter-content",className:`coach-collapse-content ${he?"is-visible":""}`,"aria-hidden":!he,children:[a.jsxs("p",{className:"coach-collapse-summary",children:["Leftover: ",s(te.leftover)," once essentials are paid."]}),a.jsx("ul",{children:Se.allocations.slice(0,3).map(N=>a.jsxs("li",{children:[a.jsx("strong",{children:N.label})," - ",N.value,a.jsx("p",{className:"coach-collapse-detail",children:N.detail})]},N.label))})]})]}),a.jsxs("div",{className:"coach-collapse-section",children:[a.jsxs("button",{className:"coach-collapse-toggle interactive-cta",type:"button","aria-expanded":P,"aria-controls":"coach-emergency-content",onClick:()=>pe(N=>!N),children:[a.jsx("span",{children:"Emergency Fund"}),a.jsx("span",{className:"coach-collapse-status",children:P?"Hide strategy":"Show the strategy"})]}),a.jsxs("div",{id:"coach-emergency-content",className:`coach-collapse-content ${P?"is-visible":""}`,"aria-hidden":!P,children:[a.jsx("p",{className:"coach-collapse-summary",children:Pe.target?`Goal: ${s(Pe.target)} (${Math.round(Ie*100)}% funded)`:"Add income or expenses to reveal your cushion target."}),a.jsx("div",{className:"ef-bar coach-ef-bar",children:a.jsx("span",{className:"ef-fill",style:{width:`${Ie*100}%`}})}),a.jsx("p",{className:"coach-collapse-detail",children:Pe.message}),Be>0&&a.jsxs("p",{className:"coach-collapse-detail",children:["Liquidity sits at ",Math.round(Be),"% of target."]})]})]}),a.jsxs("div",{className:"coach-collapse-section",children:[a.jsxs("button",{className:"coach-collapse-toggle interactive-cta",type:"button","aria-expanded":ue,"aria-controls":"coach-tips-content",onClick:()=>we(N=>!N),children:[a.jsx("span",{children:"Quick Tips"}),a.jsx("span",{className:"coach-collapse-status",children:ue?"Hide tips":"Show the highlights"})]}),a.jsx("div",{id:"coach-tips-content",className:`coach-collapse-content ${ue?"is-visible":""}`,"aria-hidden":!ue,children:a.jsx("ul",{children:nt.map(N=>a.jsxs("li",{children:[a.jsx("strong",{children:N.title}),a.jsx("p",{className:"coach-collapse-detail",children:N.body})]},N.title))})})]})]}),a.jsxs("section",{className:"coach-milestone-summary",children:[a.jsx("div",{className:"coach-milestone-heading",children:"Milestones"}),a.jsx("div",{className:"coach-milestone-grid",children:le.steps.slice(0,2).map(N=>a.jsxs("div",{className:"coach-milestone-row",children:[a.jsx("span",{className:`coach-milestone-dot ${N.achieved?"done":""}`,"aria-hidden":"true",children:N.achieved?"":""}),a.jsx("p",{className:"coach-milestone-text",children:N.label})]},N.label))}),Number.isFinite(le.nextTierTarget)&&le.nextTierTarget>0&&a.jsxs("div",{className:"coach-milestone-progress",children:[Te?Math.round(Te):0,"% of"," ",s(le.nextTierTarget)," milestone"]}),a.jsx("p",{className:"coach-milestone-note",children:"Small steps count. Keep momentum quiet and steady."})]})]})]})]})},mg=n=>{if(!n)return"";const s=new Date(n);return Number.isFinite(s.getTime())?s.toLocaleDateString(void 0,{month:"short",day:"numeric"}):n},hC=[{label:"Essentials",key:"essentials"},{label:"Buffer",key:"buffer"},{label:"Debt / progress",key:"debt"},{label:"Breathing room",key:"breathingRoom"}],mC=({plan:n,formatCurrency:s})=>{const{preferences:l}=xt(),o=f.useMemo(()=>Gn(l),[l]),d=f.useMemo(()=>{if(!o?.start||!o?.end)return"";const v=mg(o.start),y=new Date(o.end);y.setDate(y.getDate()-1);const x=mg(y);return!v||!x?"":v===x?v:`${v} - ${x}`},[o]),h=d?`This budget period: ${d}`:"This budget period";if(!n)return a.jsxs("article",{className:"pay-period-plan-card interactive-card",children:[a.jsxs("div",{className:"ppp-header",children:[a.jsx("p",{className:"ppp-eyebrow",children:"Budget period plan"}),a.jsx("h3",{className:"ppp-title",children:"Calm planning is on its way"})]}),a.jsx("p",{className:"ppp-empty-state",children:"As soon as Luna confirms your income this budget period, she'll share a gentle recommendation so you can use leftover with confidence."})]});const{recommendation:m,status:g}=n;return a.jsxs("article",{className:"pay-period-plan-card interactive-card",children:[a.jsxs("div",{className:"ppp-header",children:[a.jsxs("div",{children:[a.jsx("p",{className:"ppp-eyebrow",children:"Budget period plan"}),a.jsx("h3",{className:"ppp-title",children:h})]}),a.jsx("span",{className:`ppp-state-chip ${g.state}`,children:g.state})]}),a.jsx("p",{className:"ppp-summary",children:m.summaryLine}),a.jsx("div",{className:"ppp-grid",children:hC.map(v=>a.jsxs("div",{className:"ppp-grid-row",children:[a.jsx("div",{className:"ppp-grid-label",children:v.label}),a.jsx("div",{className:"ppp-grid-value",children:s(m[v.key]??0,{minimumFractionDigits:0})})]},v.key))}),a.jsx("p",{className:"ppp-supportive",children:m.supportiveLine}),g.rationale&&a.jsx("p",{className:"ppp-rationale",children:g.rationale})]})},fC=({plan:n,onDismiss:s})=>n?a.jsxs("div",{className:"plan-notification-bar interactive-card",children:[a.jsxs("div",{className:"plan-notification-body",children:[a.jsx("span",{className:"plan-notification-eyebrow",children:"Pay-period plan"}),a.jsx("p",{className:"plan-notification-summary",children:n.recommendation.summaryLine}),a.jsx("p",{className:"plan-notification-support",children:n.recommendation.supportiveLine})]}),a.jsx("div",{className:"plan-notification-actions",children:a.jsx("button",{type:"button",className:"plan-notification-action interactive-cta",onClick:s,children:"Looks good"})})]}):null,pb="assetProfile",no={assets:[]},fg=()=>{if(typeof window>"u")return no;try{const n=localStorage.getItem(pb);if(!n)return no;const s=JSON.parse(n);return!s||typeof s!="object"?no:{assets:Array.isArray(s.assets)?s.assets:[]}}catch{return no}},yb=()=>{const[n,s]=f.useState(fg),l=f.useCallback(()=>{s(fg())},[]);return f.useEffect(()=>{if(typeof window>"u")return;const o=d=>{(!d.key||d.key===pb)&&l()};return window.addEventListener("storage",o),window.addEventListener("asset-updated",l),()=>{window.removeEventListener("storage",o),window.removeEventListener("asset-updated",l)}},[l]),{profile:n,refreshProfile:l}},yh="moneyProfile",gh="userIdentity",pC=()=>We(yh),yC=()=>We(gh),Va={incomes:[],expenses:[],savingsBalance:"",savingsMonthly:"",name:""},ao=()=>{if(typeof window>"u")return"";try{const n=localStorage.getItem(yC())??localStorage.getItem(gh);return n?(JSON.parse(n)?.firstName||"").trim():""}catch{return""}},pg=()=>{if(typeof window>"u")return Va;try{const n=it.get(pC())??it.get(yh);if(!n){const o=ao();return o?{...Va,name:o}:Va}if(!n||typeof n!="object"){const o=ao();return o?{...Va,name:o}:Va}const s=ao(),l={...Va,...n};return s&&(l.name=s),l}catch{const s=ao();return s?{...Va,name:s}:Va}},ad=(n={})=>Number(n.monthly??n.amount??0)||0,gC=n=>(n?.incomeType||"personal")==="personal",vC=n=>(n?.expenseType||"personal")==="personal",Ft=()=>{const[n,s]=f.useState(pg),l=f.useCallback(()=>{s(pg())},[]);f.useEffect(()=>{if(typeof window>"u")return;const y=(j,w)=>j?j===w||j.endsWith(`_${w}`):!1,x=j=>{if(!j.key){l();return}(y(j.key,yh)||y(j.key,gh))&&l()};return window.addEventListener("storage",x),window.addEventListener("profile-updated",l),window.addEventListener("identity-updated",l),window.addEventListener("luna-current-user-changed",l),()=>{window.removeEventListener("storage",x),window.removeEventListener("profile-updated",l),window.removeEventListener("identity-updated",l),window.removeEventListener("luna-current-user-changed",l)}},[l]);const o=f.useMemo(()=>(n.incomes||[]).filter(gC),[n.incomes]),d=f.useMemo(()=>(n.expenses||[]).filter(vC),[n.expenses]),h=f.useMemo(()=>o.reduce((y,x)=>y+ad(x),0),[o]),m=f.useMemo(()=>d.reduce((y,x)=>y+ad(x),0),[d]),g=f.useMemo(()=>{const y=h,x=m,j=y-x;return{income:y,expenses:x,leftover:j}},[h,m]),v=f.useMemo(()=>{const y=new Map;return d.forEach(x=>{const j=x.category||x.name||"Other";y.set(j,(y.get(j)||0)+ad(x))}),Array.from(y.entries()).map(([x,j])=>({key:x,total:j}))},[d]);return{profile:n,totals:g,baseIncome:h,baseExpenses:m,expenseCategories:v,refreshProfile:l}},gb={weekly:7,biweekly:14,monthly:30,flex:30},yg={critical:{bufferTarget:300,debtWeight:.1,minBreathingRoom:50,summaryLine:"Heres a calm plan for this pay period.",supportiveLine:"Protect essentials first while Luna keeps everything steady.",rationale:"Protect survival, rebuild buffer, keep optional spend intentional."},fragile:{bufferTarget:500,debtWeight:.18,minBreathingRoom:75,summaryLine:"Heres a stabilizing recommendation for this period.",supportiveLine:"Buffer strength keeps momentum going while essentials stay solid.",rationale:"Prevent slipping backward with steady buffer build and gentle debt progress."},steady:{bufferTarget:1e3,debtWeight:.28,minBreathingRoom:150,summaryLine:"Heres a confident plan for this pay period.",supportiveLine:"Youre in controlkeep essentials covered and let leftover push progress.",rationale:"Buffer targets, meaningful debt payoff, and calm breathing room."},thriving:{bufferTarget:1500,debtWeight:.35,minBreathingRoom:250,summaryLine:"Heres a growth-forward plan for this pay period.",supportiveLine:"Use the strength youve built to keep goals steady and life comfortable.",rationale:"Fuel future-building while keeping discretionary room intentional."}},bC=()=>{try{if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID()}catch{}return`plan-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,8)}`},vb=(n,s)=>{const l=new Date(n);return l.setDate(l.getDate()+s),l},sd=n=>n.toISOString(),xC=(n,s)=>{const l=Math.max(s.leftoverProjected??0,0),o=Math.min(n.bufferTarget,l),d=Math.max(l-o,0),h=Math.min(Math.round(d*n.debtWeight),d),m=Math.max(d-h,n.minBreathingRoom,0);return{essentials:Math.max(s.essentialsThisPeriod??0,0),buffer:o,debt:h,breathingRoom:m>d?d:m,summaryLine:n.summaryLine,supportiveLine:n.supportiveLine}},$d=(n=[],s=new Date)=>{const l=n.map(y=>{if(!y.date)return null;const x=new Date(y.date);return Number.isFinite(x.getTime())?x:null}).filter(y=>y!==null).sort((y,x)=>x.getTime()-y.getTime());if(l.length<2)return{schedule:"flex",reason:"Not enough income dates to infer cadence."};const o=l[0],d=l[1],m=(o.getTime()-d.getTime())/(1e3*60*60*24);let g="flex";m<=9?g="weekly":m<=17?g="biweekly":m<=35&&(g="monthly");const v=vb(o,gb[g]);return{schedule:g,lastPayDate:o,nextPayDate:v,reason:`Detected ${g} cadence from ${Math.round(m)} day gap.`}},jC=(n,s,l)=>{const o=s,d=gb[n],h=vb(o,d);return{start:o,end:h,createdAt:l}},bb=(n,s,l)=>{if(!n||s.triggerSource==="manual"||s.triggerSource==="drift"||n.tierAtCreation!==s.tier)return!0;const o=new Date(n.period.end);return(s.now??new Date)>o||l.schedule!==n.period.schedule},wC={generate(n){const s=n.now??new Date,l=$d(n.incomeEntries,s),o=l.lastPayDate??s,d=jC(l.schedule,o,s),h=TT({currency:n.snapshotOverrides?.currency,incomeThisPeriod:n.snapshotOverrides?.incomeThisPeriod??n.totals.income,essentialsThisPeriod:n.snapshotOverrides?.essentialsThisPeriod??n.totals.expenses,bufferCurrent:n.snapshotOverrides?.bufferCurrent??Math.max(n.totals.leftover*.2,0),leftoverProjected:n.snapshotOverrides?.leftoverProjected??n.totals.leftover,driftSignal:n.snapshotOverrides?.driftSignal}),m=xC(yg[n.tier],h),g={schedule:l.schedule,start:sd(d.start),end:sd(d.end),createdAt:sd(d.createdAt)},v={version:1,state:"active",rationale:yg[n.tier].rationale},x={plan:{id:bC(),period:g,tierAtCreation:n.tier,snapshot:h,recommendation:m,status:v},metadata:{triggeredBy:n.triggerSource,noticeText:l.reason,reason:l.reason}};return ST.parse(x),x},shouldRegenerate:(n,s)=>{const l=s.now??new Date,o=$d(s.incomeEntries,l);return bb(n,s,o)}},NC="pay-period-plan-ready",SC=()=>"Your calm plan for this pay period is ready",EC=n=>{const s=n.recommendation.summaryLine,l=n.recommendation.supportiveLine;return`${s} ${l}`},TC=(n,s="both")=>{const l={planId:n.id,subject:SC(),body:EC(n),channel:s};return typeof window<"u"&&window.dispatchEvent(new CustomEvent(NC,{detail:l})),l},CC=["This version leans toward buffer strength so life stays steady.","Fresh plan, same calm directionessentials stay safe while stability grows.","Your plan keeps essentials protected and gives a grounded direction for the period.","This refreshed plan keeps things steady and nudges you toward more cushion."],AC=["Drift noticed in your leftover pacing.","Leftover is stretching beyond the norm.","Cash flow nuance detected."],_C=["We nudged the plan to keep essentials shielded.","This keeps stability steady while covering the unexpected.","Small adjustment so the system stays calm."],MC=["Updated the plan to reflect the shift.","This keeps your guidance grounded after the change.","No panicjust a calmly updated roadmap."],Eo=(n,s)=>{if(!s.length)return"";const l=n.split("").reduce((o,d)=>o+d.charCodeAt(0),0);return s[l%s.length]},kC=n=>Eo(n,CC),DC=(n,s)=>Md().some(l=>l.type===n&&!l.acknowledged&&s(l)),LC=n=>{const s=n.recommendation.summaryLine,l=n.recommendation.supportiveLine;return`${s} ${l}`},OC=n=>{if(DC("PAY_PERIOD_PLAN",o=>o.payload?.planId===n.id))return null;const s=()=>{const o=n.period?.start??"unknown",d=n.period?.end??"unknown",h=m=>m.replace(/[:.]/g,"");return`plan-ready-${h(o)}-${h(d)}`},l={planId:n.id,summaryLine:n.recommendation.summaryLine,supportiveLine:n.recommendation.supportiveLine,tierAtCreation:n.tierAtCreation,periodStart:n.period.start,periodEnd:n.period.end,projectedLeftover:n.snapshot.leftoverProjected,currency:n.snapshot.currency};return Co({type:"PAY_PERIOD_PLAN",title:"Your calm plan for this pay period is ready",id:s(),message:`${LC(n)} ${kC(n.id)}`,payload:l,tone:"info"})},zC=(n,s)=>{if(!n||!s||n===s)return null;const l={previousTier:n,newTier:s};return Co({type:"TIER_CHANGE",title:"Your stability tier has changed",message:`Guidance has adapted from ${n} to ${s} so you can stay aligned with your current cash picture.`,payload:l})},RC=(n,s)=>{const l={driftMagnitude:n,eventContext:s,summaryLine:Eo(s??String(n),AC),supportiveLine:Eo(s??String(n),_C)};return Co({type:"DRIFT_ALERT",title:"We noticed things drifting a bit",message:n>=1?"Spending has drifted ahead of what usually holds this period. We gently rebalanced your plan so the protective habits around leftover stay calm.":"We spotted a small drift in your cash picture and quietly tuned your plan so stability stays relaxed.",payload:l,tone:"caution"})},gg=n=>{const s={eventContext:n,summaryLine:"A major shift happened in your cash picture.",supportiveLine:Eo(n,MC)};return Co({type:"MAJOR_EVENT",title:"Your financial picture shifted significantly",message:"We reflected the change across your plan so you can see what comes next.",payload:s,tone:"info"})},xb="creditCards",xn="credit-cards-updated",Bd=n=>(n||[]).map(s=>({...s,paid:!!s.paid,balance:Number(s.balance)||0,apr:Number(s.apr)||0,minPayment:Number(s.minPayment)||0,rollForward:Number(s.rollForward)||0})),cn=()=>{if(typeof window>"u")return[];try{const n=Nt(xb);if(!n)return[];const s=JSON.parse(n);return Array.isArray(s)?Bd(s):[]}catch{return[]}},jb=(n=[])=>{if(typeof window>"u")return Bd(n);try{bs(xb,JSON.stringify(n))}catch{}return window.dispatchEvent(new CustomEvent(xn)),Bd(n)},$C="debtCashForm",wb="debtPlanType",BC=n=>{if(!n)return null;try{return JSON.parse(n)}catch{return null}},vs=()=>{const n=Nt($C);return BC(n)},Sr=()=>Nt(wb)==="avalanche"?"avalanche":"snowball",UC=n=>{bs(wb,"snowball")},PC=["mortgage","loan","credit","student","auto","car","home","debt","interest","line of credit","financed"],IC=["insurance","utilities","subscription","premium"],fr=n=>{const s=String(n??"").replace(/,/g,""),l=Number(s);return Number.isFinite(l)?l:0},Vn=n=>Number(n)||0,HC=(n="")=>{const s=n.toLowerCase();return PC.some(l=>s.includes(l))},YC=(n="")=>{const s=n.toLowerCase();return IC.some(l=>s.includes(l))},ZC=n=>{const s=(n||"").toLowerCase();return s.includes("mortgage")||s.includes("home")?4:s.includes("student")?4.5:s.includes("car")||s.includes("auto")?6.5:s.includes("credit")?18:8},Nb=(n=[])=>(n||[]).map((s,l)=>{const o=`${s.category||""} ${s.name||""}`.trim();if(s.housingType==="Mortgage"||!HC(o)||YC(o))return null;const d=Math.max(Number(s.balance)||0,0);if(d<=0)return null;const h=Math.max(Number(s.amount)||0,0),m=ZC(o);return{id:s.id?`expense-${s.id}`:`expense-${l}`,name:s.name||s.category||"Debt",balance:d,apr:m,minPayment:h,source:"expense"}}).filter(Boolean),Sb=n=>{if(!n)return[];if(Array.isArray(n.manualDebts))return n.manualDebts.map(s=>({id:s.id||`manual-${Date.now()}-${Math.random().toString(16).slice(2,8)}`,type:s.type||"other",balance:s.balance??"",apr:s.apr??"",minPayment:s.minPayment??"",termMonths:s.termMonths??"",originalAmount:s.originalAmount??"",notes:s.notes??""}));if(n.housingDebts||n.carDebts||n.personalDebts||n.studentBalance){const s=[];return(n.housingDebts||[]).forEach(l=>{s.push({id:`manual-housing-${Date.now()}-${Math.random().toString(16).slice(2,8)}`,type:"mortgage",balance:l.balance??"",apr:l.apr??"",minPayment:l.min??"",termMonths:l.termMonths??"",originalAmount:"",notes:""})}),(n.carDebts||[]).forEach(l=>{s.push({id:`manual-car-${Date.now()}-${Math.random().toString(16).slice(2,8)}`,type:"auto",balance:l.balance??"",apr:l.apr??"",minPayment:l.min??"",termMonths:l.termMonths??"",originalAmount:"",notes:""})}),(n.personalDebts||[]).forEach(l=>{s.push({id:`manual-personal-${Date.now()}-${Math.random().toString(16).slice(2,8)}`,type:"personal",balance:l.balance??"",apr:l.apr??"",minPayment:l.min??"",termMonths:l.termMonths??"",originalAmount:"",notes:""})}),n.studentBalance&&s.push({id:`manual-student-${Date.now()}-${Math.random().toString(16).slice(2,8)}`,type:"student",balance:n.studentBalance??"",apr:n.studentApr??"",minPayment:n.studentDeferred?"0":n.studentMin??"",termMonths:n.studentTermMonths??"",originalAmount:"",notes:""}),s}return Array.isArray(n)?n.map((s,l)=>({id:s.id||`manual-${Date.now()}-${Math.random().toString(16).slice(2,8)}`,type:s.type||"other",balance:s.balance??"",apr:s.apr??"",minPayment:s.minPayment??"",termMonths:s.termMonths??"",originalAmount:s.originalAmount??"",notes:s.notes??""})):[]},Eb=(n=[],s={})=>{const{labelDebtType:l=o=>o||"Debt"}=s;return(n||[]).map((o,d)=>{const h=Math.max(0,fr(o.balance));if(!h)return null;const m=o.name||l(o.type);return{id:o.id||`manual-${d}`,name:m,balance:h,apr:Math.max(0,fr(o.apr)),minPayment:Math.max(0,fr(o.minPayment)),termMonths:fr(o.termMonths)||void 0,originalAmount:fr(o.originalAmount)||void 0,notes:o.notes||"",source:"manual",type:o.type}}).filter(Boolean)},VC=n=>{if(!n)return null;const s=Math.max(0,Number(n.balance)||0),l=Math.max(0,Number(n.minPayment)||0);return s<=0&&!n.paid?null:{id:n.id||`card-${n.name||"unknown"}`,name:n.name||"Credit Card",balance:s,apr:Math.max(0,Number(n.apr)||0),minPayment:l,source:"credit-card"}},Tb=(n=[])=>(n||[]).map(VC).filter(Boolean),qC=(n=[])=>(n||[]).reduce((s,l)=>s+(Number(l.balance)||0),0),GC=({assetProfile:n={assets:[]},profile:s={}}={})=>{const o=(n?.assets||[]).reduce((v,y)=>v+Vn(y.value),0),d=Vn(s.savingsBalance),h=Vn(s.retirement401k),m=Vn(s.rothIra),g=Vn(s.investments);return o+d+h+m+g},KC=({creditCards:n=[],manualDebts:s=null,expenses:l=[]}={},o={})=>{const d=Sb(s),h=Eb(d,o),m=Nb(l);return[...Tb(n),...m,...h].filter(v=>Number(v.balance)>0)},Cb=(n={},s={})=>{const l=n.assetProfile||{assets:[]},o=n.profile||{},d=Vn(o.savingsBalance),h=Vn(o.investments),m=Vn(o.retirement401k),g=Vn(o.rothIra),v=GC({assetProfile:l,profile:o}),y=KC(n,s),x=qC(y),j=[];d>0&&j.push({id:"auto-savings",name:"Cash & savings",type:"Cash & savings",value:d,removable:!1,source:"savings"}),h>0&&j.push({id:"auto-investments",name:"Investments",type:"Investments",value:h,removable:!1,source:"investments"}),m>0&&j.push({id:"auto-401k",name:"401(k)",type:"401(k)",value:m,removable:!1,source:"retirement401k"}),g>0&&j.push({id:"auto-ira",name:"IRA",type:"IRA",value:g,removable:!1,source:"rothIra"});const w=(l.assets||[]).map((A,E)=>({id:A.id||`asset-${E}`,name:A.name||A.type||"Asset",type:A.type||"Asset",value:Vn(A.value),removable:!0,source:"profile"})).filter(A=>A.value>0),T=[...j,...w];return{totalAssets:v,totalDebt:x,netWorth:v-x,debtEntries:y,assetRows:T,savingsValue:d,investmentsValue:h,retirement401kValue:m,rothIraValue:g}},FC="savedBudgetSplit",XC={critical:"critical",tight:"fragile",balanced:"steady",traditional:"thriving",sovereign:"thriving"},vg=n=>XC[n]||"steady",QC=({onNavigate:n=()=>{}})=>{const{totals:s,profile:l}=Ft(),{formatCurrency:o,preferences:d}=xt(),{profile:h}=yb(),[m,g]=f.useState(()=>cn()),[v,y]=f.useState(()=>vs()),x=f.useMemo(()=>Cb({assetProfile:h,profile:l,creditCards:m,manualDebts:v,expenses:l.expenses||[]}),[h,l,m,v]),{totalAssets:j,totalDebt:w,netWorth:T,savingsValue:A}=x,E=s.leftover??0,z=f.useMemo(()=>o(E),[o,E]),Z=s.income,D=f.useMemo(()=>qn({income:Z,leftover:E}),[Z,E]),{allocationRows:B,currentStage:R,nextStage:W,nextThreshold:fe,recommendedVariant:re,sliderPercent:K,recommendedAmounts:te}=D,xe=vg(R?.key),U=f.useRef(null);f.useEffect(()=>{const oe=U.current;oe&&xe&&oe!==xe&&zC(oe,xe),U.current=xe},[xe]),f.useEffect(()=>{if(typeof window>"u")return;const oe=()=>g(cn());return oe(),window.addEventListener(xn,oe),window.addEventListener("storage",oe),()=>{window.removeEventListener(xn,oe),window.removeEventListener("storage",oe)}},[]),f.useEffect(()=>{if(typeof window>"u")return;const oe=()=>y(vs());return oe(),window.addEventListener("debt-cash-updated",oe),window.addEventListener("storage",oe),()=>{window.removeEventListener("debt-cash-updated",oe),window.removeEventListener("storage",oe)}},[]);const se=oe=>Number.isFinite(oe)?oe.toFixed(2):"0.00",[k,ne]=f.useState(()=>ui.reduce((oe,Ue)=>({...oe,[Ue.key]:se(0)}),{})),[L,C]=f.useState(!1),[M,G]=f.useState(""),[F,he]=f.useState("success"),[S,P]=f.useState(0),[pe,ue]=f.useState(()=>[]);f.useEffect(()=>{L||ne(ui.reduce((oe,Ue)=>({...oe,[Ue.key]:se(te[Ue.key])}),{}))},[te,L]);const we=oe=>{const Ue=String(oe).replace(/,/g,""),lt=Number(Ue);return Number.isFinite(lt)?lt:0},ve=f.useMemo(()=>Object.values(k).reduce((oe,Ue)=>oe+we(Ue),0),[k]),ke=(l.incomes||[]).filter(oe=>Number(oe.monthly??oe.amount)>0),Ze=(l.expenses||[]).filter(oe=>Number(oe.monthly??oe.amount)>0),me=f.useMemo(()=>(l.incomes||[]).map(oe=>({amount:Number(oe.monthly??oe.amount??0)||0,date:oe.date,source:oe.name||oe.incomeType})).filter(oe=>Number.isFinite(oe.amount)),[l.incomes]),Q=f.useMemo(()=>ui.reduce((oe,Ue)=>(oe[Ue.key]=we(k[Ue.key]),oe),{}),[k]),be=f.useMemo(()=>ve?ui.reduce((oe,Ue)=>{const lt=Q[Ue.key]/ve*100;return oe[Ue.key]=Number.isFinite(lt)?lt:0,oe},{}):{},[ve,Q]),J=f.useMemo(()=>({needs:re.needs,wants:re.wants,savings:re.savings}),[re]),ye=f.useMemo(()=>ui.map(oe=>({key:oe.key,label:oe.label,delta:Math.abs((be[oe.key]||0)-(J[oe.key]||0))})),[be,J]),Ne=f.useMemo(()=>ye.every(oe=>oe.delta<=6),[ye]),Se=f.useMemo(()=>ye.length?ye.reduce((oe,Ue)=>!oe||Ue.delta>oe.delta?Ue:oe,null):null,[ye]);f.useMemo(()=>Se?Ne?"Your custom split stays within the recommended range.":`${Se.label} is ${Se.delta.toFixed(1)}% away from the recommended ${J[Se.key]}%.`:"Set custom amounts to see how they compare with the recommendation.",[Ne,Se,J]),f.useMemo(()=>ve>0?be:J,[be,J,ve]),f.useMemo(()=>!W||!fe||!Number.isFinite(fe)||!Number.isFinite(Z)||Z<=0?null:Math.max(fe*Z,0),[W,fe,Z]),f.useMemo(()=>{const oe=R?.key,lt={critical:300,tight:1e3,balanced:1e3,traditional:s.expenses>0?s.expenses*3:0}[oe]??1e3,Xt={critical:"Start with a small buffer before accelerating debt payoff.",tight:"A $1,000 buffer protects you from common surprises.",balanced:"Protect a $1,000 buffer while you keep progressing.",traditional:"Aim for 3 months of essentials for long-term resilience."};return{target:lt,message:Xt[oe]||Xt.balanced}},[R,s.expenses]);const Pe=Math.max(A,0),Ie=Math.max(E,0),$e=Pe+Ie,Be=s.expenses>0?s.expenses/4:0,tt=Be>0?Number(Math.min(99,($e/Be).toFixed(1))):null,nt=tt?Math.round(tt*7):null,le=tt?Number((tt/4).toFixed(1)):null,Te=tt?`Enough to cover about ${nt} day${nt===1?"":"s"}${nt&&nt>31?` (~${le} months)`:""} of essentials.`:"Add expenses so this cash can be interpreted confidently.",Ee=E>=0?"Your system is functioning. Cash is flowing steadily.":"Spending has been heavier recently; awareness keeps stability steady.",mt=Math.max(Pe,Math.max(s.leftover,0)),gt="The map is calm and steady. Keep the habits that protect leftover.",ft=[`${ke.length} income source${ke.length===1?"":"s"}`,`${Ze.length} expense item${Ze.length===1?"":"s"}`];W?.label&&ft.push(`Next tier direction: ${W.label}`);const de=()=>typeof window>"u"?null:(Rd(),zd()),[ze,N]=f.useState(de),q=f.useRef(!1),[je,Ae]=f.useState(null),[_e,Ge]=f.useState(null),Ke=f.useRef({leftover:E,income:s.income??0,expenses:s.expenses??0}),zt=f.useRef(0),pa=f.useRef(0),ya=f.useCallback(oe=>{const Ue=new Date;Rd(Ue);const lt=zd(),Xt=vg(R?.key),Nn={totals:{income:s.income??0,expenses:s.expenses??0,leftover:E},tier:Xt,triggerSource:oe,incomeEntries:me},va=$d(me,Ue);if(!bb(lt,Nn,va))return N(lt),lt;const{plan:ba}=wC.generate({...Nn,snapshotOverrides:{currency:d.currency}}),dn=LT(ba);return N(dn),OC(dn),TC(dn),dn},[R?.key,me,E,d.currency,s.expenses,s.income]),jn=f.useRef(ya);f.useEffect(()=>{jn.current=ya},[ya]),f.useEffect(()=>{const oe=jn.current("manual");q.current=!0,N(oe)},[]),f.useEffect(()=>{ze&&_e!==ze.id&&ze.status.state==="active"&&(Ge(ze.id),Ae(ze))},[ze,_e]);const Fn=f.useCallback(()=>{if(!je)return;const oe=OT(je.id);N(oe??ze),Ae(null)},[je,ze]);f.useEffect(()=>{if(!je||typeof window>"u")return;const oe=window.setTimeout(()=>Ae(null),6e4);return()=>window.clearTimeout(oe)},[je]),f.useEffect(()=>{if(!q.current){Ke.current={leftover:E,income:s.income??0,expenses:s.expenses??0};return}const oe=Ke.current,Ue={leftover:E,income:s.income??0,expenses:s.expenses??0},lt=Date.now(),Xt=Ue.leftover-oe.leftover,Nn=Math.max(Math.abs(oe.leftover),1),va=Math.abs(Xt)/Nn,ba=1e3*60*30;va>=.25&&Xt<0&&lt-zt.current>ba&&(RC(Number((va*100).toFixed(1)),`Leftover shifted from ${oe.leftover} to ${Ue.leftover}.`),zt.current=lt);const dn=1e3*60*30,H=Ue.income-oe.income,ge=Ue.expenses-oe.expenses;oe.income>0&&Math.abs(H)/Math.max(oe.income,1)>=.4&&lt-pa.current>dn?(gg(`Income updated from ${oe.income} to ${Ue.income} this period.`),pa.current=lt):oe.expenses>0&&Math.abs(ge)/Math.max(oe.expenses,1)>=.4&&lt-pa.current>dn&&(gg(`Expenses updated from ${oe.expenses} to ${Ue.expenses} this period.`),pa.current=lt),Ke.current=Ue},[E,s.expenses,s.income]);const zn=f.useMemo(()=>{const oe=me.reduce((lt,Xt)=>lt+Xt.amount,0),Ue=me.length&&me[0].date||"";return`${me.length}-${oe}-${Ue}`},[me]);f.useEffect(()=>{q.current&&jn.current("income")},[zn]),f.useEffect(()=>{q.current&&jn.current("tierChange")},[R?.key]);const wn=[{key:"assets",title:"Assets & Net Worth",summary:j>0?`Assets: ${o(j)}`:"No assets tracked yet.",detail:A>0?`Safety cushion: ${o(A)}. Net worth: ${o(T)} (${o(j)} assets - ${o(w)} debt) matches the Assets & Net Worth totals.`:`Net worth: ${o(T)} (${o(j)} assets - ${o(w)} debt) matches the Assets & Net Worth totals.`},{key:"cash",title:"Savings & Cash Breakdown",summary:`Cash buffer: ${o($e)}`,detail:Te},{key:"debt",title:"Debt & Payoff Overview",summary:"No debts added yet.",detail:"Add debts when ready to see how payoff fits alongside the rest of your map."},{key:"income",title:"Income & Expense Sources",summary:`${ke.length} income source${ke.length===1?"":"s"}  ${Ze.length} expense item${Ze.length===1?"":"s"}`,detail:`Leftover this period: ${z}  keeping both sides visible supports confident decisions.`}],ga=oe=>{ue(Ue=>Ue.includes(oe)?Ue.filter(lt=>lt!==oe):[...Ue,oe])};return f.useMemo(()=>ye.reduce((oe,Ue)=>(oe[Ue.key]=Ue.delta,oe),{}),[ye]),f.useEffect(()=>{if(!M)return;const oe=window.setTimeout(()=>G(""),1400);return()=>window.clearTimeout(oe)},[M]),f.useEffect(()=>{if(!(typeof window>"u"))try{const oe=Nt(FC);if(oe){const Ue=JSON.parse(oe);ne(lt=>({...lt,...Ue})),C(!0)}}catch{}},[]),a.jsxs("div",{className:"split-gps-page money-map-page",children:[a.jsxs("header",{className:"split-gps-header",children:[a.jsx(St,{className:"top-controls",activePage:"split-gps",onNavigate:n,logoutHref:"/Local/BudgetIQ Login"}),a.jsxs("div",{className:"header-text",children:[a.jsx("h1",{children:"Money Map"}),a.jsx("p",{children:"A clear picture of where your money lives and how it moves."})]})]}),a.jsxs("section",{className:"money-map-why",children:[a.jsx("h2",{children:"Why this matters"}),a.jsx("p",{children:"Seeing your accounts and balances in one place keeps your picture honest and grounded."}),a.jsx("p",{children:"Clarity helps decisions feel calmerwithout pressure or judgment."})]}),a.jsxs("main",{className:"split-gps-main money-map-main",children:[a.jsxs("section",{className:"money-map-plan-section",children:[a.jsxs("div",{className:"money-map-plan-heading",children:[a.jsx("h2",{children:"Your plan for this budget period"}),a.jsx("p",{children:"A calm guide based on your real numbers."}),a.jsx("p",{className:"money-map-plan-subhead",children:"Based on your current budget period."})]}),a.jsx(fC,{plan:je,onDismiss:Fn}),a.jsx(mC,{plan:ze,formatCurrency:o})]}),a.jsxs("section",{className:"money-map-focus-grid",children:[a.jsxs("article",{className:"money-map-card interactive-card",children:[a.jsx("div",{className:"money-map-card-title",children:"Accounts & Connections"}),a.jsx("div",{className:"money-map-card-value",children:o(mt)}),a.jsx("p",{className:"money-map-card-note",children:"Total across tracked accounts"}),a.jsx("p",{className:"money-map-card-link",children:"Add a bank connection to keep the picture complete."})]}),a.jsxs("article",{className:"money-map-card interactive-card",children:[a.jsx("div",{className:"money-map-card-title",children:"Cash Position"}),a.jsx("div",{className:"money-map-card-value",children:o($e)}),a.jsx("p",{className:"money-map-card-note",children:"Cash available"}),a.jsx("p",{className:"money-map-card-copy",children:Te})]}),a.jsxs("article",{className:"money-map-card interactive-card",children:[a.jsx("div",{className:"money-map-card-title",children:"Money Flow"}),a.jsxs("div",{className:"money-map-flow-path",children:[a.jsx("span",{children:o(s.income)}),a.jsx("span",{className:"money-map-flow-arrow",children:""}),a.jsx("span",{children:o(s.expenses)}),a.jsx("span",{className:"money-map-flow-arrow",children:""}),a.jsx("span",{children:o(Math.max(E,0))})]}),a.jsx("p",{className:"money-map-card-note",children:"Income  Bills  Leftover"}),a.jsx("p",{className:"money-map-card-copy",children:Ee})]})]}),a.jsx("section",{className:"money-map-panels",children:wn.map(oe=>{const Ue=pe.includes(oe.key);return a.jsxs("article",{className:"money-map-panel interactive-card",children:[a.jsxs("div",{className:"money-map-panel-summary",children:[a.jsxs("div",{children:[a.jsx("strong",{children:oe.title}),a.jsx("p",{children:oe.summary})]}),a.jsx("button",{type:"button",className:"money-map-panel-toggle","aria-expanded":Ue,onClick:()=>ga(oe.key),children:Ue?"Hide details":"Show details"})]}),Ue&&a.jsx("div",{className:"money-map-panel-body",children:a.jsx("p",{children:oe.detail})})]},oe.key)})}),a.jsxs("section",{className:"money-map-direction interactive-card",children:[a.jsxs("div",{children:[a.jsx("h3",{children:"Direction"}),a.jsx("p",{children:gt})]}),a.jsx("ul",{className:"money-map-direction-list",children:ft.map(oe=>a.jsx("li",{children:oe},oe))})]})]})]})},JC=480,Ab=(n,s)=>String(n.name||"").localeCompare(String(s.name||"")),_b=(n,s)=>n.balance!==s.balance?n.balance-s.balance:n.apr!==s.apr?n.apr-s.apr:Ab(n,s),WC=(n,s)=>n.apr!==s.apr?s.apr-n.apr:n.balance!==s.balance?n.balance-s.balance:Ab(n,s),Mb=(n,s,l,o=_b)=>{const d=(n||[]).filter(w=>!w.paid).map(w=>({id:w.id,name:w.name||"Balance",balance:Math.max(0,Number(w.balance)||0),apr:Math.max(0,Number(w.apr)||0),minPayment:Math.max(0,Number(w.minPayment)||0)})).filter(w=>w.balance>0);if(d.length===0)return[];const h=new Map;d.forEach(w=>{h.set(w.id,{id:w.id,name:w.name,startBalance:w.balance,apr:w.apr,minPayment:w.minPayment,termMonths:w.termMonths,totalInterest:0,months:null,extraApplied:0,paidOff:!1,finalPayment:0})});const m=typeof l=="number"?l:(n||[]).reduce((w,T)=>w+(T.paid&&Number(T.rollForward)||0),0);let g=Number(m)||0,v=0,y=0,x=d.map(w=>({...w}));for(;x.length>0&&y<JC;){y+=1,x.forEach(D=>{const B=h.get(D.id),R=D.apr>0?D.apr/100/12:0,W=D.balance*R;D.balance+=W,B.totalInterest+=W}),x.sort(o);const w=x[0],T=Math.max(0,s+g);if(!x.some(D=>D.minPayment>0||D.id===w.id&&T>0))break;const E=h.get(w.id);E.extraApplied<T&&(E.extraApplied=T);const z=[];x.forEach(D=>{const B=h.get(D.id);let R=D.minPayment;D.id===w.id&&T>0&&(R+=T);const W=Math.min(R,D.balance);D.balance-=W,B.finalPayment=W,z.push({card:D,payment:W,basePayment:D.minPayment,isTarget:D.id===w.id})});const Z=z.filter(({card:D})=>D.balance<=1e-8);Z.length>0&&Z.forEach(({card:D,basePayment:B})=>{const R=h.get(D.id);R.paidOff||(R.paidOff=!0,R.months=y,R.endMonth=y,v+=1,R.order=v),g+=B}),x=x.filter(D=>D.balance>1e-8)}return Array.from(h.values()).sort((w,T)=>w.order!=null&&T.order!=null?w.order-T.order:w.order!=null?-1:T.order!=null?1:w.startBalance!==T.startBalance?w.startBalance-T.startBalance:String(w.name||"").localeCompare(String(T.name||""))).map(w=>({...w,recommendedPayment:w.minPayment+(w.extraApplied||0),projectedPayment:w.minPayment+(w.extraApplied||0)}))},Ga=(n,s,l)=>Mb(n,s,l,_b),Er=(n,s,l)=>Mb(n,s,l,WC),kb="liveBudgetTransactions",bg=()=>{try{const n=Nt(kb,"[]"),s=JSON.parse(n);return Array.isArray(s)?s:[]}catch{return[]}},eA=n=>n.type==="expense"?n.expenseType||"personal":n.incomeType||"personal",xg=n=>eA(n)==="personal",tA=n=>{if(!n||n<=0||!Number.isFinite(n))return"Variable";const s=Math.floor(n/12),l=Math.round(n%12),o=[];return s>0&&o.push(`${s} year${s===1?"":"s"}`),l>0&&o.push(`${l} month${l===1?"":"s"}`),o.length===0?"Less than a month":o.join(" and ")},nA=({onNavigate:n=()=>{}})=>{const{profile:s}=Ft(),[l,o]=f.useState(()=>cn()),[d,h]=f.useState({name:"",balance:"",apr:"",minPayment:""}),[m,g]=f.useState(()=>bg()),{formatCurrency:v,preferences:y}=xt(),x=f.useMemo(()=>Gn(y,m),[y,m]),[j,w]=f.useState(null),[T,A]=f.useState("pending");f.useEffect(()=>{const Q=()=>g(bg()),be=(Ne,Se)=>Ne===Se||Ne?.endsWith(`_${Se}`),J=Ne=>{be(Ne.key,kb)&&Q()},ye=()=>Q();return window.addEventListener("storage",J),window.addEventListener("live-budget-updated",ye),()=>{window.removeEventListener("storage",J),window.removeEventListener("live-budget-updated",ye)}},[]),f.useEffect(()=>{const Q=()=>o(cn());return window.addEventListener(xn,Q),()=>{window.removeEventListener(xn,Q)}},[]);const E=Q=>{o(be=>{const J=typeof Q=="function"?Q(be):Q;return jb(J),J})},z=(Q,be=0)=>{E(J=>J.map(ye=>ye.id===Q?{...ye,paid:!0,balance:0,rollForward:Number(ye.minPayment)+Number(be||0)}:ye))},Z=()=>{if(!j)return;const Q=j.isTarget?C:0;z(j.id,Q),A("done")},D=()=>{w(null),A("pending")},B=()=>{w(null),A("pending")},R=Q=>(Q||[]).filter(be=>!be.linkedTxnId),W=f.useMemo(()=>R(s.incomes).filter(Q=>(Q.incomeType||"personal")==="personal").reduce((Q,be)=>Q+(be.monthly??be.amount??0),0),[s.incomes]),fe=f.useMemo(()=>R(s.expenses).filter(Q=>(Q.expenseType||"personal")==="personal").reduce((Q,be)=>Q+(be.monthly??be.amount??0),0),[s.expenses]),re=f.useMemo(()=>ph(m,x),[m,x]),K=f.useMemo(()=>re.filter(Q=>Q.type==="income"&&xg(Q)&&!Q.baselineSync).reduce((Q,be)=>Q+(Number(be.amount)||0),0),[re]),te=f.useMemo(()=>re.filter(Q=>Q.type==="expense"&&xg(Q)).reduce((Q,be)=>Q+(Number(be.amount)||0),0),[re]),xe=f.useMemo(()=>{const Q=W+K,be=fe+te,J=Q-be;return{income:Q,expenses:be,leftover:J}},[W,fe,K,te]),U=f.useMemo(()=>{const Q=qn({income:xe.income,leftover:xe.leftover}).currentStage,be={critical:"Focus on steady progress while protecting essentials. Next step: choose one consistent extra payment and keep it going.",tight:"Stay consistent and let the snowball build momentum safely. Next step: keep the top card paid first.",balanced:"You can push payoff speed without squeezing essentials. Next step: add a little extra to the target balance.",traditional:"Optimize payoff order and interest costs for efficiency. Next step: direct extra toward the highest-rate card."};return{label:Q.label,message:be[Q.key]||""}},[xe.income,xe.leftover]),ne=Math.max(0,xe.leftover)*.3,L=f.useMemo(()=>(l||[]).filter(Q=>Q.paid).reduce((Q,be)=>Q+(Number(be.rollForward)||0),0),[l]),C=ne+L,M=f.useMemo(()=>(l||[]).filter(Q=>!Q.paid&&(Number(Q.balance)||0)>0),[l]),G=f.useMemo(()=>Ga(M,ne,L).map((be,J)=>({...be,balance:be.startBalance,order:be.order??J+1,isTarget:J===0,payoffEstimateMonths:be.months??null})),[M,ne,L]),F=G.reduce((Q,be)=>Q+(be.startBalance||0),0),he=G.reduce((Q,be)=>Q+(be.totalInterest||0),0),S=F+he,P=G.reduce((Q,be)=>Math.max(Q,be.endMonth||0),0),pe=tA(P),ue=G.length?pe:"Well show how long your snowball will take once cards are added.",we=()=>{const Q=Number(d.balance)||0,be=Number(d.apr)||0,J=Number(d.minPayment)||0;if(!d.name.trim()||Q<=0||J<=0)return;const ye=[...l,{id:Date.now(),name:d.name.trim(),balance:Q,apr:be,minPayment:J,paid:!1,rollForward:0}];E(ye),h({name:"",balance:"",apr:"",minPayment:""})},ve=Q=>{E(be=>be.filter(J=>J.id!==Q))};G.map(Q=>`${Q.order}. ${Q.name}`).join(", ");const ke=G[0],Ze=ke?`First: ${ke.name} - pay ${v(ke.recommendedPayment)} each month; clears the debt in ${ke.months?`${ke.months} ${ke.months===1?"month":"months"}`:"variable"}.`:"Well rank your debts and show which to pay first once cards are added.",me=G.length?`Your listed ${G.length===1?"card is":"cards are"} expected to clear in about ${pe} using this plan.`:"";return a.jsxs("div",{className:"cc-page",children:[a.jsx(St,{className:"top-controls",activePage:"credit-payoff",onNavigate:n,logoutHref:"/Local/BudgetIQ Login"}),a.jsx("header",{className:"cc-hero cc-hero-center",children:a.jsxs("div",{className:"cc-hero-text",children:[a.jsx("div",{className:"cc-eyebrow",children:"Debt Payoff"}),a.jsx("div",{className:"cc-heading",children:"Snowball guidance grounded in your real numbers"}),a.jsx("p",{className:"cc-subtitle",children:"Track your payoff path, direct leftover cash to the smallest balance first, and let each cleared payment strengthen the next."}),a.jsxs("p",{className:"cc-tier-note",children:["Tier lens: ",U.label,". ",U.message]})]})}),xe.leftover<0&&a.jsx("div",{className:"cc-negative-banner",children:"Focus on becoming net positive before investing leftover toward debt."}),a.jsx("section",{className:"cc-summary-grid",children:a.jsxs("div",{className:"cc-card cc-timeline-card",children:[a.jsx("div",{className:"cc-summary-combined-top",children:a.jsxs("div",{children:[a.jsx("div",{className:"cc-label",children:"Leftover"}),a.jsx("div",{className:`cc-value ${xe.leftover<0?"neg":""}`,children:v(xe.leftover)}),a.jsxs("div",{className:"cc-note",children:["Portion of leftover to Snowball (30%): ",v(ne)]}),a.jsxs("div",{className:"cc-note",children:["Rolled payments: ",v(L)]}),a.jsx("div",{className:"cc-note",children:"Rolled payments grow as cards are paid off."}),a.jsxs("div",{className:"cc-note",children:["Total snowball power: ",v(C)]})]})}),a.jsx("div",{className:"cc-divider"}),a.jsxs("div",{children:[a.jsx("div",{className:"cc-label",children:"Total payoff timeline"}),a.jsx("div",{className:"cc-timeline-value",children:ue}),me&&a.jsx("p",{className:"cc-timeline-note",children:me}),a.jsx("div",{className:"cc-label",children:"Snowball priority"}),a.jsx("p",{className:"cc-note cc-priority",children:Ze})]}),a.jsx("div",{className:"cc-divider"}),a.jsxs("div",{className:"cc-cost-summary",children:[a.jsxs("div",{children:[a.jsx("div",{className:"cc-label",children:"Projected total cost"}),a.jsx("div",{className:"cc-value",children:v(S)})]}),a.jsx("p",{className:"cc-note",children:G.length?`Includes ${v(he)} interest across ${G.length} ${G.length===1?"card":"cards"}.`:"Add cards to see your total payoff cost once everything is cleared."}),a.jsx("p",{className:"cc-note",children:"If your spending or leftover changes, we'll refresh your payoff roadmap."})]})]})}),a.jsx("section",{className:"cc-card cc-plan-card-layout",children:a.jsx("div",{className:"cc-plan-grid",children:G.length===0?a.jsx("div",{className:"cc-empty",children:"No cards yet. Add one to see the snowball order."}):G.map(Q=>a.jsxs("article",{className:`cc-plan-card ${Q.isTarget?"is-target":""}`,children:[a.jsxs("header",{className:"cc-plan-header",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"cc-plan-title",children:Q.name}),a.jsxs("div",{className:"cc-note",children:["Balance: ",v(Q.balance)]})]}),a.jsxs("div",{className:"cc-plan-actions",children:[a.jsx("button",{className:"cc-mark-paid",type:"button",onClick:()=>{w(Q),A("pending")},children:"Mark paid"}),a.jsx("button",{className:"cc-delete",type:"button",onClick:()=>ve(Q.id),children:"Remove"})]})]}),a.jsxs("div",{className:"cc-plan-body",children:[a.jsxs("div",{children:[a.jsx("span",{className:"cc-plan-label",children:"Recommended payment"}),a.jsx("span",{className:"cc-plan-value",children:v(Q.recommendedPayment)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"cc-plan-label",children:"APR"}),a.jsxs("span",{className:"cc-plan-value",children:[Q.apr.toFixed(2),"%"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"cc-plan-label",children:"Position"}),a.jsx("span",{className:"cc-plan-value",children:Q.order})]}),a.jsxs("div",{children:[a.jsx("span",{className:"cc-plan-label",children:"Payoff estimate"}),a.jsx("span",{className:"cc-plan-value",children:Q.payoffEstimateMonths?`${Q.payoffEstimateMonths} ${Q.payoffEstimateMonths===1?"month":"months"}`:"Variable"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"cc-plan-label",children:"Interest estimate"}),a.jsx("span",{className:"cc-plan-value",children:v(Q.totalInterest)})]})]})]},Q.id))})}),a.jsxs("section",{className:"cc-card cc-form-card",children:[a.jsx("div",{className:"cc-form-header",children:a.jsxs("div",{children:[a.jsx("div",{className:"cc-label",children:"Add a credit card"}),a.jsx("div",{className:"cc-note",children:"Each card needs a balance, APR, and minimum payment so we can build your payoff roadmap."})]})}),a.jsx("div",{className:"cc-form-fields",children:["name","balance","apr","minPayment"].map(Q=>a.jsxs("label",{className:"cc-form-field",children:[a.jsx("span",{children:Q==="minPayment"?"Minimum payment":Q==="apr"?"APR (%)":Q==="name"?"Card name":"Balance"}),a.jsx("input",{type:Q==="name"?"text":"number",min:"0",step:"0.01",value:d[Q],onChange:be=>h(J=>({...J,[Q]:be.target.value})),placeholder:Q==="name"?"e.g. Visa":"0.00"})]},Q))}),a.jsx("button",{className:"cc-btn primary cc-add-btn purple-save-btn",type:"button",onClick:we,children:"Add card"})]}),j&&a.jsx("div",{className:"cc-confirm-overlay",onClick:B,children:a.jsx("div",{className:"cc-confirm-box",onClick:Q=>Q.stopPropagation(),children:T==="pending"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"cc-confirm-title",children:"Mark this card as paid?"}),a.jsxs("div",{className:"cc-confirm-copy",children:["Youre about to mark ",a.jsx("strong",{children:j.name})," as paid. All future snowball funds will roll into the next balance."]}),a.jsxs("div",{className:"cc-confirm-actions",children:[a.jsx("button",{className:"cc-btn primary",type:"button",onClick:Z,children:"Yes"}),a.jsx("button",{className:"cc-btn secondary",type:"button",onClick:D,children:"No"})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"cc-confirm-title",children:"Congratulations "}),a.jsx("div",{className:"cc-confirm-copy",children:"That card is now marked as paid. Keep the snowball rolling!"}),a.jsx("button",{className:"cc-btn primary cc-confirm-close",type:"button",onClick:B,children:"Close"})]})})})]})},pr={critical:{level:"critical",emoji:"",label:"Critical",message:"Cash flow negative. Let's stabilize.",cushionLevel:"weak",reassurance:"We've got a plan - you're moving forward.",coachPrompt:"Stabilize essentials first before expanding.",guidanceTitle:"Next tier = a small positive leftover",guidanceSubtitle:"This tier unlocks once your essentials feel safe and your budget shows a tiny breathing room.",guidanceLine:"What helps most is honest tracking plus a calm habit that leaves a little extra each period."},fragile:{level:"fragile",emoji:"",label:"Fragile",message:"Close, let's improve.",cushionLevel:"fragile",reassurance:"We're watching it - keep the small habits steady.",coachPrompt:"Keep the momentum on leftover and guard essentials.",guidanceTitle:"Next tier = a dependable cushion",guidanceSubtitle:"This tier unlocks when you build a quiet buffer that whispers Ive got it.",guidanceLine:"Staying gentle and consistent keeps things from tipping backward."},stable:{level:"stable",emoji:"",label:"Stable",message:"You're holding steady.",cushionLevel:"steady",reassurance:"Nice and calm - keep protecting what's already working.",coachPrompt:"Optimize little wins and keep the buffer cozy.",guidanceTitle:"Next tier = strengthening resilience",guidanceSubtitle:"This tier opens when a stronger shield lets unexpected shifts feel softer.",guidanceLine:"Gradual cushion growth keeps the future calmer."},thriving:{level:"thriving",emoji:"",label:"Thriving",message:"You're ahead.",cushionLevel:"strong",reassurance:"Momentum is real - let's grow smarter from here.",coachPrompt:"Grow opportunity funds and expand playfully.",guidanceTitle:"Next tier = purposeful growth",guidanceSubtitle:"This tier is about choiceusing stability to plant long-term goals.",guidanceLine:"Well help you shape the life you want on purpose."}},vh=(n,s)=>{const l=Number(n)||0,o=Math.round(Number(s)||0);return l<0?pr.critical:o>=100&&l>=0?pr.thriving:o<25?pr.fragile:(o>=65,pr.stable)},id=1e3*60*60*24,aA=(n,s)=>n==="inspired"?"Improving":n==="confidence"?s>=0?"Stable":"Holding":n==="protective"?"Protecting":s>=0?"Holding":"Caution",sA=()=>{const{profile:n,totals:s,baseExpenses:l}=Ft(),{preferences:o}=xt(),d=f.useMemo(()=>Gn(o),[o.budgetPeriod,o.budgetPeriodStartDay,o.budgetPeriodAnchor]),h=Number(n?.savingsBalance)||0,m=Math.max(Number(l)||1,1),g=Number(s?.leftover)||0,v=Math.min(100,Math.max(0,Math.round(h/m*100))),y=Math.min(2,Math.max(0,h/m)),x=f.useMemo(()=>vh(g,v),[g,v]),j=d?.start??new Date,w=d?.end??new Date(j.getTime()+id*30),T=Math.max(1,Math.round((w-j)/id)),E=Math.max(0,Math.min(T,Math.floor((new Date-j)/id))),z=Math.max(1,T-E),Z=g/z,D=f.useMemo(()=>({periodStart:j.toISOString(),periodEnd:w.toISOString(),periodProgress:T?E/T:0}),[j,w,E,T]),B=f.useMemo(()=>To({tier:x.level,bufferMonths:y,leftoverTrend:g>=0?1:-1,driftFlag:g<0,improvements:g>=0,timeInTierDays:0,context:D}),[x.level,y,g,D]),R=Math.min(100,Math.max(6,Math.round(50+g/m*20))),W=Math.min(100,Math.max(0,Math.round(h/m*100))),fe=Math.max(0,Math.round(h/m*30));return{missionLabel:`${x.label} (Tier ${x.level==="stable"?3:x.level==="thriving"?4:2})`,trajectoryLabel:aA(B?.tone,g),liveStatusLine:B?.body??x.guidanceSubtitle,winningGuidance:B,paceStatus:{percent:R,label:g>=0?"On pace":"Running ahead"},coreCashflow:g,dailyRemaining:Z,safetyCushion:h,cushionPercent:W,cushionDaysLabel:fe>0?`${fe} day${fe===1?"":"s"} covered`:"Less than 1 day covered",balancedPathTitle:B?.title??x.guidanceTitle,balancedPathBody:B?.body??x.guidanceSubtitle}},rd=(n,s="USD")=>typeof n!="number"||Number.isNaN(n)?new Intl.NumberFormat(void 0,{style:"currency",currency:s,minimumFractionDigits:2,maximumFractionDigits:2}).format(0):new Intl.NumberFormat(void 0,{style:"currency",currency:s,minimumFractionDigits:2,maximumFractionDigits:2}).format(n);function Db({onNavigate:n=()=>{}}){const{winningGuidance:s,paceStatus:l,coreCashflow:o,dailyRemaining:d,safetyCushion:h,cushionPercent:m,cushionDaysLabel:g,balancedPathTitle:v,balancedPathBody:y}=sA();f.useEffect(()=>{console.log("DASHBOARD V2 MOUNTED")},[]);const x=s?.key==="P4_OPTIMIZE";return a.jsxs(a.Fragment,{children:[a.jsx(St,{className:"dashboard-topRightControls",onNavigate:n}),a.jsx("div",{className:"dashboardPage",children:a.jsxs("div",{className:"dashboardColumn",children:[a.jsxs("div",{className:"dashCard hudCard",children:[a.jsx("div",{className:"hudTitle",children:"LUNA HUD"}),a.jsxs("div",{className:"hudInner",children:[a.jsxs("div",{className:"hudRow",children:[a.jsx("span",{className:"hudLabel",children:"STATUS"}),a.jsxs("div",{className:"hudValue",children:[a.jsx("span",{className:"hudPrimaryValue",children:"Stable  Tier 3"}),a.jsx("span",{className:"hudSecondaryValue",children:"Holding"})]})]}),a.jsxs("div",{className:"hudRow",children:[a.jsx("span",{className:"hudLabel",children:"SUMMARY"}),a.jsx("div",{className:"hudValue",children:a.jsx("p",{className:"hudSummaryText",children:"You've reached a steady state. Maintain consistency and avoid unnecessary strain while this stability settles."})})]})]}),x&&a.jsx("div",{className:"hudCTA",children:a.jsx("button",{className:"primaryCTA",children:"Move Surplus to Snowball"})})]}),a.jsxs("div",{className:"dashCard",children:[a.jsx("div",{className:"cardHeader",children:"TRACK SPENDING"}),a.jsx("h2",{children:"Track spending for clarity"}),a.jsx("p",{className:"cardSubtext",children:"This keeps your Financial GPS data fresh and dependable."}),a.jsx("div",{className:"progressBar",children:a.jsx("div",{className:"progressFill",style:{width:`${l.percent}%`}})}),a.jsx("div",{className:"paceStatus",children:l.label}),a.jsx("div",{className:"cardCTA",children:a.jsx("button",{className:"secondaryCTA",children:"Open Tracker"})})]}),a.jsxs("div",{className:"dashCard",children:[a.jsx("div",{className:"cardHeader",children:"CORE CASHFLOW (AFTER BILLS)"}),a.jsx("div",{className:"moneyValue mainAmount",children:rd(o)}),a.jsx("p",{className:"cardSubtext",children:"Income minus fixed obligations and essentials"}),a.jsxs("p",{className:"cardMeta",children:[a.jsx("span",{className:"moneyValue",children:rd(d)})," ","per day remaining"]})]}),a.jsxs("div",{className:"dashCard",children:[a.jsx("div",{className:"cardHeader",children:"SAFETY CUSHION"}),a.jsx("div",{className:"moneyValue mainAmount",children:rd(h)}),a.jsx("p",{className:"cardSubtext",children:h<=0?"No emergency buffer yet":"Room for life to happen"}),a.jsx("div",{className:"progressBar",children:a.jsx("div",{className:"progressFill",style:{width:`${m}%`}})}),a.jsxs("div",{className:"cardMeta",children:[m,"% of one month of expenses"]}),a.jsx("div",{className:"cardMeta muted",children:g})]}),a.jsxs("div",{className:"dashCard",children:[a.jsx("div",{className:"cardHeader",children:"BALANCED PATH"}),a.jsx("h3",{children:v}),a.jsx("p",{className:"cardSubtext",children:y})]})]})})]})}const _r=({role:n,why:s,reassurance:l})=>!n&&!s&&!l?null:a.jsxs("div",{className:"hero-glue",children:[n&&a.jsx("span",{className:"hero-role",children:n}),s&&a.jsxs("div",{className:"hero-strip",children:[a.jsx("span",{className:"hero-strip-label",children:"Why this matters in your financial life"}),a.jsx("p",{children:s})]}),l&&a.jsx("p",{className:"hero-reassurance",children:l})]}),jg=n=>{if(n==null)return"";const s=String(n).replace(/,/g,"");if(s==="")return"";const[l,o]=s.split("."),d=l.replace(/\B(?=(\d{3})+(?!\d))/g,",");return o!==void 0?`${d}.${o}`:d},wg="goals",Ng=["3","6","9","12","18","24","36","60"],iA=350,Sg={car:{context:"Is this replacing your current car or dreaming forward?",placeholder:"Next Car / Family SUV",helper:"Pick what feels steady, not stressful. Luna will adjust gently if life shifts."},savings:{context:"Is this emergency protection, breathing room, or something meaningful?",placeholder:"Emergency Fund / Rainy Day",helper:"A small, steady pace keeps the cushion honest without pressure."},travel:{context:"Is this a near trip or something youre dreaming toward?",placeholder:"Paris 2026 / Disney Trip",helper:"Luna will keep timelines calm so this trip feels like a promise, not a panic."},home:{context:"Are you preparing for a first home, upgrade, or future move?",placeholder:"First Home / New Place Fund",helper:"Steady steps protect the dreamslow, consistent saving is how it arrives."},education:{context:"Is this school, skill-building, or something new you want to learn?",placeholder:"Coding Bootcamp / Nursing School",helper:"A thoughtful timeline keeps your learning investment steady and calm."},debt:{context:"Which debt do you want to gently shrink?",placeholder:"Credit Card / Student Loan",helper:"Luna treats this as a protective step, not a punishment."},fitness:{context:"What body or wellbeing goal are you creating space for?",placeholder:"Home Gym / Fitness Retreat",helper:"Slow, steady contributions keep momentum and protect your rhythm."},retirement:{context:"Is this long-term safety youre building for later?",placeholder:"Retirement Nest Egg / Future Calm",helper:"Gentle consistency builds optionality years from now without stress today."},custom:{context:"Tell Luna what this goal means so she can stay gentle.",placeholder:"Describe your goal",helper:"Pick what feels steady, not stressful. Luna will adjust gently if life shifts."}},rA=(n="")=>n.toLowerCase().replace(/[^a-z]/g,""),Eg=n=>{const s=rA(n);return Sg[s]||Sg.custom},lA=[{icon:"",label:"Home"},{icon:"",label:"Car"},{icon:"",label:"Debt"},{icon:"",label:"Travel"},{icon:"",label:"Education"},{icon:"",label:"Fitness"},{icon:"",label:"Savings"},{icon:"",label:"Retirement"},{icon:"",label:"Custom"}],oA=({onNavigate:n=()=>{}})=>{const[s,l]=f.useState(()=>{try{const F=localStorage.getItem(wg);return F?JSON.parse(F):[]}catch{return[]}}),[o,d]=f.useState(!1),[h,m]=f.useState(""),[g,v]=f.useState(""),[y,x]=f.useState(""),[j,w]=f.useState(""),[T,A]=f.useState(""),[E,z]=f.useState(""),[Z,D]=f.useState(null),{formatCurrency:B}=xt(),[R,W]=f.useState(null),{totals:fe}=Ft(),re=fe.leftover>0?fe.leftover:iA;f.useEffect(()=>{localStorage.setItem(wg,JSON.stringify(s))},[s]);const K=f.useMemo(()=>s.reduce((F,he)=>F+(Number(he.amount)||0),0),[s]),te=()=>{x(""),w(""),A(""),z(""),v(""),m(""),D(null)},xe=(F,he)=>{te(),v(F),m(he),d(!0)},U=()=>{const F=Number(String(j).replace(/,/g,""));if(!F||F<=0){alert("Enter a valid goal amount");return}const he=Number(T==="custom"?E:T),S=Math.max(1,he||Math.ceil(F/re)),P=Math.ceil(F/S),pe=h==="Custom"&&y?y:h||"Goal",ue={id:Date.now(),type:pe,icon:g||"",detail:y,amount:F,monthly:P,months:S,completed:!1,category:h||"Custom"};l(we=>[...we,ue]),d(!1)},se=F=>W(F),k=()=>W(null),ne=()=>{R&&(D(R.id),x(R.detail||""),w(String(R.amount||"")),d(!0),W(null))},L=s.find(F=>F.id===Z),C=()=>{if(!L)return;const F=Number(String(j||L.amount).replace(/,/g,""));if(!F||F<=0){alert("Enter a valid goal amount");return}const he=Number(T==="custom"?E:T||L.months),S=Math.max(1,he||Math.ceil(F/re)),P=Math.ceil(F/S);l(pe=>pe.map(ue=>ue.id===Z?{...ue,detail:y||ue.detail,amount:F,monthly:P,months:S,type:y||ue.type}:ue)),d(!1)},M=F=>{l(he=>he.filter(S=>S.id!==F)),d(!1)},G=()=>{if(!o)return null;if(Z&&L){const F=Eg(L.category||L.type);return a.jsxs("div",{className:"modal-box",children:[a.jsxs("h3",{children:[L.icon," ",L.type]}),a.jsx("p",{className:"modal-copy",children:F.context}),a.jsx("input",{id:"detail-edit",placeholder:F.placeholder,value:y,onChange:he=>x(he.target.value)}),a.jsx("p",{className:"modal-copy",children:"About how much do you think youll need?"}),a.jsx("input",{id:"amount-edit",type:"text",inputMode:"decimal",placeholder:"$",value:jg(j),onWheel:he=>he.currentTarget.blur(),onChange:he=>w(he.target.value.replace(/,/g,""))}),a.jsxs("select",{id:"months-edit",className:"timeline-select",value:T||L?.months||"",onChange:he=>{const S=he.target.value;A(S),S!=="custom"&&z("")},children:[a.jsx("option",{value:"",children:"Choose timeline"}),Ng.map(he=>a.jsxs("option",{value:he,children:[he," months"]},he)),a.jsx("option",{value:"custom",children:"Custom"})]}),a.jsx("p",{className:"modal-copy",children:F.helper}),T==="custom"&&a.jsx("input",{id:"custom-months-edit",type:"number",min:"1",placeholder:"Custom months",value:E,onChange:he=>z(he.target.value)}),a.jsx("button",{className:"save-btn purple-save-btn",onClick:C,children:"Save"}),a.jsx("button",{className:"danger-btn save-btn purple-save-btn",onClick:()=>M(L.id),children:"Delete"}),a.jsx("p",{className:"modal-helper",children:"You can change this anytime. Goals grow with you, not against you."})]})}if(h){const F=Eg(h),he=h==="Custom"?"Custom Goal":`${h} Goal`;return a.jsxs("div",{className:"modal-box",children:[a.jsx("h3",{children:he}),a.jsx("p",{className:"modal-copy",children:F.context}),a.jsx("input",{id:"detail",placeholder:F.placeholder,value:y,onChange:S=>x(S.target.value)}),a.jsx("p",{className:"modal-copy",children:"About how much do you think youll need?"}),a.jsx("input",{id:"amount",type:"text",inputMode:"decimal",placeholder:"$",value:jg(j),onWheel:S=>S.currentTarget.blur(),onChange:S=>w(S.target.value.replace(/,/g,""))}),a.jsxs("select",{id:"months",className:"timeline-select",value:T,onChange:S=>{const P=S.target.value;A(P),P!=="custom"&&z("")},children:[a.jsx("option",{value:"",children:"Choose timeline"}),Ng.map(S=>a.jsxs("option",{value:S,children:[S," months"]},S)),a.jsx("option",{value:"custom",children:"Custom"})]}),a.jsx("p",{className:"modal-copy",children:F.helper}),T==="custom"&&a.jsx("input",{id:"custom-months",type:"number",min:"1",placeholder:"Custom months",value:E,onChange:S=>z(S.target.value)}),a.jsx("button",{className:"save-btn purple-save-btn",onClick:U,children:"Add Goal"}),a.jsx("p",{className:"modal-helper",children:"You can change this anytime. Goals grow with you, not against you."})]})}return null};return a.jsxs("div",{className:"goals-page",children:[a.jsxs("header",{children:[a.jsx(St,{className:"top-controls",activePage:"goals",onNavigate:n,logoutHref:"/Local/BudgetIQ Login"}),a.jsxs("div",{className:"goals-title-group",children:[a.jsx("h1",{children:"Your Goals"}),a.jsx("p",{className:"goals-subtitle",children:"Gentle direction for where you'd like life to go."})]})]}),a.jsx(_r,{role:"Direction",why:"Clarity about what you want helps Luna understand how your leftover can support what matterswithout pressure, deadlines, or guilt."}),a.jsxs("div",{className:"container",children:[a.jsxs("div",{className:"warm-prompt",children:[a.jsx("p",{className:"plan-title",children:"Plan the goals that matter to you."}),a.jsx("p",{className:"warm-sub",children:"Think of these as guideposts, not commands."}),a.jsx("p",{className:"warm-sub",children:"Pick a goal to explore what steady progress could look like. Luna will show realistic timelines and calm, sustainable paths."})]}),a.jsxs("div",{className:"card main",children:[a.jsx("p",{className:"goal-instruction",children:"Choose a goal type to begin."}),a.jsx("div",{className:"goal-type-grid",children:lA.map(F=>a.jsxs("div",{className:"goal-type",onClick:()=>xe(F.icon,F.label),children:[a.jsx("div",{className:"icon",children:F.icon}),a.jsx("div",{className:"label",children:F.label})]},F.label))})]}),a.jsxs("div",{className:"card goals-summary-card",children:[a.jsxs("div",{className:"goals-summary-header",children:[a.jsxs("div",{children:[a.jsx("h3",{children:"Active Goals"}),a.jsx("p",{className:"small-note",children:s.length>0?`${s.length} goal${s.length===1?"":"s"} - ${B(K)} total`:"No active goals yet. Whenever you're ready, pick something that matters to you."})]}),s.length>0&&a.jsx("span",{className:"text-muted",children:`Monthly estimate based on ~${B(re,{minimumFractionDigits:0,maximumFractionDigits:0})}`})]}),s.length===0?null:a.jsx("div",{className:"goal-list",children:s.map(F=>a.jsxs("div",{className:"goal-item",onClick:()=>se(F),children:[a.jsxs("div",{className:"goal-item-meta",children:[a.jsx("span",{className:"goal-item-icon",children:F.icon}),a.jsxs("div",{children:[a.jsx("div",{className:"goal-item-type",children:F.type}),a.jsx("p",{className:"goal-item-detail",children:F.detail||"No description yet."})]})]}),a.jsxs("div",{className:"goal-item-metrics",children:[a.jsx("div",{className:"goal-item-amount",children:B(F.amount)}),a.jsx("div",{className:"goal-item-timeline",children:F.months?`${F.months} mo`:"Timeline TBD"})]})]},F.id))}),a.jsx("p",{className:"small-note lighten",children:"Luna will estimate realistic timelines and suggest calm monthly progress so you can see what steady movement feels like."}),a.jsx("p",{className:"small-note lighten",children:"Not a mandate  just honest guidance."})]})]}),o&&a.jsx("div",{className:"modal",style:{display:"flex"},onClick:F=>F.target===F.currentTarget&&d(!1),children:G()}),R&&a.jsx("div",{className:"preview-overlay",onClick:F=>F.target===F.currentTarget&&k(),children:a.jsxs("div",{className:"preview-card",children:[a.jsx("div",{className:"preview-icon",children:R.icon}),a.jsx("h3",{children:R.type}),a.jsx("p",{className:"preview-detail",children:R.detail||"No description yet."}),a.jsxs("div",{className:"preview-grid",children:[a.jsxs("div",{children:[a.jsx("div",{className:"label",children:"Total"}),a.jsx("div",{className:"value",children:B(R.amount||0)})]}),a.jsxs("div",{children:[a.jsx("div",{className:"label",children:"Monthly"}),a.jsx("div",{className:"value",children:B(R.monthly||0)})]}),a.jsxs("div",{children:[a.jsx("div",{className:"label",children:"Timeline"}),a.jsx("div",{className:"value",children:R.months?`${R.months} months`:"N/A"})]})]}),a.jsx("div",{className:"preview-actions",children:a.jsx("button",{className:"primary-btn",onClick:ne,children:"Edit Goal"})})]})})]})},ld="https://luna-finance-production.up.railway.app",Fa=n=>typeof n!="string"?ld:n.startsWith("/")?`${ld}${n}`:`${ld}/${n}`,cA=[{key:"housing",match:["rent","mortgage","zillow"]},{key:"transport",match:["uber","lyft","shell","chevron","exxon","gas"]},{key:"food",match:["starbucks","coffee","mcd","burger","wendy","chipotle","food","restaurant"]},{key:"shopping",match:["amazon","amzn","target","walmart","etsy"]},{key:"utilities",match:["wifi","verizon","att","comcast","xfinity","water","electric","utility"]},{key:"insurance",match:["insurance","ins","geico","progressive"]},{key:"income",match:["payroll","salary","deposit","paycheck"]}],bh=(n="")=>{const s=n.toLowerCase();for(const l of cA)if(l.match.some(o=>s.includes(o)))return l.key;return"uncategorized"},xh=n=>{const s=Number(n);return Number.isFinite(s)?s:0},uA=n=>{const s=n.split(/\r?\n/).filter(g=>g.trim()!=="");if(s.length===0)return[];const l=s[0].split(",").map(g=>g.trim().toLowerCase()),o=l.findIndex(g=>g.includes("date")),d=l.findIndex(g=>g.includes("desc")),h=l.findIndex(g=>g.includes("amount")),m=l.findIndex(g=>g.includes("cat"));return s.slice(1).map(g=>{const v=g.split(","),y=v[h]??"0",x=xh(y),j=v[d]??"",w=m!==-1&&v[m]?v[m].toLowerCase():bh(j);return{date:v[o]??"",desc:j,amount:x,category:w}})};async function dA(n){try{if(typeof window>"u")throw new Error("XLSX parsing not available in this environment.");const s=window.XLSX;if(!s)throw new Error("Install the 'xlsx' package and load it to enable Excel parsing.");const l=await n.arrayBuffer(),o=s.read(l,{type:"array"}),d=o.SheetNames[0],h=o.Sheets[d];return s.utils.sheet_to_json(h,{defval:""}).map(g=>{const v=Object.keys(g).reduce((T,A)=>(T[A.toLowerCase()]=g[A],T),{}),y=xh(v.amount??v.amt??v.value??0),x=v.description??v.desc??"",j=v.category??bh(x);return{date:v.date??"",desc:x,amount:y,category:String(j).toLowerCase()}})}catch{throw new Error("XLSX parsing requires the optional 'xlsx' package loaded on window.XLSX. Please upload CSV for now.")}}const hA=({onNavigate:n=()=>{}})=>{const[s,l]=f.useState([]),[o,d]=f.useState(""),[h,m]=f.useState(""),[g,v]=f.useState(!1),y=f.useRef(null),{formatCurrency:x}=xt(),j=async z=>{if(!z)return;d(""),m(z.name);const Z=(z.name.split(".").pop()||"").toLowerCase();if(Z==="pdf"||Z==="png"||Z==="jpg"||Z==="jpeg"){v(!0),l([]);try{const D=await fA(z);l(D.filter(B=>B.amount!==0)),d("")}catch(D){d(D?.message||"Could not parse that file. PDF/image parsing requires a backend OCR service; please upload CSV/XLSX for now.")}finally{v(!1)}return}try{if(Z==="xlsx"||Z==="xls"){const D=await dA(z);l(D.filter(B=>B.amount!==0));return}if(Z==="csv"||Z==="txt"){const D=await z.text(),B=uA(D);l(B.filter(R=>R.amount!==0));return}d("Unsupported file type. Please upload CSV/XLSX.")}catch(D){l([]),d(D?.message||"Could not read that file. Try a CSV/XLSX with columns: Date, Description, Amount, Category (optional).")}},w=async()=>{v(!0),d("");try{await fetch(Fa("/api/parse-upload"),{method:"DELETE"}),l([]),m(""),y.current&&(y.current.value="")}catch{d("Could not remove the uploaded file. Please try again.")}finally{v(!1)}},T=f.useMemo(()=>{let z=0,Z=0;const D={};return s.forEach(B=>{B.amount>=0?z+=B.amount:Z+=Math.abs(B.amount);const R=B.amount>=0?"income":B.category;D[R]=(D[R]||0)+Math.abs(B.amount)}),{income:z,expenses:Z,byCat:D,leftover:z-Z}},[s]),A=f.useMemo(()=>Object.entries(T.byCat).filter(([z])=>z!=="income").map(([z,Z])=>({key:z,total:Z})),[T.byCat]),E=f.useMemo(()=>{const z=A.reduce((D,B)=>D+B.total,0);if(z<=0)return[];let Z=0;return A.map(D=>{const B=Z/z;Z+=D.total;const R=Z/z;return{key:D.key,path:mA(50,50,45,B*360,R*360)}})},[A]);return a.jsxs("div",{className:"import-page",children:[a.jsxs("header",{className:"import-header",children:[a.jsx(St,{className:"top-controls",activePage:"import",onNavigate:n,logoutHref:"/Local/BudgetIQ Login"}),a.jsx("div",{className:"import-title",children:"Bank Statements"}),a.jsx("div",{className:"import-subtitle",children:"Upload statements to help Luna keep your leftover accurate and your tier picture clear."})]}),a.jsx(_r,{role:"Record",why:"Uploading statements refines Money Coach's leftover so every other insight stays grounded in real transactions.",reassurance:"More truth in means better guidance outthese uploads earn you clarity, not judgment."}),a.jsxs("div",{className:"container",children:[a.jsxs("div",{className:"card",children:[a.jsx("h2",{children:"Upload a statement file"}),a.jsx("p",{className:"helper",children:"Well read transactions to better understand your income, expenses, and spending flow."}),a.jsxs("div",{className:"helper",children:[a.jsx("strong",{children:"Supported formats"}),a.jsx("br",{}),"CSV or XLSX preferred",a.jsx("br",{}),"PDF/images not supported yet"]}),a.jsxs("div",{className:"helper",children:[a.jsx("strong",{children:"File setup"}),a.jsx("br",{}),"Columns: Date, Description, Amount, Category (optional)",a.jsx("br",{}),"Amounts: Expenses as negatives, Income as positives"]}),a.jsx("div",{className:"helper",children:"Your data stays private, and you can remove it anytime in Settings."}),a.jsxs("label",{className:"upload-area",children:[a.jsx("input",{type:"file",accept:".csv,.txt,.xlsx,.xls,.pdf,image/png,image/jpeg",onChange:z=>j(z.target.files?.[0]),ref:y,style:{display:"none"}}),a.jsx("div",{children:"Choose a file to upload"}),h&&a.jsx("div",{className:"filename",children:h})]}),(h||s.length>0)&&a.jsx("div",{className:"import-action-row",children:a.jsx("button",{type:"button",className:"import-clear-btn",onClick:w,children:"Remove uploaded file"})}),g&&a.jsx("div",{className:"helper",children:"Processing file..."}),o&&a.jsx("div",{className:"error",children:o})]}),s.length>0&&a.jsxs("div",{className:"card",children:[a.jsx("h3",{children:"Summary"}),a.jsxs("div",{className:"summary-row",children:[a.jsx("span",{children:"Total Income"}),a.jsx("b",{children:x(T.income)})]}),a.jsxs("div",{className:"summary-row",children:[a.jsx("span",{children:"Total Expenses"}),a.jsx("b",{children:x(T.expenses)})]}),a.jsxs("div",{className:"summary-row",children:[a.jsx("span",{children:"Leftover"}),a.jsx("b",{children:x(T.leftover)})]}),a.jsx("div",{className:"category-list",children:A.map(z=>a.jsxs("div",{className:"cat-row",children:[a.jsx("span",{children:z.key}),a.jsx("b",{children:x(z.total)})]},z.key))}),A.length>0&&a.jsxs("div",{className:"chart-box",children:[a.jsx("svg",{viewBox:"0 0 100 100",className:"pie-chart",children:E.map((z,Z)=>a.jsx("path",{d:z.path,className:`slice slice-${Z%6}`},z.key))}),a.jsx("div",{className:"chart-legend",children:A.map((z,Z)=>a.jsxs("div",{className:"legend-row",children:[a.jsx("span",{className:`legend-swatch slice-${Z%6}`}),a.jsx("span",{children:z.key}),a.jsx("b",{children:x(z.total)})]},z.key))})]})]})]})]})};function Tg(n,s,l,o){const d=(o-90)*Math.PI/180;return{x:n+l*Math.cos(d),y:s+l*Math.sin(d)}}function mA(n,s,l,o,d){const h=Tg(n,s,l,d),m=Tg(n,s,l,o),g=d-o<=180?"0":"1";return["M",h.x,h.y,"A",l,l,0,g,0,m.x,m.y,"L",n,s,"Z"].join(" ")}async function fA(n){const s=new FormData;s.append("file",n);const l=await fetch(Fa("/api/parse-upload"),{method:"POST",body:s});if(!l.ok)throw new Error("Parser service unavailable. Please use CSV/XLSX for now.");const o=await l.json();if(!o.rows)throw new Error("Parser response invalid. Please use CSV/XLSX for now.");return o.rows.map(d=>({date:d.date||"",desc:d.desc||d.description||"",amount:xh(d.amount),category:String(d.category||bh(d.desc||"")).toLowerCase()}))}const Ud="liveBudgetTransactions",Mr="moneyProfile",yr={incomes:[],expenses:[],savingsBalance:"",savingsMonthly:"",name:""},Cg=["Housing","Car Payment","Fuel","Car Insurance","Health Insurance","Food","Electric","WiFi","Water","Phone Bill","Other Util.","Fun"],Ag=(n={})=>Number(n.monthly??n.amount??0)||0,pA=n=>(n?.incomeType||"personal")==="personal",Lb=n=>(n?.expenseType||"personal")==="personal",gr=n=>n.type==="income"?n.incomeType||"personal":n.expenseType||"personal",yA=n=>{const s=new Set;return(n.expenses||[]).filter(l=>Lb(l)&&!l.linkedTxnId).forEach(l=>{const o=l.category||l.name||"";o&&s.add(o)}),Array.from(s.values())},gA=(n=[])=>{const s=new Set;return(n||[]).forEach(l=>{if(l.type!=="expense")return;const o=String(l.category||"").trim();o&&o!=="Income"&&s.add(o)}),Array.from(s.values())},vA=(n,s)=>{if(n===s)return!0;if(!Array.isArray(n)||!Array.isArray(s)||n.length!==s.length)return!1;for(let l=0;l<n.length;l+=1){const o=n[l]||{},d=s[l]||{};if(o.id!==d.id||o.type!==d.type||o.category!==d.category||o.amount!==d.amount||o.note!==d.note||o.date!==d.date||o.incomeType!==d.incomeType||o.expenseType!==d.expenseType)return!1}return!0},od=()=>{const n=it.get(We(Ud));return Array.isArray(n)?n:[]},Do=()=>{if(typeof window>"u")return{...yr};try{const n=Nt(Mr);if(!n)return{...yr};const s=JSON.parse(n);return!s||typeof s!="object"?{...yr}:{...yr,...s}}catch{return{...yr}}},bA=n=>{try{const s=Do(),l=Array.isArray(s?.incomes)?s.incomes:[],o={...s,incomes:[...l,n]};it.set(We(Mr),o),window.dispatchEvent(new Event("profile-updated"))}catch{}},xA=n=>{if(n)try{const s=Do(),l=Array.isArray(s?.incomes)?s.incomes:[],o=l.filter(h=>h?.id!==n);if(o.length===l.length)return;const d={...s,incomes:o};it.set(We(Mr),d),window.dispatchEvent(new Event("profile-updated"))}catch{}},jA=n=>{if(!n||n.type!=="expense")return;const s=Number(n.amount);if(!(!Number.isFinite(s)||s<=0))try{const l=Do(),o=Array.isArray(l?.expenses)?l.expenses:[],d={id:n.id,name:n.note?.trim()||n.category||"Expense",category:n.category,expenseType:n.expenseType||"personal",amount:s,linkedTxnId:n.id},h={...l,expenses:[...o.filter(m=>m?.linkedTxnId!==n.id),d]};it.set(We(Mr),h),window.dispatchEvent(new Event("profile-updated"))}catch{}},wA=n=>{if(n)try{const s=Do(),l=Array.isArray(s?.expenses)?s.expenses:[],o=l.filter(d=>d?.linkedTxnId!==n);if(o.length===l.length)return;it.set(We(Mr),{...s,expenses:o}),window.dispatchEvent(new Event("profile-updated"))}catch{}},NA=({onNavigate:n=()=>{},canGoBack:s})=>{const{profile:l}=Ft(),{formatCurrency:o,preferences:d}=xt(),h=d.premiumAccess&&d.businessFeatures,[m,g]=f.useState(()=>od()),v=f.useRef(m),[y,x]=f.useState(!1),[j,w]=f.useState({type:"expense",category:"",customCategory:"",expenseType:"personal",incomeType:"personal",amount:"",note:""}),[T,A]=f.useState("month"),[E,z]=f.useState(!1),[Z,D]=f.useState(!0),[B,R]=f.useState(!0),[W,fe]=f.useState(!1),re=f.useRef(null),K=f.useRef(0),[te,xe]=f.useState(""),[U,se]=f.useState(null),k=f.useRef(null),ne=f.useRef(null),L=f.useRef(null),C=f.useRef(!1);f.useEffect(()=>{const H=()=>g(od()),ge=De=>{De.key===Ud&&H()};return window.addEventListener("storage",ge),window.addEventListener("live-budget-updated",H),()=>{window.removeEventListener("storage",ge),window.removeEventListener("live-budget-updated",H)}},[]),f.useEffect(()=>{v.current=m},[m]);const M=f.useMemo(()=>(l.incomes||[]).filter(H=>pA(H)&&!H.linkedTxnId),[l.incomes]),G=f.useMemo(()=>(l.expenses||[]).filter(H=>Lb(H)&&!H.linkedTxnId),[l.expenses]),F=f.useMemo(()=>{const H=yA(l),ge=gA(m),De=Array.from(new Set([...H,...ge])).filter(jt=>!Cg.includes(jt));return[...Cg,...De.sort((jt,Rn)=>jt.localeCompare(Rn))]},[l,m]),he=f.useMemo(()=>M.reduce((H,ge)=>H+Ag(ge),0),[M]),S=f.useMemo(()=>G.reduce((H,ge)=>H+Ag(ge),0),[G]),P=f.useMemo(()=>Gn(d,m),[d,m]),pe=f.useMemo(()=>{if(!P?.start||!P?.end)return"";const H=new Date(P.end);H.setDate(H.getDate()-1);const ge={month:"short",day:"numeric"},De=P.start.toLocaleDateString(void 0,ge),jt=H.toLocaleDateString(void 0,ge);return De===jt?`Current period: ${De}`:`Current period: ${De} - ${jt}`},[P]),ue=f.useMemo(()=>ph(m,P),[m,P]),we=f.useMemo(()=>ue.filter(H=>gr(H)!=="business"),[ue]),ve=f.useMemo(()=>ue.filter(H=>gr(H)==="business"),[ue]),ke=f.useMemo(()=>we.filter(H=>H.type==="income"&&!H.baselineSync).reduce((H,ge)=>H+(Number(ge.amount)||0),0),[we]),Ze=f.useMemo(()=>we.filter(H=>H.type==="expense").reduce((H,ge)=>H+(Number(ge.amount)||0),0),[we]),me=he+ke,Q=S+Ze,be=me-Q,J=S,ye=Ze,Ne=me-ye;f.useMemo(()=>{const H=M.map(De=>({amount:Number(De.monthly??De.amount??0)||0,date:De.date,source:De.name})).filter(De=>Number.isFinite(De.amount)),ge=we.filter(De=>De.type==="income").map(De=>({amount:Number(De.amount??0),date:De.date,source:De.note||De.category})).filter(De=>Number.isFinite(De.amount));return[...H,...ge]},[M,we]);const Se=m.length>0,Pe=ue.length>0,Ie=ke===0&&he>0,$e=!Se,Be=f.useMemo(()=>xi(P.mode),[P.mode,P.key,ue.length]),tt=Be.length?Be[Be.length-1]:null,nt=f.useMemo(()=>ko(d,P.key,tt),[d,P.key,tt]);f.useEffect(()=>{if(!Pe||Ie){R(!0);const H=setTimeout(()=>R(!1),45e3);return()=>clearTimeout(H)}R(!1)},[Pe,Ie]),f.useEffect(()=>{if(!W)return;const H=De=>{re.current&&!re.current.contains(De.target)&&fe(!1)},ge=De=>{De.key==="Escape"&&fe(!1)};return document.addEventListener("mousedown",H),document.addEventListener("keydown",ge),()=>{document.removeEventListener("mousedown",H),document.removeEventListener("keydown",ge)}},[W]),f.useEffect(()=>()=>{k.current&&clearTimeout(k.current),ne.current&&clearTimeout(ne.current),L.current&&clearTimeout(L.current)},[]);const le=f.useMemo(()=>Pe?Ie?"Add your first paycheck this period and we'll keep the numbers grounded.":"":"We'll begin tracking this period the moment you log your first transaction.",[Pe,Ie]),Te=be<0&&(me>0||Q>0),Ee=H=>$e&&Number(H)===0?"--":o(H),mt=Ee(Ne),gt=Ne<0&&mt!=="--"?"neg":"",ft=J-ye,de=he-S,ze=Pe&&J>0&&de>0,N=ft>=0?`Buffer growing by ${o(ft)}`:`Giving leftover room to reset (${o(Math.abs(ft))})`,q=ft>=0?"pos":"neg",je=f.useMemo(()=>[...ue].sort((H,ge)=>{const De=new Date(H.date||Date.now());return new Date(ge.date||Date.now())-De}),[ue]),Ae=f.useMemo(()=>je.filter(H=>gr(H)!=="business").slice(0,6),[je]),_e=f.useMemo(()=>je.filter(H=>gr(H)==="business").slice(0,6),[je]),Ge=f.useMemo(()=>(l.incomes||[]).filter(H=>(H.incomeType||"personal")==="business"&&!H.linkedTxnId).reduce((H,ge)=>H+(Number(ge.monthly??ge.amount??0)||0),0),[l.incomes]),Ke=f.useMemo(()=>(l.expenses||[]).filter(H=>(H.expenseType||"personal")==="business"&&!H.linkedTxnId).reduce((H,ge)=>H+(Number(ge.monthly??ge.amount??0)||0),0),[l.expenses]),zt=f.useMemo(()=>ve.filter(H=>H.type==="income").reduce((H,ge)=>H+(Number(ge.amount)||0),0),[ve]),pa=f.useMemo(()=>ve.filter(H=>H.type==="expense").reduce((H,ge)=>H+(Number(ge.amount)||0),0),[ve]),ya=Ge+zt,jn=Ke+pa,Fn=ya-jn,zn=me>0?ye/me:0,wn=be<0?"bad":zn>.8?"warn":"good",ga=be<0?"Plan needs attention":zn>.8?"Running a bit ahead":"On pace",oe=be<0?"Your plan is structurally short this period. Tracking still helpsevery honest entry keeps the picture accurate.":zn>.8?"Spending is running a bit ahead of income. A calm slowdown keeps things steady.":"You're in sync with incomekeep holding this steady pace.",Ue=f.useMemo(()=>{const H=new Date,ge=new Date(H);if(T==="day")ge.setHours(0,0,0,0);else if(T==="week"){const De=H.getDay();ge.setDate(H.getDate()-De),ge.setHours(0,0,0,0)}else T==="month"?(ge.setDate(1),ge.setHours(0,0,0,0)):T==="year"&&(ge.setMonth(0,1),ge.setHours(0,0,0,0));return m.filter(De=>{const jt=new Date(De.date||Date.now());return jt>=ge&&jt<=H})},[m,T]),lt=f.useMemo(()=>{const H=new Map;return Ue.forEach(ge=>{const jt=new Date(ge.date||Date.now()).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"});H.has(jt)||H.set(jt,{income:0,expense:0,list:[]});const Rn=H.get(jt),kt=Number(ge.amount)||0;ge.type==="income"?Rn.income+=kt:Rn.expense+=kt,Rn.list.push(ge)}),Array.from(H.entries()).map(([ge,De])=>({date:ge,...De})).sort((ge,De)=>new Date(De.date)-new Date(ge.date))},[Ue]),Xt=H=>{const ge=v.current,De=typeof H=="function"?H(ge):H;if(!vA(ge,De)){g(De);try{it.set(We(Ud),De),window.dispatchEvent(new Event("live-budget-updated"))}catch{}}},Nn=()=>{C.current||(z(!0),L.current&&clearTimeout(L.current),L.current=window.setTimeout(()=>{z(!1),L.current=null},3600))},va=()=>{C.current=!0,L.current&&(clearTimeout(L.current),L.current=null),z(H=>!H)},ba=()=>{const H=Date.now();if(H-K.current<500)return;K.current=H;const ge=Number(j.amount);if(!ge||ge<=0)return;const De=j.category==="__custom__"?j.customCategory.trim():j.category.trim();if(j.type==="expense"&&!De){alert("Pick a category for this expense.");return}const jt=typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():Date.now(),Rn=j.type==="income"&&(j.incomeType||"personal")==="personal",kt={id:jt,type:j.type,category:j.type==="income"?"Income":De,incomeType:j.type==="income"?j.incomeType:void 0,expenseType:j.type==="expense"?j.expenseType:void 0,amount:ge,note:j.note,date:new Date().toISOString(),baselineSync:Rn||void 0};if(od().some(en=>en.id===kt.id))return;Xt(en=>en.some(ji=>ji.id===kt.id)?en:[kt,...en.slice(0,199)]),Rn&&bA({id:kt.id,name:j.note?.trim()||"Income",category:"Income",amount:ge,incomeType:j.incomeType||"personal"}),kt.type==="expense"&&(kt.expenseType||"personal")==="personal"&&jA(kt),w(en=>({...en,amount:"",note:"",category:"",customCategory:"",expenseType:"personal",incomeType:"personal"})),x(!1);const Qt=kt.type==="income"?"Income added ":"Expense noted ";xe(Qt),k.current&&clearTimeout(k.current),k.current=window.setTimeout(()=>{xe("")},3200),se(kt.id),ne.current&&clearTimeout(ne.current),ne.current=window.setTimeout(()=>{se(null)},3800),Nn()},dn=H=>{const ge=v.current.find(De=>De.id===H);ge?.baselineSync&&ge?.type==="income"&&xA(ge.id),ge?.type==="expense"&&(ge.expenseType||"personal")==="personal"&&wA(ge.id),Xt(De=>De.filter(jt=>jt.id!==H))};return a.jsxs("div",{className:"live-budget-page",children:[a.jsxs("header",{className:"lb-header",children:[a.jsx(St,{className:"top-controls",activePage:"livebudget",onNavigate:n,logoutHref:"/Local/BudgetIQ Login"}),s&&a.jsx("button",{className:"back-btn",type:"button",onClick:()=>n("back"),children:"<"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"lb-title",children:"Track Spending"}),a.jsx("div",{className:"lb-subtitle",children:"Track spending in real time and stay on plan."})]}),a.jsx(_r,{role:"Record",why:"Logging transactions keeps your plan grounded in reality.",reassurance:"The more true the picture, the calmer and smarter Luna can guide you."}),pe&&a.jsx("div",{className:"lb-period-note",children:pe}),Te&&a.jsxs("div",{className:"lb-negative-banner",children:["Your plan is structurally short this period. Tracking still helpseach honest entry keeps the picture clear.",a.jsx("span",{className:"lb-negative-detail",children:"Your required bills and obligations are larger than this periods income, so this is a funding gap, not just a spending pace."})]}),nt>0&&a.jsxs("div",{className:"lb-monthly-note",children:["We haven't seen activity for ",nt," period",nt===1?"":"s",". This period starts fresh once you log new spending."]}),B&&le&&a.jsx("div",{className:"lb-monthly-note",children:le}),a.jsxs("div",{className:"lb-container",children:[$e&&a.jsxs("div",{className:"lb-zero-state",children:[a.jsx("div",{className:"lb-zero-title",children:"Your spending story starts here"}),a.jsx("div",{className:"lb-zero-body",children:"This page keeps your spending steady through the month. We'll begin tracking this period the moment you log your first transaction."}),a.jsx("button",{className:"primary-btn purple-save-btn interactive-cta pressable",onClick:()=>x(!0),children:"Add your first transaction"})]}),a.jsxs("div",{className:"lb-hero-group",children:[a.jsxs("div",{className:"lb-card lb-highlight interactive-card",children:[a.jsxs("div",{className:"lb-section-label",children:[a.jsx("div",{className:"lb-section-label-title",children:"This period snapshot"}),a.jsx("div",{className:"lb-section-label-sub",children:"Personal budget only. Business items stay separate from your personal plan."})]}),a.jsxs("div",{className:"lb-summary-grid",children:[a.jsxs("div",{className:"lb-summary-income",children:[a.jsx("div",{className:"lb-label",children:"Income this period"}),a.jsx("div",{className:"lb-value",children:Ee(me)})]}),a.jsxs("div",{className:"lb-summary-budgeted",children:[a.jsx("div",{className:"lb-label",children:"Budgeted"}),a.jsx("div",{className:"lb-value",children:Ee(J)})]}),a.jsxs("div",{className:"lb-summary-spent",children:[a.jsx("div",{className:"lb-label",children:"Spent so far"}),a.jsx("div",{className:"lb-value",children:Ee(ye)}),ze&&a.jsx("div",{className:`lb-delta ${q}`,children:N})]}),a.jsxs("div",{className:"lb-leftover-col",children:[a.jsx("div",{className:"lb-label",children:"Spending Balance"}),a.jsx("div",{className:`lb-value leftover ${gt}`,children:mt})]})]}),!$e&&a.jsxs("div",{className:"lb-cta-row",children:[a.jsx("button",{className:"primary-btn purple-save-btn interactive-cta pressable",onClick:()=>x(!0),children:"Add Transaction"}),te&&a.jsx("div",{className:"lb-add-feedback reassure-banner",role:"status","aria-live":"polite",children:te})]})]}),(h||ve.length>0)&&a.jsxs("div",{className:"lb-card lb-business-card interactive-card",children:[a.jsx("div",{className:"lb-card-title",children:"Business Snapshot"}),a.jsx("div",{className:"lb-helper",children:"Business items stay separate from your personal budget. Business income wont change your baseline."}),a.jsxs("div",{className:"lb-business-summary",children:[a.jsxs("div",{children:[a.jsx("div",{className:"lb-label",children:"Business income"}),a.jsx("div",{className:"lb-value",children:o(ya)})]}),a.jsxs("div",{children:[a.jsx("div",{className:"lb-label",children:"Business expenses"}),a.jsx("div",{className:"lb-value",children:o(jn)})]}),a.jsxs("div",{children:[a.jsx("div",{className:"lb-label",children:"Net business"}),a.jsx("div",{className:`lb-value ${Fn<0?"neg":""}`,children:o(Fn)})]})]}),a.jsx("div",{className:"lb-business-cta",children:a.jsx("button",{className:"secondary-btn",type:"button",onClick:()=>n("business-tools"),children:"Generate tax summary"})})]})]}),Pe&&a.jsxs("div",{className:"lb-card interactive-card",children:[a.jsx("div",{className:"lb-card-title",children:"Spending Pace"}),a.jsx("div",{className:"lb-helper",children:"Tracks spending against income in real time."}),a.jsxs("div",{className:"lb-bar-card",children:[a.jsxs("div",{className:"lb-bar-header",children:[a.jsxs("div",{children:[a.jsx("div",{className:"lb-label",children:"Spent so far"}),a.jsx("div",{className:"lb-value",children:o(ye)})]}),a.jsxs("div",{children:[a.jsx("div",{className:"lb-label",children:"Target (income)"}),a.jsx("div",{className:"lb-value",children:o(me)})]})]}),a.jsx("div",{className:"lb-bar-shell",children:a.jsx("div",{className:`lb-bar-fill ${wn}`,style:{width:`${Math.min(zn*100,140)}%`}})}),a.jsxs("div",{className:"lb-bar-footer",children:[a.jsx("span",{className:`lb-chip ${wn}`,children:ga}),a.jsx("span",{className:"lb-status-helper",children:oe})]})]})]}),Se&&a.jsxs("div",{className:"lb-card interactive-card",children:[a.jsxs("div",{className:"lb-card-title-row",children:[a.jsx("div",{className:"lb-card-title",children:"Recent Activity"}),a.jsx("button",{className:"lb-collapse-btn",onClick:()=>D(H=>!H),"aria-label":"Toggle recent activity",children:Z?"":""})]}),Z&&a.jsx(a.Fragment,{children:Pe?a.jsxs("div",{className:"lb-recent-sections",children:[a.jsxs("div",{className:"lb-activity-section",children:[a.jsxs("div",{className:"lb-activity-section-header",children:[a.jsx("span",{children:"Personal activity"}),a.jsxs("span",{children:[Ae.length," items"]})]}),Ae.length===0?a.jsx("div",{className:"lb-helper",children:"No recent personal transactions."}):a.jsx("div",{className:"lb-feed",children:Ae.map(H=>{const ge=U===H.id;return a.jsxs("div",{className:`lb-feed-row pressable${ge?" recent":""}`,children:[a.jsxs("div",{children:[a.jsxs("div",{className:"lb-feed-title",children:[H.note||H.category||"Transaction",a.jsx("span",{className:"lb-transaction-type-label personal",children:"Personal"})]}),a.jsx("div",{className:"lb-feed-note",children:H.type==="income"?"Income":"Expense"})]}),a.jsxs("div",{className:`lb-feed-amt ${H.type==="income"?"pos":"neg"}`,children:[H.type==="income"?"+":"-",o(Number(H.amount||0))]}),a.jsx("button",{className:"lb-delete-btn",onClick:()=>dn(H.id),children:"Remove"})]},H.id)})})]}),(h||ve.length>0)&&a.jsxs("div",{className:"lb-activity-section",children:[a.jsxs("div",{className:"lb-activity-section-header",children:[a.jsx("span",{children:"Business activity"}),a.jsxs("span",{children:[_e.length," items"]})]}),_e.length===0?a.jsx("div",{className:"lb-helper",children:"No business activity yet."}):a.jsx("div",{className:"lb-feed",children:_e.map(H=>{const ge=U===H.id;return a.jsxs("div",{className:`lb-feed-row pressable${ge?" recent":""}`,children:[a.jsxs("div",{children:[a.jsxs("div",{className:"lb-feed-title",children:[H.note||H.category||"Transaction",a.jsx("span",{className:"lb-transaction-type-label business",children:"Business"})]}),a.jsx("div",{className:"lb-feed-note",children:H.type==="income"?"Income":"Expense"})]}),a.jsxs("div",{className:`lb-feed-amt ${H.type==="income"?"pos":"neg"}`,children:[H.type==="income"?"+":"-",o(Number(H.amount||0))]}),a.jsx("button",{className:"lb-delete-btn",onClick:()=>dn(H.id),children:"Remove"})]},H.id)})})]})]}):a.jsx("div",{className:"lb-helper",children:"No activity logged yet this period. Add a transaction to start tracking."})})]}),Se&&a.jsxs("div",{className:"lb-card interactive-card",children:[a.jsxs("div",{className:"lb-card-title-row",children:[a.jsx("div",{className:"lb-card-title",children:"History"}),a.jsx("button",{className:"lb-collapse-btn",onClick:va,"aria-label":"Toggle history",children:E?"":""})]}),a.jsx("div",{className:"lb-range-row",children:["day","week","month","year"].map(H=>a.jsx("button",{className:`lb-range-btn ${T===H?"active":""}`,onClick:()=>A(H),children:H==="day"?"Today":H==="week"?"This Week":H==="month"?"This Month":"This Year"},H))}),E&&(lt.length===0?a.jsx("div",{className:"lb-helper",children:"No activity yet in this range."}):a.jsx("div",{className:"lb-history",children:lt.map(H=>a.jsxs("div",{className:"lb-history-card",children:[a.jsxs("div",{className:"lb-history-head",children:[a.jsx("div",{className:"lb-history-date",children:H.date}),a.jsxs("div",{className:"lb-history-sum",children:[a.jsxs("span",{className:"pos",children:["+",o(H.income)]}),a.jsxs("span",{className:"neg",children:["-",o(H.expense)]})]})]}),a.jsxs("div",{className:"lb-history-list",children:[H.list.slice(0,4).map(ge=>{const De=gr(ge),jt=U===ge.id;return a.jsxs("div",{className:`lb-history-row pressable${jt?" recent":""}`,children:[a.jsxs("span",{className:"lb-history-label",children:[ge.note||ge.category||"Entry",a.jsx("span",{className:`lb-transaction-type-label ${De}`,children:De==="business"?"Business":"Personal"})]}),a.jsxs("span",{className:`lb-history-amt ${ge.type==="income"?"pos":"neg"}`,children:[ge.type==="income"?"+":"-",o(Number(ge.amount||0))]})]},ge.id)}),H.list.length>4&&a.jsxs("div",{className:"lb-helper",children:["+",H.list.length-4," more"]})]})]},H.date))}))]})]}),y&&a.jsx("div",{className:"lb-modal",onClick:H=>H.target===H.currentTarget&&x(!1),children:a.jsxs("div",{className:"lb-modal-content",children:[a.jsx("div",{className:"lb-modal-title",children:"Add Transaction"}),a.jsx("label",{className:"lb-form-label",children:"Type"}),a.jsx("div",{className:"lb-toggle",children:["expense","income"].map(H=>a.jsx("button",{className:`lb-toggle-btn ${j.type===H?"active":""}`,onClick:()=>w(ge=>({...ge,type:H,category:"",customCategory:"",expenseType:"personal",incomeType:"personal"})),children:H==="expense"?"Expense":"Income"},H))}),j.type==="expense"?a.jsxs(a.Fragment,{children:[h&&a.jsxs(a.Fragment,{children:[a.jsx("label",{className:"lb-form-label",children:"Expense type"}),a.jsxs("select",{className:"lb-input",value:j.expenseType,onChange:H=>w(ge=>({...ge,expenseType:H.target.value})),children:[a.jsx("option",{value:"personal",children:"Personal"}),a.jsx("option",{value:"business",children:"Business"})]})]}),a.jsx("label",{className:"lb-form-label",children:"Category"}),a.jsxs("div",{className:"lb-dropdown",ref:re,children:[a.jsxs("button",{type:"button",className:"lb-dropdown-btn",onClick:()=>fe(H=>!H),children:[j.category?j.category==="__custom__"?"Custom":j.category:"Select",a.jsx("span",{className:"lb-dropdown-caret","aria-hidden":"true",children:""})]}),W&&a.jsxs("div",{className:"lb-dropdown-menu",children:[a.jsx("button",{type:"button",className:"lb-dropdown-item",onClick:()=>{w(H=>({...H,category:"",customCategory:""})),fe(!1)},children:"Select"}),F.map(H=>a.jsx("button",{type:"button",className:"lb-dropdown-item",onClick:()=>{w(ge=>({...ge,category:H,customCategory:""})),fe(!1)},children:H},H)),a.jsx("button",{type:"button",className:"lb-dropdown-item",onClick:()=>{w(H=>({...H,category:"__custom__"})),fe(!1)},children:"Custom"})]})]}),j.category==="__custom__"&&a.jsx("input",{className:"lb-input",value:j.customCategory,onChange:H=>w(ge=>({...ge,customCategory:H.target.value})),placeholder:"Enter custom category",style:{marginTop:8}})]}):a.jsxs(a.Fragment,{children:[h&&a.jsxs(a.Fragment,{children:[a.jsx("label",{className:"lb-form-label",children:"Income type"}),a.jsxs("select",{className:"lb-input",value:j.incomeType,onChange:H=>w(ge=>({...ge,incomeType:H.target.value})),children:[a.jsx("option",{value:"personal",children:"Personal"}),a.jsx("option",{value:"business",children:"Business"})]})]}),a.jsx("div",{className:"lb-helper",style:{marginTop:8},children:"Income is tracked without a category."})]}),a.jsx("label",{className:"lb-form-label",children:"Amount"}),a.jsx("input",{className:"lb-input",type:"number",min:"0",step:"0.01",value:j.amount,onChange:H=>w(ge=>({...ge,amount:H.target.value})),placeholder:"e.g. 42.50"}),a.jsx("label",{className:"lb-form-label",children:"Note (optional)"}),a.jsx("input",{className:"lb-input",value:j.note,onChange:H=>w(ge=>({...ge,note:H.target.value})),placeholder:"e.g. Grocery run"}),a.jsx("div",{className:"lb-modal-actions",children:a.jsx("button",{className:"primary-btn purple-save-btn",onClick:ba,children:h?"Add transaction":"Save"})})]})})]})},SA=({onNavigate:n=()=>{}})=>a.jsxs("div",{className:"onboarding-page",children:[a.jsxs("header",{className:"onboarding-hero",children:[a.jsx("p",{className:"onboarding-eyebrow",children:"Welcome"}),a.jsx("h1",{children:"Lets build your snapshot"}),a.jsx("p",{className:"onboarding-subtitle",children:"Well answer whats really left after bills, tell you where your stability starts, and keep the tone calm."})]}),a.jsx("main",{className:"onboarding-body",children:a.jsxs("div",{className:"onboarding-card",children:[a.jsx("h2",{children:"What this unlocks"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Clear leftover + tier insight"}),a.jsx("li",{children:"Calm, practical guidance"}),a.jsx("li",{children:"A plan that adapts as life changes"})]}),a.jsx("button",{type:"button",className:"primary-btn purple-save-btn onboarding-cta",onClick:()=>n("onboardingPayRhythm"),children:"Start"})]})})]}),EA=[{value:"weekly",label:"Weekly"},{value:"biweekly",label:"Every 2 weeks (26 / year)"},{value:"semimonthly",label:"Twice per month (24 / year)"},{value:"monthly",label:"Monthly"},{value:"irregular",label:"Irregular / custom"}],TA=({onNavigate:n=()=>{}})=>{const[s,l]=f.useState("monthly"),[o,d]=f.useState("");f.useEffect(()=>{try{const m=Nt("payPeriod");if(m){const g=JSON.parse(m);g?.frequency&&l(g.frequency),g?.anchorDate&&d(g.anchorDate)}}catch{}},[]);const h=()=>{bs("payPeriod",JSON.stringify({frequency:s,anchorDate:o||""})),n("onboardingMonthlyPicture")};return a.jsxs("div",{className:"onboarding-page",children:[a.jsxs("header",{className:"onboarding-hero",children:[a.jsx("p",{className:"onboarding-eyebrow",children:"Pay rhythm"}),a.jsx("h1",{children:"Anchor Luna to your paychecks"}),a.jsx("p",{className:"onboarding-subtitle",children:"If your income doesnt follow a predictable schedule, thats okay. Just tell us when you expect your next paycheck, and Luna will stay aligned with your real life  not a rigid calendar."})]}),a.jsx("main",{className:"onboarding-body",children:a.jsxs("section",{className:"onboarding-card",children:[a.jsx("label",{htmlFor:"frequency-select",children:"Pay frequency"}),a.jsx("select",{id:"frequency-select",value:s,onChange:m=>l(m.target.value),children:EA.map(m=>a.jsx("option",{value:m.value,children:m.label},m.value))}),s==="irregular"&&a.jsx("p",{className:"onboarding-note",children:"Irregular is normal. Pick the next paycheck date for now  you can change it anytime."}),a.jsx("label",{htmlFor:"anchor-date",children:"Next paycheck"}),a.jsx("input",{id:"anchor-date",type:"date",value:o,onChange:m=>d(m.target.value)}),a.jsx("p",{className:"onboarding-note",children:"This helps anchor your cycle.  mm/dd/yyyy"}),a.jsx("button",{type:"button",className:"primary-btn purple-save-btn onboarding-cta",onClick:h,children:"Continue"})]})})]})},_g=n=>{if(n==null)return"";const s=String(n).replace(/[^0-9.]/g,"");return s===""?"":s},CA=({onNavigate:n=()=>{}})=>{const{formatCurrency:s}=xt(),[l,o]=f.useState(""),[d,h]=f.useState(""),[m,g]=f.useState({frequency:"monthly",anchorDate:""});f.useEffect(()=>{try{const T=Nt("payPeriod");if(T){const E=JSON.parse(T);g({frequency:E?.frequency||"monthly",anchorDate:E?.anchorDate||""})}const A=Nt("moneyProfile");if(A){const E=JSON.parse(A);if(E){const z=(E.incomes||[])[0],Z=(E.expenses||[])[0];z?.monthly&&o(String(z.monthly)),Z?.monthly&&h(String(Z.monthly))}}}catch{}},[]);const v=Number(l)||0,y=Number(d)||0,x=v-y,j=v>0,w=()=>{const T={name:"",incomes:v>0?[{id:`income-${Date.now()}`,name:"Monthly income",category:"Income",monthly:v,incomeType:"personal"}]:[],expenses:y>0?[{id:`expense-${Date.now()}`,name:"Monthly expenses",category:"Expense",monthly:y,expenseType:"personal"}]:[],payPeriod:m.frequency||"monthly",payPeriodAnchor:m.anchorDate||"",savingsBalance:"",savingsMonthly:""};bs("moneyProfile",JSON.stringify(T)),n("onboardingSnapshot")};return a.jsxs("div",{className:"onboarding-page",children:[a.jsxs("header",{className:"onboarding-hero",children:[a.jsx("p",{className:"onboarding-eyebrow",children:"Monthly picture"}),a.jsx("h1",{children:"Give us your baseline numbers"}),a.jsx("p",{className:"onboarding-subtitle",children:"Close enough is finethis is just a gentle estimate to start the plan. You can readjust anything later."})]}),a.jsx("main",{className:"onboarding-body",children:a.jsxs("section",{className:"onboarding-card",children:[a.jsx("label",{htmlFor:"income-input",children:"Monthly income (after tax)"}),a.jsx("input",{id:"income-input",type:"text",value:l,onChange:T=>o(_g(T.target.value)),placeholder:"3,500"}),a.jsx("label",{htmlFor:"expenses-input",children:"Monthly expenses (bills + basic spending)"}),a.jsx("input",{id:"expenses-input",type:"text",value:d,onChange:T=>h(_g(T.target.value)),placeholder:"2,600"}),a.jsxs("p",{className:"onboarding-summary",children:["Estimated leftover: ",a.jsx("strong",{children:s(x)})]}),a.jsx("p",{className:"onboarding-note",children:"Forgot a payment? Add it later in Refine your numbers."}),a.jsx("button",{type:"button",className:"primary-btn purple-save-btn onboarding-cta",onClick:w,disabled:!j,children:"See my snapshot"})]})})]})},AA=({onNavigate:n=()=>{}})=>{const{profile:s,totals:l}=Ft(),{formatCurrency:o}=xt(),[d,h]=f.useState(!1),[m,g]=f.useState(""),v=Number(s.savingsBalance)||0,y=Number(l.expenses)||0,x=Math.max(y,1),j=Math.round(v/x*100||0),w=Math.min(100,Math.max(0,j)),T=v>0?"Room for life to happen":"No emergency buffer yet",A=`${w}% of one month of expenses`,E=f.useMemo(()=>vh(Number(l.leftover),w),[l.leftover,w]),z=f.useMemo(()=>To({tier:E.level,bufferMonths:Math.min(1,Math.max(0,v/x)),leftoverTrend:Number(l.leftover)>=0?1:-1,driftFlag:!1,improvements:!1,timeInTierDays:0}),[E.level,v,x,l.leftover]),Z=()=>{if(!d){g("Please confirm consent to continue.");return}Rw(),g(""),n("dashboard")};return a.jsxs("div",{className:"onboarding-page",children:[a.jsxs("header",{className:"onboarding-hero",children:[a.jsx("p",{className:"onboarding-eyebrow",children:"Financial snapshot"}),a.jsx("h1",{children:"Heres where you stand"}),a.jsx("p",{className:"onboarding-subtitle",children:"This reflects what you just shared. Well keep things calm and steady while you refine more details over time."})]}),a.jsx("main",{className:"onboarding-body",children:a.jsxs("section",{className:"onboarding-card",children:[a.jsxs("div",{className:"onboarding-summary-row",children:[a.jsxs("div",{children:[a.jsx("span",{children:"Monthly income"}),a.jsx("strong",{children:o(l.income)})]}),a.jsxs("div",{children:[a.jsx("span",{children:"Monthly expenses"}),a.jsx("strong",{children:o(l.expenses)})]}),a.jsxs("div",{children:[a.jsx("span",{children:"Leftover each month"}),a.jsx("strong",{children:o(l.leftover)})]})]}),a.jsxs("div",{className:"onboarding-card__intro",children:[a.jsx("p",{className:"onboarding-card__intro-title",children:"Welcome to Luna"}),a.jsx("p",{className:"onboarding-card__intro-body",children:"This snapshot is a calm reveal of where your money already standsno judgment, just clarity."})]}),a.jsxs("div",{className:"onboarding-guidance",children:[a.jsx("p",{className:"onboarding-guidance-eyebrow",children:z.eyebrow}),a.jsx("h3",{className:`onboarding-guidance-title onboarding-guidance-title--${z.tone}`,children:z.title}),a.jsx("p",{className:"onboarding-guidance-body",children:z.body})]}),a.jsxs("div",{className:"onboarding-tier",children:[a.jsxs("strong",{children:["Tier: ",E.label]}),a.jsx("p",{children:E.message}),a.jsx("p",{className:"onboarding-tier-reassurance",children:E.reassurance})]}),a.jsxs("div",{className:"onboarding-cushion",children:[a.jsxs("div",{children:[a.jsx("p",{className:"onboarding-cushion__label",children:"Safety Cushion"}),a.jsx("strong",{children:o(v)}),a.jsx("p",{className:"onboarding-cushion__subline",children:T}),a.jsx("span",{className:"onboarding-cushion__meta",children:A})]}),a.jsx("div",{className:"onboarding-cushion__meter","aria-label":`Buffer at ${w}% of ${o(x)}`,children:a.jsx("span",{className:"onboarding-cushion__fill",style:{width:`${w}%`}})}),a.jsx("p",{className:"onboarding-cushion__tip",children:v>0?"Keep feeding this cushion so you stay steady if life surprises you.":"Start with small deposits - $25-$100 per period keeps momentum alive."})]}),a.jsx("p",{className:"onboarding-note",children:"Your tier simply describes where things are todayits not a judgment. You can update income or expenses anytime from Refine your numbers."}),a.jsxs("label",{className:"onboarding-consent",children:[a.jsx("input",{type:"checkbox",checked:d,onChange:D=>{h(D.target.checked),m&&g("")}}),a.jsxs("span",{children:["I am 18 or older and agree to Lunas"," ",a.jsx("a",{href:"/docs/terms-of-service.md",target:"_blank",rel:"noreferrer",children:"Terms of Service"})," ","and"," ",a.jsx("a",{href:"/docs/data-contract.md",target:"_blank",rel:"noreferrer",children:"Privacy Policy"}),"."]})]}),m&&a.jsx("p",{className:"onboarding-error",children:m}),a.jsx("button",{type:"button",className:"primary-btn purple-save-btn onboarding-cta",onClick:Z,disabled:!d,children:"Continue to dashboard"})]})})]})},cd="userIdentity",ud=()=>{typeof window>"u"||window.dispatchEvent(new Event("identity-updated"))},_A=[{value:"01",label:"Jan"},{value:"02",label:"Feb"},{value:"03",label:"Mar"},{value:"04",label:"Apr"},{value:"05",label:"May"},{value:"06",label:"Jun"},{value:"07",label:"Jul"},{value:"08",label:"Aug"},{value:"09",label:"Sep"},{value:"10",label:"Oct"},{value:"11",label:"Nov"},{value:"12",label:"Dec"}],MA=Array.from({length:31},(n,s)=>{const l=s+1;return{value:l.toString().padStart(2,"0"),label:l.toString()}}),kA=Array.from({length:120},(n,s)=>(new Date().getFullYear()-s).toString()),Mg=(n="")=>{if(!n)return{year:"",month:"",day:""};const[s="",l="",o=""]=n.split("-");return{year:s,month:l,day:o}},kg=n=>{const s=String(n||"").replace(/\D/g,"").slice(0,10);return s?s.length<=3?`(${s}`:s.length<=6?`(${s.slice(0,3)}) ${s.slice(3)}`:`(${s.slice(0,3)}) ${s.slice(3,6)}-${s.slice(6)}`:""},DA=({onNavigate:n=()=>{}})=>{const[s,l]=f.useState({firstName:"",middleInitial:"",lastName:"",street:"",city:"",state:"",zip:"",phone:"",email:"",password:"",ssn:"",dob:""}),[o,d]=f.useState(""),h=j=>w=>{const T=w.target.value,A=j==="phone"?kg(T):T,E={...s,[j]:A};l(E),d("");try{localStorage.setItem(cd,JSON.stringify(E)),ud()}catch{}},m=j=>{const w=kg(j.target.value),T={...s,phone:w};l(T),d("");try{localStorage.setItem(cd,JSON.stringify(T)),ud()}catch{}},[g,v]=f.useState(()=>Mg(s.dob));f.useEffect(()=>{v(Mg(s.dob))},[s.dob]);const y=j=>w=>{v(T=>{const A={...T,[j]:w},E=A.year&&A.month&&A.day?`${A.year}-${A.month}-${A.day}`:"";return h("dob")({target:{value:E}}),A})},x=j=>{j.preventDefault();try{localStorage.setItem(cd,JSON.stringify(s)),ud()}catch{}d("Saved.")};return a.jsxs("div",{className:"profile-page",children:[a.jsxs("header",{className:"profile-header",children:[a.jsx(St,{className:"top-controls",activePage:"profile",onNavigate:n,logoutHref:"/Local/BudgetIQ Login"}),a.jsxs("div",{className:"header-text",children:[a.jsx("div",{className:"title",children:"Verification"}),a.jsx("div",{className:"subtitle",children:"Securely provide details needed to check loan pre-qualification and eligibility."})]})]}),a.jsxs("form",{className:"profile-card",onSubmit:x,children:[a.jsx("h3",{className:"profile-section-title",children:"Personal Information"}),a.jsx("div",{className:"field name-grid",children:[{key:"firstName",label:"First name",required:!0},{key:"middleInitial",label:"Middle initial (optional)",maxLength:1},{key:"lastName",label:"Last name",required:!0}].map(j=>a.jsxs("div",{className:"name-field",children:[a.jsx("span",{className:"name-label",children:j.label}),a.jsx("input",{id:j.key,type:"text",value:s[j.key],onChange:h(j.key),maxLength:j.maxLength,required:j.required})]},j.key))}),a.jsxs("div",{className:"field address-grid",children:[a.jsx("label",{htmlFor:"street",children:"Street"}),a.jsx("input",{id:"street",type:"text",value:s.street,onChange:h("street"),required:!0}),a.jsx("label",{htmlFor:"city",children:"City"}),a.jsx("input",{id:"city",type:"text",value:s.city,onChange:h("city"),required:!0}),a.jsx("label",{htmlFor:"state",children:"State"}),a.jsx("input",{id:"state",type:"text",value:s.state,onChange:h("state"),required:!0}),a.jsx("label",{htmlFor:"zip",children:"ZIP"}),a.jsx("input",{id:"zip",type:"text",value:s.zip,onChange:h("zip"),maxLength:10,required:!0}),a.jsx("label",{htmlFor:"phone",children:"Phone number"}),a.jsx("input",{id:"phone",type:"tel",value:s.phone,onChange:m,onInput:m,inputMode:"tel",required:!0})]}),a.jsxs("div",{className:"field",children:[a.jsx("label",{htmlFor:"ssn",children:"SSN (last 4 or full when required)"}),a.jsx("input",{id:"ssn",type:"text",value:s.ssn,onChange:h("ssn"),maxLength:11,required:!0})]}),a.jsxs("div",{className:"field dob-field",children:[a.jsx("label",{children:"Date of birth"}),a.jsxs("div",{className:"dob-picker",children:[a.jsxs("select",{value:g.month,onChange:j=>y("month")(j.target.value),children:[a.jsx("option",{value:"",children:"Month"}),_A.map(j=>a.jsx("option",{value:j.value,children:j.label},j.value))]}),a.jsxs("select",{value:g.day,onChange:j=>y("day")(j.target.value),children:[a.jsx("option",{value:"",children:"Day"}),MA.map(j=>a.jsx("option",{value:j.value,children:j.label},j.value))]}),a.jsxs("select",{value:g.year,onChange:j=>y("year")(j.target.value),children:[a.jsx("option",{value:"",children:"Year"}),kA.map(j=>a.jsx("option",{value:j,children:j},j))]})]})]}),a.jsx("h3",{className:"profile-section-title",children:"Security & Privacy"}),a.jsx("p",{className:"profile-section-note",children:"Your information is protected and handled securely. We never share or sell it without your consent. Credit checks only happen with your permission."}),a.jsx("div",{className:"button-row",children:a.jsx("button",{className:"primary-btn purple-save-btn",type:"submit",children:"Save"})}),o&&a.jsx("div",{className:"hint",children:o})]})]})},br="userIdentity",Ob="lunaCreateAccount",Dg="Password must be at least 8 characters and include a number and a symbol.",LA=[{label:"Dual-Silo Security",status:"Active",detail:"Identity and financial data remain separate by design.",tooltip:"Privacy-first vault architecture keeps the identity silo untied to your financial ledger."},{label:"Local-first mode",status:"Enabled",detail:"Your data stays on your device unless you explicitly authorize a share.",tooltip:"Most processing happens locally so nothing leaves your device without your say-so."},{label:"Last security check",status:"Passed",detail:"Every profile change automatically revalidates the vault.",tooltip:"Writes refresh the vault attestation to prove nothing slipped through."}],dd=n=>{if(!n)return!1;const s=/\d/.test(n),l=/[^A-Za-z0-9]/.test(n);return n.length>=8&&s&&l},so={firstName:"",middleInitial:"",lastName:"",street:"",city:"",state:"",zip:"",phone:"",businessName:"",email:"",password:""},Pd=n=>{const s=String(n||"").replace(/\D/g,"").slice(0,10);return s?s.length<=3?`(${s}`:s.length<=6?`(${s.slice(0,3)}) ${s.slice(3)}`:`(${s.slice(0,3)}) ${s.slice(3,6)}-${s.slice(6)}`:""},Lg=()=>{if(typeof window>"u")return so;try{const n=localStorage.getItem(br),s=localStorage.getItem(Ob);if(!n&&!s)return so;const l=n?JSON.parse(n):{},o=s?JSON.parse(s):{},d={...so,...o,...l};return{firstName:d.firstName||"",middleInitial:d.middleInitial||"",lastName:d.lastName||"",street:d.street||"",city:d.city||"",state:d.state||"",zip:d.zip||"",phone:Pd(d.phone||""),businessName:d.businessName||"",email:d.email||"",password:d.password||""}}catch{return so}},hd=()=>{typeof window>"u"||window.dispatchEvent(new Event("identity-updated"))},OA=({onNavigate:n=()=>{}})=>{const{preferences:s}=xt(),[l,o]=f.useState(()=>Lg()),[d,h]=f.useState(!1),[m,g]=f.useState({current:"",next:"",confirm:""}),[v,y]=f.useState(""),[x,j]=f.useState(!1),[w,T]=f.useState(!1),[A,E]=f.useState(!1),[z,Z]=f.useState(!1),[D,B]=f.useState(!1),[R,W]=f.useState(!1),[fe,re]=f.useState(!0);f.useEffect(()=>{const k=()=>o(Lg());if(k(),typeof window>"u")return;const ne=L=>{(!L.key||L.key===br||L.key===Ob)&&k()};return window.addEventListener("storage",ne),window.addEventListener("identity-updated",k),()=>{window.removeEventListener("storage",ne),window.removeEventListener("identity-updated",k)}},[]);const K=k=>ne=>{const L=ne.target.value,C=k==="phone"?Pd(L):k==="firstName"||k==="lastName"?titleCase(L):k==="middleInitial"?L.toUpperCase().slice(0,1):L,M={...l,[k]:C};o(M),k==="password"&&(j(!0),T(!dd(C)));try{localStorage.setItem(br,JSON.stringify(M)),hd()}catch{}},te=k=>{const ne=Pd(k.target.value),L={...l,phone:ne};o(L);try{localStorage.setItem(br,JSON.stringify(L)),hd()}catch{}},xe=k=>ne=>{g(L=>({...L,[k]:ne.target.value}))},U=()=>{if(m.current!==l.password){y("Current password does not match.");return}if(!m.next){y("Enter a new password.");return}if(!dd(m.next)){y(Dg);return}if(m.next!==m.confirm){y("New passwords must match.");return}const k={...l,password:m.next};o(k),g({current:"",next:"",confirm:""}),h(!1),y("Password updated.")},se=k=>{k.preventDefault(),j(!0);const ne=dd(l.password);if(T(!ne),!!ne)try{localStorage.setItem(br,JSON.stringify(l)),hd()}catch{}};return a.jsxs("div",{className:"profile-page",children:[a.jsxs("header",{className:"profile-header",children:[a.jsx(St,{className:"top-controls",activePage:"user-profile",onNavigate:n,logoutHref:"/Local/BudgetIQ Login"}),a.jsxs("div",{className:"header-text",children:[a.jsx("div",{className:"title",children:"Profile"}),a.jsx("div",{className:"subtitle",children:"Manage the identity you share while your financial vault stays anonymous."}),a.jsx("div",{className:"security-tags",children:["Active","Local-First","Zero Knowledge"].map(k=>a.jsx("span",{className:"security-tag",children:k},k))}),a.jsx("div",{className:"security-status-grid",children:LA.map(k=>a.jsxs("article",{className:"security-status-card",children:[a.jsxs("div",{className:"security-status-row",children:[a.jsx("span",{className:"security-label",children:k.label}),a.jsx("span",{className:"security-status",children:k.status}),k.tooltip&&a.jsx("span",{className:"info-icon",role:"img","aria-label":k.tooltip,title:k.tooltip,children:""})]}),a.jsx("p",{children:k.detail})]},k.label))})]})]}),a.jsxs("form",{className:"profile-card",onSubmit:se,children:[a.jsxs("section",{className:"identity-section",children:[a.jsx("h3",{className:"profile-section-title",children:"Identity Silo"}),a.jsxs("p",{className:"privacy-banner",children:[" Privacy by Design",a.jsx("span",{className:"privacy-banner-subtext",children:"Your identity is optional unless you unlock verification or lending."})]}),a.jsx("div",{className:"field name-grid",children:[{key:"firstName",label:"First name",required:!0},{key:"middleInitial",label:"Middle initial (optional)",maxLength:1},{key:"lastName",label:"Last name",required:!0}].map(k=>a.jsxs("div",{className:"name-field",children:[a.jsx("span",{className:"name-label",children:k.label}),a.jsx("input",{id:k.key,type:"text",value:l[k.key],onChange:K(k.key),maxLength:k.maxLength,required:k.required})]},k.key))}),a.jsxs("div",{className:"field",children:[a.jsx("label",{htmlFor:"phone",children:"Phone number"}),a.jsx("input",{id:"phone",type:"tel",value:l.phone,onChange:te,onInput:te,inputMode:"tel",placeholder:"(555) 123-4567",autoComplete:"tel",autoCapitalize:"none",required:!0})]}),a.jsxs("div",{className:"field",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{id:"email",type:"email",value:l.email||"",onChange:K("email"),required:!0,autoComplete:"email"})]}),a.jsxs("div",{className:"field",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsxs("div",{className:"password-field",children:[a.jsx("input",{id:"password",type:A?"text":"password",value:l.password||"",onChange:K("password"),required:!0,autoComplete:"new-password"}),a.jsx("button",{type:"button",className:"password-toggle",onClick:()=>E(k=>!k),"aria-label":A?"Hide password":"Show password",children:A?"Hide":"Show"})]}),a.jsx("div",{className:`hint password-hint ${x&&w?"hint-error":""}`,children:Dg}),a.jsx("button",{type:"button",className:"change-password-link",onClick:()=>{h(!0),y("")},children:"Change password"})]})]}),a.jsxs("section",{className:"optional-section",children:[a.jsxs("div",{className:"optional-header",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"profile-section-title",children:"Optional Personal Details"}),a.jsx("p",{className:"profile-section-note",children:"Only needed if you unlock lending or identity verification features later."})]}),a.jsx("button",{type:"button",className:"optional-toggle",onClick:()=>re(k=>!k),"aria-expanded":!fe,children:fe?"Show details":"Hide details"})]}),a.jsx("div",{className:`optional-body ${fe?"is-collapsed":""}`,children:a.jsxs("div",{className:"address-grid",children:[a.jsxs("div",{className:"grid-field",children:[a.jsx("label",{htmlFor:"street",children:"Street"}),a.jsx("input",{id:"street",type:"text",value:l.street,onChange:K("street")})]}),a.jsxs("div",{className:"grid-field",children:[a.jsx("label",{htmlFor:"city",children:"City"}),a.jsx("input",{id:"city",type:"text",value:l.city,onChange:K("city")})]}),a.jsxs("div",{className:"grid-field",children:[a.jsx("label",{htmlFor:"state",children:"State"}),a.jsx("input",{id:"state",type:"text",value:l.state,onChange:K("state")})]}),a.jsxs("div",{className:"grid-field",children:[a.jsx("label",{htmlFor:"zip",children:"ZIP"}),a.jsx("input",{id:"zip",type:"text",value:l.zip,onChange:K("zip"),maxLength:10})]}),s.premiumAccess&&s.businessFeatures&&a.jsxs("div",{className:"grid-field",children:[a.jsx("label",{htmlFor:"businessName",children:"Business name (optional)"}),a.jsx("input",{id:"businessName",type:"text",value:l.businessName,onChange:K("businessName")})]})]})})]}),d&&a.jsx("div",{className:"password-modal-overlay",role:"dialog","aria-modal":"true",onClick:()=>{h(!1),g({current:"",next:"",confirm:""}),y("")},children:a.jsxs("div",{className:"password-modal",onClick:k=>{k.stopPropagation()},children:[a.jsx("h4",{children:"Change password"}),a.jsxs("div",{className:"password-field",children:[a.jsx("input",{type:z?"text":"password",placeholder:"Current password",value:m.current,onChange:xe("current")}),a.jsx("button",{type:"button",className:"password-toggle",onClick:()=>Z(k=>!k),"aria-label":z?"Hide password":"Show password",children:z?"Hide":"Show"})]}),a.jsxs("div",{className:"password-field",children:[a.jsx("input",{type:D?"text":"password",placeholder:"New password",value:m.next,onChange:xe("next")}),a.jsx("button",{type:"button",className:"password-toggle",onClick:()=>B(k=>!k),"aria-label":D?"Hide password":"Show password",children:D?"Hide":"Show"})]}),a.jsxs("div",{className:"password-field",children:[a.jsx("input",{type:R?"text":"password",placeholder:"Confirm new password",value:m.confirm,onChange:xe("confirm")}),a.jsx("button",{type:"button",className:"password-toggle",onClick:()=>W(k=>!k),"aria-label":R?"Hide password":"Show password",children:R?"Hide":"Show"})]}),v&&a.jsx("div",{className:"hint",children:v}),a.jsxs("div",{className:"password-change-actions",children:[a.jsx("button",{type:"button",className:"secondary-btn",onClick:U,children:"Save password"}),a.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>{h(!1),g({current:"",next:"",confirm:""}),y("")},children:"Cancel"})]})]})}),a.jsx("div",{className:"button-row",children:a.jsx("button",{className:"primary-btn purple-save-btn",type:"submit",children:"Save"})}),a.jsxs("section",{className:"data-control-section",children:[a.jsx("h3",{className:"profile-section-title",children:"Data Control"}),a.jsx("p",{className:"profile-section-note",children:"Manage your identity data without touching your financial vault."}),a.jsxs("div",{className:"data-control-buttons",children:[a.jsxs("button",{type:"button",className:"secondary-btn",onClick:()=>alert("Download initiated."),title:"Downloads a copy of just your identity inputs.",children:[a.jsx("span",{children:"Download my identity data"}),a.jsx("span",{className:"info-icon","aria-hidden":"true",children:"i"})]}),a.jsxs("button",{type:"button",className:"secondary-btn",onClick:()=>alert("Export requested."),title:"Exports the same identity details so you can archive or transfer them.",children:[a.jsx("span",{children:"Export identity info"}),a.jsx("span",{className:"info-icon","aria-hidden":"true",children:"i"})]}),a.jsxs("button",{type:"button",className:"secondary-btn",onClick:()=>alert("Identity data deleted."),title:"Removes local identity information permanently.",children:[a.jsx("span",{children:"Delete identity info"}),a.jsx("span",{className:"info-icon","aria-hidden":"true",children:"i"})]}),a.jsxs("button",{type:"button",className:"secondary-btn",onClick:()=>alert("Identity disconnected from vault."),title:"Disconnects this identity from your financial vault without deleting either one.",children:[a.jsx("span",{children:"Disconnect identity from financial vault"}),a.jsx("span",{className:"info-icon","aria-hidden":"true",children:"i"})]})]})]})]})]})},Og=n=>{if(n==null)return"";const s=String(n).replace(/,/g,"");if(s==="")return"";const[l,o]=s.split("."),d=l.replace(/\B(?=(\d{3})+(?!\d))/g,",");return o!==void 0?`${d}.${o}`:d},zA={fragile:{heroTitle:"Your safety cushion is still forming",heroSubtitle:"You're covering essentials, but there's no real protection yet. That's okay. This page helps you build steady calm, not perfection.",heroNote:"Growing, but not protective yet. We'll build this gently, together.",coachingTitle:"Small steps matter",coachingBody:"Even $25-$100 per period builds surprising stability if it keeps going. Tiny deposits count. You're not behind  you're building."},balanced:{heroTitle:"You're close to feeling truly safe",heroSubtitle:"Your cushion is starting to hold real weight. A little more consistency can turn 'almost steady' into 'I can breathe.'",heroNote:"Your buffer is taking shape - keep this steady.",coachingTitle:"Consistency is your best friend now",coachingBody:"You're proving stability. Staying gentle and predictable with savings helps life feel quieter and adds control when surprises show up."},thriving:{heroTitle:"You built real protection",heroSubtitle:"This cushion absorbs life. It turns stress into options. This is powerful - and worth guarding.",heroNote:"Your safety cushion is working for you.",coachingTitle:"Now your money gives you choices",coachingBody:"With this protection in place, you can shape life more intentionally. We'll help you protect it while you decide what comes next."}},RA=({onNavigate:n=()=>{}})=>{const{profile:s,totals:l,refreshProfile:o}=Ft(),{formatCurrency:d}=xt(),[h,m]=f.useState({savingsBalance:s.savingsBalance||"",savingsMonthly:s.savingsMonthly||""}),[g,v]=f.useState(""),[y,x]=f.useState(0),j=f.useMemo(()=>Number(s.savingsBalance)||0,[s.savingsBalance]),w=Math.max(Number(l.expenses)||0,0),T=f.useMemo(()=>w?Math.min(j/w*100,999):0,[j,w]),A=f.useMemo(()=>T>=100?"thriving":T>=30?"balanced":"fragile",[T]),E=zA[A],z=B=>{try{const R=Nt("moneyProfile","{}"),fe={...R?JSON.parse(R):{},...B};bs("moneyProfile",JSON.stringify(fe)),window.dispatchEvent(new Event("profile-updated")),o()}catch{}},Z=B=>R=>{const W=R.target.value.replace(/,/g,"");m(fe=>({...fe,[B]:W})),z({[B]:W})},D=()=>{z({savingsBalance:h.savingsBalance,savingsMonthly:h.savingsMonthly}),v("Saved"),x(B=>B+1)};return f.useEffect(()=>{if(!g)return;const B=window.setTimeout(()=>v(""),1400);return()=>window.clearTimeout(B)},[g]),a.jsxs("div",{className:"savings-page",children:[a.jsx(St,{className:"top-controls",activePage:"savings",onNavigate:n,logoutHref:"/Local/Luna Login"}),a.jsxs("section",{className:"savings-hero-block",children:[a.jsxs("div",{className:"savings-copy",children:[a.jsx("p",{className:"savings-eyebrow",children:"Your safety cushion lives here"}),a.jsx("h1",{children:E.heroTitle}),a.jsx("p",{className:"savings-subtitle",children:E.heroSubtitle})]}),a.jsxs("div",{className:"savings-status-card",children:[a.jsx("div",{className:"status-label",children:"Current cushion"}),a.jsx("div",{className:"status-value",children:d(j)}),a.jsx("div",{className:"status-percent",children:w?`${Math.round(T)}% of one month covered`:"0% of one month covered"}),a.jsx("div",{className:"status-progress",children:a.jsx("div",{className:"status-progress-track",children:a.jsx("div",{className:"status-progress-fill",style:{width:`${w?Math.min(T,100):0}%`}})})}),a.jsx("p",{className:"status-note",children:E.heroNote})]})]}),a.jsxs("section",{className:"savings-update",children:[a.jsxs("div",{className:"update-header",children:[a.jsx("h2",{children:"Update your savings"}),a.jsx("p",{className:"update-subtext",children:"Update this anytime  Luna adapts without judgment."})]}),a.jsxs("div",{className:"savings-grid",children:[a.jsxs("label",{children:["Current savings balance",a.jsx("input",{type:"text",inputMode:"decimal",value:Og(h.savingsBalance),onChange:Z("savingsBalance"),placeholder:"e.g. 2,500"})]}),a.jsxs("label",{children:["Monthly savings contribution",a.jsx("input",{type:"text",inputMode:"decimal",value:Og(h.savingsMonthly),onChange:Z("savingsMonthly"),placeholder:"e.g. 200"})]})]})]}),a.jsx("section",{className:"savings-coaching",children:a.jsxs("div",{className:"coaching-content",children:[a.jsx("h3",{children:E.coachingTitle}),a.jsx("p",{children:E.coachingBody})]})}),a.jsxs("div",{className:"savings-actions",children:[g?a.jsx("span",{className:"savings-save-toast",children:g},y):null,a.jsx("button",{type:"button",className:"primary-btn purple-save-btn",onClick:D,children:"Save"})]})]})},$A="assetProfile",zg=["Cash & savings","Investments","401(k)","IRA","Home equity","Vehicle","Business","Other"],BA=n=>{if(n==null)return"";const s=String(n).replace(/,/g,"");if(s==="")return"";const[l,o]=s.split("."),d=l.replace(/\B(?=(\d{3})+(?!\d))/g,",");return o!==void 0?`${d}.${o}`:d},UA=({onNavigate:n=()=>{}})=>{const{profile:s}=Ft(),{profile:l,refreshProfile:o}=yb(),{formatCurrency:d}=xt(),[h,m]=f.useState({type:"",name:"",value:""}),g=l.assets||[],[v,y]=f.useState(""),[x,j]=f.useState(0),[w,T]=f.useState(()=>cn()),[A,E]=f.useState(null),z=f.useMemo(()=>Cb({assetProfile:l,profile:s,creditCards:w,manualDebts:A,expenses:s.expenses||[]}),[l,s,w,A]),{totalAssets:Z,totalDebt:D,netWorth:B,assetRows:R}=z;ci.useEffect(()=>{const K=()=>{E(vs())};return K(),window.addEventListener("debt-cash-updated",K),window.addEventListener("storage",K),()=>{window.removeEventListener("debt-cash-updated",K),window.removeEventListener("storage",K)}},[]),f.useEffect(()=>{const K=()=>T(cn());return K(),window.addEventListener(xn,K),window.addEventListener("storage",K),()=>{window.removeEventListener(xn,K),window.removeEventListener("storage",K)}},[]);const W=K=>{try{localStorage.setItem($A,JSON.stringify({assets:K})),window.dispatchEvent(new Event("asset-updated")),o()}catch{}},fe=()=>{const K=Number(String(h.value).replace(/,/g,""));if(!K||K<=0){y("Enter a value"),j(U=>U+1);return}const te=h.type||zg[0],xe={id:Date.now(),type:te,name:h.name||te,value:K};W([...g,xe]),m({type:"",name:"",value:""}),y("Asset added"),j(U=>U+1)},re=K=>{const te=g.filter(xe=>xe.id!==K);W(te)};return f.useEffect(()=>{if(!v)return;const K=window.setTimeout(()=>y(""),1400);return()=>window.clearTimeout(K)},[v]),a.jsxs("div",{className:"assets-page",children:[a.jsx(St,{className:"top-controls",activePage:"assets",onNavigate:n,logoutHref:"/Local/Luna Login"}),a.jsxs("header",{className:"assets-hero",children:[a.jsx("div",{className:"assets-eyebrow",children:"Assets & Net Worth"}),a.jsx("h1",{children:"Your full financial snapshot"}),a.jsx("p",{children:"See what you own, what you owe, and how everything fits together."})]}),a.jsxs("section",{className:"assets-summary",children:[a.jsxs("div",{children:[a.jsx("span",{children:"Total assets"}),a.jsx("strong",{children:d(Z)})]}),a.jsxs("div",{children:[a.jsx("span",{children:"Total debts"}),a.jsx("strong",{children:d(D)})]}),a.jsxs("div",{children:[a.jsx("span",{children:"Net worth"}),a.jsx("strong",{className:B>=0?"pos":"neg",children:d(B)})]})]}),a.jsxs("section",{className:"assets-list",children:[a.jsx("h2",{children:"Assets"}),R.length===0?a.jsx("div",{className:"assets-empty",children:"No assets added."}):R.map(K=>a.jsxs("div",{className:"assets-row",children:[a.jsxs("div",{className:"assets-row-labels",children:[a.jsx("strong",{children:K.name}),a.jsx("span",{className:"assets-note",children:K.type})]}),a.jsxs("div",{className:"assets-row-right",children:[a.jsx("div",{className:"assets-value",children:d(K.value)}),K.removable&&a.jsx("button",{className:"assets-remove",type:"button",onClick:()=>re(K.id),children:"Remove"})]})]},K.id))]}),a.jsxs("section",{className:"assets-form",children:[a.jsx("h2",{children:"Add an asset"}),a.jsxs("div",{className:"asset-stack",children:[a.jsxs("div",{className:"asset-field",children:[a.jsx("label",{children:"Asset type"}),a.jsxs("select",{value:h.type,onChange:K=>m(te=>({...te,type:K.target.value})),required:!0,children:[a.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Select asset type"}),zg.map(K=>a.jsx("option",{value:K,children:K},K))]})]}),a.jsxs("div",{className:"asset-field",children:[a.jsx("label",{children:"Asset name (optional)"}),a.jsx("input",{type:"text",className:"asset-input-top",value:h.name,onChange:K=>m(te=>({...te,name:K.target.value})),placeholder:"e.g. Home equity"})]}),a.jsxs("div",{className:"asset-field",children:[a.jsx("label",{children:"Current value"}),a.jsx("input",{type:"text",inputMode:"decimal",className:"asset-input-top",value:BA(h.value),onChange:K=>m(te=>({...te,value:K.target.value.replace(/,/g,"")})),placeholder:"e.g. 15000"})]})]}),a.jsxs("div",{className:"assets-actions",children:[v?a.jsx("span",{className:"assets-save-toast",children:v},x):null,a.jsx("button",{className:"primary-btn purple-save-btn",type:"button",onClick:fe,children:"Add asset"})]})]})]})},PA={weekly:"weekly",biweekly:"biweekly",monthly:"monthly",threeMonths:"quarterly",quarterly:"quarterly","four-week":"four-week","custom-day":"custom-day",annual:"annual",paycheck:"paycheck"},IA=1e3*60*60*24,Rg=n=>{if(!n)return"";const s=new Date(n);return Number.isNaN(s.getTime())?"":s.toISOString().split("T")[0]},HA=n=>PA[n]||"monthly",YA=({period:n,startDay:s,anchorDate:l})=>{if(!n)return null;const o=HA(n),d={budgetPeriod:o};return o==="custom-day"&&s&&(d.budgetPeriodStartDay=Number(s)||1),l&&(d.budgetPeriodAnchor=l),Gn(d)},ZA=(n,s)=>{if(!n)return"";const l=s?new Date(s):null;l&&l.setDate(l.getDate()-1);const o=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),d=o.format(n),h=l?o.format(l):null;return h?`${d}  ${h}`:d},VA=({period:n="monthly",label:s,startDay:l,anchorDate:o,onAnchorDateChange:d,className:h=""})=>{const m=f.useMemo(()=>YA({period:n,startDay:l,anchorDate:o}),[n,l,o]);if(!m)return null;const g=s||n,v=new Date;v.setHours(0,0,0,0);const x=m.start<=v&&v<m.end?"This period is active; log income on payday to confirm.":"Not within the current period yet. Log income to start it.",j=Math.max(1,Math.round((m.end-m.start)/IA)),w=`${j} day${j===1?"":"s"}`,T=Rg(o)||Rg(m.start),A=o?"Anchor date locks in this cycle.":d?"Pick your next paycheck to anchor a new cycle.":"Log your next paycheck to confirm this period.",E=`pay-period-anchor-${n}-${l??"auto"}-${T||"start"}`,z=d?{onChange:Z=>d(Z.target.value)}:{readOnly:!0};return a.jsxs("div",{className:`pay-period-calendar ${h}`,children:[a.jsxs("div",{className:"pay-period-calendar__info",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"pay-period-calendar__title",children:[g," pay period"]}),a.jsx("div",{className:"pay-period-calendar__range",children:ZA(m.start,m.end)})]}),a.jsxs("div",{className:"pay-period-calendar__duration-info",children:[a.jsx("span",{className:"pay-period-calendar__duration-label",children:"Duration"}),a.jsx("strong",{className:"pay-period-calendar__duration-value",children:w})]})]}),a.jsx("div",{className:"pay-period-calendar__picker-row",children:a.jsxs("div",{className:"pay-period-calendar__picker",children:[a.jsx("label",{className:"pay-period-calendar__picker-label",htmlFor:E,children:"Anchor date"}),a.jsx("input",{type:"date",id:E,className:"pay-period-calendar__picker-input",value:T,...z}),a.jsx("span",{className:"pay-period-calendar__picker-note",children:A})]})}),a.jsx("div",{className:"pay-period-calendar__active-note",children:x})]})},jh="dashboardHiddenCards",Id="dashboard-hidden-cards-updated",qA={score:"Financial Score",goals:"Goals",moneyCoach:"Money Coach",monthlySnapshot:"Monthly Snapshot",spending:"Spending Breakdown",creditSnapshot:"Budget Plan",savings:"Savings",netWorth:"Net Worth",businessToolkit:"Business Toolkit"},GA=typeof window<"u"&&typeof window.localStorage<"u",zb=()=>GA?window.localStorage:null,KA=n=>{try{const s=JSON.parse(n);return Array.isArray(s)?s:[]}catch{return[]}},md=()=>{const n=zb();if(!n)return[];const s=n.getItem(jh);return s?KA(s):[]},FA=n=>{const s=zb();if(s)try{s.setItem(jh,JSON.stringify(n))}catch{}},XA=()=>{if(!(typeof window>"u"))try{const n=new CustomEvent(Id);window.dispatchEvent(n)}catch{}};const QA=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JA=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,l,o)=>o?o.toUpperCase():l.toLowerCase()),$g=n=>{const s=JA(n);return s.charAt(0).toUpperCase()+s.slice(1)},Rb=(...n)=>n.filter((s,l,o)=>!!s&&s.trim()!==""&&o.indexOf(s)===l).join(" ").trim(),WA=n=>{for(const s in n)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};var e_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const t_=f.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:d="",children:h,iconNode:m,...g},v)=>f.createElement("svg",{ref:v,...e_,width:s,height:s,stroke:n,strokeWidth:o?Number(l)*24/Number(s):l,className:Rb("lucide",d),...!h&&!WA(g)&&{"aria-hidden":"true"},...g},[...m.map(([y,x])=>f.createElement(y,x)),...Array.isArray(h)?h:[h]]));const kr=(n,s)=>{const l=f.forwardRef(({className:o,...d},h)=>f.createElement(t_,{ref:h,iconNode:s,className:Rb(`lucide-${QA($g(n))}`,`lucide-${n}`,o),...d}));return l.displayName=$g(n),l};const n_=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],a_=kr("cloud-off",n_);const s_=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],i_=kr("cloud-rain",s_);const r_=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],l_=kr("database",r_);const o_=[["path",{d:"M9 17H7A5 5 0 0 1 7 7",key:"10o201"}],["path",{d:"M15 7h2a5 5 0 0 1 4 8",key:"1d3206"}],["line",{x1:"8",x2:"12",y1:"12",y2:"12",key:"rvw6j4"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],c_=kr("link-2-off",o_);const u_=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Hd=kr("shield-check",u_),d_=async()=>{if(!(typeof window>"u")&&!window.indexedDB){console.warn("IndexedDB unavailable, local vault will use memory-only store.");return}},h_=async()=>{if(!(typeof window>"u"))try{await fetch(Fa("/api/user/purge-vault"),{method:"POST"})}catch(n){console.warn("Cloud vault purge request failed",n)}},$b="luna_sync_mode",Bb=f.createContext({syncMode:"local",toggleSyncMode:()=>{}}),m_=()=>typeof window>"u"?"local":localStorage.getItem($b)||"local",f_=({children:n})=>{const[s,l]=f.useState(m_);f.useEffect(()=>{d_()},[]);const o=async()=>{const d=s==="local"?"cloud":"local";d==="local"&&(await h_(),console.info("Cloud Vault purged. Data now exists only on this device.")),localStorage.setItem($b,d),l(d)};return a.jsx(Bb.Provider,{value:{syncMode:s,toggleSyncMode:o},children:n})},p_=()=>{const n=f.useContext(Bb);if(!n)throw new Error("useSovereignty must be used within a SovereigntyProvider");return n},y_=()=>{const{syncMode:n,toggleSyncMode:s}=p_();return a.jsxs("div",{className:"sync-toggle",children:[a.jsxs("div",{className:"sync-toggle__details",children:[n==="local"?a.jsx(a_,{className:"sync-toggle__icon sync-toggle__icon--local"}):a.jsx(i_,{className:"sync-toggle__icon sync-toggle__icon--cloud"}),a.jsxs("div",{children:[a.jsxs("div",{className:"sync-toggle__title",children:["Storage Mode: ",n==="local"?"Local-Only":"Cloud-Synced"]}),a.jsx("p",{className:"sync-toggle__description",children:n==="local"?"Your data stays entirely in this browser. No cloud backups are created.":"Encrypted data is mirrored to your private Vault silo for multi-device access."})]})]}),a.jsx("button",{type:"button",className:`sync-toggle__button ${n==="local"?"sync-toggle__button--local":""}`,onClick:s,children:n==="local"?"Enable Sync":"Go Local"})]})},Ub="userIdentity",g_="healthConsoleEnabled",v_="health-console-toggle",fd="hideLunaChat",pd="luna-chat-visibility",Bg=()=>{if(typeof window>"u")return{};try{const n=localStorage.getItem(Ub);return n?JSON.parse(n):{}}catch{return{}}},b_=["Account","Security","Financial Setup","Experience","Notifications","Advanced"],x_=({onNavigate:n=()=>{},theme:s="light",setTheme:l=()=>{},healthConsoleEnabled:o=!1,setHealthConsoleEnabled:d=()=>{}})=>{const{preferences:h,setCurrency:m,setRegion:g,setBusinessFeatures:v,setBudgetPeriod:y,setBudgetPeriodStartDay:x,setBudgetPeriodAnchor:j,setPrivacyShieldEnabled:w,setHardwareKeyEnabled:T,setGuidanceLevel:A,setNotificationLevel:E,setTonePreference:z}=xt(),[Z,D]=f.useState(()=>md()),[B,R]=f.useState(!1),[W,fe]=f.useState(!1),[re,K]=f.useState(""),[te,xe]=f.useState(!1),[U,se]=f.useState(()=>Bg()),k=(U?.subscriptionStatus||"FREE").toUpperCase(),ne=()=>n("payment-options"),[L,C]=f.useState(!1),[M,G]=f.useState({period:h.budgetPeriod||"monthly",startDay:Number(h.budgetPeriodStartDay||1),anchor:h.budgetPeriodAnchor||""});f.useEffect(()=>{if(typeof window>"u")return;const de=N=>{N.key===jh&&D(md())},ze=()=>{D(md())};return window.addEventListener("storage",de),window.addEventListener(Id,ze),()=>{window.removeEventListener("storage",de),window.removeEventListener(Id,ze)}},[]),f.useEffect(()=>{if(typeof window>"u")return;const de=()=>se(Bg()),ze=N=>{(!N.key||N.key===Ub)&&de()};return window.addEventListener("storage",ze),window.addEventListener("identity-updated",de),()=>{window.removeEventListener("storage",ze),window.removeEventListener("identity-updated",de)}},[]),f.useEffect(()=>{G({period:h.budgetPeriod||"monthly",startDay:Number(h.budgetPeriodStartDay||1),anchor:h.budgetPeriodAnchor||""})},[h.budgetPeriod,h.budgetPeriodStartDay,h.budgetPeriodAnchor]);const[F,he]=f.useState("Account"),[S,P]=f.useState(!1);f.useEffect(()=>{typeof window>"u"||window.scrollTo({top:0,behavior:"smooth"})},[F]);const pe=()=>l(de=>de==="dark"?"light":"dark"),[ue,we]=f.useState(()=>typeof window>"u"?!0:localStorage.getItem(fd)!=="false"),ve=()=>{const de=!o;d(de);try{localStorage.setItem(g_,de?"true":"false"),window.dispatchEvent(new Event(v_))}catch{}},ke=()=>{const de=!ue;we(de);try{localStorage.setItem(fd,de?"true":"false"),window.dispatchEvent(new CustomEvent(pd,{detail:{hidden:de}}))}catch{}},Ze=()=>w(!h.privacyShieldEnabled),me=()=>T(!h.hardwareKeyEnabled);f.useEffect(()=>{if(typeof window>"u")return;const de=N=>{N.key===fd&&we(N.newValue==="true")},ze=N=>{const q=N?.detail?.hidden;typeof q=="boolean"&&we(q)};return window.addEventListener("storage",de),window.addEventListener(pd,ze),()=>{window.removeEventListener("storage",de),window.removeEventListener(pd,ze)}},[]);const Q=[{value:"monthly",label:"Calendar month"},{value:"weekly",label:"Weekly (7-day)"},{value:"biweekly",label:"Biweekly (14-day)"},{value:"four-week",label:"4-week cycle"},{value:"paycheck",label:"Paycheck-based"},{value:"quarterly",label:"Quarterly"},{value:"custom-day",label:"Custom monthly start day"}],be=Array.from({length:28},(de,ze)=>ze+1),J=de=>Q.find(ze=>ze.value===de)?.label||"Budget period",ye=()=>R(!0),Ne=()=>R(!1),Se=()=>fe(!0),Pe=()=>fe(!1),Ie=M.period!==(h.budgetPeriod||"monthly")||M.startDay!==Number(h.budgetPeriodStartDay||1)||M.anchor!==(h.budgetPeriodAnchor||""),$e=()=>{y(M.period),x(M.startDay),j(M.anchor||""),C(!0)};f.useEffect(()=>{if(!L)return;const de=window.setTimeout(()=>C(!1),1400);return()=>window.clearTimeout(de)},[L]);const Be=()=>{if(!(typeof window>"u")){try{localStorage.clear(),sessionStorage.clear()}catch{}D([]),se({}),window.dispatchEvent(new Event("auth-updated")),window.dispatchEvent(new Event("identity-updated")),window.dispatchEvent(new Event("profile-updated")),window.dispatchEvent(new Event("debt-cash-updated")),fe(!1),n("login")}},tt=de=>{D(ze=>{const N=ze.filter(q=>q!==de);return FA(N),XA(),N})},nt=async()=>{xe(!0),K("");try{if(!(await fetch(Fa("/api/parse-upload"),{method:"DELETE"})).ok)throw new Error("Request failed");K("Uploaded statements removed.")}catch{K("Unable to remove statements right now.")}finally{xe(!1)}},le=()=>a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:"settings-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h2",{children:"Account & Subscription"}),a.jsx("p",{className:"settings-section-description",children:"Keep your tier, billing, and profile in sync."})]}),a.jsxs("div",{className:"settings-section-cards section-grid",children:[a.jsxs("div",{className:"settings-card status-card",children:[a.jsxs("div",{className:"status-row",children:[a.jsxs("div",{children:[a.jsx("p",{className:"status-label",children:"Status"}),a.jsx("p",{className:"status-value",children:k==="PRO"?"Luna Pro":"Luna Free"})]}),a.jsx("span",{className:`status-chip ${k==="PRO"?"status-chip--pro":""}`,children:k==="PRO"?"Fortress verified":"Upgrade available"})]}),a.jsx("p",{className:"section-note",children:"Your tier updates automatically as your leftover improves."}),a.jsxs("div",{className:"button-row",children:[a.jsx("button",{type:"button",className:"primary-btn",onClick:ne,children:k==="PRO"?"View perks":"Upgrade to Luna Pro"}),a.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>n("payment-options"),children:"Manage billing"})]})]}),a.jsxs("div",{className:"settings-card account-actions-card",children:[a.jsx("h3",{children:"Account basics"}),a.jsxs("div",{className:"button-grid",children:[a.jsx("button",{type:"button",className:"link-btn",onClick:()=>n("user-profile"),children:"View profile"}),a.jsx("button",{type:"button",className:"link-btn",onClick:()=>n("security"),children:"Security & privacy"})]}),a.jsx("p",{className:"section-helper",children:"Privacy by design keeps your billing identity separate from your financial data."})]})]})]}),a.jsxs("section",{className:"settings-section",children:[a.jsxs("div",{className:"settings-header-section",children:[a.jsx("h2",{children:"Danger Zone"}),a.jsx("p",{className:"settings-section-description",children:"Use with care. These actions cannot be undone."})]}),a.jsx("div",{className:"settings-section-cards section-grid",children:a.jsxs("div",{className:"settings-card danger-card",children:[a.jsx("h3",{children:"Delete account"}),a.jsx("p",{children:"Permanently remove your account and all saved data from this device."}),a.jsx("div",{className:"button-row",children:a.jsx("button",{type:"button",className:"secondary-btn danger-btn",onClick:Se,children:"Delete account"})})]})})]})]}),Te=()=>a.jsxs("section",{className:"settings-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h2",{children:"Security"}),a.jsx("p",{className:"settings-section-description",children:"Choose the protections that stay active on your account."})]}),a.jsx("div",{className:"settings-section-cards section-grid",children:a.jsxs("div",{className:"settings-card security-card",children:[a.jsxs("div",{className:"toggle-row",children:[a.jsx("span",{children:"Privacy Shield (auto blur when Luna loses focus)"}),a.jsx("button",{type:"button",className:`switch ${h.privacyShieldEnabled?"on":""}`,onClick:Ze,"aria-label":"Toggle Privacy Shield",children:a.jsx("span",{className:"knob"})})]}),a.jsxs("div",{className:"toggle-row",children:[a.jsx("span",{children:"Hardware key (USB/FIDO2) opt-in"}),a.jsx("button",{type:"button",className:`switch ${h.hardwareKeyEnabled?"on":""}`,onClick:me,"aria-label":"Toggle hardware key",children:a.jsx("span",{className:"knob"})})]}),a.jsx("div",{className:"section-helper",children:"Hardware keys will be registered from the Security screen once the WebAuthn endpoints are ready."})]})})]}),Ee=()=>a.jsxs("section",{className:"settings-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h2",{children:"Financial Setup"}),a.jsx("p",{className:"settings-section-description",children:"Everything you need to keep your money profile current."})]}),a.jsxs("div",{className:"settings-section-cards section-grid",children:[a.jsxs("div",{className:"settings-card financial-master-card",role:"button",tabIndex:0,onClick:()=>P(de=>!de),onKeyDown:de=>{(de.key==="Enter"||de.key===" ")&&P(ze=>!ze)},"aria-expanded":S,children:[a.jsxs("div",{children:[a.jsx("p",{className:"settings-section-description accent-text",children:"Status"}),a.jsx("h3",{className:"settings-section-title",children:"Connected"}),a.jsx("p",{className:"settings-section-description",children:"Bank verification up-to-date. Income and expense data sync is healthy."})]}),a.jsx("div",{className:"button-row",children:a.jsx("button",{type:"button",className:"secondary-btn",onClick:de=>{de.stopPropagation(),P(ze=>!ze)},children:S?"Hide details":"View details"})})]}),a.jsx("div",{className:"settings-financial-details",style:{display:S?"grid":"none"},children:a.jsxs("div",{className:"settings-card financial-card",children:[a.jsxs("div",{children:[a.jsx("h3",{children:"Loan verification"}),a.jsx("p",{children:"Share identity details when you explore debt consolidation or loan options."}),a.jsx("div",{className:"button-row",children:a.jsx("button",{className:"secondary-btn",onClick:()=>n("user-profile"),children:"Open Verification Form"})})]}),a.jsxs("div",{children:[a.jsx("h3",{children:"Income & Expenses"}),a.jsx("p",{children:"Update income and expenses anytime. For loan recommendations, complete Verification first."}),a.jsx("div",{className:"button-row",children:a.jsx("button",{className:"secondary-btn",onClick:()=>n("onboarding"),children:"Open Income & Expenses"})})]}),a.jsxs("div",{children:[a.jsx("h3",{children:"Bank statements"}),a.jsx("p",{children:"Review or remove your uploaded statements."}),a.jsx("div",{className:"button-row",children:a.jsx("button",{type:"button",className:"secondary-btn",onClick:nt,disabled:te,children:te?"Removing...":"Remove statements"})}),re&&a.jsx("div",{className:"section-helper",children:re})]})]})})]})]}),mt=()=>a.jsxs("section",{className:"settings-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h2",{children:"Experience"}),a.jsx("p",{className:"settings-section-description",children:"Make Luna feel like your workspace."})]}),a.jsxs("div",{className:"settings-section-cards section-grid experience-grid",children:[a.jsxs("div",{className:"settings-card",children:[a.jsx("h3",{children:"Appearance & controls"}),a.jsxs("div",{className:"toggle-row",children:[a.jsx("span",{children:"Dark mode"}),a.jsx("button",{type:"button",className:`switch ${s==="dark"?"on":""}`,onClick:pe,"aria-label":"Toggle dark mode",children:a.jsx("span",{className:"knob"})})]}),a.jsxs("div",{className:"toggle-row",children:[a.jsx("span",{children:ue?"Reveal Luna AI chat":"Hide Luna AI chat"}),a.jsx("button",{type:"button",className:`switch ${ue?"":"on"}`,onClick:ke,"aria-label":"Toggle Luna AI chat",children:a.jsx("span",{className:"knob"})})]}),h.premiumAccess&&a.jsxs("div",{className:"toggle-row business-toggle-row",children:[a.jsx("span",{children:"Business toolkit"}),a.jsx("button",{type:"button",className:`switch ${h.businessFeatures?"on":""}`,onClick:()=>v(!h.businessFeatures),"aria-label":"Toggle business toolkit",children:a.jsx("span",{className:"knob"})})]}),a.jsx(y_,{}),a.jsx("div",{className:"hidden-card-link-row",children:a.jsx("button",{type:"button",className:"hidden-card-link",onClick:ye,children:"Manage hidden dashboard cards"})})]}),a.jsxs("div",{className:"settings-card",children:[a.jsx("h3",{children:"Budget period"}),a.jsx("p",{children:"Control how your live performance resets."}),a.jsx(VA,{period:M.period,label:J(M.period),startDay:M.startDay,anchorDate:M.anchor,onAnchorDateChange:de=>G(ze=>({...ze,anchor:de})),className:"settings-pay-period-calendar"}),a.jsxs("div",{className:"settings-pay-period-helper",children:[a.jsx("span",{"aria-hidden":"true",className:"info-icon",children:"i"}),a.jsx("span",{children:"This controls when live totals reset. Choose the rhythm that matches your income, then log the next paycheck to lock the period in place."})]}),a.jsxs("div",{className:"settings-select-row",children:[a.jsxs("label",{children:[a.jsx("strong",{children:"Budget period"}),a.jsx("select",{value:M.period,onChange:de=>G(ze=>({...ze,period:de.target.value})),children:Q.map(de=>a.jsx("option",{value:de.value,children:de.label},de.value))})]}),M.period==="custom-day"&&a.jsxs("label",{children:[a.jsx("strong",{children:"Cycle starts on"}),a.jsx("select",{value:M.startDay,onChange:de=>G(ze=>({...ze,startDay:Number(de.target.value)})),children:be.map(de=>a.jsxs("option",{value:de,children:["Day ",de]},de))})]})]}),a.jsx("div",{className:"settings-helper",children:"This only affects your live performance cycle. Baseline income, expenses, and debts stay the same."}),a.jsxs("div",{className:"button-row budget-period-actions",children:[a.jsx("button",{type:"button",className:"primary-btn purple-save-btn",onClick:$e,disabled:!Ie,children:"Save budget period"}),a.jsx("span",{className:"settings-save-slot",children:L&&a.jsx("span",{className:"settings-save-fade",children:"Saved"})})]}),M.period==="paycheck"&&a.jsx("div",{className:"settings-helper",children:"Paycheck mode resets when you log a new income entry. If no income is logged, we use the last baseline for estimates."})]}),a.jsxs("div",{className:"settings-card",children:[a.jsx("h3",{children:"Region & Currency"}),a.jsx("p",{children:"Choose how your money is displayed."}),a.jsx("div",{className:"settings-region-row",children:a.jsxs("label",{children:[a.jsx("strong",{children:"Region"}),a.jsx("select",{value:h.region||"US",onChange:de=>g(de.target.value),children:wv.map(de=>a.jsx("option",{value:de.value,children:de.label},de.value))})]})}),a.jsx("div",{className:"settings-region-row",children:a.jsxs("label",{children:[a.jsx("strong",{children:"Currency"}),a.jsx("select",{value:h.currency,onChange:de=>m(de.target.value),children:N0.map(de=>a.jsx("option",{value:de.value,children:de.label},de.value))})]})}),a.jsx("div",{className:"settings-helper",children:"Choosing a region sets a default currency, but you can still change it anytime."}),a.jsx("div",{className:"hidden-card-link-row",children:a.jsx("button",{type:"button",className:"hidden-card-link",onClick:()=>n("budget-period-guide"),children:"How budget periods work"})})]})]})]}),gt=()=>a.jsxs("section",{className:"settings-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h2",{children:"Guidance & Notifications"}),a.jsx("p",{className:"settings-section-description",children:"Choose how often Luna speaks, how it sounds, and when you want undisturbed focus."})]}),a.jsx("div",{className:"settings-section-cards section-grid",children:a.jsxs("div",{className:"settings-card guidance-card",children:[a.jsx("h3",{children:"Respectful insights"}),a.jsxs("div",{className:"settings-select-row",children:[a.jsxs("label",{children:[a.jsx("strong",{children:"How much guidance would you like?"}),a.jsxs("select",{value:h.guidanceLevel||"normal",onChange:de=>A(de.target.value),children:[a.jsx("option",{value:"normal",children:"Normal (recommended)"}),a.jsx("option",{value:"minimal",children:"Minimal (only important updates)"}),a.jsx("option",{value:"off",children:"Off (numbers only)"})]})]}),a.jsx("p",{className:"section-helper",children:"Pick the cadence that fits your attention. Minimal keeps only the most vital nudges, while Off keeps Luna quiet."})]}),a.jsxs("div",{className:"settings-select-row",children:[a.jsxs("label",{children:[a.jsx("strong",{children:"When should we notify you?"}),a.jsxs("select",{value:h.notificationLevel||"normal",onChange:de=>E(de.target.value),children:[a.jsx("option",{value:"normal",children:"Normal"}),a.jsx("option",{value:"important_only",children:"Important only"}),a.jsx("option",{value:"off",children:"Never"})]})]}),a.jsx("p",{className:"section-helper",children:"Notifications only arrive when they really matter. Important only keeps alerts calm and rare."})]}),a.jsxs("div",{className:"settings-select-row",children:[a.jsxs("label",{children:[a.jsx("strong",{children:"How should guidance sound?"}),a.jsxs("select",{value:h.tonePreference||"supportive",onChange:de=>z(de.target.value),children:[a.jsx("option",{value:"supportive",children:"Supportive"}),a.jsx("option",{value:"neutral",children:"Neutral"})]})]}),a.jsx("p",{className:"section-helper",children:'Tone follows your preference?"supportive for warmth, neutral for a straight-ahead update.'})]})]})})]}),ft=()=>a.jsxs("section",{className:"settings-section",children:[a.jsxs("div",{className:"section-header",children:[a.jsx("h2",{children:"Advanced"}),a.jsx("p",{className:"settings-section-description",children:"Tools for power users and troubleshooting."})]}),a.jsx("div",{className:"settings-section-cards section-grid",children:a.jsxs("div",{className:"settings-card",children:[a.jsx("h3",{children:"Developer tools"}),a.jsx("p",{children:"Enable runtime diagnostics while you use the app."}),a.jsxs("div",{className:"toggle-row",children:[a.jsx("span",{children:"Health Console"}),a.jsx("button",{type:"button",className:`switch ${o?"on":""}`,onClick:ve,"aria-label":"Toggle health console",children:a.jsx("span",{className:"knob"})})]}),a.jsx("div",{className:"button-row",children:a.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>n("features-guide"),children:"Explore features"})})]})})]});return a.jsx("div",{className:`settings-page ${s==="dark"?"is-dark":""}`,children:a.jsxs("div",{className:"settings-shell",children:[a.jsxs("aside",{className:"settings-sidebar",children:[a.jsx("div",{className:"sidebar-heading",children:"Settings"}),a.jsx("div",{className:"sidebar-nav",children:b_.map(de=>a.jsx("button",{type:"button",className:`settings-sidebar-button ${F===(de==="Financial Setup"?"Financial":de)?"settings-sidebar-button--active":""}`,onClick:()=>{he(de==="Financial Setup"?"Financial":de)},children:de},de))})]}),a.jsxs("div",{className:"settings-main",children:[a.jsxs("header",{className:"settings-header",children:[a.jsx(St,{className:"top-controls",activePage:"settings",onNavigate:n,logoutHref:"/Local/BudgetIQ Login"}),a.jsxs("div",{className:"header-text",children:[a.jsx("div",{className:"title",children:"Settings"}),a.jsx("div",{className:"subtitle",children:"Your account, preferences, and verification details in one place."}),a.jsx("div",{className:"subtitle tier-note",children:"Your tier updates automatically as your leftover improves."})]})]}),a.jsxs("div",{className:"settings-container",children:[F==="Account"&&le(),F==="Security"&&Te(),F==="Financial"&&Ee(),F==="Experience"&&mt(),F==="Notifications"&&gt(),F==="Advanced"&&ft(),a.jsx("div",{className:"settings-footer-note helper-note",children:"Luna is modeling insights from your inputsthis page reflects system-generated snapshots, not personalized financial advice. Your billing identity (email/Stripe) stays in a separate silo from the encrypted vault and is linked only by the blind UUID. Every export, ledger sync, and purge is logged so your compliance trail stays verifiable."})]}),B&&a.jsx("div",{className:"hidden-cards-overlay",onClick:Ne,children:a.jsxs("div",{className:"hidden-cards-modal",onClick:de=>de.stopPropagation(),children:[a.jsxs("div",{className:"hidden-cards-header",children:[a.jsx("h4",{children:"Manage removed cards"}),a.jsx("p",{children:"Bring back any cards you hid from the dashboard."})]}),a.jsx("div",{className:"hidden-cards-list",children:Z.length===0?a.jsx("div",{className:"hidden-cards-empty settings-helper",children:"No cards are hidden right now."}):Z.map(de=>a.jsxs("div",{className:"hidden-card-row",children:[a.jsx("span",{children:qA[de]||de}),a.jsx("button",{type:"button",className:"secondary-btn hidden-card-restore",onClick:()=>tt(de),children:"Restore"})]},de))}),a.jsx("div",{className:"button-row",children:a.jsx("button",{type:"button",className:"secondary-btn full-width",onClick:Ne,children:"Close"})})]})}),W&&a.jsx("div",{className:"hidden-cards-overlay",onClick:Pe,children:a.jsxs("div",{className:"hidden-cards-modal delete-account-modal",onClick:de=>de.stopPropagation(),children:[a.jsxs("div",{className:"hidden-cards-header",children:[a.jsx("h4",{children:"Delete account"}),a.jsx("p",{children:"This will permanently remove your account and all saved data from this device."})]}),a.jsxs("div",{className:"button-row delete-actions",children:[a.jsx("button",{type:"button",className:"secondary-btn",onClick:Pe,children:"Cancel"}),a.jsx("button",{type:"button",className:"secondary-btn danger-btn",onClick:Be,children:"Yes, delete"})]})]})})]})]})})},Pb=({premiumAccess:n,tierKey:s})=>!!(n&&s==="traditional"),Ib=({planTypeKey:n,premiumAccess:s,tierKey:l})=>Pb({premiumAccess:s,tierKey:l})?n==="avalanche"?"avalanche":"snowball":(n==="avalanche"&&UC(),"snowball"),yd=n=>{if(n==null)return"";const s=String(n).replace(/,/g,"");if(s==="")return"";const[l,o]=s.split("."),d=l.replace(/\B(?=(\d{3})+(?!\d))/g,",");return o!==void 0?`${d}.${o}`:d},Hb=[{key:"mortgage",label:"Mortgage"},{key:"auto",label:"Auto Loan"},{key:"personal",label:"Personal Loan"},{key:"student",label:"Student Loan"},{key:"other",label:"Other"}],j_=()=>`manual-${Date.now()}-${Math.random().toString(16).slice(2,8)}`,w_=({isOpen:n,mode:s,draft:l,showAdvanced:o,error:d,showSaved:h,onClose:m,onSave:g,onChange:v,onToggleAdvanced:y,onSelectType:x,onToggleDeferred:j})=>n?a.jsx("div",{className:"td-debt-panel-backdrop",role:"dialog","aria-modal":"true",children:a.jsxs("div",{className:"td-debt-panel",children:[a.jsxs("header",{className:"td-debt-panel-header",children:[a.jsxs("div",{className:"td-debt-panel-header-text",children:[a.jsx("h3",{children:s==="edit"?"Edit debt":"Add debt"}),a.jsx("p",{children:"Capture the essentials now. You can add details anytime."})]}),a.jsx("button",{type:"button",className:"td-panel-close",onClick:m,"aria-label":"Close",children:""})]}),a.jsxs("div",{className:"td-debt-panel-body",children:[a.jsxs("section",{className:"td-debt-panel-section",children:[a.jsx("div",{className:"td-panel-step",children:"Step 1 - Choose type"}),a.jsx("div",{className:"td-type-options",children:Hb.map(w=>a.jsx("button",{type:"button",className:`td-type-btn ${l.type===w.key?"is-active":""}`,onClick:()=>x(w.key),children:w.label},w.key))})]}),a.jsxs("section",{className:"td-debt-panel-section",children:[a.jsx("div",{className:"td-panel-step",children:"Step 2 - Required fields"}),a.jsxs("div",{className:"td-field-grid",children:[a.jsxs("label",{children:["Balance",a.jsx("input",{type:"text",inputMode:"decimal",placeholder:"e.g. 12,500",value:yd(l.balance),onChange:v("balance")})]}),a.jsxs("label",{children:["APR",a.jsx("input",{type:"number",min:"0",step:"0.01",placeholder:"e.g. 7.5",value:l.apr,onChange:v("apr")})]}),a.jsxs("label",{children:["Minimum payment",a.jsx("input",{type:"text",inputMode:"decimal",placeholder:"e.g. 220",value:yd(l.minPayment),onChange:v("minPayment"),disabled:l.studentDeferred})]}),a.jsx("div",{className:"td-form-hint",children:l.type==="mortgage"?"Use the full required mortgage payment (PITI), not just principal and interest.":l.type==="student"&&l.studentDeferred?"Deferred or IDR selected. Minimum payment is set to $0.":"Enter the required minimum payment due each month."}),l.type==="student"&&a.jsxs("label",{className:"td-checkbox-group",children:[a.jsx("input",{type:"checkbox",checked:l.studentDeferred,onChange:j}),"Loan is deferred or on an IDR plan (minimum $0)."]})]})]}),a.jsxs("section",{className:"td-debt-panel-section",children:[a.jsx("button",{type:"button",className:"td-advanced-toggle",onClick:y,children:o?"Hide advanced fields":"Show advanced fields"}),o&&a.jsxs("div",{className:"td-advanced-fields",children:[a.jsxs("label",{children:["Remaining term (months)",a.jsx("input",{type:"number",min:"0",step:"1",placeholder:"e.g. 48",value:l.termMonths,onChange:v("termMonths")})]}),a.jsxs("label",{children:["Original amount",a.jsx("input",{type:"text",inputMode:"decimal",placeholder:"e.g. 20,000",value:yd(l.originalAmount),onChange:v("originalAmount")})]}),a.jsxs("label",{children:["Notes",a.jsx("textarea",{rows:"3",placeholder:"Anything else you want to remember",value:l.notes,onChange:v("notes")})]})]})]}),d?a.jsx("div",{className:"td-form-error",children:d}):null]}),a.jsxs("footer",{className:"td-debt-panel-footer",children:[h?a.jsx("span",{className:"td-saved-note",children:"Saved"}):null,a.jsx("button",{type:"button",className:"td-secondary-btn",onClick:m,children:"Cancel"}),a.jsx("button",{type:"button",className:"td-save-btn",onClick:g,children:"Save debt"})]})]})}):null,Ug=n=>{const s=String(n??"").replace(/,/g,""),l=Number(s);return Number.isFinite(l)?l:0},Yb=(n,s)=>String(n.name||"").localeCompare(String(s.name||"")),N_=(n,s)=>{const l=Number(n.balance)||0,o=Number(s.balance)||0;if(l!==o)return l-o;const d=Number(n.apr)||0,h=Number(s.apr)||0;return d!==h?d-h:Yb(n,s)},S_=(n,s)=>{const l=Number(n.apr)||0,o=Number(s.apr)||0;if(l!==o)return o-l;const d=Number(n.balance)||0,h=Number(s.balance)||0;return d!==h?d-h:Yb(n,s)},Pg=n=>{const s=Hb.find(l=>l.key===n);return s?s.label:"Debt"},E_=n=>{if(!n||n<=0||!Number.isFinite(n))return"Variable";const s=Math.floor(n/12),l=Math.round(n%12),o=[];return s>0&&o.push(`${s} year${s===1?"":"s"}`),l>0&&o.push(`${l} month${l===1?"":"s"}`),o.length===0?"Less than a month":o.join(" and ")},T_=(n,s)=>{const l=new Date(n);return l.setMonth(l.getMonth()+s),l},C_=n=>!n||n<=0||!Number.isFinite(n)?"":T_(new Date,n).toLocaleString("en-US",{month:"short",year:"numeric"}),Ig="debtCashForm",Zb="debtPlanType",A_=()=>{if(typeof window>"u")return"snowball";try{return localStorage.getItem(Zb)==="avalanche"?"avalanche":"snowball"}catch{return"snowball"}},__=({onNavigate:n=()=>{}})=>{const{profile:s,totals:l,refreshProfile:o}=Ft(),d=f.useMemo(()=>{const N=qn({income:l.income,leftover:l.leftover}).currentStage,q={critical:"This season is demanding, so stability comes first while steady progress continues. Avoid adding new debt and stick to this order to keep momentum safe.",tight:"You have some breathing room. Keep progress steady while you protect your buffer and stay consistent with this order.",balanced:"You're in a stable position. Keep progress steady while you protect savings and avoid new debt.",traditional:"You're in a strong position. Stay consistent and keep your payoff order focused so progress stays efficient."},je={critical:{why:"Stability protects you while you work the plan.",changes:"This tier improves as leftover becomes positive and stays there consistently.",improves:"Even small, steady extra payments reduce your payoff time over time."},tight:{why:"Consistency keeps momentum steady without adding pressure.",changes:"As leftover grows, your tier strengthens and the plan can accelerate safely.",improves:"Keeping extra payments consistent has the biggest impact on payoff time here."},balanced:{why:"Your leftover supports steady progress without sacrificing essentials.",changes:"Maintaining steady leftover keeps this tier stable and opens faster payoff options.",improves:"Directing extra payments consistently keeps your payoff time moving down."},traditional:{why:"Your leftover is strong enough to support efficient payoff choices.",changes:"Staying consistent keeps you in this tier and improves your payoff timeline.",improves:"Keeping extra payments focused on the top debt shortens payoff time fastest."}};return{key:N.key,label:N.label,guidance:q[N.key]||"",details:je[N.key]||je.critical}},[l.income,l.leftover]),[h,m]=f.useState(()=>cn()),[g,v]=f.useState(()=>{if(typeof window>"u")return[];try{const N=localStorage.getItem(Ig);return N?Sb(JSON.parse(N)):[]}catch{return[]}}),[y,x]=f.useState(!1),[j,w]=f.useState("add"),[T,A]=f.useState({id:"",type:"",balance:"",apr:"",minPayment:"",studentDeferred:!1,termMonths:"",originalAmount:"",notes:""}),[E,z]=f.useState(!1),[Z,D]=f.useState(""),[B,R]=f.useState(!1),{formatCurrency:W,preferences:fe}=xt(),[re,K]=f.useState(()=>A_()),te=f.useCallback(()=>{const N=Tb(h),q=Nb(s.expenses||[]);return[...N,...q]},[h,s.expenses]),[xe,U]=f.useState(()=>te()),se=f.useMemo(()=>Eb(g,{labelDebtType:Pg}),[g]),k=f.useMemo(()=>[...xe,...se],[xe,se]),ne=f.useCallback(()=>{w("add"),A({id:"",type:"",balance:"",apr:"",minPayment:"",studentDeferred:!1,termMonths:"",originalAmount:"",notes:""}),z(!1),D(""),x(!0)},[]),L=f.useCallback(N=>{w("edit"),A({id:N.id,type:N.type||"other",balance:N.balance??"",apr:N.apr??"",minPayment:N.minPayment??"",studentDeferred:!!N.studentDeferred,termMonths:N.termMonths??"",originalAmount:N.originalAmount??"",notes:N.notes??""}),z(!!(N.termMonths||N.originalAmount||N.notes)),D(""),x(!0)},[]),C=f.useCallback(N=>q=>{const je=["balance","minPayment","originalAmount"].includes(N)?q.target.value.replace(/,/g,""):q.target.value;A(Ae=>({...Ae,[N]:je}))},[]),M=f.useCallback(N=>{A(q=>({...q,type:N,studentDeferred:N==="student"?q.studentDeferred:!1}))},[]),G=f.useCallback(()=>{A(N=>{const q=!N.studentDeferred;return{...N,studentDeferred:q,minPayment:q?"0":N.minPayment}})},[]),F=f.useCallback(()=>{if(!T.type){D("Choose a debt type to continue.");return}if(!Ug(T.balance)){D("Enter a balance greater than 0.");return}if(!T.studentDeferred&&!Ug(T.minPayment)){D("Enter a minimum payment.");return}const N={...T,id:T.id||j_()};v(q=>j==="edit"?q.map(je=>je.id===N.id?N:je):[...q,N]),R(!0),x(!1)},[j,T]),he=f.useCallback(N=>{if(N.source==="manual"){v(q=>q.filter(je=>je.id!==N.id));return}if(N.source==="credit-card"){const q=h.filter(je=>je.id!==N.id&&`card-${je.name||"unknown"}`!==N.id);jb(q),m(q);return}n("onboarding")},[h,n]),S=f.useCallback(N=>{if(N.source==="manual"){L(N);return}if(N.source==="expense"){n("onboarding");return}N.source==="credit-card"&&n("credit-card-payoff")},[L,n]),P=f.useCallback(()=>{U(te())},[te]),pe=f.useCallback(()=>{o(),typeof window<"u"&&window.dispatchEvent(new Event("profile-updated"))},[o]);f.useEffect(()=>{U(te())},[te]),f.useEffect(()=>{try{localStorage.setItem(Ig,JSON.stringify({manualDebts:g})),window.dispatchEvent(new Event("debt-cash-updated"))}catch{}},[g]),f.useEffect(()=>{if(!B)return;const N=setTimeout(()=>R(!1),1800);return()=>clearTimeout(N)},[B]),f.useEffect(()=>{const N=()=>{const q=cn();m(q),U(te())};return window.addEventListener(xn,N),()=>window.removeEventListener(xn,N)},[te]);const ue=Pb({premiumAccess:fe.premiumAccess,tierKey:d.key}),we=Ib({planTypeKey:re,premiumAccess:fe.premiumAccess,tierKey:d.key});f.useEffect(()=>{if(!ue&&re!=="snowball"){K("snowball");try{localStorage.setItem(Zb,"snowball")}catch{}}},[ue,re]);const ve=f.useMemo(()=>k.filter(N=>Number(N.balance)>0),[k]),ke=ve.length>0,Ze=f.useMemo(()=>{const N=[...ve],q=we==="avalanche"?S_:N_;return N.sort(q),N},[ve,we]),me=Ze[0]?.id,Q=f.useMemo(()=>new Map(Ze.map((N,q)=>[N.id,q+1])),[Ze]),be=ve.reduce((N,q)=>N+(Number(q.balance)||0),0),J=ve.filter(N=>N.source==="expense").length,ye=ve.reduce((N,q)=>N+(Number(q.minPayment)||0),0),Ne=l?.leftover??0,Ie=Math.max(0,Ne)*.3,$e=ye+Ie,Be=f.useMemo(()=>(we==="avalanche"?Er(ve,Ie,0):Ga(ve,Ie,0)).map((q,je)=>{const Ae=Number(q.termMonths)||0,_e=Ae>0?Ae:q.months??null,Ge=Ae>0?Ae:q.endMonth,Ke=q.id===me;return{...q,balance:q.startBalance,order:q.order??je+1,isTarget:Ke,payoffEstimateMonths:_e,endMonth:Ge,currentRecommendedPayment:q.minPayment+(Ke?Ie:0)}}),[ve,Ie,we,me]),tt=f.useMemo(()=>new Map(Be.map(N=>[N.id,N])),[Be]),nt=f.useCallback(N=>{if(!N||N.length===0)return null;const q=N.reduce((_e,Ge)=>_e+(Number(Ge.totalInterest)||0),0),je=N.reduce((_e,Ge)=>{const Ke=Number(Ge.startBalance)||0,zt=Number(Ge.totalInterest)||0;return _e+Ke+zt},0),Ae=N.reduce((_e,Ge)=>Math.max(_e,Ge.endMonth||Ge.payoffEstimateMonths||Ge.months||0),0);return{totalInterest:q,totalPaid:je,finishLabel:Ae?C_(Ae):"Variable"}},[]),le=f.useMemo(()=>{if(ve.length===0)return null;const N=Ga(ve,Ie,0),q=Er(ve,Ie,0),je=nt(N),Ae=nt(q);return!je||!Ae?null:{snowball:je,avalanche:Ae}},[ve,Ie,nt]),Te=f.useMemo(()=>Ze.map((N,q)=>{const Ae=tt.get(N.id)?.payoffEstimateMonths??null;return{id:N.id,name:N.name,payoffEstimateMonths:Ae,order:q+1}}),[Ze,tt]),Ee=f.useCallback(N=>{const q=Number(N?.apr)||0,je=N?.type||"";return!Number.isFinite(q)||q<=0?"0.00%":je==="mortgage"&&q>12?"12%+":q>25?"25%+":`${q.toFixed(2)}%`},[]),mt=Be.reduce((N,q)=>Math.max(N,q.endMonth||q.payoffEstimateMonths||q.months||0),0),gt=mt?`${mt} months / ${(mt/12).toFixed(1)} years`:"Variable",ft=we==="avalanche"?"Avalanche":"Snowball",de=we==="avalanche"?"avalanche":"snowball",ze=N=>{if(N.type)return Pg(N.type);const q=(N.name||"").toLowerCase();return/mortgage|home/.test(q)?"Mortgage":/car|auto|vehicle/.test(q)?"Vehicle":/personal/.test(q)?"Personal loan":/student/.test(q)?"Student loan":/credit|card/.test(q)?"Credit card":"Other debt"};return a.jsxs("div",{className:"total-debt-page",children:[a.jsx(St,{className:"top-controls",activePage:"total-debt",onNavigate:n,logoutHref:"/Local/Luna Login"}),a.jsxs("header",{className:"td-hero",children:[a.jsx("div",{className:"td-eyebrow",children:"Total Debt"}),a.jsx("h1",{className:"td-heading",children:"Your Debt Snapshot"}),a.jsx("p",{className:"td-subtitle",children:"See everything you owe in one place, with a plan that keeps progress steady."})]}),a.jsx("h2",{className:"td-summary-title",children:"Summary"}),a.jsxs("section",{className:"td-summary-bar",children:[a.jsxs("div",{className:"td-summary-card",children:[a.jsx("span",{children:"Total Debt"}),a.jsx("strong",{children:ve.length?W(be):"Add debts to begin"})]}),a.jsxs("div",{className:"td-summary-card",children:[a.jsx("span",{children:"Estimated Payoff"}),a.jsx("strong",{children:gt}),a.jsxs("small",{children:["Based on your current payments and future roll-over increases from the ",de," plan."]})]}),a.jsxs("div",{className:"td-summary-card",children:[a.jsx("span",{children:"Plan Type"}),a.jsx("strong",{children:ft}),a.jsx("div",{className:"td-plan-type-details",children:a.jsx("div",{className:"td-plan-type-row",children:ft==="Snowball"?a.jsx("small",{children:"Best for motivation and steady psychological wins."}):a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Avalanche (Premium + Thriving)"}),a.jsx("small",{children:"Unlocks automatically once your stability remains strong."})]})})}),a.jsx("button",{type:"button",className:"td-plan-link",onClick:()=>n("snowball-explainer"),children:"How your plan works"})]})]}),le&&a.jsxs("section",{className:"td-total-cost-card",children:[a.jsx("div",{className:"td-total-cost-header",children:a.jsxs("div",{children:[a.jsx("div",{className:"td-total-cost-title",children:"Total Cost Summary"}),a.jsx("div",{className:"td-total-cost-sub",children:"Using your current numbers, Snowball and Avalanche result in the same total cost. Differences only appear if balances or interest rates change."})]})}),a.jsxs("div",{className:"td-total-cost-table",children:[a.jsxs("div",{className:"td-total-cost-row td-total-cost-head",children:[a.jsx("span",{}),a.jsx("span",{children:"Snowball"}),a.jsx("span",{children:"Avalanche"})]}),a.jsxs("div",{className:"td-total-cost-row",children:[a.jsx("span",{children:"Total amount paid"}),a.jsx("strong",{children:W(le.snowball.totalPaid)}),a.jsx("strong",{children:W(le.avalanche.totalPaid)})]}),a.jsxs("div",{className:"td-total-cost-row td-total-interest-row",children:[a.jsx("span",{children:"Total interest paid"}),a.jsx("strong",{children:W(le.snowball.totalInterest)}),a.jsx("strong",{children:W(le.avalanche.totalInterest)})]}),a.jsxs("div",{className:"td-total-cost-row",children:[a.jsx("span",{children:"Estimated payoff completion date"}),a.jsx("strong",{children:le.snowball.finishLabel}),a.jsx("strong",{children:le.avalanche.finishLabel})]})]})]}),a.jsxs("section",{className:"td-tier-context",children:[a.jsxs("div",{className:"td-label",children:["Tier Lens: ",d.label]}),a.jsx("p",{className:"td-note",children:d.guidance}),a.jsxs("details",{className:"td-tier-details",children:[a.jsxs("summary",{children:[a.jsx("span",{children:"Why This Matters"}),a.jsx("span",{className:"td-tier-details-action",children:"Supportive context"})]}),a.jsxs("div",{className:"td-tier-details-body",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Why this tier"}),a.jsx("p",{children:d.details.why})]}),a.jsxs("div",{children:[a.jsx("strong",{children:"What changes the tier"}),a.jsx("p",{children:d.details.changes})]}),a.jsxs("div",{children:[a.jsx("strong",{children:"What improves payoff time"}),a.jsx("p",{children:d.details.improves})]})]})]})]}),ke&&a.jsxs("section",{className:"td-order",children:[a.jsxs("div",{className:"td-section-heading",children:[a.jsx("h2",{children:"Payoff Order"}),a.jsxs("p",{className:"td-note",children:["This list follows the ",de," logic so you can see what gets paid first and how the order shifts as each debt clears."]})]}),a.jsx("div",{className:"td-order-card",children:a.jsx("ol",{className:"td-order-list",children:Te.map(N=>a.jsxs("li",{className:"td-order-row",children:[a.jsx("div",{className:"td-order-main",children:a.jsx("strong",{children:N.name})}),a.jsxs("div",{className:"td-order-position",children:[a.jsx("span",{children:"Position"}),a.jsx("strong",{children:N.order})]})]},N.id))})})]}),ke?a.jsx("section",{className:"td-debt-summary",children:a.jsxs("div",{className:"td-debt-summary-grid",children:[a.jsxs("div",{className:"td-debt-summary-left",children:[a.jsx("h2",{children:"Your Debts"}),a.jsx("p",{className:"td-note",children:"Everything you're paying toward is listed here. Update balances or APRs anytime to keep your plan accurate."}),a.jsx("div",{className:"td-debt-actions",children:a.jsxs("div",{className:"td-debt-action-stack",children:[a.jsx("button",{type:"button",className:"primary-btn purple-save-btn td-add-debt-btn",onClick:ne,children:"+ Add Debt"}),a.jsxs("span",{className:"td-debt-count",children:[ve.length," Debt",ve.length===1?"":"s"," Tracked"]})]})})]}),a.jsx("div",{className:"td-debt-summary-right",children:a.jsx("div",{className:"td-debt-list",children:ve.map(N=>{const q=tt.get(N.id),je=q?.payoffEstimateMonths?E_(q.payoffEstimateMonths):"Variable",Ae=Q.get(N.id)??"-",_e=N.source==="manual",Ge=N.source==="credit-card",Ke=_e||Ge,zt=N.source==="expense"?`Tracked debt - ${ze(N)}`:N.source==="manual"?`Manual entry - ${ze(N)}`:"Tracked debt - Credit card";return a.jsxs("article",{className:"td-debt-card",children:[a.jsxs("header",{className:"td-debt-card-header",children:[a.jsxs("div",{children:[a.jsx("h3",{children:N.name}),a.jsx("span",{className:"td-debt-source",children:zt})]}),a.jsxs("div",{className:"td-debt-order-pill",children:[a.jsx("span",{children:"Order"}),a.jsx("strong",{children:Ae})]})]}),a.jsxs("div",{className:"td-debt-card-stats",children:[a.jsxs("div",{className:"td-debt-card-stat",children:[a.jsx("span",{children:"Balance"}),a.jsx("strong",{children:W(N.balance)})]}),a.jsxs("div",{className:"td-debt-card-stat",children:[a.jsx("span",{children:"APR"}),a.jsx("strong",{children:Ee(N)})]}),a.jsxs("div",{className:"td-debt-card-stat",children:[a.jsx("span",{children:"Minimum"}),a.jsx("strong",{children:W(N.minPayment)})]})]}),a.jsxs("div",{className:"td-debt-card-payoff",children:[a.jsx("span",{children:"Estimated payoff (includes roll-overs)"}),a.jsx("strong",{children:je})]}),a.jsxs("div",{className:"td-debt-card-actions",children:[a.jsx("button",{type:"button",className:"td-secondary-btn td-card-btn",onClick:()=>S(N),children:"Edit"}),a.jsx("button",{type:"button",className:"td-secondary-btn td-card-btn td-danger-btn",onClick:()=>he(N),disabled:!Ke,title:Ke?"Remove this debt":"Managed in Expenses - update it there",children:"Remove"})]})]},N.id)})})})]})}):a.jsx("section",{className:"td-empty-state-section",children:a.jsxs("div",{className:"td-debt-empty-state-card",children:[a.jsx("h3",{children:"No debts tracked yet"}),a.jsx("p",{children:"Add entries to get started and build your payoff order."}),a.jsx("button",{type:"button",className:"primary-btn purple-save-btn td-empty-add-btn",onClick:ne,children:"+ Add Debt"})]})}),a.jsx("section",{className:"td-monthly-plan",children:a.jsxs("div",{className:"td-monthly-plan-card",children:[a.jsxs("div",{className:"td-monthly-plan-header",children:[a.jsx("div",{children:a.jsx("span",{className:"td-label",children:"Your Monthly Plan"})}),a.jsxs("div",{className:"td-monthly-total",children:["You're paying ",a.jsx("strong",{children:W($e)})," / month"]})]}),a.jsxs("div",{className:"td-monthly-plan-details",children:[a.jsxs("div",{children:[a.jsx("span",{children:"Minimum payments"}),a.jsx("strong",{children:W(ye)})]}),a.jsxs("div",{children:[a.jsxs("span",{children:["Extra ",de]}),a.jsx("strong",{children:W(Ie)})]})]}),a.jsx("div",{className:"td-note",children:"If your leftover increases, your payoff timeline improves."})]})}),a.jsx(w_,{isOpen:y,mode:j,draft:T,showAdvanced:E,error:Z,showSaved:B,onClose:()=>x(!1),onSave:F,onChange:C,onToggleAdvanced:()=>z(N=>!N),onSelectType:M,onToggleDeferred:G}),a.jsxs("section",{className:"td-expense-reference",children:[a.jsxs("div",{children:[a.jsx("h3",{children:"Keep This Accurate"}),a.jsx("p",{children:"Update expenses if debts are missing, then refresh to pull in new items."})]}),a.jsx("button",{type:"button",className:"td-secondary-btn",onClick:pe,children:"Update expenses"}),a.jsxs("button",{type:"button",className:"td-secondary-btn",onClick:P,children:["Refresh debts ",J>0?`(${J} synced)`:""]})]})]})},M_=[{key:"mortgage",label:"Mortgage"},{key:"auto",label:"Auto Loan"},{key:"personal",label:"Personal Loan"},{key:"student",label:"Student Loan"},{key:"other",label:"Other"}],io=n=>{const s=String(n??"").replace(/,/g,""),l=Number(s);return Number.isFinite(l)?l:0},Vb=(n,s)=>String(n.name||"").localeCompare(String(s.name||"")),k_=(n,s)=>{const l=Number(n.balance)||0,o=Number(s.balance)||0;if(l!==o)return l-o;const d=Number(n.apr)||0,h=Number(s.apr)||0;return d!==h?d-h:Vb(n,s)},D_=(n,s)=>{const l=Number(n.apr)||0,o=Number(s.apr)||0;if(l!==o)return o-l;const d=Number(n.balance)||0,h=Number(s.balance)||0;return d!==h?d-h:Vb(n,s)},Hg=n=>{if(!n||n<=0||!Number.isFinite(n))return"Variable";const s=Math.floor(n/12),l=Math.round(n%12),o=[];return s>0&&o.push(`${s} year${s===1?"":"s"}`),l>0&&o.push(`${l} month${l===1?"":"s"}`),o.length===0?"Less than a month":o.join(" and ")},L_=(n,s)=>{const l=new Date(n);return l.setMonth(l.getMonth()+s),l},O_=n=>!n||n<=0||!Number.isFinite(n)?"Variable":L_(new Date,n).toLocaleString("en-US",{month:"short",year:"numeric"}),z_=n=>{const s=M_.find(l=>l.key===n);return s?s.label:"Debt"},R_=n=>{if(!n)return[];if(Array.isArray(n.manualDebts))return n.manualDebts.map(s=>({id:s.id,type:s.type,balance:s.balance??"",apr:s.apr??"",minPayment:s.minPayment??"",termMonths:s.termMonths??""}));if(n.housingDebts||n.carDebts||n.personalDebts||n.studentBalance){const s=[];return(n.housingDebts||[]).forEach(l=>{s.push({id:l.id,type:"mortgage",balance:l.balance??"",apr:l.apr??"",minPayment:l.min??"",termMonths:l.termMonths??""})}),(n.carDebts||[]).forEach(l=>{s.push({id:l.id,type:"auto",balance:l.balance??"",apr:l.apr??"",minPayment:l.min??"",termMonths:l.termMonths??""})}),(n.personalDebts||[]).forEach(l=>{s.push({id:l.id,type:"personal",balance:l.balance??"",apr:l.apr??"",minPayment:l.min??"",termMonths:l.termMonths??""})}),n.studentBalance&&s.push({id:n.studentId||"student-loan",type:"student",balance:n.studentBalance??"",apr:n.studentApr??"",minPayment:n.studentDeferred?"0":n.studentMin??"",termMonths:n.studentTermMonths??""}),s}return Array.isArray(n)?n.map(s=>({id:s.id,type:s.type,balance:s.balance??"",apr:s.apr??"",minPayment:s.minPayment??"",termMonths:s.termMonths??""})):[]},$_=(n=[])=>(n||[]).map((s,l)=>{const o=Math.max(0,io(s.balance));return o?{id:s.id||`manual-${l}`,name:z_(s.type),balance:o,apr:Math.max(0,io(s.apr)),minPayment:Math.max(0,io(s.minPayment)),termMonths:io(s.termMonths)||void 0,source:"manual",type:s.type}:null}).filter(Boolean),B_=n=>{if(!n)return null;const s=Math.max(0,Number(n.balance)||0),l=Math.max(0,Number(n.minPayment)||0);return s<=0&&!n.paid?null:{id:n.id||`card-${n.name||"unknown"}`,name:n.name||"Credit Card",balance:s,apr:Math.max(0,Number(n.apr)||0),minPayment:l,source:"credit-card"}},U_=(n=[])=>(n||[]).map(B_).filter(Boolean),Yg=()=>{const n=vs();return R_(n)},P_=({onNavigate:n=()=>{}})=>{const{formatCurrency:s,preferences:l}=xt(),{totals:o}=Ft(),[d,h]=f.useState(()=>cn()),[m,g]=f.useState(()=>Yg()),[v,y]=f.useState(()=>Sr());f.useEffect(()=>{const me=()=>h(cn());return window.addEventListener(xn,me),window.addEventListener("storage",me),()=>{window.removeEventListener(xn,me),window.removeEventListener("storage",me)}},[]),f.useEffect(()=>{const me=()=>g(Yg());return window.addEventListener("debt-cash-updated",me),window.addEventListener("storage",me),()=>{window.removeEventListener("debt-cash-updated",me),window.removeEventListener("storage",me)}},[]),f.useEffect(()=>{const me=()=>y(Sr());return window.addEventListener("storage",me),()=>window.removeEventListener("storage",me)},[]);const x=f.useMemo(()=>U_(d),[d]),j=f.useMemo(()=>$_(m),[m]),w=f.useMemo(()=>[...x,...j],[x,j]),T=f.useMemo(()=>w.filter(me=>Number(me.balance)>0),[w]),A=T.length>0,E=f.useMemo(()=>T.reduce((me,Q)=>me+(Number(Q.balance)||0),0),[T]),z=f.useMemo(()=>T.reduce((me,Q)=>me+(Number(Q.minPayment)||0),0),[T]),Z=Math.max(0,o.leftover||0),D=Z*.3,B=z+D,W=f.useMemo(()=>qn({income:o.income,leftover:o.leftover}).currentStage,[o.income,o.leftover]).key==="traditional",re=l.premiumAccess&&W?v:"snowball",K=re==="avalanche"?"Avalanche":"Snowball",te=re==="avalanche"?"avalanche":"snowball",xe=f.useCallback(me=>{if(!me||me.length===0)return null;const Q=me.reduce((J,ye)=>J+(Number(ye.totalInterest)||0),0),be=me.reduce((J,ye)=>Math.max(J,ye.endMonth||ye.payoffEstimateMonths||ye.months||0),0);return{totalInterest:Q,finishLabel:O_(be)}},[]),U=f.useMemo(()=>{if(!l.premiumAccess||T.length===0)return null;const me=Ga(T,D,0),Q=Er(T,D,0),be=xe(me),J=xe(Q);if(!be||!J)return null;const ye=Math.max(0,be.totalInterest-J.totalInterest);return{snowball:be,avalanche:J,savings:ye}},[l.premiumAccess,T,D,xe]),se=f.useMemo(()=>{const me=[...T],Q=re==="avalanche"?D_:k_;return me.sort(Q),me},[T,re]),k=f.useMemo(()=>(re==="avalanche"?Er(T,D,0):Ga(T,D,0)).map((Q,be)=>{const J=Number(Q.termMonths)||0,ye=J>0?J:Q.months??null,Ne=J>0?J:Q.endMonth;return{...Q,order:Q.order??be+1,payoffEstimateMonths:ye,endMonth:Ne}}),[T,D,re]),ne=f.useMemo(()=>se.map((me,Q)=>{const be=k.find(J=>J.id===me.id);return be?{...be,order:Q+1}:null}).filter(Boolean),[se,k]),L=se[0]?.id,C=ne[0],M=C?.name??"your current focus debt",G=C?.minPayment??0;C?.balance;const F=ne[1],he=F?.name??"the next debt",S=F?.minPayment??0,P=D+G,pe=S+P,ue=f.useMemo(()=>ne.map(me=>{const Q=me.id===L?D:0;return{id:me.id,name:me.name,minPayment:me.minPayment,extra:Q,payThisMonth:me.minPayment+Q}}),[ne,L,D]),we=f.useMemo(()=>{const me=[];let Q=0;return ne.forEach((be,J)=>{const ye=be.minPayment+D+Q;me.push({id:be.id,step:J+1,name:be.name,minPayment:be.minPayment,rollover:Q,paymentWhenTarget:ye,payoffEstimate:be.payoffEstimateMonths}),Q+=be.minPayment}),me},[ne,D]),ve=k.length>0,ke=ve&&(k[k.length-1].payoffEstimateMonths||k[k.length-1].months||k[k.length-1].endMonth)||null,Ze=ke?Hg(ke):"Variable";return a.jsxs("div",{className:"snowball-page",children:[a.jsx(St,{className:"top-controls",activePage:"snowball-explainer",onNavigate:n,logoutHref:"/Local/Luna Login"}),a.jsxs("header",{className:"sb-hero",children:[a.jsxs("p",{className:"sb-eyebrow",children:[K," plan"]}),a.jsxs("h1",{children:["Your ",K," Plan in Plain English"]}),a.jsx("p",{className:"sb-subtitle",children:re==="avalanche"?"Highest interest first for efficiency. We still pay every minimum so nothing falls behind.":"Smallest balance first for momentum. We still pay every minimum so nothing falls behind."})]}),a.jsxs("section",{className:"sb-education",children:[a.jsxs("div",{className:"sb-education-grid",children:[a.jsxs("article",{children:[a.jsx("h3",{children:"Snowball"}),a.jsx("p",{children:"Smallest balance first for momentum while every minimum payment stays current."})]}),a.jsxs("article",{children:[a.jsx("h3",{children:"Avalanche"}),a.jsx("p",{children:"Highest interest first for efficiency, all while keeping the minimums paid on every debt."})]})]}),a.jsx("p",{className:"sb-education-note",children:"Payoff timelines already include future roll-over payments once earlier debts are paid off so the pace you see is the pace you can trust."})]}),ve&&a.jsxs("section",{className:"sb-timeline-card",children:[a.jsx("div",{className:"sb-timeline-label",children:"Total timeline (all debts)"}),a.jsx("div",{className:"sb-timeline-value",children:Ze}),a.jsxs("p",{children:["Because your extra ",s(D)," goes to one debt at a time, the timeline already counts the freed minimums rolling forward when each balance clears, so it matches what you will actually pay."]})]}),a.jsxs("main",{className:"sb-body",children:[A&&a.jsxs("section",{className:"sb-summary",children:[a.jsxs("div",{className:"sb-summary-card",children:[a.jsx("span",{children:"Debts tracked"}),a.jsx("strong",{children:T.length})]}),a.jsxs("div",{className:"sb-summary-card",children:[a.jsx("span",{children:"Total debt"}),a.jsx("strong",{children:s(E)})]}),a.jsxs("div",{className:"sb-summary-card",children:[a.jsx("span",{children:"Monthly plan"}),a.jsx("strong",{children:s(B)}),a.jsxs("small",{children:[s(z)," minimums + ",s(D)," ",te]})]})]}),A&&U&&a.jsxs("section",{className:"sb-impact-card",children:[a.jsx("div",{className:"sb-impact-header",children:a.jsxs("div",{children:[a.jsx("div",{className:"sb-impact-title",children:"Total Impact"}),a.jsx("div",{className:"sb-impact-sub",children:"Compare total interest and debt-free timing with your current inputs."})]})}),a.jsxs("div",{className:"sb-impact-table",children:[a.jsxs("div",{className:"sb-impact-row sb-impact-head",children:[a.jsx("span",{}),a.jsx("span",{children:"Snowball"}),a.jsx("span",{children:"Avalanche"})]}),a.jsxs("div",{className:"sb-impact-row",children:[a.jsx("span",{children:"Debt free date"}),a.jsx("strong",{children:U.snowball.finishLabel}),a.jsx("strong",{children:U.avalanche.finishLabel})]}),a.jsxs("div",{className:"sb-impact-row",children:[a.jsx("span",{children:"Total interest"}),a.jsx("strong",{children:s(U.snowball.totalInterest)}),a.jsx("strong",{children:s(U.avalanche.totalInterest)})]}),a.jsxs("div",{className:"sb-impact-row",children:[a.jsx("span",{children:"Total savings"}),a.jsx("strong",{children:"N/A"}),a.jsx("strong",{children:s(U.savings)})]})]}),a.jsx("div",{className:"sb-impact-note",children:"Snowball favors quicker wins by clearing smaller balances first. Avalanche targets the highest APR first to reduce total interest on the biggest leaks. Both plans keep every minimum payment current, so you can choose the approach that keeps you most consistent."})]}),a.jsxs("section",{className:"sb-rule",children:[a.jsx("h2",{children:"The rule we never break"}),a.jsx("p",{children:"Every debt always gets at least its minimum payment. Extra money goes to one target at a time."})]}),A&&a.jsxs("section",{className:"sb-personalized",children:[a.jsxs("p",{children:["Because your tracked debts demand ",s(z)," in minimums and you still have"," ",s(Z)," leftover, the extra ",s(D)," goes to ",M," without touching other obligations."]}),a.jsxs("p",{children:["When ",M," drops to zero, its ",s(G)," minimum joins the extra so ",he,"now receives ",s(pe)," (",s(S)," minimum +"," ",s(P)," added), which is why later payments grow and payoff speeds up."]}),a.jsxs("p",{children:["Minimums are fixed obligations totaling ",s(z),", so freed payments must roll forward and the timeline you trust already reflects those roll-overs while updating as your leftover changes."]})]}),!A&&a.jsx("section",{className:"sb-empty-state",children:a.jsxs("div",{className:"sb-empty-state-card",children:[a.jsx("p",{className:"sb-empty-state-title",children:"Track your debts first"}),a.jsx("p",{className:"sb-empty-state-body",children:"Add your balances in Loans & Payments to unlock the plan details."}),a.jsx("button",{type:"button",className:"sb-primary",onClick:()=>n("total-debt"),children:"Back to Loans & Payments"})]})}),A&&a.jsxs("section",{className:"sb-current",children:[a.jsxs("div",{className:"sb-section-header",children:[a.jsx("h2",{children:"This month's real pay plan"}),a.jsx("p",{children:"These are the payments you make right now. Only the first debt gets the extra payment."})]}),ue.length===0?a.jsx("div",{className:"sb-empty",children:"Add debts in Loans & Payments to see your plan here."}):a.jsxs("div",{className:"sb-table",children:[a.jsxs("div",{className:"sb-row sb-head",children:[a.jsx("span",{children:"Debt"}),a.jsx("span",{children:"Minimum"}),a.jsx("span",{children:"Extra now"}),a.jsx("span",{children:"Pay this month"})]}),ue.map(me=>a.jsxs("div",{className:"sb-row",children:[a.jsx("span",{"data-label":"Debt",children:me.name}),a.jsx("span",{"data-label":"Minimum",children:s(me.minPayment)}),a.jsx("span",{"data-label":"Extra now",children:s(me.extra)}),a.jsx("span",{"data-label":"Pay this month",children:s(me.payThisMonth)})]},me.id)),a.jsxs("div",{className:"sb-row sb-total",children:[a.jsx("span",{"data-label":"Debt",children:"Total"}),a.jsx("span",{"data-label":"Minimum",children:s(z)}),a.jsx("span",{"data-label":"Extra now",children:s(D)}),a.jsx("span",{"data-label":"Pay this month",children:s(B)})]})]})]}),A&&a.jsxs("section",{className:"sb-steps",children:[a.jsxs("div",{className:"sb-section-header",children:[a.jsx("h2",{children:"How your payments grow and speed things up"}),a.jsx("p",{children:"When a debt is paid off, its old minimum payment joins the extra payment on the next debt. That is why payoff dates speed up over time."})]}),we.length===0?a.jsx("div",{className:"sb-empty",children:"Add debts to see your payoff order and roll-over plan."}):a.jsx("div",{className:"sb-step-grid",children:we.map(me=>a.jsxs("article",{className:"sb-step-card",children:[a.jsxs("header",{children:[a.jsxs("span",{className:"sb-step-tag",children:["Step ",me.step]}),a.jsx("h3",{children:me.name})]}),a.jsxs("div",{className:"sb-step-row",children:[a.jsx("span",{children:"Minimum payment"}),a.jsx("strong",{children:s(me.minPayment)})]}),a.jsxs("div",{className:"sb-step-row",children:[a.jsx("span",{children:"Roll-over added by then"}),a.jsx("strong",{children:s(me.rollover)})]}),a.jsxs("div",{className:"sb-step-row",children:[a.jsx("span",{children:"Payment once this becomes the focus"}),a.jsx("strong",{children:s(me.paymentWhenTarget)})]}),a.jsxs("div",{className:"sb-step-row",children:[a.jsx("span",{children:"Estimated payoff"}),a.jsx("strong",{children:Hg(me.payoffEstimate)})]})]},me.id))})]}),A&&a.jsxs("section",{className:"sb-faq",children:[a.jsx("h2",{children:"If you are wondering..."}),a.jsxs("div",{className:"sb-faq-grid",children:[a.jsxs("article",{children:[a.jsx("h3",{children:"Why does my payoff timeline look faster than what I'm paying right now?"}),a.jsx("p",{children:"Because the plan already includes future roll-over payments once earlier debts are paid off. The timeline assumes those payments stack later."})]}),a.jsxs("article",{children:[a.jsx("h3",{children:"Do these numbers change?"}),a.jsxs("p",{children:["Yes. If leftover grows, the extra ",te," grows and payoff speeds up. If leftover shrinks, timelines stretch and the plan updates."]})]}),a.jsxs("article",{children:[a.jsx("h3",{children:"What if I add more extra money?"}),a.jsx("p",{children:"Your extra payment amount increases and the plan recalculates instantly. Every added dollar pushes payoff dates forward."})]})]})]}),A&&a.jsxs("div",{className:"sb-footer",children:[a.jsx("p",{className:"sb-reassure",children:"You don't have to memorize any of this. We track it, update it, and do the math for you so the plan always stays accurate."}),a.jsx("button",{type:"button",className:"sb-primary",onClick:()=>n("total-debt"),children:"Back to Loans & Payments"})]})]})]})},I_=[{id:"debt-consolidation",title:"Debt Consolidation",description:"Roll multiple balances into a single lower-rate payment. Works best if you can cover the new payment comfortably.",rates:"7.5% - 11.5%",term:"36 - 60 months",tags:["debt","consolidation"]},{id:"personal-installment",title:"Personal Installment",description:"Fixed monthly payment, quick approval, and no collateral required. Great for medium-term projects or refinances.",rates:"9.5% - 14.5%",term:"24 - 60 months",tags:["fixed","savings"]},{id:"home-equity",title:"Home Equity Line",description:"Use home equity to refinance balances or fund a remodel. Ideal for homeowners with steady income.",rates:"4.5% - 6.0%",term:"10 - 30 years",tags:["stable","low-rate"]},{id:"business-line",title:"Small Business Line",description:"Flexible access to cash for contractors or self-employed users. Draw what you need and only pay interest on the balance.",rates:"6.0% - 11.0%",term:"12 - 24 months",tags:["business","flex"]}],H_=["Check your credit mix before applying so the rate reflects your payment history.","Compare APRs, not just the advertised rate, to understand total borrowing costs.","Use prequalification offers to avoid hard inquiries when exploring multiple lenders."],on=n=>{const s=String(n??"").replace(/,/g,""),l=Number(s);return Number.isFinite(l)?l:0},Y_=n=>{if(!n||typeof n!="object")return[];if(Array.isArray(n.manualDebts))return n.manualDebts.map((o,d)=>({id:o.id||`manual-${d}`,type:o.type||"other",name:o.name||"",balance:on(o.balance),minPayment:on(o.minPayment)})).filter(o=>o.balance>0);if(Array.isArray(n))return n.map((o,d)=>({id:o.id||`manual-${d}`,type:o.type||"other",name:o.name||"",balance:on(o.balance),minPayment:on(o.minPayment)})).filter(o=>o.balance>0);const s=[];(n.housingDebts||[]).forEach((o,d)=>{const h=on(o.balance);h&&s.push({id:`manual-housing-${d}`,type:"mortgage",name:"Mortgage",balance:h,minPayment:on(o.min)})}),(n.carDebts||[]).forEach((o,d)=>{const h=on(o.balance);h&&s.push({id:`manual-car-${d}`,type:"auto",name:"Auto Loan",balance:h,minPayment:on(o.min)})}),(n.personalDebts||[]).forEach((o,d)=>{const h=on(o.balance);h&&s.push({id:`manual-personal-${d}`,type:"personal",name:"Personal Loan",balance:h,minPayment:on(o.min)})});const l=on(n.studentBalance);return l&&s.push({id:"manual-student",type:"student",name:"Student Loan",balance:l,minPayment:on(n.studentMin)}),s},Zg=()=>{const n=vs();return Y_(n)},Vg=n=>{if(!n)return!1;if(String(n.type||"").toLowerCase()==="mortgage")return!0;const l=String(n.name||"").toLowerCase();return l.includes("mortgage")||l.includes("home")},Z_=({onNavigate:n=()=>{}})=>{const{formatCurrency:s}=xt(),{profile:l,totals:o}=Ft(),[d,h]=f.useState(()=>cn()),[m,g]=f.useState(()=>Zg()),v=f.useMemo(()=>Number(l.savingsBalance)||0,[l.savingsBalance]),y=f.useMemo(()=>(l.incomes||[]).some(k=>(k.incomeType||"personal")==="business"),[l.incomes]),x=f.useMemo(()=>(l.expenses||[]).some(k=>k.housingType==="Mortgage"?!0:`${k.category||""} ${k.name||""}`.toLowerCase().includes("mortgage")),[l.expenses]),j=f.useMemo(()=>{const k=(d||[]).reduce((L,C)=>L+Math.max(0,on(C?.balance)),0),ne=(m||[]).filter(L=>!Vg(L)).reduce((L,C)=>L+Math.max(0,on(C.balance)),0);return k+ne},[d,m]);f.useEffect(()=>{const k=()=>h(cn());return window.addEventListener(xn,k),window.addEventListener("storage",k),()=>{window.removeEventListener(xn,k),window.removeEventListener("storage",k)}},[]),f.useEffect(()=>{const k=()=>g(Zg());return window.addEventListener("debt-cash-updated",k),window.addEventListener("storage",k),()=>{window.removeEventListener("debt-cash-updated",k),window.removeEventListener("storage",k)}},[]);const w=f.useMemo(()=>qn({income:o.income,leftover:o.leftover}),[o.income,o.leftover]),T=w.currentStage.label,A=w.currentStage.key==="critical",E=o.leftover>0,z=o.leftover>=Math.max(200,o.income*.05),Z=o.leftover>=Math.max(500,o.income*.1),D=v>=Math.max(500,o.expenses*.5),B=x||m.some(Vg),R=E&&!A,W={"debt-consolidation":"Debt consolidation can lower the overall rate because you have consumer balances and enough leftover cash to cover a single payment.","home-equity":"Stable cash flow plus deep savings make a low-rate home equity line a strong option for refinancing or bigger goals.","personal-installment":"Your savings and monthly slack mean you can handle a predictable installment loan for big purchases or refinances.","business-line":"Business income and steady leftover can support a short-term credit line for operating needs."},fe=f.useMemo(()=>{const k=new Set;return R&&(j>0&&z&&k.add("debt-consolidation"),Z&&D&&k.add("personal-installment"),Z&&D&&B&&k.add("home-equity"),y&&Z&&k.add("business-line")),k},[R,j,z,Z,D,B,y]),re=f.useMemo(()=>I_.map(k=>({...k,recommended:fe.has(k.id),reason:W[k.id]})),[fe]),K=f.useMemo(()=>re.filter(k=>!(k.id==="debt-consolidation"&&j<=0||k.id==="home-equity"&&!B||k.id==="business-line"&&!y)),[re,j,B,y]),te=j<=0?A?"You're not carrying consumer debt right now, but cash flow is tight. Focus on stability first.":"You're not carrying consumer debt right now, which keeps your options flexible.":E?z?"You have consumer debt on file with some leftover to work with. Consolidation could help if the payment fits.":"You have consumer debt on file, but leftover is thin. Focus on breathing room before taking on new debt.":"Consumer debt is on file and leftover is currently tight. Prioritize stability before borrowing more.",xe=[{label:"Consumer debt tracked",value:s(j)},{label:"Leftover cash each month",value:s(o.leftover)},{label:"Savings balance",value:s(v)}],U=re.filter(k=>k.recommended),se=R?"If you are exploring loans for convenience rather than necessity, building savings first often costs less long term.":"Right now your cash flow is tight, so borrowing would add pressure. Building a small buffer first usually costs less long term.";return a.jsxs("div",{className:"loan-page",children:[a.jsxs("header",{className:"loan-header",children:[a.jsx(St,{className:"top-controls",activePage:"loans",onNavigate:n,logoutHref:"/Local/BudgetIQ Login"}),a.jsxs("div",{className:"loan-hero",children:[a.jsx("p",{className:"loan-eyebrow",children:"Loan recommendations"}),a.jsx("h1",{children:"Find a loan structure that fits your reality"}),a.jsx("p",{className:"loan-subtitle",children:"Luna looks at your income, expenses, leftover cash, and goals to highlight loan options that align with where you are today. This guidance is educational and based on common lender patterns; actual terms may vary."})]})]}),a.jsxs("main",{className:"loan-body",children:[a.jsxs("section",{className:"loan-summary-card",children:[a.jsx("h2",{children:"How we suggest loans"}),a.jsx("p",{children:"We consider your leftover cash, goals, and credit mix to help you understand whether a line of credit, installment loan, or business product may fit best. Update income, expenses, or debt balances anytime to refresh recommendations."}),a.jsx("p",{className:"loan-privacy-note",children:"Your privacy comes first."}),a.jsx("p",{className:"loan-privacy-note",children:"We never sell your data, and we'll never check your credit without your permission."})]}),a.jsxs("section",{className:"loan-snapshot",children:[a.jsx("h3",{children:"Your snapshot"}),a.jsx("p",{className:"loan-status-blurb",children:te}),a.jsxs("p",{className:"loan-tier-note",children:["Aligned with your current tier: ",T,"."]})]}),a.jsx("section",{className:"loan-status-grid",children:xe.map(k=>a.jsxs("article",{children:[a.jsx("span",{children:k.label}),a.jsx("strong",{children:k.value})]},k.label))}),a.jsx("p",{className:"loan-guardrail",children:se}),a.jsxs("section",{className:"loan-recommendations",children:[a.jsx("h3",{children:"Smart suggestions"}),U.length>0?a.jsx("div",{className:"loan-grid",children:U.map(k=>a.jsxs("article",{className:"loan-option-card is-recommended",children:[a.jsxs("header",{children:[a.jsx("h4",{children:k.title}),a.jsxs("span",{children:[k.term," term"]})]}),a.jsx("p",{children:k.description}),a.jsxs("div",{className:"loan-details",children:[a.jsx("span",{children:"Example APR"}),a.jsx("strong",{children:k.rates})]}),k.reason&&a.jsx("p",{className:"loan-reason",children:k.reason})]},k.id))}):a.jsx("p",{className:"loan-fallback",children:R?"We did not find a strong recommendation based on your current numbers. Update your income, expenses, or debt balances anytime - we'll refresh your recommendations when those numbers change.":"We dont recommend new loans at this stage. Focus on stabilizing cash flow and building a small buffer first."})]}),a.jsxs("section",{className:"loan-options",children:[a.jsx("h3",{children:"Loan types to consider (when appropriate)"}),K.length>0?a.jsx("div",{className:"loan-grid",children:K.map(k=>a.jsxs("article",{className:`loan-option-card ${k.recommended?"is-recommended":""}`,children:[a.jsxs("header",{children:[a.jsx("h4",{children:k.title}),a.jsxs("span",{children:[k.term," term"]})]}),a.jsx("p",{children:k.description}),a.jsxs("div",{className:"loan-details",children:[a.jsx("span",{children:"Example APR"}),a.jsx("strong",{children:k.rates})]}),k.recommended&&k.reason&&a.jsx("p",{className:"loan-reason",children:k.reason})]},k.id))}):a.jsx("p",{className:"loan-fallback",children:"Add debt or income details to see loan types that fit your profile."})]}),a.jsxs("section",{className:"loan-tips",children:[a.jsx("h3",{children:"Quick tips"}),a.jsx("ul",{children:H_.map(k=>a.jsx("li",{children:k},k))})]})]})]})},V_=[{label:"FICO Score",value:"720 (preview)",fill:72,variant:"good"},{label:"Payment History",value:"98% on-time (preview)",fill:98,variant:"good"},{label:"Utilization",value:"12% (preview)",fill:12,variant:"good"},{label:"Age of Credit",value:"5.4 yrs (preview)",fill:45,variant:"warn"}],q_=[{title:"Consistent payments",detail:"98% of payments are on time, keeping the most important factor aligned."},{title:"Low utilization",detail:"Using 12% of your credit lines leaves room to grow and prevents rate increases."},{title:"Balanced account mix",detail:"Installment and revolving accounts are both active, helping your profile stay resilient."}],G_=[{title:"Shorter credit age",detail:"Average account age is 5.4 years; keep older accounts open and active."},{title:"Recent inquiries",detail:"Hold off on new applications for at least six months to avoid extra hard-pull hits."},{title:"Limited installment history",detail:"If an installment loan naturally becomes part of your plans later, it can help diversify your profile."}],K_=[{title:"Payment history",detail:"Highest impact on score health."},{title:"Utilization",detail:"High impact and improves quickly with lower balances."},{title:"Credit age",detail:"Slow, long-term factor that grows with time."}],F_=[{title:"Keep autopay active",detail:"Automate every monthly payment so that on-time streak stays intact."},{title:"Pay down revolving balances",detail:"Lower card balances to keep utilization comfortably below 10%."},{title:"Mind new credit",detail:"Pause hard inquiries and only open new lines when you are ready to keep history steady."}],X_=({onNavigate:n=()=>{}})=>{const{totals:s}=Ft(),l=f.useMemo(()=>{const o=qn({income:s.income,leftover:s.leftover}).currentStage,d={critical:"Stability first - steady habits will lift your score over time. Next step: keep payments on time and avoid new credit.",tight:"Keep payment habits strong while you build a bigger buffer. Next step: keep utilization low each month.",balanced:"Your stability supports gradual credit improvement. Next step: keep older accounts open and active.",traditional:"You can lean into credit optimization with confidence. Next step: be selective with new credit and protect your history."};return{label:o.label,message:d[o.key]||""}},[s.income,s.leftover]);return a.jsxs("div",{className:"fico-score-page",children:[a.jsxs("header",{className:"fico-score-header",children:[a.jsx(St,{className:"top-controls",activePage:"fico",onNavigate:n,logoutHref:"/Local/Luna Login"}),a.jsxs("div",{className:"header-text",children:[a.jsx("h1",{children:"FICO Score"}),a.jsx("p",{children:"See the most important parts of your credit health, and the calm, steady steps that strengthen it over time."})]})]}),a.jsx(_r,{role:"OPTIMIZE",why:"These credit signals help Luna understand your long-term financial resilience so advice stays realistic and grounded in how lenders view your profile.",reassurance:"Your score is a reflection of choices over timenot a judgment. We focus on steady steps that strengthen your future, not pressure."}),a.jsxs("main",{className:"fico-score-main",children:[a.jsxs("section",{className:"fico-scoreboard-card",children:[a.jsx("div",{className:"card-title-row",children:a.jsxs("div",{children:[a.jsx("h2",{children:"Scoreboard"}),a.jsx("p",{className:"hero-subtitle",children:"Preview values shown. Connect accounts later for live FICO updates."})]})}),a.jsx("div",{className:"fico-table",children:V_.map(o=>a.jsxs("div",{className:"fico-row",children:[a.jsxs("div",{className:"fico-row-header",children:[a.jsx("div",{className:"label",children:o.label}),a.jsx("div",{className:"value",children:o.value})]}),a.jsx("div",{className:`mini-bar ${o.variant}`,children:a.jsx("div",{className:`mini-fill ${o.variant}`,style:{"--fill":`${o.fill}%`}})})]},o.label))}),a.jsx("div",{className:"helper subtle",children:"Guidance is educational and based on typical FICO behavior. Lender scoring models may vary."})]}),a.jsxs("section",{className:"fico-status-card",children:[a.jsx("div",{className:"fico-status-label",children:"Overall Status"}),a.jsx("div",{className:"fico-status-value",children:"Stable"}),a.jsx("div",{className:"fico-status-risk",children:"Risk level: Low"}),a.jsx("p",{className:"fico-status-detail",children:"Your credit profile looks healthy with a few areas to strengthen over time."}),a.jsxs("p",{className:"fico-tier-note",children:["Tier context: ",l.label,". ",l.message]}),a.jsx("div",{className:"fico-luna-note",children:"Credit doesnt improve with hacks or panic decisions. Luna focuses on consistency, stability, and strategic moves that protect your progress and future opportunities."})]}),a.jsxs("section",{className:"fico-score-movers",children:[a.jsxs("div",{className:"fico-actions-header",children:[a.jsx("h3",{children:"Biggest score movers"}),a.jsx("p",{children:"Focus energy on the factors that shift scores most."})]}),a.jsx("div",{className:"fico-action-list",children:K_.map(o=>a.jsxs("article",{className:"fico-action-tip",children:[a.jsx("h4",{children:o.title}),a.jsx("p",{children:o.detail})]},o.title))})]}),a.jsxs("section",{className:"fico-history-grid",children:[a.jsxs("article",{className:"fico-history-card positive",children:[a.jsxs("header",{children:[a.jsx("h3",{children:"Positive history"}),a.jsx("p",{children:"Keep these strengths in place."})]}),a.jsx("ul",{children:q_.map(o=>a.jsxs("li",{children:[a.jsx("h4",{children:o.title}),a.jsx("p",{children:o.detail})]},o.title))})]}),a.jsxs("article",{className:"fico-history-card negative",children:[a.jsxs("header",{children:[a.jsx("h3",{children:"Areas to improve"}),a.jsx("p",{children:"Small adjustments grow over time."})]}),a.jsx("ul",{children:G_.map(o=>a.jsxs("li",{children:[a.jsx("h4",{children:o.title}),a.jsx("p",{children:o.detail})]},o.title))})]})]}),a.jsxs("section",{className:"fico-actions",children:[a.jsxs("div",{className:"fico-actions-header",children:[a.jsx("h3",{children:"Actions that move the needle"}),a.jsx("p",{children:"Track these healthy habits to keep your score trending upward."})]}),a.jsx("div",{className:"fico-action-list",children:F_.map(o=>a.jsxs("article",{className:"fico-action-tip",children:[a.jsx("h4",{children:o.title}),a.jsx("p",{children:o.detail})]},o.title))})]})]})]})},Q_=({onNavigate:n=()=>{},theme:s="light"})=>{const{profile:l}=Ft(),{preferences:o,setPremiumAccess:d}=xt(),[h,m]=f.useState(""),g=f.useMemo(()=>{const j=(l.subscriptionStatus||"").toLowerCase();return j?j==="active"||j==="trialing":o?.premiumAccess===!0},[l.subscriptionStatus,o?.premiumAccess]),v=()=>{typeof window<"u"&&window.location.assign("/billing")},y=()=>{d(!0),m("Premium is now active on this device.")};return a.jsxs("div",{className:`payment-options-page ${s==="dark"?"is-dark":""}`,children:[a.jsxs("header",{className:"payment-header",children:[a.jsx(St,{className:"top-controls",activePage:"payment-options",onNavigate:n,logoutHref:"/Local/BudgetIQ Login"}),a.jsxs("div",{className:"header-text",children:[a.jsx("div",{className:"title",children:"Subscription Controls"}),a.jsx("div",{className:"subtitle",children:"Manage your Premium subscription and billing details securely."})]})]}),a.jsxs("main",{className:"payment-main",children:[a.jsxs("section",{className:"payment-card payment-form-card payment-premium-card",children:[a.jsx("div",{className:"card-title-row",children:a.jsxs("div",{children:[a.jsx("h2",{children:g?"Premium is active":"Upgrade to Premium"}),a.jsx("p",{children:g?"You have access to advanced insights designed for freelancers and 1099 earners.":"Tools designed for freelancers and 1099 earners, built to keep your plan steady."})]})}),a.jsx("div",{className:"form-actions",children:a.jsx("button",{type:"button",className:"primary-btn purple-save-btn",onClick:g?v:y,children:g?"Manage":"Upgrade to Premium"})}),h&&a.jsx("p",{className:"payment-partner-note",children:h}),a.jsx("p",{className:"payment-partner-note",children:g?"Billing, payment security, and subscription changes are handled safely through our trusted billing partner.":"Billing and payments are securely handled by our trusted payment partner. You can cancel anytime."})]}),a.jsxs("section",{className:"payment-card payment-list-card",children:[a.jsx("div",{className:"card-title-row",children:a.jsxs("div",{children:[a.jsx("h2",{children:g?"Premium benefits":"Premium unlocks"}),a.jsx("p",{children:g?"These tools are active on your account.":"Upgrade to access these freelancer-focused tools and guidance."})]})}),a.jsxs("ul",{className:"premium-feature-list",children:[a.jsx("li",{children:"Quarterly tax reminders so you don't fall behind."}),a.jsx("li",{children:"Highlighted deductible spending on your dashboard."}),a.jsx("li",{children:"Custom tips tailored to freelancers and 1099 income."})]})]})]}),a.jsx("div",{className:"payment-helper helper-note",children:"Payments and Premium controls are synced with your billing silo only; the vault remains encrypted and separate. The advice on this page is a modeled insight about your tier, not personalized financial advice, and every billing or purge event is logged so compliance-ready records exist."})]})},J_=()=>a.jsxs("section",{className:"identity-badge identity-badge--calm",children:[a.jsxs("div",{className:"identity-badge__header",children:[a.jsx(Hd,{size:18}),a.jsx("span",{children:"Dual-Silo security enabled"})]}),a.jsx("p",{className:"identity-badge__description",children:"Billing identity and your financial vault stay in separate encrypted silos connected only by an anonymous Blind UUID. Even Luna cant match your name to your transaction history."}),a.jsxs("div",{className:"identity-badge__line",children:[a.jsxs("div",{className:"identity-badge__tag",children:[a.jsx(l_,{size:14}),a.jsx("span",{children:"Identity silo"})]}),a.jsx(c_,{size:14}),a.jsxs("div",{className:"identity-badge__tag",children:[a.jsx(Hd,{size:14}),a.jsx("span",{children:"Financial vault"})]})]})]}),W_=n=>{n instanceof Uint8Array||(n=new Uint8Array(n));const s=32768;let l="";for(let o=0;o<n.length;o+=s){const d=n.subarray(o,o+s);l+=String.fromCharCode(...d)}return window.btoa(l)},eM=()=>{if(typeof window>"u"||!window.crypto?.getRandomValues)return"";const n=window.crypto.getRandomValues(new Uint8Array(16));return W_(n)},qg="lunaCreateAccount",Gg="userIdentity",tM="moneyProfile",nM="lunaLoggedIn",Kg="lunaAccountEmails",qb="lunaAccounts",aM="Please choose a stronger password with at least 8 characters, a number, and a symbol.",sM={firstName:"",lastName:"",email:"",password:""},iM=(n="",s)=>{try{const l={incomes:[],expenses:[],savingsBalance:"",savingsMonthly:"",name:n},o=We(tM,s);localStorage.setItem(o,JSON.stringify(l));const d=["creditCards","debtCashForm","assetProfile","liveBudgetTransactions","goals","savedBudgetSplit","budgetMode","budgetBestLeftover"],h=m=>{localStorage.removeItem(m),s&&localStorage.removeItem(We(m,s))};d.forEach(h),Object.keys(localStorage).forEach(m=>{(m.startsWith("periodHistory_")||m.startsWith("periodHistoryIndex_")||m.startsWith("monthlyHistory_")||m==="monthlyHistoryIndex")&&localStorage.removeItem(m)})}catch{}try{localStorage.setItem("luna_us_consent","false")}catch{}},rM=n=>{if(!n)return!1;const s=/\d/.test(n),l=/[^A-Za-z0-9]/.test(n);return n.length>=8&&s&&l},gd=n=>String(n||"").trim().toLowerCase(),Fg=()=>{if(typeof window>"u")return{};try{const n=localStorage.getItem(qb);return n?JSON.parse(n):{}}catch{return{}}},lM=n=>{if(!(typeof window>"u"))try{localStorage.setItem(qb,JSON.stringify(n))}catch{}},oM=({onNavigate:n=()=>{}})=>{const[s,l]=f.useState(sM),[o,d]=f.useState(""),[h,m]=f.useState(!1),[g,v]=f.useState(!1),y=f.useRef(null),x=f.useMemo(()=>!s.email||!s.password||!s.firstName||!s.lastName||h,[s,h]),j=T=>{if(T.preventDefault(),x){d("Fill out all fields to continue.");return}if(!rM(s.password)){d(aM);return}if(typeof window>"u")return;const A=gd(s.email),E=Fg();if(A&&E[A]){d("That email is already in use on this device.");return}const z={...s,updatedAt:new Date().toISOString()};localStorage.setItem(qg,JSON.stringify(z));const Z=localStorage.getItem(Kg),D=Z?JSON.parse(Z):[],B=Array.isArray(D)?D:[];A&&!B.some(K=>gd(K)===A)&&localStorage.setItem(Kg,JSON.stringify([...B,A]));const R={firstName:s.firstName,middleInitial:"",lastName:s.lastName,street:"",city:"",state:"",zip:"",email:s.email,password:s.password,vaultSalt:eM(),vaultKdf:jr},W=fo(R.email);R.userId=W,localStorage.setItem(Gg,JSON.stringify(R)),localStorage.setItem(We(Gg,W),JSON.stringify(R)),localStorage.setItem(We(qg,W),JSON.stringify(z));const fe={...E,...A?{[A]:{userId:W,email:s.email,password:s.password,identity:R,vaultSalt:R.vaultSalt,vaultKdf:R.vaultKdf,updatedAt:new Date().toISOString()}}:{}};lM(fe),Lv(W),sessionStorage.setItem(nM,"true");const re=s.firstName?.trim()||"";iM(re,W),window.dispatchEvent(new Event("identity-updated")),window.dispatchEvent(new Event("profile-updated")),window.dispatchEvent(new Event("auth-updated")),d("Account details saved on this device."),n("snapshot-intro")},w=T=>A=>{const E=A.target.value;if(T==="email"){const z=gd(E),Z=Fg(),D=z&&!!Z[z];m(D),D&&y.current?y.current.setCustomValidity("That email is already in use."):y.current&&y.current.setCustomValidity("")}d(""),l(z=>({...z,[T]:E}))};return a.jsxs("div",{className:"create-account-page",children:[a.jsx("header",{className:"create-account-header",children:a.jsxs("div",{className:"header-text",children:[a.jsx("p",{className:"header-eyebrow",children:"Create account"}),a.jsx("h1",{children:"Calmly secure your workspace."}),a.jsx("p",{children:"This keeps your progress safe across devices."})]})}),a.jsx("main",{className:"create-account-main",children:a.jsxs("form",{className:"create-account-form",onSubmit:j,children:[a.jsx("p",{className:"form-intro",children:"Dual-silo security keeps your identity and your financial vault separated on this device."}),a.jsx(J_,{}),a.jsxs("label",{children:["First name",a.jsx("input",{type:"text",value:s.firstName,placeholder:"First name",onChange:w("firstName"),autoComplete:"given-name"})]}),a.jsxs("label",{children:["Last name",a.jsx("input",{type:"text",value:s.lastName,placeholder:"Last name",onChange:w("lastName"),autoComplete:"family-name"})]}),a.jsxs("label",{children:["Email",a.jsx("input",{type:"email",value:s.email,placeholder:"you@example.com",onChange:w("email"),autoComplete:"email",ref:y,required:!0})]}),a.jsxs("label",{children:["Password",a.jsxs("div",{className:"password-field",children:[a.jsx("input",{type:g?"text":"password",value:s.password,placeholder:"Create a secure password",onChange:w("password"),autoComplete:"new-password"}),a.jsx("button",{type:"button",className:"password-toggle",onClick:()=>v(T=>!T),"aria-label":g?"Hide password":"Show password",children:g?"Hide":"Show"})]})]}),a.jsx("div",{className:"create-account-actions",children:a.jsx("button",{className:`primary-btn purple-save-btn create-account-submit ${x?"btn-disabled":""}`,type:"submit","aria-disabled":x,children:"Create account"})}),a.jsx("button",{type:"button",className:"secondary-btn create-account-cancel create-account-cancel-inline",onClick:()=>n("login"),children:"Cancel"}),a.jsx("p",{className:"create-account-note",children:"You can always update your profile later."}),o&&a.jsx("div",{className:"form-status",children:o})]})})]})},ro="lunaCreateAccount",qa="userIdentity",vd="lunaStayLoggedIn",li="lunaLoggedIn",Xg="lunaAccounts",cM="lunaAccountEmails",uM=n=>{if(!n)return!1;const s=/\d/.test(n),l=/[^A-Za-z0-9]/.test(n);return n.length>=8&&s&&l},ms=n=>String(n||"").trim().toLowerCase(),dM=({onNavigate:n=()=>{}})=>{const[s,l]=f.useState({email:"",password:""}),[o,d]=f.useState(""),[h,m]=f.useState(!1),[g,v]=f.useState(!1),[y,x]=f.useState(!1),[j,w]=f.useState({email:"",newPassword:"",confirmPassword:""}),[T,A]=f.useState(""),[E,z]=f.useState(!1),[Z,D]=f.useState(!1),B=f.useRef(null),R=f.useRef(null),W=()=>{if(typeof window>"u")return{};try{const ne=localStorage.getItem(Xg);return ne?JSON.parse(ne):{}}catch{return{}}},fe=(ne,L)=>{if(typeof window>"u"||!ne)return;const C=ms(ne);if(C)try{const M=W(),G={...M,[C]:{...M[C]||{},...L}};localStorage.setItem(Xg,JSON.stringify(G))}catch{}},re=ne=>{const L=ms(ne);if(!L)return null;const C=W();if(C[L])return C[L];try{const M=localStorage.getItem(cM),F=((M?JSON.parse(M):[])||[]).find(he=>ms(he)===L);if(F){const he=fo(F),S=We(ro,he),P=localStorage.getItem(S)??localStorage.getItem(ro);if(P)return{...JSON.parse(P)??{},userId:he}}}catch{}return null},K=()=>{B.current&&B.current.setCustomValidity(""),R.current&&R.current.setCustomValidity("")},te=(ne,L)=>{ne&&(ne.setCustomValidity(L),ne.reportValidity())},xe=ne=>{if(ne.preventDefault(),K(),!s.email&&!s.password){te(B.current,"Enter your email."),te(R.current,"Enter your password.");return}if(!s.email){te(B.current,"Enter your email.");return}if(!s.password){te(R.current,"Enter your password.");return}try{const L=ms(s.email),C=re(L);if(!C){te(B.current,"No account data found. Create an account first.");return}const M=C.userId||fo(L);if(ms(C.email)!==L){te(B.current,"Email does not match.");return}if(C.password!==s.password){te(R.current,"Password does not match.");return}const G=localStorage.getItem(We(qa,M))??localStorage.getItem(qa),he={...G?JSON.parse(G):{},userId:M};localStorage.setItem(qa,JSON.stringify(he)),localStorage.setItem(We(qa,M),JSON.stringify(he)),Lv(M),h?(localStorage.setItem(vd,"true"),localStorage.setItem(li,"true"),sessionStorage.removeItem(li)):(localStorage.removeItem(vd),localStorage.removeItem(li),sessionStorage.setItem(li,"true")),window.dispatchEvent(new Event("auth-updated")),n("dashboard")}catch{te(B.current,"Unable to read saved account. Please refresh.")}},U=ne=>L=>{l(C=>({...C,[ne]:L.target.value})),K(),d("")},se=ne=>L=>{w(C=>({...C,[ne]:L.target.value})),A("")},k=ne=>{if(ne.preventDefault(),A(""),!j.email||!j.newPassword||!j.confirmPassword){A("Enter your email and new password.");return}if(j.newPassword!==j.confirmPassword){A("Passwords do not match.");return}if(!uM(j.newPassword)){A("Password must be at least 8 characters and include a number and a symbol.");return}try{const L=ms(j.email),C=re(L);if(!C){A("Account not found on this device.");return}const M=C.userId||fo(L);if(ms(C.email)!==L){A("Email does not match the saved account.");return}const G={...C,password:j.newPassword,updatedAt:new Date().toISOString()},F=localStorage.getItem(We(qa,M))??localStorage.getItem(qa),S={...F?JSON.parse(F):{},password:j.newPassword},P=We(ro,M);localStorage.setItem(P,JSON.stringify(G)),localStorage.setItem(ro,JSON.stringify(G)),localStorage.setItem(We(qa,M),JSON.stringify(S)),localStorage.setItem(qa,JSON.stringify(S)),fe(j.email,{...G,identity:S}),window.dispatchEvent(new Event("identity-updated")),x(!1),w({email:"",newPassword:"",confirmPassword:""}),d("Password updated. Please log in.")}catch{A("Unable to update password right now. Please try again.")}};return f.useEffect(()=>{try{const ne=localStorage.getItem(vd)==="true",L=localStorage.getItem(li)==="true"||sessionStorage.getItem(li)==="true";m(ne),ne&&L&&n("dashboard")}catch{}},[n]),f.useEffect(()=>{if(!(typeof document>"u"))return document.body.classList.toggle("modal-open",y),()=>document.body.classList.remove("modal-open")},[y]),a.jsxs("div",{className:"login-page",children:[a.jsx("header",{className:"login-header",children:a.jsxs("div",{className:"header-text",children:[a.jsx("p",{className:"header-eyebrow",children:"Welcome back"}),a.jsx("h1",{children:"Lets get you signed in."}),a.jsx("p",{children:"Log in to continue your plan."})]})}),a.jsx("main",{className:"login-main",children:a.jsxs("form",{className:"login-form",onSubmit:xe,children:[a.jsxs("label",{children:["Email",a.jsx("input",{type:"email",value:s.email,placeholder:"you@example.com",onChange:U("email"),autoComplete:"email",ref:B,required:!0})]}),a.jsxs("label",{children:["Password",a.jsxs("div",{className:"password-field",children:[a.jsx("input",{type:g?"text":"password",value:s.password,placeholder:"Password",onChange:U("password"),autoComplete:"current-password",ref:R,required:!0}),a.jsx("button",{type:"button",className:"password-toggle",onClick:()=>v(ne=>!ne),"aria-label":g?"Hide password":"Show password",children:g?"Hide":"Show"})]})]}),a.jsxs("label",{className:"login-remember",children:[a.jsx("input",{type:"checkbox",checked:h,onChange:ne=>m(ne.target.checked)}),a.jsx("span",{children:"Stay logged in"}),a.jsx("small",{children:"Stay signed in only on private devices."})]}),a.jsx("button",{className:"primary-btn purple-save-btn",type:"submit",children:"Log in"}),a.jsxs("div",{className:"login-link-group",children:[a.jsx("button",{type:"button",className:"link-btn",onClick:()=>x(!0),children:"Forgot password?"}),a.jsx("button",{type:"button",className:"link-btn",onClick:()=>n("create-account"),children:"Create account"})]}),o&&a.jsx("div",{className:"form-status",children:o})]})}),y&&a.jsx("div",{className:"login-modal-backdrop",role:"dialog","aria-modal":"true",children:a.jsxs("div",{className:"login-modal",children:[a.jsxs("div",{className:"login-modal-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:"Reset password"}),a.jsx("p",{children:"Confirm the email associated with the account so we can update the password."})]}),a.jsx("button",{type:"button",className:"login-modal-close",onClick:()=>x(!1),children:"Close"})]}),a.jsxs("form",{className:"login-modal-form",onSubmit:k,children:[a.jsxs("div",{className:"login-modal-body",children:[a.jsxs("label",{children:["Email",a.jsx("input",{type:"email",value:j.email,placeholder:"you@example.com",onChange:se("email"),autoComplete:"email",required:!0})]}),a.jsxs("label",{children:["New password",a.jsxs("div",{className:"password-field",children:[a.jsx("input",{type:E?"text":"password",value:j.newPassword,placeholder:"Create a secure password",onChange:se("newPassword"),autoComplete:"new-password",required:!0}),a.jsx("button",{type:"button",className:"password-toggle",onClick:()=>z(ne=>!ne),"aria-label":E?"Hide password":"Show password",children:E?"Hide":"Show"})]})]}),a.jsxs("label",{children:["Confirm password",a.jsxs("div",{className:"password-field",children:[a.jsx("input",{type:Z?"text":"password",value:j.confirmPassword,placeholder:"Re-enter password",onChange:se("confirmPassword"),autoComplete:"new-password",required:!0}),a.jsx("button",{type:"button",className:"password-toggle",onClick:()=>D(ne=>!ne),"aria-label":Z?"Hide password":"Show password",children:Z?"Hide":"Show"})]})]}),T&&a.jsx("div",{className:"form-status is-error",children:T})]}),a.jsxs("div",{className:"login-modal-actions",children:[a.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>x(!1),children:"Cancel"}),a.jsx("button",{className:"primary-btn purple-save-btn",type:"submit",children:"Update password"})]})]})]})})]})},hM=({onNavigate:n=()=>{}})=>a.jsxs("div",{className:"forgot-page",children:[a.jsx("header",{className:"forgot-header",children:a.jsxs("div",{className:"header-text",children:[a.jsx("h1",{children:"Forgot your password?"}),a.jsx("p",{children:"This app stores account details on this device only."})]})}),a.jsx("main",{className:"forgot-main",children:a.jsxs("div",{className:"forgot-card",children:[a.jsx("p",{children:"If you no longer remember your password, create a new account on this device. If you do remember it, head back to login."}),a.jsxs("div",{className:"forgot-actions",children:[a.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>n("login"),children:"Back to login"}),a.jsx("button",{type:"button",className:"primary-btn purple-save-btn",onClick:()=>n("create-account"),children:"Create new account"})]})]})})]}),mM=({onNavigate:n=()=>{}})=>a.jsxs("div",{className:"snapshot-intro-page",children:[a.jsxs("header",{className:"snapshot-intro-hero",children:[a.jsx("p",{className:"snapshot-intro-eyebrow",children:"Welcome"}),a.jsx("h1",{children:"Let's build your financial snapshot"}),a.jsx("p",{className:"snapshot-intro-subtitle",children:"We'll start by learning your real numbers so we can show your leftover, place you in the right tier, and build a plan that fits."})]}),a.jsx("main",{className:"snapshot-intro-body",children:a.jsxs("div",{className:"snapshot-intro-card",children:[a.jsx("h2",{children:"What this unlocks"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Your true leftover (whats really left after bills)"}),a.jsx("li",{children:"Your current tier and what it means"}),a.jsx("li",{children:"A payoff plan built around your reality"})]}),a.jsx("p",{className:"snapshot-intro-note",children:"This takes about 2-4 minutes. Accuracy beats perfection."}),a.jsx("button",{type:"button",className:"primary-btn purple-save-btn snapshot-intro-cta",onClick:()=>n("onboardingWelcome"),children:"Build my snapshot"})]})})]}),lo=n=>{const s=String(n??"").replace(/,/g,""),l=Number(s);return Number.isFinite(l)?l:0},fM=n=>{if(!n)return[];if(Array.isArray(n.manualDebts))return n.manualDebts;if(n.housingDebts||n.carDebts||n.personalDebts||n.studentBalance){const s=[];return(n.housingDebts||[]).forEach(l=>s.push({...l,type:"mortgage"})),(n.carDebts||[]).forEach(l=>s.push({...l,type:"auto"})),(n.personalDebts||[]).forEach(l=>s.push({...l,type:"personal"})),n.studentBalance&&s.push({balance:n.studentBalance,apr:n.studentApr,minPayment:n.studentDeferred?"0":n.studentMin,termMonths:n.studentTermMonths,type:"student"}),s}return Array.isArray(n)?n:[]},pM=(n=[])=>(n||[]).map((s,l)=>{const o=Math.max(0,lo(s.balance));return o?{id:s.id||`manual-${l}`,name:s.name||"Debt",balance:o,apr:Math.max(0,lo(s.apr)),minPayment:Math.max(0,lo(s.minPayment??s.min)),termMonths:lo(s.termMonths)||void 0}:null}).filter(Boolean),yM=n=>{if(!n)return null;const s=Math.max(0,Number(n.balance)||0),l=Math.max(0,Number(n.minPayment)||0);return s<=0&&!n.paid?null:{id:n.id||`card-${n.name||"unknown"}`,name:n.name||"Credit Card",balance:s,apr:Math.max(0,Number(n.apr)||0),minPayment:l}},gM=(n=[])=>(n||[]).map(yM).filter(Boolean),vM=()=>{const n=vs();return fM(n)},bM=()=>{try{const n=Nt("liveBudgetTransactions","[]"),s=JSON.parse(n);return Array.isArray(s)?s:[]}catch{return[]}},Qg=n=>n.length?n.reduce((s,l)=>{const o=l.endMonth||l.months||0;return Math.max(s,o)},0):null,xM=({onNavigate:n=()=>{}})=>{const{totals:s}=Ft(),{formatCurrency:l,preferences:o}=xt(),[d]=f.useState(()=>cn()),[h]=f.useState(()=>vM()),[m]=f.useState(()=>bM()),g=f.useMemo(()=>Gn(o,m),[o,m]),v=f.useMemo(()=>xi(g.mode),[g.mode,g.key]),y=f.useMemo(()=>So(g.key),[g.key,v.length]),j=(v.length?v[v.length-1]:null)===g.key?v[v.length-2]:v[v.length-1],w=f.useMemo(()=>j?So(j):null,[j]),T=f.useMemo(()=>ko(o,g.key,j),[o,g.key,j]),A=y&&typeof y.income=="number"?y.income>0:!1,E=y?.tier&&w?.tier&&y.tier!=="unknown"&&w.tier!=="unknown"&&y.tier!==w.tier,Z=f.useMemo(()=>qn({income:s.income,leftover:s.leftover}),[s.income,s.leftover]).currentStage,D=Z?.experience||"You're building your first clear snapshot.",B=Z?.focus||"Stay steady and keep refining your numbers.",R=f.useMemo(()=>{const re=gM(d),K=pM(h);return[...re,...K].filter(te=>Number(te.balance)>0)},[d,h]),W=f.useMemo(()=>{const re=Number(y?.snowballExtra),K=Number(w?.snowballExtra);if(!R.length||!Number.isFinite(re)||!Number.isFinite(K))return null;const te=Ga(R,re,0),xe=Ga(R,K,0),U=Qg(te),se=Qg(xe);if(!U||!se)return null;const k=se-U;return Math.abs(k)<1?{status:"steady",months:0}:{status:k>0?"saved":"extended",months:Math.abs(Math.round(k))}},[R,y?.snowballExtra,w?.snowballExtra]),fe=f.useMemo(()=>T>0?"Welcome back - this period starts fresh, and your numbers will update as you log activity.":A?E?"Your tier looks different from last month. We'll keep it updated as this month fills in.":"":"Estimates active - income not confirmed yet this period.",[T,A,E]);return a.jsxs("div",{className:"snapshot-result-page",children:[a.jsxs("header",{className:"snapshot-result-hero",children:[a.jsx("p",{className:"snapshot-result-eyebrow",children:"Your Snapshot"}),a.jsx("h1",{children:"Here's where you stand"}),a.jsx("p",{className:"snapshot-result-subtitle",children:"This snapshot reflects your raw numbers. Luna continuously models this data so the status stays accurate as you refine it."}),fe&&a.jsx("div",{className:"snapshot-result-note",children:fe})]}),a.jsxs("main",{className:"snapshot-result-body",children:[a.jsxs("section",{className:"snapshot-result-summary",children:[a.jsxs("div",{className:"snapshot-result-card",children:[a.jsx("span",{children:"Monthly income"}),a.jsx("strong",{children:l(s.income)})]}),a.jsxs("div",{className:"snapshot-result-card",children:[a.jsx("span",{children:"Monthly expenses"}),a.jsx("strong",{children:l(s.expenses)})]}),a.jsxs("div",{className:"snapshot-result-card",children:[a.jsx("span",{children:"Leftover each month"}),a.jsx("strong",{children:l(s.leftover)})]})]}),a.jsxs("section",{className:"snapshot-result-tier",children:[a.jsxs("h2",{children:["Current Tier: ",Z.label]}),a.jsx("p",{children:D}),a.jsxs("p",{className:"snapshot-result-helper",children:["System insight: Your tier is inferred from ",l(s.leftover)," leftover against ",l(s.expenses)," expensesit describes your current state, not a rule."]}),a.jsxs("div",{className:"snapshot-result-focus",children:[a.jsx("strong",{children:"What this status means"}),a.jsx("span",{children:B})]})]}),W&&a.jsxs("section",{className:"snapshot-result-time",children:[a.jsx("h2",{children:"Time impact"}),W.status==="saved"&&a.jsxs("p",{children:["Because your position improved, your payoff timeline shortens by about"," ",a.jsxs("strong",{children:[W.months," month",W.months===1?"":"s"]}),"."]}),W.status==="extended"&&a.jsxs("p",{children:["This month is tighter, so your payoff timeline stretches by about"," ",a.jsxs("strong",{children:[W.months," month",W.months===1?"":"s"]}),". Stabilizing your leftover brings that time down again."]}),W.status==="steady"&&a.jsx("p",{children:"Your payoff timeline is about the same as last month. Staying steady keeps you on track."})]}),a.jsxs("section",{className:"snapshot-result-next",children:[a.jsx("p",{children:"You can refine these numbers anytime. Your snapshot and plan update automatically as your income, expenses, or spending change."}),a.jsx("button",{type:"button",className:"primary-btn purple-save-btn snapshot-result-cta",onClick:()=>n("dashboard"),children:"Continue to dashboard"})]}),a.jsx("p",{className:"helper-note snapshot-disclaimer",children:"This page is a deterministic snapshot model of your data and is not individualized financial advice. Your billing identity (email/Stripe) stays in a separate silo from the encrypted vault, linked only by the blind UUID, and you hold the key. Every export, sync, and purge is logged so you can prove how data moved."})]})]})},jM="moneyProfile",Jg=n=>{if(n==null)return"";const s=String(n).replace(/[^0-9.]/g,""),l=s.split(".");return l.length>2?`${l[0]}.${l.slice(1).join("")}`:s},wM=n=>{const s=We(jM);it.set(s,n),window.dispatchEvent(new Event("profile-updated"))},NM=({onNavigate:n=()=>{}})=>{const{profile:s,refreshProfile:l}=Ft(),{formatCurrency:o}=xt(),[d,h]=f.useState({name:"",amount:""}),[m,g]=f.useState({name:"",amount:"",category:""}),[v,y]=f.useState(""),x=f.useMemo(()=>(s?.incomes||[]).reduce((se,k)=>se+Number(k.monthly??k.amount??0),0),[s]),j=f.useMemo(()=>(s?.expenses||[]).reduce((se,k)=>se+Number(k.monthly??k.amount??0),0),[s]),w=f.useMemo(()=>x-j,[x,j]),T=Number(s?.savingsBalance)||0,A=Number(j)||0,E=Math.max(A,1),z=Math.round(T/E*100||0),Z=Math.min(100,Math.max(0,z)),D=Math.min(1,Math.max(0,T/E)),B=f.useMemo(()=>vh(w,Z),[w,Z]),R=f.useMemo(()=>To({tier:B.level,bufferMonths:D,leftoverTrend:w>=0?1:-1,driftFlag:!1,improvements:!1,timeInTierDays:0}),[B.level,D,w]),W=T>0?"Room for life to happen":"No emergency buffer yet",fe=U=>{wM(U),l(),y("Numbers updated.")},re=()=>{const U=Number(d.amount);if(!d.name.trim()||!Number.isFinite(U)||U<0){y("Enter a name and positive amount for the income source.");return}const se={...s,incomes:[...s?.incomes||[],{id:Date.now(),name:d.name.trim(),amount:U,category:"Income"}]};fe(se),h({name:"",amount:""})},K=()=>{const U=Number(m.amount);if(!m.name.trim()||!Number.isFinite(U)||U<0){y("Enter a name and positive amount for the expense.");return}const se={...s,expenses:[...s?.expenses||[],{id:Date.now(),name:m.name.trim(),amount:U,category:m.category.trim()||"Expense"}]};fe(se),g({name:"",amount:"",category:""})},te=(U,se)=>{if(U==="income"){const ne=(s?.incomes||[]).filter(L=>L.id!==se);fe({...s,incomes:ne});return}const k=(s?.expenses||[]).filter(ne=>ne.id!==se);fe({...s,expenses:k})},xe=!!((s?.incomes?.length||0)+(s?.expenses?.length||0));return a.jsxs("div",{className:"refine-page",children:[a.jsx("div",{className:"refine-top-controls",children:a.jsx(St,{activePage:"refine",onNavigate:n})}),a.jsxs("header",{className:"refine-hero",children:[a.jsxs("div",{children:[a.jsx("p",{className:"refine-eyebrow",children:"Refine your numbers"}),a.jsx("h1",{children:"Adjust income, expenses, and leftover anytime."}),a.jsx("p",{className:"refine-subtitle",children:"This optional board keeps your financial story accurate. Save confidentlythe dashboard updates everywhere."})]}),a.jsx("button",{type:"button",className:"ghost-btn",onClick:()=>n("dashboard"),children:"Back to dashboard"})]}),a.jsxs("section",{className:"refine-summary",children:[a.jsxs("article",{children:[a.jsx("span",{children:"Monthly income"}),a.jsx("strong",{children:o(x)})]}),a.jsxs("article",{children:[a.jsx("span",{children:"Monthly expenses"}),a.jsx("strong",{children:o(j)})]}),a.jsxs("article",{children:[a.jsx("span",{children:"Leftover"}),a.jsx("strong",{children:o(w)})]})]}),a.jsxs("section",{className:"refine-guidance-card",children:[a.jsx("p",{className:"refine-guidance-eyebrow",children:R.eyebrow}),a.jsx("h2",{className:`refine-guidance-title refine-guidance-title--${R.tone}`,children:R.title}),a.jsx("p",{className:"refine-guidance-body",children:R.body})]}),a.jsx("p",{className:"refine-snapshot-note",children:"Every tweak here keeps the dashboard aligned so your cushion story stays honest and calm."}),a.jsxs("section",{className:"refine-insight",children:[a.jsxs("div",{children:[a.jsx("p",{className:"refine-insight-eyebrow",children:"Safety cushion"}),a.jsx("strong",{children:o(T)}),a.jsx("p",{className:"refine-insight-subline",children:W}),a.jsxs("span",{className:"refine-insight-meta",children:[Z,"% of one month of expenses"]})]}),a.jsx("div",{className:"refine-insight-meter","aria-label":`Buffer at ${Z}% of ${o(E)}`,children:a.jsx("span",{className:"refine-insight-fill",style:{width:`${Z}%`}})}),a.jsx("p",{className:"refine-insight-copy",children:T>0?"Keep pouring into this cushion so little shocks stay calm.":"Start with $25-$100 per period; momentum stacks up when habits stay steady."})]}),a.jsxs("section",{className:"refine-grid",children:[a.jsxs("div",{className:"refine-card",children:[a.jsx("div",{className:"card-heading",children:a.jsxs("div",{children:[a.jsx("h2",{children:"Income sources"}),a.jsx("p",{children:"Add or remove everything that lands here."})]})}),a.jsxs("div",{className:"refine-form",children:[a.jsxs("label",{children:["Name",a.jsx("input",{type:"text",value:d.name,onChange:U=>h(se=>({...se,name:U.target.value})),placeholder:"Salary, side hustle, child support..."})]}),a.jsxs("label",{children:["Monthly amount",a.jsx("input",{type:"text",value:d.amount,onChange:U=>h(se=>({...se,amount:Jg(U.target.value)})),placeholder:"0"})]}),a.jsx("button",{type:"button",className:"primary-btn purple-save-btn",onClick:re,children:"Add income"})]}),a.jsx("div",{className:"refine-list",children:xe&&s?.incomes?.length?s.incomes.map(U=>a.jsxs("div",{className:"refine-list-row",children:[a.jsxs("div",{children:[a.jsx("strong",{children:U.name}),a.jsx("p",{children:o(U.amount??U.monthly??0)})]}),a.jsx("button",{className:"ghost-btn danger",type:"button",onClick:()=>te("income",U.id),children:"Remove"})]},U.id)):a.jsx("p",{className:"refine-empty",children:"No income sources yet."})})]}),a.jsxs("div",{className:"refine-card",children:[a.jsx("div",{className:"card-heading",children:a.jsxs("div",{children:[a.jsx("h2",{children:"Expenses"}),a.jsx("p",{children:"Track anything you pay each month."})]})}),a.jsxs("div",{className:"refine-form",children:[a.jsxs("label",{children:["Name",a.jsx("input",{type:"text",value:m.name,onChange:U=>g(se=>({...se,name:U.target.value})),placeholder:"Housing, utilities, groceries..."})]}),a.jsxs("label",{children:["Monthly amount",a.jsx("input",{type:"text",value:m.amount,onChange:U=>g(se=>({...se,amount:Jg(U.target.value)})),placeholder:"0"})]}),a.jsxs("label",{children:["Category",a.jsx("input",{type:"text",value:m.category,onChange:U=>g(se=>({...se,category:U.target.value})),placeholder:"Housing, utilities, etc."})]}),a.jsx("button",{type:"button",className:"primary-btn purple-save-btn",onClick:K,children:"Add expense"})]}),a.jsx("div",{className:"refine-list",children:xe&&s?.expenses?.length?s.expenses.map(U=>a.jsxs("div",{className:"refine-list-row",children:[a.jsxs("div",{children:[a.jsx("strong",{children:U.name}),a.jsx("p",{children:o(U.amount??U.monthly??0)})]}),a.jsx("button",{className:"ghost-btn danger",type:"button",onClick:()=>te("expense",U.id),children:"Remove"})]},U.id)):a.jsx("p",{className:"refine-empty",children:"No expense entries yet."})})]})]}),v&&a.jsx("div",{className:"refine-status",children:v})]})},SM=({message:n})=>n?a.jsx("div",{className:"audit-toast",children:a.jsx("span",{children:n})}):null,EM="liveBudgetTransactions",TM="userIdentity",CM="https://luna.app/verify",AM=()=>{try{const n=Nt(EM,"[]"),s=JSON.parse(n);return Array.isArray(s)?s:[]}catch{return[]}},_M=()=>{if(typeof window>"u")return{};try{const n=localStorage.getItem(TM);return n?JSON.parse(n):{}}catch{return{}}},Wg=n=>(n?.incomeType||"personal")==="business",ev=n=>(n?.expenseType||"personal")==="business",MM=n=>Math.floor(n.getMonth()/3)+1,kM=(n,s,l)=>{const o=(s-1)*3,d=o+2;return l.getFullYear()!==n?3:l.getMonth()<o?0:l.getMonth()>d?3:l.getMonth()-o+1},DM=({onNavigate:n=()=>{},theme:s="light"})=>{const{profile:l}=Ft(),{preferences:o,formatCurrency:d}=xt(),h=o.premiumAccess&&o.businessFeatures,[m,g]=ci.useState(""),[v,y]=ci.useState(null),[x,j]=ci.useState(!1),w=f.useMemo(()=>AM(),[]),T=f.useMemo(()=>_M(),[]),A=f.useCallback(async({format:J,exportId:ye,hash:Ne})=>{if(!J||!ye||!Ne)return;const Se={format:String(J).toUpperCase(),exportId:ye,hash:Ne,statement:"By generating this export I confirm the business information is accurate to the best of my knowledge and authorize Luna to store this acknowledgement as proof.",confirmedAt:new Date().toISOString()},Pe={"Content-Type":"application/json"};T?.id&&(Pe["x-user-id"]=T.id);const Ie=await fetch(Fa("/api/user/export-verification"),{method:"POST",headers:Pe,body:JSON.stringify(Se),credentials:"include"});if(!Ie.ok){const $e=await Ie.text().catch(()=>"");throw new Error($e||"Unable to record export verification acknowledgement.")}return Ie.json().catch(()=>null)},[T?.id]),E=new Date,z=E.getFullYear(),Z=E.toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"}),B=(J=>{const ye=(J||"").trim();return ye&&ye.replace(/[^\p{L}\d .'-]+/gu,"").trim()||"User"})(`${T.firstName||""} ${T.lastName||""}`)||"User",R=(T.businessName||"").trim(),W=B,fe=ci.useMemo(()=>v?new Date:null,[v]),re=fe?fe.toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"UTC"}):"",K=`${W}  ${re} UTC`;ci.useEffect(()=>{if(!v||typeof document>"u")return;const J=document.body.style.overflow;return document.body.style.overflow="hidden",j(!1),()=>{document.body.style.overflow=J||""}},[v]);const te=new Date(z,0,1),xe=new Date(z+1,0,1),U=E.getMonth()+1,se=f.useMemo(()=>(l.incomes||[]).filter(J=>Wg(J)&&!J.linkedTxnId),[l.incomes]),k=f.useMemo(()=>(l.expenses||[]).filter(J=>ev(J)&&!J.linkedTxnId),[l.expenses]),ne=f.useMemo(()=>w.filter(J=>{const ye=new Date(J.date||Date.now());return Number.isNaN(ye.getTime())||ye<te||ye>=xe?!1:J.type==="income"?Wg(J):ev(J)}),[w,te,xe]),L=f.useMemo(()=>{const J=ne.filter($e=>$e.type==="income").reduce(($e,Be)=>$e+(Number(Be.amount)||0),0),ye=ne.filter($e=>$e.type==="expense").reduce(($e,Be)=>$e+(Number(Be.amount)||0),0),Ne=se.reduce(($e,Be)=>$e+(Number(Be.monthly??Be.amount??0)||0)*U,0),Se=k.reduce(($e,Be)=>$e+(Number(Be.monthly??Be.amount??0)||0)*U,0),Pe=J+Ne,Ie=ye+Se;return{income:Pe,expenses:Ie,net:Pe-Ie}},[ne,se,k,U]),C=f.useMemo(()=>{const J=new Map;return k.forEach(ye=>{const Ne=ye.category||ye.name||"Other",Se=(Number(ye.monthly??ye.amount??0)||0)*U;J.set(Ne,(J.get(Ne)||0)+Se)}),ne.filter(ye=>ye.type==="expense").forEach(ye=>{const Ne=ye.category||ye.note||"Other";J.set(Ne,(J.get(Ne)||0)+(Number(ye.amount)||0))}),Array.from(J.entries()).map(([ye,Ne])=>({label:ye,value:Ne})).sort((ye,Ne)=>Ne.value-ye.value)},[k,ne,U]),M=f.useMemo(()=>{const J={Q1:{income:0,expenses:0},Q2:{income:0,expenses:0},Q3:{income:0,expenses:0},Q4:{income:0,expenses:0}};return ne.forEach(ye=>{const Ne=new Date(ye.date||Date.now()),Se=`Q${MM(Ne)}`;J[Se]&&(ye.type==="income"?J[Se].income+=Number(ye.amount)||0:J[Se].expenses+=Number(ye.amount)||0)}),[1,2,3,4].forEach(ye=>{const Ne=kM(z,ye,E);if(Ne<=0)return;const Se=`Q${ye}`,Pe=se.reduce(($e,Be)=>$e+(Number(Be.monthly??Be.amount??0)||0)*Ne,0),Ie=k.reduce(($e,Be)=>$e+(Number(Be.monthly??Be.amount??0)||0)*Ne,0);J[Se].income+=Pe,J[Se].expenses+=Ie}),J},[ne,se,k,z,E]),G=async J=>{if(typeof window>"u"||!window.crypto?.subtle)return"unavailable";const ye=new TextEncoder().encode(J),Ne=await window.crypto.subtle.digest("SHA-256",ye);return Array.from(new Uint8Array(Ne)).map(Se=>Se.toString(16).padStart(2,"0")).join("")},F=()=>{if(typeof window<"u"&&window.crypto?.randomUUID)return window.crypto.randomUUID();const J=Array.from({length:32},()=>Math.floor(Math.random()*16).toString(16)).join("");return`${J.slice(0,8)}-${J.slice(8,12)}-${J.slice(12,16)}-${J.slice(16,20)}-${J.slice(20)}`},he=J=>["SYSTEM INTEGRITY ATTESTATION","Product: Luna Financial OS",`Export ID: ${J}`,"Scope: Business Ledger [B-SILO]","Export Format Version: 1.0","Certification Template: v1.0","","Technical Attestation:","  This document is a deterministic system export of recorded business transactions.","  Identity Isolation ensures personal data from the [P-SILO] is cryptographically excluded.","","Tax Disclosure (Circular 230):","  This report is provided for diagnostic and informational purposes only.","  In accordance with U.S. Treasury Circular 230, this data is not intended to be","  used to avoid tax-related penalties under the Internal Revenue Code, or to","  promote, market, or recommend a product to another party.","  Final characterization and compliance remain the responsibility of the User and their","  qualified tax professional.","","Methodology & No-Fiduciary Notice:","  Where projections are used elsewhere in Luna, certain analyses may reference recent","  90-day activity trends, but this export reflects actual transactions for the period shown.","  Luna is not a fiduciary and does not provide individualized investment or tax advice.",""],S="Luna Financial OS -- Deterministic Export",P=()=>{const J=new Date().toISOString().replace("T"," ").replace("Z"," UTC");return`${S} | Generated: ${J} | Page 1`},pe=(J,{isCsv:ye=!1}={})=>{const Ne=ye?"# ":"";return["",`${Ne}${P()}`,`${Ne}This export is produced directly from recorded system state. No manual edits applied.`,`${Ne}Verify this hash at ${CM} to ensure document immutability.`,`${Ne}Generated by Luna Financial OS. Subject to Terms of Service (docs/terms-of-service.md).`,`${Ne}Integrity Hash (SHA-256): ${J}`]},ue=(J,ye)=>pe(J,ye).map(Ne=>["",Ne]),we=J=>J.map(ye=>ye.map(Ne=>{if(Ne==null)return"";const Se=String(Ne);return Se.includes(",")||Se.includes('"')||Se.includes(`
`)?`"${Se.replace(/"/g,'""')}"`:Se}).join(",")).join(`
`),ve=async()=>{const J=F(),ye=he(J).map(Ee=>[Ee]),Ne=[["Section","Label","Amount"],["Summary","Total business income",L.income],["Summary","Total business expenses",L.expenses],["Summary","Net business income",L.net],[],["Categories","Category","Total"],...C.map(Ee=>["Categories",Ee.label,Ee.value]),[],["Quarter","Quarter","Income"],...Object.entries(M).map(([Ee,mt])=>["Quarter",Ee,mt.income]),["Quarter","Quarter","Expenses"],...Object.entries(M).map(([Ee,mt])=>["Quarter",Ee,mt.expenses])],Se=[...ye,[],...Ne],Pe=we(Se),Ie=await G(Pe),$e=[...Se,[],...ue(Ie,{isCsv:!0})],Be=we($e);let tt="[VERIFICATION]: Export acknowledgement pending.";try{await A({format:"CSV",exportId:J,hash:Ie}),tt="[VERIFICATION]: Confirmation saved to your profile."}catch(Ee){console.error("Export verification failed",Ee),tt=`[VERIFICATION]: Unable to record acknowledgement (${Ee.message||"unknown error"}).`}const nt=new Blob([Be],{type:"text/csv;charset=utf-8;"}),le=URL.createObjectURL(nt),Te=document.createElement("a");Te.href=le,Te.download=`luna-tax-summary-${z}.csv`,Te.click(),URL.revokeObjectURL(le),g(`[SYSTEM_LOG]: [EXPORT_EVENT] triggered. [SECURITY]: Integrity Hash ${Ie.slice(0,8)} generated and appended. [COMPLIANCE]: Circular 230 and Section 1033 disclosures verified. Status: Secure Export Ready. ${tt}`)},ke=J=>String(J||"").replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)"),Ze=J=>{const Ie=Math.floor(49.714285714285715),$e=J.slice(0,Ie);let Be=744;const nt=`BT
/F1 12 Tf
${$e.map(_e=>{const Ge=ke(_e),Ke=`1 0 0 1 48 ${Be} Tm (${Ge}) Tj`;return Be-=14,Ke}).join(`
`)}
ET`,le=nt.length,Te=[],Ee=_e=>(Te.push(_e),Te.length),mt=Ee("<< /Type /Font /Subtype /Type1 /BaseFont /Helvetica >>"),gt=Ee(`<< /Length ${le} >>
stream
${nt}
endstream`),ft=Ee(`<< /Type /Page /Parent 4 0 R /MediaBox [0 0 612 792] /Resources << /Font << /F1 ${mt} 0 R >> >> /Contents ${gt} 0 R >>`),de=Ee(`<< /Type /Pages /Kids [${ft} 0 R] /Count 1 >>`),ze=Ee(`<< /Type /Catalog /Pages ${de} 0 R >>`);let N=0;const q=[];q.push(`%PDF-1.4
`),N+=q[0].length;const je=[];Te.forEach((_e,Ge)=>{je.push(N);const Ke=`${Ge+1} 0 obj
${_e}
endobj
`;q.push(Ke),N+=Ke.length});const Ae=N;return q.push(`xref
0 ${Te.length+1}
`),q.push(`0000000000 65535 f 
`),je.forEach(_e=>{q.push(`${String(_e).padStart(10,"0")} 00000 n 
`)}),q.push(`trailer
<< /Size ${Te.length+1} /Root ${ze} 0 R >>
startxref
${Ae}
%%EOF`),new Blob(q,{type:"application/pdf"})},me=async()=>{const J=F(),ye=he(J),Ne=["Business Toolkit",`Tax summary for ${z}`,`Generated on: ${Z}`,`Prepared for: ${B}`,...R?[`Business name: ${R}`]:[],`Reporting period: Jan 1, ${z} - Dec 31, ${z}`,"",`Total business income: ${d(L.income)}`,`Total business expenses: ${d(L.expenses)}`,`Net business income: ${d(L.net)}`,"","Expense categories",...C.length?C.map(Te=>`${Te.label}: ${d(Te.value)}`):["No business expenses tracked yet."],"","Quarterly breakdown",...Object.entries(M).map(([Te,Ee])=>`${Te} - Income ${d(Ee.income)} | Expenses ${d(Ee.expenses)}`),"","This summary is built from your business transactions and recurring entries.","For informational purposes only. Not tax advice."],Se=[...ye,"",...Ne],Pe=Se.join(`
`),Ie=await G(Pe),$e=[...Se,...pe(Ie)];let Be="[VERIFICATION]: Export acknowledgement pending.";try{await A({format:"PDF",exportId:J,hash:Ie}),Be="[VERIFICATION]: Confirmation saved to your profile."}catch(Te){console.error("Export verification failed",Te),Be=`[VERIFICATION]: Unable to record acknowledgement (${Te.message||"unknown error"}).`}const tt=Ze($e),nt=URL.createObjectURL(tt),le=document.createElement("a");le.href=nt,le.download=`luna-tax-summary-${z}.pdf`,le.click(),URL.revokeObjectURL(nt),g(`[SYSTEM_LOG]: [EXPORT_EVENT] triggered. [SECURITY]: Integrity Hash ${Ie.slice(0,8)} generated and appended. [COMPLIANCE]: Circular 230 and Section 1033 disclosures verified. Status: Secure Export Ready. ${Be}`)},Q=()=>{y(null)},be=()=>{if(!v)return;const J=v;y(null),J==="pdf"?me():J==="csv"&&ve()};return h?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`business-tools-page ${s==="dark"?"is-dark":""}`,children:[a.jsxs("header",{className:"business-tools-header",children:[a.jsx(St,{className:"top-controls",activePage:"business-tools",onNavigate:n,logoutHref:"/Local/BudgetIQ Login"}),a.jsxs("div",{className:"header-text",children:[a.jsx("div",{className:"title",children:"Business Toolkit"}),a.jsx("div",{className:"subtitle",children:"Clear, tax-ready business recordsorganized calmly, without pressure."}),a.jsx("div",{className:"subtitle-meta",children:"Tools built to help self-employed and business users stay organized, confident, and tax-ready."})]})]}),a.jsx(_r,{role:"PROVE",why:"These summaries help you keep business finances honest, tax-ready, and easy to prove so you can run your business with confidence and peace of mind.",reassurance:"Luna helps you stay organized without pressureclarity replaces stress, and your records stay ready when you need them."}),a.jsxs("main",{className:"business-tools-main",children:[a.jsxs("section",{className:"business-tools-card",children:[a.jsx("h2",{children:"Generate Tax Summary"}),a.jsxs("p",{children:["Create a tax-ready summary with total business income, expenses, net income, category totals, and quarterly breakdowns for ",z,"."]}),a.jsxs("div",{className:"business-tools-actions",children:[a.jsx("button",{type:"button",className:"primary-btn purple-save-btn",onClick:()=>y("pdf"),children:"Generate PDF Summary"}),a.jsx("button",{type:"button",className:"secondary-btn business-small-btn",onClick:()=>y("csv"),children:"Export CSV Data"})]}),a.jsx(SM,{message:m})]}),a.jsxs("section",{className:"business-tools-card",children:[a.jsx("h2",{children:"Business Summary"}),a.jsxs("div",{className:"business-summary-grid",children:[a.jsxs("div",{children:[a.jsx("span",{children:"Total business income"}),a.jsx("strong",{children:d(L.income)})]}),a.jsxs("div",{children:[a.jsx("span",{children:"Total business expenses"}),a.jsx("strong",{children:d(L.expenses)})]}),a.jsxs("div",{children:[a.jsx("span",{children:"Net business income"}),a.jsx("strong",{children:d(L.net)})]})]})]}),a.jsxs("section",{className:"business-tools-card",children:[a.jsx("h2",{children:"Expense Categories"}),C.length===0?a.jsx("div",{className:"business-empty",children:"No business expenses tracked yet. Add transactions to see your deductible spending by category."}):a.jsx("div",{className:"business-category-list",children:C.map(J=>a.jsxs("div",{className:"business-category-row",children:[a.jsx("span",{children:J.label}),a.jsx("strong",{children:d(J.value)})]},J.label))})]}),a.jsxs("section",{className:"business-tools-card",children:[a.jsx("h2",{children:"Quarterly Breakdown"}),a.jsx("div",{className:"business-quarter-grid",children:Object.entries(M).map(([J,ye])=>a.jsxs("div",{className:"business-quarter-card",children:[a.jsx("div",{className:"quarter-title",children:J}),a.jsxs("div",{children:[a.jsx("span",{children:"Income"}),a.jsx("strong",{children:d(ye.income)})]}),a.jsxs("div",{children:[a.jsx("span",{children:"Expenses"}),a.jsx("strong",{children:d(ye.expenses)})]})]},J))})]})]})]}),v&&a.jsx("div",{className:"export-verification-overlay",role:"dialog","aria-modal":"true","aria-label":"Export verification acknowledgement",children:a.jsxs("div",{className:"export-verification-panel",children:[a.jsx("h3",{children:"Verify before exporting"}),a.jsxs("p",{children:["By generating this ",v==="pdf"?"PDF summary":"CSV export",", you confirm the business income and expense data in this report is, to the best of your knowledge, accurate for the selected reporting period, that you are authorized to act on behalf of this business, and that Luna may store this acknowledgement with a timestamp for audit and reference purposes."]}),a.jsxs("ul",{className:"export-verification-list",children:[a.jsx("li",{children:"Numbers reflect recorded transactions and recurring entries during the selected period."}),a.jsx("li",{children:"You confirm you have authority to attest on behalf of the business."}),a.jsx("li",{children:"Luna will securely store this acknowledgement (user, business, date, time) with your profile as proof of verification."})]}),a.jsxs("label",{className:"export-verification-checkbox",children:[a.jsx("input",{type:"checkbox",checked:x,onChange:J=>j(J.target.checked)}),a.jsx("span",{children:"I acknowledge these statements and agree to proceed."})]}),a.jsx("p",{className:"export-verification-note",children:"These exports help you stay organized and prepared. For tax filing decisions, always confirm with your CPA or advisor."}),a.jsxs("div",{className:"export-verification-actions",children:[a.jsxs("button",{type:"button",className:"primary-btn purple-save-btn",onClick:be,disabled:!x,children:["I agree and generate ",v==="pdf"?"PDF":"CSV"]}),a.jsx("button",{type:"button",className:"secondary-btn business-small-btn",onClick:Q,children:"Cancel"})]}),a.jsx("div",{className:"export-verification-preview",children:K&&a.jsxs("span",{children:["Verification will be recorded as: ",K]})}),a.jsx("div",{className:"export-verification-trust",children:"Stored securely. Never shared unless you explicitly choose to export this document."})]})})]}):a.jsxs("div",{className:`business-tools-page ${s==="dark"?"is-dark":""}`,children:[a.jsxs("header",{className:"business-tools-header",children:[a.jsx(St,{className:"top-controls",activePage:"business-tools",onNavigate:n,logoutHref:"/Local/BudgetIQ Login"}),a.jsxs("div",{className:"header-text",children:[a.jsx("div",{className:"title",children:"Business Toolkit"}),a.jsx("div",{className:"subtitle",children:"Turn on Premium and Business Toolkit to unlock these tools."})]})]}),a.jsx("main",{className:"business-tools-main",children:a.jsxs("div",{className:"business-tools-card",children:[a.jsx("h2",{children:"Business tools are locked"}),a.jsx("p",{children:"Enable Premium and Business Toolkit to generate your tax summary."}),a.jsx("button",{type:"button",className:"primary-btn purple-save-btn",onClick:()=>n("settings"),children:"Go to Settings"})]})})]})},LM=({onNavigate:n=()=>{},theme:s="light"})=>a.jsxs("div",{className:`budget-period-guide-page ${s==="dark"?"is-dark":""}`,children:[a.jsxs("header",{className:"budget-period-guide-header",children:[a.jsx(St,{className:"top-controls",activePage:"settings",onNavigate:n,logoutHref:"/Local/BudgetIQ Login"}),a.jsxs("div",{className:"budget-period-guide-hero",children:[a.jsx("div",{className:"eyebrow",children:"Budget period"}),a.jsx("h1",{children:"How your budget period works"}),a.jsx("p",{children:'Your budget period defines the window used to track live performance. It changes what counts as "this period" without changing your baseline income, expenses, or debts.'})]})]}),a.jsxs("main",{className:"budget-period-guide-main",children:[a.jsxs("section",{className:"guide-card",children:[a.jsx("h2",{children:"What is a budget period?"}),a.jsx("p",{children:"Think of it as the scoreboard window for your live budget. When the period resets, the live totals reset. Your baseline plan stays the same."}),a.jsxs("ul",{children:[a.jsx("li",{children:"Live totals reset when the period rolls over."}),a.jsx("li",{children:"Baseline income and expenses stay unchanged."}),a.jsx("li",{children:"Debt balances and payoff timelines stay unchanged."})]})]}),a.jsxs("section",{className:"guide-card",children:[a.jsx("h2",{children:"What resets vs. what stays"}),a.jsx("p",{children:"Your history is always saved. Resetting a period never deletes your past data."}),a.jsxs("div",{className:"guide-split",children:[a.jsxs("div",{children:[a.jsx("h3",{children:"Resets each period"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Live income total."}),a.jsx("li",{children:"Live expense total."}),a.jsx("li",{children:"Live leftover."}),a.jsx("li",{children:"Period alerts & activity tracking."})]})]}),a.jsxs("div",{children:[a.jsx("h3",{children:"Stays the same"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Your baseline income and expense entries."}),a.jsx("li",{children:"Your debt list and payoff plan settings."}),a.jsx("li",{children:"Profile and subscription details."})]})]})]})]}),a.jsxs("section",{className:"guide-card",children:[a.jsx("h2",{children:"Period types in plain language"}),a.jsxs("div",{className:"guide-grid",children:[a.jsxs("div",{className:"guide-mini-card",children:[a.jsx("h4",{children:"Calendar month"}),a.jsx("p",{children:"Runs from the 1st through the last day of the month."})]}),a.jsxs("div",{className:"guide-mini-card",children:[a.jsx("h4",{children:"Weekly"}),a.jsx("p",{children:"Every 7 days starting from your chosen anchor date."})]}),a.jsxs("div",{className:"guide-mini-card",children:[a.jsx("h4",{children:"Biweekly"}),a.jsx("p",{children:"Every 14 days, good for biweekly pay cycles."})]}),a.jsxs("div",{className:"guide-mini-card",children:[a.jsx("h4",{children:"4-week cycle"}),a.jsx("p",{children:"Every 28 days, keeps weeks aligned month to month."})]}),a.jsxs("div",{className:"guide-mini-card",children:[a.jsx("h4",{children:"Paycheck-based"}),a.jsx("p",{children:"Resets when you log a new income entry."})]}),a.jsxs("div",{className:"guide-mini-card",children:[a.jsx("h4",{children:"Custom start day"}),a.jsx("p",{children:"Pick a day of the month to start your cycle."})]})]})]}),a.jsxs("section",{className:"guide-card",children:[a.jsx("h2",{children:"What happens when a new period starts?"}),a.jsx("p",{children:"Live totals reset, and the dashboard focuses on fresh activity. If no new income or transactions are logged, the app shows estimates from your baseline until activity comes in."}),a.jsxs("div",{className:"guide-callout",children:[a.jsx("strong",{children:"Tip:"})," If you use paycheck mode, log your income as soon as it hits. That confirms the period and updates your live numbers right away."]})]}),a.jsxs("section",{className:"guide-card",children:[a.jsx("h2",{children:"Quick example"}),a.jsxs("div",{className:"guide-timeline",children:[a.jsxs("div",{children:[a.jsx("span",{className:"guide-bullet",children:"Week 1"}),a.jsx("p",{children:"You log a paycheck and a few expenses. Live totals show your real leftover."})]}),a.jsxs("div",{children:[a.jsx("span",{className:"guide-bullet",children:"Week 2"}),a.jsx("p",{children:"More spending rolls in. Live totals update inside the same period."})]}),a.jsxs("div",{children:[a.jsx("span",{className:"guide-bullet",children:"New period"}),a.jsx("p",{children:"Live totals reset, baseline stays the same, and the new cycle begins."})]})]}),a.jsx("p",{className:"guide-note",children:"The goal of budget periods is to help your numbers reflect real life, not trap you in rigid months or unrealistic tracking."})]}),a.jsx("div",{className:"guide-footer",children:a.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>n("settings"),children:"Back to settings"})})]})]}),OM=[{title:"Daily Money",items:[{title:"Live Budget",description:"Your financial dashboard. Track spending and watch your leftover grow in real time.",route:"livebudget"},{title:"Budget",description:"Review your baseline budget plan and the big-picture numbers that guide it.",route:"budget"},{title:"Money Map",description:"The 3-way split. See exactly how much to spend, save, and put toward your future.",route:"split-gps"}]},{title:"Debt Strategy",items:[{title:"Loans & Payments",description:"Track all debts in one place and see your payoff order and timeline.",route:"total-debt"},{title:"Payoff Strategy",description:"Understand how the payoff plan works and what to pay each month.",route:"snowball-explainer"},{title:"Credit Card Payoff",description:"Dive deeper into credit card balances and payoff guidance.",route:"credit-payoff"}]},{title:"Goals & Savings",items:[{title:"Goals Dashboard",description:"Track savings and progress toward future goals.",route:"goals"},{title:"Savings",description:"Plan savings contributions and milestones.",route:"savings"}]},{title:"Assets & Net Worth",items:[{title:"Assets",description:"Add assets and liabilities to build a clearer net worth view.",route:"assets"}]},{title:"Onboarding & Profiles",items:[{title:"Income & Expenses",description:"Update the baseline income and expense details your plans are built on.",route:"onboarding"},{title:"Profile Intake",description:"Capture personal context that helps recommendations stay accurate.",route:"profile"},{title:"User Profile",description:"Manage personal details, email, and password.",route:"user-profile"}]},{title:"Reports & Recommendations",items:[{title:"Import & Analyze",description:"Upload statements and analyze transactions.",route:"import"},{title:"Loan Recommendations",description:"Rate Optimizer. Discover if you can save money by consolidating or refinancing.",route:"loans"},{title:"FICO Score",description:"Review your credit score insights.",route:"fico"}]},{title:"Business Tools",items:[{title:"Business Tools",description:"Entrepreneur Mode. Separate your personal and business cash flow effortlessly.",route:"business-tools"}]},{title:"Account & Billing",items:[{title:"Subscription Controls",description:"Manage billing and subscription settings.",route:"payment-options"}]}],zM=n=>{const s=String(n??"").replace(/,/g,""),l=Number(s);return Number.isFinite(l)?l:0},tv=()=>{if(typeof window>"u")return[];try{const n=localStorage.getItem(GOALS_KEY);return n?JSON.parse(n):[]}catch{return[]}},RM=({onNavigate:n=()=>{},theme:s="light"})=>{const{profile:l,totals:o}=Ft(),{formatCurrency:d,preferences:h}=xt(),[m,g]=f.useState(()=>tv()),[v,y]=f.useState(()=>Sr());f.useEffect(()=>{const E=()=>g(tv()),z=()=>y(Sr());return window.addEventListener("storage",E),window.addEventListener("storage",z),window.addEventListener("profile-updated",E),()=>{window.removeEventListener("storage",E),window.removeEventListener("storage",z),window.removeEventListener("profile-updated",E)}},[]);const j=f.useMemo(()=>qn({income:o.income,leftover:o.leftover}).currentStage,[o.income,o.leftover]).key==="traditional";h.premiumAccess;const w=f.useMemo(()=>{const E=Number(o.leftover)||0;if(!Number.isFinite(E))return"Add income to unlock";const z=d(Math.abs(E));return E>=0?`${z} remaining`:`${z} over`},[d,o.leftover]),T=f.useMemo(()=>{const E=(m||[]).reduce((D,B)=>D+(Number(B.amount)||0),0);if(!E)return"Add a goal to see progress";const z=zM(l?.savingsBalance);return`${Math.round(Math.min(z/E,1)*100)}% to targets`},[m,l?.savingsBalance]),A=f.useMemo(()=>({livebudget:w,goals:T}),[w,T]);return a.jsxs("div",{className:`features-guide-page ${s==="dark"?"is-dark":""}`,children:[a.jsxs("header",{className:"features-guide-header",children:[a.jsx(St,{className:"top-controls",activePage:"settings",onNavigate:n,logoutHref:"/Local/BudgetIQ Login"}),a.jsxs("div",{className:"features-guide-hero",children:[a.jsx("div",{className:"eyebrow",children:"Features"}),a.jsx("h1",{children:"What each page does"}),a.jsx("p",{children:"Use this guide as a quick tour of the tools inside Luna. Pick a page to jump straight in."})]})]}),a.jsxs("main",{className:"features-guide-main",children:[OM.map(E=>a.jsxs("section",{className:"features-guide-card",children:[a.jsx("h2",{children:E.title}),a.jsx("div",{className:"features-grid",children:E.items.map(z=>a.jsxs("article",{className:"feature-card",children:[a.jsxs("div",{children:[a.jsx("h3",{children:z.title}),a.jsx("p",{children:z.description}),A[z.route]&&a.jsx("div",{className:"feature-stat",children:A[z.route]})]}),a.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>n(z.route),children:"Open"})]},z.title))})]},E.title)),a.jsx("div",{className:"features-guide-footer",children:a.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>n("settings"),children:"Back to settings"})})]})]})},Gb=["budgetStability","savingsCushion","debtMomentum","consistency"],Kb={budgetStability:"Stability",savingsCushion:"Buffer",debtMomentum:"Freedom",consistency:"Momentum"},Yd=n=>Number.isFinite(n)?n:0,$M=(n=[])=>{if(!n.length)return{slope:0,confidence:0};const s=n.length,l=(s-1)/2,o=n.reduce((x,j)=>x+j,0)/s;let d=0,h=0;n.forEach((x,j)=>{const w=j-l;d+=w*(x-o),h+=w*w});const m=h===0?0:d/h,g=n.reduce((x,j)=>x+Math.pow(j-(o+m*(n.indexOf(j)-l)),2),0),v=Math.sqrt(g/Math.max(s,1)),y=Math.max(0,1-v/25);return{slope:m,confidence:y}},BM=n=>n>.5?"improving":n<-.5?"softening":"stable",nv=(n,s,l)=>Yd(n)+s*l,UM=(n=[])=>{if(!n.length)return null;const s=n[n.length-1],l=n.filter(h=>h?.pillars).map(h=>h.pillars);if(!l.length)return null;const o=l.slice(-6),d={};return Gb.forEach(h=>{const m=o.map(T=>Yd(T[h])),{slope:g,confidence:v}=$M(m),y=BM(g),x=Yd(s?.pillars?.[h]),j=nv(x,g,3),w=nv(x,g,6);d[h]={label:Kb[h],direction:y,strength:Math.min(Math.abs(g)*4,1),confidence:v,projected3:Math.min(Math.max(Math.round(j),0),100),projected6:Math.min(Math.max(Math.round(w),0),100)}}),d},Fb="financialHealthScore",Zd="health-score-updated",PM="moneyProfile",IM="lunaPreferences",av=12,oo={premiumAccess:!1,businessFeatures:!1,budgetPeriod:"monthly",budgetPeriodStartDay:1,budgetPeriodAnchor:""},Kn=(n,s,l)=>Math.min(l,Math.max(s,n)),Tt=n=>Number.isFinite(n)?n:0,xr=n=>{const s=String(n??"").replace(/,/g,""),l=Number(s);return Number.isFinite(l)?l:0},Vd=(n={})=>Number(n.monthly??n.amount??0)||0,HM=(n={})=>{const s=n?.incomeType,l=n?.expenseType;return s!=="business"&&l!=="business"},YM=n=>(n?.incomeType||"personal")==="personal",ZM=n=>(n?.expenseType||"personal")==="personal",gi=(n,s,l,o,d)=>{if(l===s)return o;const h=Kn((n-s)/(l-s),0,1);return o+h*(d-o)},VM=({income:n,leftover:s})=>{const l=n>0?Math.max(s/n,0):0;return l<=0?0:l<=.05?gi(l,0,.05,0,5):l<=.12?gi(l,.05,.12,5,12):l<=.2?gi(l,.12,.2,12,22):30},wh=(n=[])=>(n||[]).filter(s=>s?.reconciliationStatus==="verified"&&HM(s)),qd=(n,s)=>(n||[]).reduce((l,o)=>(s(o)&&(l+=Number(o.amount||0)),l),0),qM=({savingsBalance:n,monthlyBurn:s})=>{const l=Tt(n),o=Math.max(s||1,1),d=Math.min(l/o,6);return Kn(d/6*100,0,100)},GM=(n=[])=>{const s=qd(n,h=>Number(h.amount)>0),l=Math.abs(qd(n,h=>Number(h.amount)<0));if(s<=0)return 0;const d=Math.max(s-l,0)/s;return Kn(d/.2*100,0,100)},KM=({debtPayments:n,income:s})=>{const l=Math.max(s||0,1),o=n/l;return o<=.3?100:o>=.6?0:Kn((.6-o)/.3*100,0,100)},FM=({verifiedTransactions:n=[],profile:s={}})=>{const l=new Map;if((s?.expenses||[]).forEach(m=>{const g=(m.category||m.name||"other").toLowerCase();l.set(g,(l.get(g)||0)+Vd(m))}),!l.size)return 100;const o=new Map;n.filter(m=>Number(m.amount)<0).forEach(m=>{const g=(m.category||m.name||"other").toLowerCase();o.set(g,(o.get(g)||0)+Math.abs(Number(m.amount)||0))});let d=0,h=0;return l.forEach((m,g)=>{h+=m;const v=o.get(g)||0,y=Math.max(0,v-m),x=m>0?Math.max(0,1-y/m):1;d+=x*m}),h?Kn(d/h*100,0,100):100},XM=({history:n=[],currentScore:s,income:l})=>{const d=Date.now(),h=n.filter(y=>{const x=Date.parse(y?.updatedAt);return Number.isFinite(x)&&x>=d-2592e6});if(!h.length||!l||l<=0)return 50;const m=h.reduce((y,x)=>y+Number(x.score||0),0)/h.length,g=(s||0)-m,v=Kn((g+10)/20,0,1);return Math.round(v*100)},Gd=10,QM=n=>{if(!n)return{dataStatus:"insufficient",statusDetail:"Verify 10 transactions to unlock your score."};if(n<Gd){const s=Gd-n;return{dataStatus:"partial",statusDetail:`Only ${n} verified transactions so far. Verify ${s} more to fully unlock the score.`}}return{dataStatus:"ready",statusDetail:"Score based on verified personal activity."}},JM=n=>n>=80?"Strong":n>=60?"Steady":n>=40?"Emerging":"Needs Attention",WM={liquidity:{strong:"You have a solid buffer that can cover several months of essentials.",steady:"Keep topping up a small portion each month to stay strong.",emerging:"Add $100$200 to your savings each month to build breathing room.",weak:"Aim for 3 months of expenses in savings to feel stable."},savingsRate:{strong:"Your savings rate is excellentkeep that momentum.",steady:"You're building spare cash. Keep automating a transfer.",emerging:"Move 12% more of your income into savings next period.",weak:"Start with a $25 automatic deposit to restart the habit."},dti:{strong:"Debt payments stay below 30% of income. Thats resilient.",steady:"You're close to the sweet spotkeep the extra payment steady.",emerging:"Try trimming 1 payment or earning a small bump to improve DTI.",weak:"Pay down one balance to bring debt below 30% of income."},budgetAdherence:{strong:"Youre spending exactly where you planned. Thats rare.",steady:"Small slips happen. Keep reviewing categories weekly.",emerging:"Check one category and keep it under its limit this week.",weak:"Pick one category and cut it by 5% to rebuild trust."},velocity:{strong:"Momentum is upkeep doing what youre doing.",steady:"The score is steady. Two more clean periods routine it.",emerging:"Your trend is flatteningadd a small win this period.",weak:"Consistency will push the score up. Stay steady."}},vr=(n,s)=>{const l=JM(s),o=s>=80?"strong":s>=60?"steady":s>=40?"emerging":"weak",d=WM[n]?.[o]||"Keep trackingsmall wins compound.";return{score:Math.round(s),label:l,tip:d}},ek=({transactions:n=[],verifiedTransactions:s,profile:l={},totals:o={},debtEntries:d=[],lastSnapshot:h={},currentScore:m=0})=>{const g=Array.isArray(s)&&s.length?s:wh(n),v=Math.abs(qd(g,E=>Number(E.amount)<0)),y=qM({savingsBalance:Tt(l?.savingsBalance),monthlyBurn:Math.max(v,Tt(o?.expenses),1)}),x=GM(g),j=d.reduce((E,z)=>E+Math.max(0,xr(z?.minPayment||z?.min||0)),0),w=KM({debtPayments:j,income:Tt(o?.income)}),T=FM({verifiedTransactions:g,profile:l}),A=XM({history:h?.history||[],currentScore:m,income:Tt(o?.income)});return{liquidity:vr("liquidity",y),savingsRate:vr("savingsRate",x),dti:vr("dti",w),budgetAdherence:vr("budgetAdherence",T),velocity:vr("velocity",A)}},Kd=n=>n>=75?"Thriving":n>=50?"Balanced":n>=25?"Tight":"Critical",tk=(n,s)=>{const d=[...(Array.isArray(n)?n.filter(Boolean):[]).filter(h=>h?.periodKey!==s.periodKey),s];return d.length<=av?d:d.slice(d.length-av)},nk=4,ak=(n=0)=>n>=.75?"high":n>=.4?"medium":"low",sk=(n=[])=>{if(!Array.isArray(n)||!n.length)return null;const s=n.filter(h=>h?.pillars);if(s.length<nk)return null;const l=UM(s);if(!l||!Object.keys(l).length)return null;const o=Object.values(l).reduce((h,m)=>h+(m?.confidence||0),0)/Math.max(Object.keys(l).length,1),d=Kn(o,0,1);return{entries:l,confidence:d,confidenceLabel:ak(d),historyLength:s.length,updatedAt:new Date().toISOString()}},Xb=({expenses:n,tierKey:s})=>({critical:300,tight:1e3,balanced:1e3,traditional:n>0?n*3:0})[s]??1e3,ik=(n=[])=>{const s=n.slice(-4).filter(m=>Number.isFinite(m?.score)),l=n.length;if(l<2)return{label:"Early Confidence",detail:"Building your baseline with early data.",periods:l};if(l<4)return{label:"Growing Confidence",detail:"More periods are adding clarity.",periods:l};if(s.length<2)return{label:"Growing Confidence",detail:"Your score is stabilizing over time.",periods:l};const o=s.reduce((m,g)=>m+g.score,0)/s.length,d=s.reduce((m,g)=>m+Math.pow(g.score-o,2),0)/s.length;return Math.sqrt(d)<=4?{label:"High Confidence",detail:"Your score is stable and well-informed.",periods:l}:{label:"Growing Confidence",detail:"Some volatility remains as data stabilizes.",periods:l}},rk=({lastSnapshot:n,history:s,score:l,savingsBalance:o,expenses:d,tierKey:h})=>{const m=Array.isArray(n?.milestones)?n.milestones:[],g=new Set(m.map(E=>E?.key)),v=[],y=Kd(l),x=n?.score!=null?Kd(n.score):null;s.length===1&&!g.has("first-period")&&v.push({key:"first-period",title:"First period completed",message:"You closed your first budget period. That is a real milestone.",periodKey:s[s.length-1]?.periodKey}),x&&x!=="Balanced"&&y==="Balanced"&&!g.has("tier-balanced")&&v.push({key:"tier-balanced",title:"Reached Balanced",message:"You moved into Balanced. Your financial footing is getting stronger.",periodKey:s[s.length-1]?.periodKey}),x&&x!=="Thriving"&&y==="Thriving"&&!g.has("tier-thriving")&&v.push({key:"tier-thriving",title:"Reached Thriving",message:"You reached Thriving. Your progress is consistent and strong.",periodKey:s[s.length-1]?.periodKey});const j=Xb({expenses:d,tierKey:h});j>0&&Tt(n?.savingsBalance)<j&&o>=j&&!g.has("savings-cushion")&&v.push({key:"savings-cushion",title:"Emergency cushion reached",message:"Your savings cushion hit its first milestone. That is real stability.",periodKey:s[s.length-1]?.periodKey});const w=s.slice(-3);return w.length===3&&w.every(E=>Number(E.trend)>0)&&!g.has("momentum-streak")&&v.push({key:"momentum-streak",title:"Momentum streak",message:"Your score improved three periods in a row. That is strong momentum.",periodKey:s[s.length-1]?.periodKey}),s.length===3&&!g.has("stability-streak")&&v.push({key:"stability-streak",title:"Stability streak",message:"You have stayed engaged for three periods. Consistency is building strength.",periodKey:s[s.length-1]?.periodKey}),v.length?[...m,...v].slice(-6):m},Fd=({tierKey:n,pillarKey:s,direction:l})=>{const o=n==="critical"?"critical":n==="tight"?"tight":n==="traditional"?"thriving":"balanced";return{budgetStability:{critical:{up:"You are stabilizing. Keep one key category steady so your leftover can breathe.",down:"Let's steady one category next period so you can regain control step by step.",flat:"A small spending trim next period will help you stabilize without pressure."},tight:{up:"Budget stability is improving. Keep one key category steady to protect your leftover.",down:"Budget pressure ticked up. Choose one category to tighten next period and regain control.",flat:"A small spending trim next period could lift your leftover and strengthen stability."},balanced:{up:"Your stability is strengthening. Keep one category consistent to protect momentum.",down:"Budget pressure crept in. A small reset next period will keep progress smooth.",flat:"A focused trim next period can lift your leftover and build momentum."},thriving:{up:"Your stability is strong. Keep your key categories steady to stay optimized.",down:"Even strong plans wobble. A small adjustment next period keeps things efficient.",flat:"A quick tune-up can keep your leftover strong and your plan optimized."}},debtMomentum:{critical:{up:"Great step forward. Even a small extra payment next cycle builds momentum.",down:"Momentum softened. A small extra payment next cycle helps you regain control.",flat:"Keeping minimums steady is a win. Add a small extra payment when you can."},tight:{up:"Debt momentum is building. A small extra payment next cycle could accelerate progress.",down:"Debt momentum softened. A small extra payment next cycle would steady the path.",flat:"Keeping minimums steady is good. Add a small extra payment when you can."},balanced:{up:"Momentum is building. A slightly stronger extra payment could speed up your payoff.",down:"Momentum slipped a bit. A small extra payment next period keeps you on track.",flat:"A modest extra payment can strengthen payoff efficiency."},thriving:{up:"Momentum looks strong. Increasing your extra payment slightly could optimize payoff.",down:"Momentum softened. A quick extra payment next period keeps the plan optimized.",flat:"A targeted extra payment can keep your payoff plan in peak shape."}},savingsCushion:{critical:{up:"Your cushion is growing. Keep a small deposit going to build safety.",down:"Savings slowed. Even a tiny transfer helps rebuild your buffer.",flat:"A small automatic transfer will help you build breathing room."},tight:{up:"Your savings cushion is growing. Keep the same pace for one more period to lock it in.",down:"Savings momentum slowed. Even a small transfer can rebuild your cushion.",flat:"A small automatic transfer would strengthen your savings cushion."},balanced:{up:"Savings are building. Keep the pace to move toward a stronger cushion.",down:"Savings softened a bit. A small boost next period keeps momentum alive.",flat:"A slightly bigger transfer can strengthen your cushion."},thriving:{up:"Your cushion is strong and growing. Keep the pace to build long-term resilience.",down:"Savings momentum softened. A small boost keeps your long-term buffer strong.",flat:"A quick transfer keeps your cushion optimized for the long run."}},consistency:{critical:{up:"You're showing up. One more completed period can rebuild confidence fast.",down:"A few gaps showed up. One completed period in a row will steady things.",flat:"One completed period can make a real difference right now."},tight:{up:"Consistency is paying off. Complete one more period to reinforce the streak.",down:"A few gaps showed up. One completed period in a row rebuilds confidence quickly.",flat:"One more completed period will strengthen your consistency score."},balanced:{up:"Consistency looks strong. One more period will reinforce the gains.",down:"Consistency dipped a bit. A clean period will stabilize the trend.",flat:"One solid period can lift your consistency quickly."},thriving:{up:"Consistency is strong. Keep the streak to maintain long-term momentum.",down:"Even strong streaks dip. One clean period restores your rhythm.",flat:"One more steady period keeps your momentum high."}}}[s]?.[o]?.[l]||null},lk=({pillars:n,previousPillars:s,trend:l,tierKey:o})=>{if(!n)return null;const d=Object.entries(n).map(([g,v])=>({key:g,value:Tt(v),delta:Tt(v)-Tt(s?.[g])}));if(!d.length)return null;const h=d.reduce((g,v)=>v.value<g.value?v:g,d[0]),m=l>=3?"up":l<=-3?"down":"flat";return Fd({tierKey:o,pillarKey:h.key,direction:m})},ok=()=>{if(typeof window>"u")return oo;try{const n=Nt(IM);if(!n)return oo;const s=JSON.parse(n);return{...oo,...s}}catch{return oo}},ck=()=>{if(typeof window>"u")return{incomes:[],expenses:[],savingsBalance:0};try{const n=Nt(PM);if(!n)return{incomes:[],expenses:[],savingsBalance:0};const s=JSON.parse(n);return s&&typeof s=="object"?s:{incomes:[],expenses:[],savingsBalance:0}}catch{return{incomes:[],expenses:[],savingsBalance:0}}},uk=()=>{try{const n=Nt("liveBudgetTransactions","[]"),s=JSON.parse(n);return Array.isArray(s)?s:[]}catch{return[]}},dk=n=>{if(!n)return null;const s=Math.max(0,Number(n.balance)||0),l=Math.max(0,Number(n.minPayment)||0);return s<=0&&!n.paid?null:{id:n.id||`card-${n.name||"unknown"}`,name:n.name||"Credit Card",balance:s,apr:Math.max(0,Number(n.apr)||0),minPayment:l}},hk=(n=[])=>(n||[]).map(dk).filter(Boolean),mk=n=>{if(!n)return[];const s=Array.isArray(n.manualDebts)?n.manualDebts:Array.isArray(n)?n:null;return s?s.map((l,o)=>{const d=Math.max(0,xr(l.balance));return d?{id:l.id||`manual-${o}`,name:l.name||l.type||"Debt",balance:d,apr:Math.max(0,xr(l.apr)),minPayment:xr(l.minPayment)}:null}).filter(Boolean):[]},fk=n=>{const s=(n?.incomes||[]).filter(YM),l=(n?.expenses||[]).filter(ZM),o=s.reduce((h,m)=>h+Vd(m),0),d=l.reduce((h,m)=>h+Vd(m),0);return{income:o,expenses:d,leftover:o-d}},pk=({savingsBalance:n,expenses:s,tierKey:l})=>{const o=Xb({expenses:s,tierKey:l});if(!o)return 0;const d=Kn(n/o,0,2);return d<.1?gi(d,0,.1,0,3):d<.5?gi(d,.1,.5,5,12):d<1?gi(d,.5,1,12,18):20},yk=({debtTotal:n,payoffMonths:s,lastDebtTotal:l,lastPayoffMonths:o})=>{if(n<=0)return 30;if(!l||l<=0||!o)return 15;const d=(l-n)/l,h=o-s;return d<-.02||h<-2?4:d<.02&&Math.abs(h)<=2?10:d>.08||h>6?28:d>.02||h>2?20:12},Qb=n=>n?n.income!=="unknown"&&n.expenses!=="unknown"&&n.leftover!=="unknown":!1,gk=n=>{const s=xi(n?.budgetPeriod);return s.length?s.some(l=>Qb(So(l))):!1},vk=({totals:n,savingsBalance:s,debtTotal:l,transactionsCount:o,preferences:d,verifiedCount:h=0})=>{const m=Tt(n?.income);return m<=0&&Tt(s)<=0&&Tt(l)<=0&&Tt(o)<=0?!1:gk(d)?!0:m<=0?!1:Tt(s)>0||Tt(l)>0||Tt(o)>0},bk=({preferences:n,periodKey:s})=>{const l=xi(n?.budgetPeriod);if(!l.length||!s)return 6;const o=l[l.length-1],d=ko(n,s,o);let h=0;for(let m=l.length-1;m>=0;m-=1){const g=So(l[m]);if(!Qb(g))break;h+=1}return d>=2?3:h>=3?18:h===2?14:h===1?9:4},xk=({currentPillars:n,previousPillars:s})=>{if(!s)return{summary:{tone:"neutral",message:"We are building your baseline. Keep tracking to see what changes most."},items:[]};const l={budgetStability:"Budget Stability",debtMomentum:"Debt Momentum",savingsCushion:"Savings Cushion",consistency:"Consistency / Financial Behavior"},o={budgetStability:{positive:"Your leftover improved this period  great job keeping spending aligned with your plan.",positiveStrong:"Excellent control this period. Your budget stability jumped in a meaningful way.",neutral:"Your budget stability stayed mostly steady. Small wins compound over time.",negative:"Spending pressed harder on your budget this period. You're still okay  small course corrections can help.",negativeStrong:"Budget pressure increased this period. You're not alone  a few adjustments can steady things."},debtMomentum:{positive:"Your debt is moving in the right direction. Your payoff momentum is building.",positiveStrong:"Amazing progress  your debt payoff pace accelerated this period.",neutral:"Debt progress stayed mostly steady. Consistency keeps momentum alive.",negative:"Debt progress slowed a bit this period. Even staying steady is valuable  you can regain momentum.",negativeStrong:"Debt momentum dipped this period. You're still in control  a small push can restart progress."},savingsCushion:{positive:"Your savings cushion grew. You're building real financial safety.",positiveStrong:"Strong savings progress  you're building a real buffer.",neutral:"Savings held steady this period. Maintaining a cushion is still a win.",negative:"Savings didn't grow this period. That's common during tight months  refocus when you can.",negativeStrong:"Savings slipped back this period. That's okay  rebuilding the buffer is still possible."},consistency:{positive:"You've been consistently engaging with Luna. Habits are strengthening.",positiveStrong:"Consistency streak! Sticking with your plan is paying off.",neutral:"Your consistency stayed steady. Keeping the routine matters.",negative:"There were gaps this period. No worries  picking back up matters more than being perfect.",negativeStrong:"Consistency dipped this period. You're still on the path  restarting is what matters."}},d=Object.keys(l).map(E=>{const z=Tt(n?.[E]),Z=Tt(s?.[E]),D=Math.round(z-Z);return{key:E,title:l[E],delta:D,current:z,absDelta:Math.abs(D)}});if(d.reduce((E,z)=>E+z.absDelta,0)<2)return{summary:{tone:"neutral",message:"No major change this period  stability is progress."},items:[]};const m=d.every(E=>E.delta<=-2),g=d.every(E=>E.delta>=2),v=m?{tone:"negative",message:"This was a tough period. You're still in control  we will help you get back on track."}:g?{tone:"positive",message:"Strong forward progress this period  keep going."}:null,y=[...d].sort((E,z)=>z.absDelta-E.absDelta),x=y.find(E=>E.delta>=2),j=y.find(E=>E.delta<=-2),w=y.slice(0,2),T=[];x&&T.push(x),j&&j.key!==x?.key&&T.push(j),T.length<2&&w.forEach(E=>{T.length>=2||T.find(z=>z.key===E.key)||T.push(E)});const A=T.map(E=>{let z="neutral",Z="neutral";return E.delta>=5?(z="positive",Z="positiveStrong"):E.delta>=2?(z="positive",Z="positive"):E.delta<=-5?(z="negative",Z="negativeStrong"):E.delta<=-2&&(z="negative",Z="negative"),{key:E.key,title:E.title,delta:E.delta,tone:z,message:o[E.key][Z]}});return{summary:v,items:A}},jk=({totals:n,savingsBalance:s,debtTotal:l,payoffMonths:o,preferences:d,periodKey:h,lastSnapshot:m,transactions:g=[],verifiedTransactions:v=[],profile:y={},debtEntries:x=[]})=>{const j=Tt(n?.income),w=Tt(n?.expenses),T=Tt(n?.leftover),A=d?.tierKey||"balanced",E=VM({income:j,leftover:T}),z=yk({debtTotal:l,payoffMonths:o,lastDebtTotal:m?.debtTotal,lastPayoffMonths:m?.payoffMonths}),Z=pk({savingsBalance:s,expenses:w,tierKey:A}),D=bk({preferences:d,periodKey:h}),B=E+z+Z+D,R=Kn(B,0,100),W=Tt(m?.score),fe=m?W*.65+R*.35:R,re=Math.round(fe),K=Math.round(re-W),te=xk({currentPillars:{budgetStability:E,debtMomentum:z,savingsCushion:Z,consistency:D},previousPillars:m?.pillars}),xe=lk({pillars:{budgetStability:E,debtMomentum:z,savingsCushion:Z,consistency:D},previousPillars:m?.pillars,trend:K,tierKey:A}),U=ek({transactions:g,verifiedTransactions:v,profile:y,totals:n,debtEntries:x,lastSnapshot:m,currentScore:re});return{score:re,trend:K,rawScore:Math.round(R),pillars:{budgetStability:Math.round(E),debtMomentum:Math.round(z),savingsCushion:Math.round(Z),consistency:Math.round(D)},explanations:te,coaching:xe,pillarInsights:U}},Nh=()=>{if(typeof window>"u")return null;try{const n=Nt(Fb);if(!n)return null;const s=JSON.parse(n);return s&&!s.status?{status:"insufficient"}:s}catch{return null}},bd=n=>{if(!(typeof window>"u"))try{bs(Fb,JSON.stringify(n)),window.dispatchEvent(new Event(Zd))}catch{}},wk=({totals:n,savingsBalance:s,debtTotal:l,payoffMonths:o,preferences:d,periodKey:h,transactionsCount:m,transactions:g=[],verifiedTransactions:v=[],profile:y={},debtEntries:x=[],forceRefresh:j=!1})=>{const w=Nh(),T=Array.isArray(v)&&v.length?v:wh(g),A=T.length,E=Kn(A/Gd,0,1),{dataStatus:z,statusDetail:Z}=QM(A),D=new Date().toISOString(),B=vk({totals:n,savingsBalance:s,debtTotal:l,transactionsCount:m,preferences:d,verifiedCount:A});if(!A){const k={status:"insufficient",periodKey:h,updatedAt:D,history:w?.history||[],milestones:w?.milestones||[],confidence:w?.confidence||{label:"Early Confidence",detail:"Verify 10 transactions to unlock your score.",periods:0},verifiedCount:A,dataConfidence:E,dataStatus:z,statusDetail:Z,prediction:null};return bd(k),k}if(!B){if(!j&&w?.periodKey===h&&w?.status==="insufficient")return w;const k={status:"insufficient",periodKey:h,updatedAt:new Date().toISOString(),history:[],milestones:[],confidence:{label:"Early Confidence",detail:"Building your baseline with early data.",periods:0},prediction:null};return bd(k),k}if(!j&&w?.periodKey===h&&w?.score!=null&&w?.status==="ready")return w;const R=jk({totals:n,savingsBalance:s,debtTotal:l,payoffMonths:o,preferences:d,periodKey:h,lastSnapshot:w,transactions:g,verifiedTransactions:T,profile:y,debtEntries:x}),W=new Date().toISOString(),fe=Kd(R.score),re={periodKey:h,score:R.score,trend:R.trend,tier:fe,updatedAt:W,pillars:R.pillars},K=tk(w?.history,re),te=ik(K),xe=rk({lastSnapshot:w,history:K,score:R.score,savingsBalance:s,expenses:Tt(n?.expenses),tierKey:d?.tierKey||"balanced"}),U=sk(K),se={...R,status:"ready",debtTotal:l,payoffMonths:o,savingsBalance:s,periodKey:h,updatedAt:W,history:K,confidence:te,milestones:xe,verifiedCount:A,dataConfidence:E,dataStatus:z,statusDetail:Z,scoreNormalized:Number((R.score/100).toFixed(2)),prediction:U};return bd(se),se},Jb=({forceRefresh:n=!1}={})=>{if(typeof window>"u")return Nh();const s=ck(),l=fk(s),o=xr(s?.savingsBalance),d=uk(),h=wh(d),m=ok(),v=Gn(m,d)?.key||"no-period",y=Sr(),j=qn({income:l.income,leftover:l.leftover})?.currentStage?.key||"balanced",w=Ib({planTypeKey:y,premiumAccess:m.premiumAccess,tierKey:j}),T=cn(),A=vs(),E=[...hk(T),...mk(A)],z=E.reduce((B,R)=>B+(Number(R.balance)||0),0),Z=Math.max(0,l.leftover||0)*.3;let D=0;return E.length&&(D=(w==="avalanche"?Er(E,Z,0):Ga(E,Z,0)).reduce((R,W)=>Math.max(R,W.endMonth||W.months||0),0)),wk({totals:l,savingsBalance:o,debtTotal:z,payoffMonths:D,preferences:{...m,tierKey:j},periodKey:v,transactionsCount:d.length,transactions:d,verifiedTransactions:h,profile:s,debtEntries:E,forceRefresh:n})},sv=()=>{if(typeof window>"u")return{status:"insufficient",score:null,trend:null,explanations:null,history:[],coaching:null,confidence:null,milestones:[],prediction:null};try{const n=Nh();if(!n)return{status:"insufficient",score:null,trend:null,explanations:null,history:[],coaching:null,confidence:null,milestones:[]};const s=Number(n?.score),l=Number(n?.trend);return{status:n?.status??"ready",score:Number.isFinite(s)?s:null,trend:Number.isFinite(l)?l:null,explanations:n?.explanations,history:Array.isArray(n?.history)?n.history:[],coaching:n?.coaching||null,confidence:n?.confidence||null,prediction:n?.prediction||null,milestones:Array.isArray(n?.milestones)?n.milestones:[]}}catch{return{status:"insufficient",score:null,trend:null,explanations:null,history:[],coaching:null,confidence:null,milestones:[],prediction:null}}},Nk=n=>Math.min(Math.max(Math.round(n),0),100),iv={high:"",medium:"",low:""},rv={high:"Trends are consistent and clear.",medium:"Trends are visible but still smoothing out.",low:"I need a little more steady history before I can lean in confidently."},lv={improving:"Trending upward. Keep this pace and it should feel stronger in a few periods.",stable:"Fairly steady right now. This pillar should stay calm if things continue as they are.",softening:"Progress looks like it may slow soon. A little focus will help it keep moving up."},Sk={improving:"Improving",stable:"Steady",softening:"Softening"},Ek=(n=0)=>n>=.75?"high":n>=.4?"medium":"low",Tk=n=>n>=.7?"Strong":n>=.4?"Solid":"Gentle",ov=n=>{const s=String(n||"").toLowerCase();return s==="high"?"High":s==="medium"?"Medium":"Low"},Ck=({onNavigate:n=()=>{},theme:s="light"})=>{const[l,o]=f.useState(()=>sv()),[d,h]=f.useState("critical"),[m,g]=f.useState("budgetStability"),[v,y]=f.useState("flat"),[x,j]=f.useState("new"),[w,T]=f.useState(1),[A,E]=f.useState("low"),[z,Z]=f.useState("budgetStability"),[D,B]=f.useState("stable"),[R,W]=f.useState(!1),[fe,re]=f.useState("high"),[K,te]=f.useState("debtMomentum"),[xe,U]=f.useState("softening");f.useEffect(()=>{Jb({forceRefresh:!0});const le=()=>o(sv());return window.addEventListener("storage",le),window.addEventListener(Zd,le),()=>{window.removeEventListener("storage",le),window.removeEventListener(Zd,le)}},[]);const se=l.status==="ready"&&Number.isFinite(l.score),k=Nk(se?l.score:0),ne=Number.isFinite(l.trend)?l.trend:0,L=k>=75?"Thriving":k>=50?"Balanced":k>=25?"Tight":"Critical",C=f.useMemo(()=>{const Te=2*Math.PI*54,Ee=Te*(1-k/100);return{radius:54,circumference:Te,offset:Ee}},[k]),M=f.useMemo(()=>Array.isArray(l.history)?l.history:[],[l.history]),G=f.useMemo(()=>M.slice(-12),[M]),F=(le="")=>{const Te=String(le).split(":");return(Te[1]||Te[0]).replace(/-/g,"/")},he=f.useMemo(()=>{const le=G.filter(_e=>Number.isFinite(_e?.score));if(le.length<2)return null;const Te=le.map(_e=>_e.score),Ee=Math.min(...Te),mt=Math.max(...Te),gt=320,ft=64,de=6,ze=Math.max(mt-Ee,1),N=(gt-de*2)/(Te.length-1),q=Te.map((_e,Ge)=>{const Ke=de+Ge*N,zt=ft-de-(_e-Ee)/ze*(ft-de*2);return`${Ke},${zt}`}).join(" "),je=Te[Te.length-1]-Te[0],Ae=je>=7?"Strongly Improving":je>=3?"Improving":je<=-7?"Strongly Softening":je<=-3?"Softening":"Stable";return{points:q,width:gt,height:ft,labels:le.map(_e=>F(_e.periodKey)),scores:Te,direction:Ae}},[G]),S=l.prediction,P=S?.entries||{},pe=se&&P&&Object.keys(P).length>0,ue=S?.confidenceLabel,we=ue?iv[ue]:null,ve=ue?ov(ue):null,ke=S?.historyLength||0,Ze=ue?rv[ue]:null,me=ke?`Using ${ke} verified periods to ground the forecast.`:"Collect a few more steady periods before Luna can predict a direction.",Q=l.explanations,be=Array.isArray(Q)?Q:Q?.items||[],J=Array.isArray(Q)?null:Q?.summary||null,ye=typeof window<"u"&&window.location.search.includes("debug=coaching"),Ne=typeof window<"u"&&window.location.search.includes("debug=qa"),Se=d==="critical"?"Stabilizing":d==="tight"?"Supportive":d==="balanced"?"Momentum-building":"Empowering",Pe=ye?Fd({tierKey:d,pillarKey:m,direction:v}):null,Ie=le=>{const Te=Number(le.history)||0,Ee=le.volatility,mt=le.weakestPillar,gt=le.trend,ft=Te<2?"Early Confidence":Te<4?"Growing Confidence":Ee==="low"?"High Confidence":"Growing Confidence",de=Fd({tierKey:le.tier,pillarKey:mt,direction:gt==="improving"?"up":gt==="softening"?"down":"flat"});return{confidence:ft,coaching:de,reasoning:`history length: ${Te}, volatility: ${Ee}, weakest pillar: ${mt}`}},$e=f.useMemo(()=>Ne?x==="new"?{status:"insufficient",confidence:null,coaching:null,milestones:[],trend:"Hidden (insufficient data)",notes:"No score, no trends, no milestones. Tone should be calm and reassuring."}:x==="chaotic"?{status:"ready",confidence:{label:"Growing Confidence"},coaching:"A few gaps showed up. One completed period in a row rebuilds confidence quickly.",milestones:[],trend:"Softening",notes:"Tone should stay stabilizing and non-judgmental."}:x==="thriving"?{status:"ready",confidence:{label:"High Confidence"},coaching:"Your foundation is strong. Keep momentum steady or increase savings to build long-term power.",milestones:[{key:"tier-thriving",title:"Reached Thriving",message:"You reached Thriving. Your progress is consistent and strong."}],trend:"Improving",notes:"Tone should feel proud, grounded, and future-focused."}:x==="streak"?{status:"ready",confidence:{label:"High Confidence"},coaching:"Consistency is strong. Keep the streak to maintain long-term momentum.",milestones:[{key:"stability-streak",title:"Stability streak",message:"You have stayed engaged for three periods. Consistency is building strength."},{key:"momentum-streak",title:"Momentum streak",message:"Your score improved three periods in a row. That is strong momentum."}],trend:"Stable",notes:"Tone should feel calm, reinforcing, and not repetitive."}:null:null,[x,Ne]),Be=f.useMemo(()=>x==="new"?"critical":x==="chaotic"?"tight":x==="thriving"?"traditional":"balanced",[x]),tt=f.useMemo(()=>Ie({tier:Be,history:w,volatility:A,weakestPillar:z,trend:D}),[w,A,z,D,Be]),nt=f.useMemo(()=>Ie({tier:Be,history:w,volatility:fe,weakestPillar:K,trend:xe}),[w,fe,K,xe,Be]);return a.jsxs("div",{className:`score-details-page ${s==="dark"?"is-dark":""}`,children:[a.jsxs("header",{className:"score-details-header",children:[a.jsx(St,{className:"top-controls",activePage:"settings",onNavigate:n,logoutHref:"/Local/BudgetIQ Login"}),a.jsxs("div",{className:"score-details-hero",children:[a.jsx("div",{className:"eyebrow",children:"Financial Health"}),a.jsx("h1",{children:"Score Details"}),a.jsx("p",{children:"See which metrics the OS is modeling and how the score reflects your verified activity."}),a.jsx("p",{className:"score-hero-note",children:"These are deterministic insights derived from your snapshotnever personalized financial advice."})]})]}),a.jsxs("main",{className:"score-details-main",children:[se?a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:"score-details-card",children:[a.jsxs("div",{className:`score-details-ring tier-${L.toLowerCase()}`,children:[a.jsxs("svg",{viewBox:"0 0 140 140","aria-hidden":"true",children:[a.jsx("circle",{className:"score-ring-bg",cx:"70",cy:"70",r:C.radius}),a.jsx("circle",{className:"score-ring-fill",cx:"70",cy:"70",r:C.radius,strokeDasharray:C.circumference,strokeDashoffset:C.offset,strokeLinecap:"round"})]}),a.jsxs("div",{className:"score-ring-center",children:[a.jsx("div",{className:"score-value",children:k}),a.jsx("div",{className:"score-out-of",children:"/ 100"})]})]}),a.jsxs("div",{className:"score-details-meta",children:[a.jsx("div",{className:"score-label",children:"Financial Health Score"}),a.jsx("div",{className:"score-tier",children:L}),a.jsxs("div",{className:`score-trend ${ne>=0?"is-up":"is-down"}`,children:[ne>=0?`+${ne}`:ne," this month"]}),a.jsx("div",{className:"score-note",children:"Updated each period based on budget stability, debt momentum, savings cushion, and consistency."}),a.jsx("div",{className:"score-note-sub",children:"The score models your status; consult your advisor before acting on any large deployments."})]})]}),he?a.jsxs("section",{className:"score-trend-panel",children:[a.jsxs("div",{className:"score-trend-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:"Score Trend"}),a.jsxs("p",{children:["Last ",he.scores.length," periods"]})]}),a.jsx("div",{className:`score-trend-direction is-${he.direction.toLowerCase().replace(/\s+/g,"-")}`,children:he.direction})]}),a.jsxs("div",{className:"score-trend-chart",children:[a.jsx("svg",{viewBox:`0 0 ${he.width} ${he.height}`,"aria-hidden":"true",children:a.jsx("polyline",{className:"score-trend-line",points:he.points})}),a.jsx("div",{className:"score-trend-dots",children:he.scores.map((le,Te)=>a.jsxs("div",{className:"trend-dot",title:`${he.labels[Te]}: ${le}`,children:[a.jsx("div",{className:"trend-dot-value",children:le}),a.jsx("div",{className:"trend-dot-label",children:he.labels[Te]})]},`${he.labels[Te]}-${le}`))})]})]}):null,se?a.jsxs("section",{className:"score-predictions-panel",children:[a.jsxs("div",{className:"score-predictions-header",children:[a.jsxs("div",{children:[a.jsx("h2",{children:"Where You're Headed"}),a.jsx("p",{className:"score-predictions-tagline",children:"Based on your recent progress, here is what your financial momentum looks like."}),a.jsx("p",{className:"score-predictions-subtitle",children:me}),Ze?a.jsx("p",{className:"score-predictions-note",children:Ze}):null]}),ve?a.jsxs("div",{className:`score-predictions-pill confidence-${ue||"low"}`,children:[a.jsx("span",{className:"score-predictions-pill-icon",children:we}),a.jsxs("span",{children:[ve," Confidence"]})]}):null]}),pe?a.jsx("div",{className:"prediction-card-grid",children:Gb.map(le=>{const Te=P[le];if(!Te)return null;const Ee=Te.direction||"stable",mt=Tk(Te.strength),gt=Ek(Te.confidence),ft=ov(gt),de=lv[Ee]||lv.stable,ze=Kb[le]||le,N=Ee==="softening"&&gt!=="low";return a.jsxs("article",{className:"prediction-card",children:[a.jsxs("div",{className:"prediction-card-top",children:[a.jsx("div",{className:"prediction-card-title",children:ze}),a.jsx("div",{className:"prediction-card-direction",children:Sk[Ee]||"Steady"})]}),a.jsxs("div",{className:"prediction-card-strength",children:[mt," traction"]}),a.jsx("p",{className:"prediction-card-summary",children:de}),a.jsxs("div",{className:"prediction-card-confidence",children:[a.jsx("span",{className:"prediction-card-confidence-icon",children:iv[gt]}),a.jsxs("span",{children:["Confidence: ",a.jsx("strong",{children:ft})," "," ",rv[gt]]})]}),N?a.jsx("button",{type:"button",className:"prediction-cta",onClick:()=>n("budget"),children:"Want help staying on track?"}):null]},le)})}):a.jsx("div",{className:"score-predictions-empty",children:a.jsx("p",{children:"Luna needs a few more verified periods before I can project a confident direction. Keep building the story and Ill share what comes next."})})]}):null,l.coaching?a.jsxs("section",{className:"score-coaching-panel",children:[a.jsxs("div",{className:"score-coaching-header",children:[a.jsx("h2",{children:"Next Best Step"}),a.jsx("span",{children:"Guidance for your next period"})]}),a.jsx("p",{children:l.coaching})]}):null,l.confidence?a.jsxs("section",{className:"score-confidence-panel",children:[a.jsxs("div",{className:"score-confidence-header",children:[a.jsx("h2",{children:"Confidence"}),a.jsx("span",{children:l.confidence.label})]}),a.jsx("p",{children:l.confidence.detail})]}):null,l.milestones&&l.milestones.length?a.jsxs("section",{className:"score-milestones-panel",children:[a.jsxs("div",{className:"score-milestones-header",children:[a.jsx("h2",{children:"Milestones"}),a.jsx("span",{children:"Recent wins"})]}),a.jsx("div",{className:"score-milestones-grid",children:l.milestones.slice(-3).reverse().map(le=>a.jsxs("div",{className:"score-milestone-card",children:[a.jsx("div",{className:"score-milestone-title",children:le.title}),a.jsx("div",{className:"score-milestone-message",children:le.message})]},le.key))})]}):null,a.jsxs("section",{className:"score-explanations",children:[a.jsxs("div",{className:"score-explanations-header",children:[a.jsx("h2",{children:"Why Your Score Changed"}),a.jsx("p",{children:"Top drivers from this period with calm, actionable insight."})]}),J?a.jsx("div",{className:`score-explanation-summary tone-${J.tone||"neutral"}`,children:J.message}):null,a.jsx("div",{className:"score-explanation-grid",children:be.length?be.map((le,Te)=>{const Ee=Number.isFinite(le?.delta)?le.delta:0;return a.jsxs("article",{className:`score-explanation-card tone-${le?.tone||"neutral"}`,children:[a.jsxs("div",{className:"score-explanation-top",children:[a.jsx("div",{className:"score-explanation-title",children:le?.title||"Score Update"}),a.jsxs("div",{className:`score-explanation-delta ${Ee>=0?"is-up":"is-down"}`,children:[Ee>=0?`+${Ee}`:Ee," pts"]})]}),a.jsx("p",{children:le?.message||"Your score adjusted based on recent progress."})]},`${le?.key||"explanation"}-${Te}`)}):J?null:a.jsx("div",{className:"score-explanation-empty",children:"No major movement yet  keep going and the story will appear here."})})]})]}):a.jsxs("section",{className:"score-details-empty",children:[a.jsx("h2",{children:"Your Financial Health Score isn't ready yet"}),a.jsx("p",{children:"Luna needs real financial activity before we can calculate your score. Add your information and begin your first budgeting period  once there's meaningful activity, we will build your score for you."}),a.jsxs("div",{className:"score-details-checklist",children:[a.jsx("div",{className:"checklist-title",children:"What unlocks your score:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Add your income"}),a.jsx("li",{children:"Track spending and complete a budgeting period"}),a.jsx("li",{children:"Add debts or savings if you have them"})]})]})]}),a.jsxs("section",{className:"score-details-grid",children:[a.jsxs("article",{className:"score-details-panel",children:[a.jsx("h2",{children:"Budget Stability"}),a.jsx("p",{children:"How consistently your spending stays aligned to your plan each period."})]}),a.jsxs("article",{className:"score-details-panel",children:[a.jsx("h2",{children:"Debt Momentum"}),a.jsx("p",{children:"How your payoff trajectory is improving based on balances and extra payments."})]}),a.jsxs("article",{className:"score-details-panel",children:[a.jsx("h2",{children:"Savings Cushion"}),a.jsx("p",{children:"How your emergency fund and savings buffer are growing."})]}),a.jsxs("article",{className:"score-details-panel",children:[a.jsx("h2",{children:"Consistency / Financial Behavior"}),a.jsx("p",{children:"How reliably you stick with the plan and keep behavior aligned over time."})]})]}),ye?a.jsxs("section",{className:"score-debug-panel",children:[a.jsxs("div",{className:"score-debug-header",children:[a.jsx("h2",{children:"Coaching Debug"}),a.jsx("span",{children:"Preview tier + pillar tone"})]}),a.jsxs("div",{className:"score-debug-grid",children:[a.jsxs("label",{children:["Tier",a.jsxs("select",{value:d,onChange:le=>h(le.target.value),children:[a.jsx("option",{value:"critical",children:"Critical"}),a.jsx("option",{value:"tight",children:"Tight"}),a.jsx("option",{value:"balanced",children:"Balanced"}),a.jsx("option",{value:"traditional",children:"Thriving"})]})]}),a.jsxs("label",{children:["Weakest pillar",a.jsxs("select",{value:m,onChange:le=>g(le.target.value),children:[a.jsx("option",{value:"budgetStability",children:"Budget Stability"}),a.jsx("option",{value:"debtMomentum",children:"Debt Momentum"}),a.jsx("option",{value:"savingsCushion",children:"Savings Cushion"}),a.jsx("option",{value:"consistency",children:"Consistency"})]})]}),a.jsxs("label",{children:["Trend direction",a.jsxs("select",{value:v,onChange:le=>y(le.target.value),children:[a.jsx("option",{value:"up",children:"Improving"}),a.jsx("option",{value:"flat",children:"Stable"}),a.jsx("option",{value:"down",children:"Softening"})]})]})]}),a.jsxs("div",{className:"score-debug-output",children:[a.jsx("div",{className:"score-debug-emotion",children:Se}),a.jsx("div",{children:Pe||"No coaching message available."})]})]}):null,Ne?a.jsxs("section",{className:"score-debug-panel score-qa-panel",children:[a.jsxs("div",{className:"score-debug-header",children:[a.jsx("h2",{children:"QA Simulator"}),a.jsx("span",{children:"Preview emotional states"})]}),a.jsxs("div",{className:"score-debug-grid",children:[a.jsxs("label",{children:["Scenario",a.jsxs("select",{value:x,onChange:le=>j(le.target.value),children:[a.jsx("option",{value:"new",children:"Brand new user"}),a.jsx("option",{value:"chaotic",children:"Inconsistent / chaotic"}),a.jsx("option",{value:"thriving",children:"Thriving entry"}),a.jsx("option",{value:"streak",children:"Long-streak stable"})]})]}),a.jsxs("label",{children:["History length",a.jsx("select",{value:w,onChange:le=>T(Number(le.target.value)),children:[1,2,3,4,5,6,9,12].map(le=>a.jsx("option",{value:le,children:le},le))})]}),a.jsxs("label",{children:["Volatility",a.jsxs("select",{value:A,onChange:le=>E(le.target.value),children:[a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"moderate",children:"Moderate"}),a.jsx("option",{value:"high",children:"High"})]})]}),a.jsxs("label",{children:["Weakest pillar",a.jsxs("select",{value:z,onChange:le=>Z(le.target.value),children:[a.jsx("option",{value:"budgetStability",children:"Budget Stability"}),a.jsx("option",{value:"debtMomentum",children:"Debt Momentum"}),a.jsx("option",{value:"savingsCushion",children:"Savings Cushion"}),a.jsx("option",{value:"consistency",children:"Consistency"})]})]}),a.jsxs("label",{children:["Trend",a.jsxs("select",{value:D,onChange:le=>B(le.target.value),children:[a.jsx("option",{value:"improving",children:"Improving"}),a.jsx("option",{value:"stable",children:"Stable"}),a.jsx("option",{value:"softening",children:"Softening"})]})]})]}),a.jsxs("div",{className:"score-debug-output",children:[a.jsx("div",{className:"score-debug-emotion",children:$e?.status==="ready"?"Active":"Locked"}),a.jsx("div",{children:$e?.notes})]}),a.jsxs("div",{className:"score-qa-context",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Reasoning:"})," ",tt.reasoning]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Confidence:"})," ",tt.confidence]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Coaching:"})," ",tt.coaching||"None"]})]}),a.jsxs("div",{className:"score-qa-grid",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Confidence:"})," ",$e?.confidence?.label||"Hidden"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Trend:"})," ",$e?.trend]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Coaching:"})," ",$e?.coaching||"None"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Milestones:"})," ",$e?.milestones?.length?$e.milestones.map(le=>le.title).join(", "):"None"]})]}),a.jsxs("div",{className:"score-qa-actions",children:[a.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>{const le=["budgetStability","debtMomentum","savingsCushion","consistency"],Te=["improving","stable","softening"],Ee=["low","moderate","high"];Z(le[Math.floor(Math.random()*le.length)]),B(Te[Math.floor(Math.random()*Te.length)]),E(Ee[Math.floor(Math.random()*Ee.length)]),T([1,2,3,4,5,6,9,12][Math.floor(Math.random()*8)])},children:"Randomize state"}),a.jsxs("label",{className:"score-qa-toggle",children:[a.jsx("input",{type:"checkbox",checked:R,onChange:le=>W(le.target.checked)}),"Contrast mode"]})]}),R?a.jsxs("div",{className:"score-qa-compare",children:[a.jsxs("div",{className:"score-qa-compare-controls",children:[a.jsxs("label",{children:["Volatility",a.jsxs("select",{value:fe,onChange:le=>re(le.target.value),children:[a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"moderate",children:"Moderate"}),a.jsx("option",{value:"high",children:"High"})]})]}),a.jsxs("label",{children:["Weakest pillar",a.jsxs("select",{value:K,onChange:le=>te(le.target.value),children:[a.jsx("option",{value:"budgetStability",children:"Budget Stability"}),a.jsx("option",{value:"debtMomentum",children:"Debt Momentum"}),a.jsx("option",{value:"savingsCushion",children:"Savings Cushion"}),a.jsx("option",{value:"consistency",children:"Consistency"})]})]}),a.jsxs("label",{children:["Trend",a.jsxs("select",{value:xe,onChange:le=>U(le.target.value),children:[a.jsx("option",{value:"improving",children:"Improving"}),a.jsx("option",{value:"stable",children:"Stable"}),a.jsx("option",{value:"softening",children:"Softening"})]})]})]}),a.jsxs("div",{className:"score-qa-compare-output",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Reasoning:"})," ",nt.reasoning]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Confidence:"})," ",nt.confidence]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Coaching:"})," ",nt.coaching||"None"]})]})]}):null]}):null,a.jsx("p",{className:"helper-note score-details-disclaimer",children:"Your financial health score is a deterministic snapshot modeled by the OS. Billing identity stays in a separate silo and links to the encrypted vault only via the blind UUID you control, and every export, sync, or purge is logged for compliance."}),a.jsx("div",{className:"score-details-footer",children:a.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>n("dashboard"),children:"Back to dashboard"})})]})]})},Ak=async()=>{if(!(typeof window>"u"||!window.indexedDB)&&typeof indexedDB.databases=="function")try{const n=await indexedDB.databases();await Promise.all(n.map(s=>s.name?new Promise(l=>{const o=indexedDB.deleteDatabase(s.name);o.onsuccess=()=>l(),o.onerror=()=>l(),o.onblocked=()=>l()}):Promise.resolve()))}catch(n){console.warn("Unable to enumerate IndexedDB databases",n)}},cv=async n=>{const s=Fa(n);try{await fetch(s,{method:"DELETE"})}catch(l){console.error(`Failed to call ${s}`,l)}},_k=()=>({nuclearWipe:async()=>{typeof window<"u"&&(fa.clearVaultOnly(),await Ak()),await cv("/api/user/purge"),await cv("/api/user/delete-everything"),typeof window<"u"&&(window.localStorage.removeItem("lunaLoggedIn"),window.sessionStorage.removeItem("lunaLoggedIn"),window.dispatchEvent(new Event("auth-updated")),window.dispatchEvent(new Event("identity-updated")),window.location.href="/login")}}),Mk=({onClose:n,onUnlock:s,loading:l,error:o})=>{const[d,h]=f.useState(""),m=g=>{g.preventDefault(),d&&s(d)};return a.jsx("div",{className:"vault-modal-backdrop",children:a.jsxs("div",{className:"vault-modal",children:[a.jsx("h2",{children:"Unlock your vault"}),a.jsx("p",{children:"Enter the password you used when setting up your Luna workspace."}),a.jsxs("form",{onSubmit:m,children:[a.jsxs("label",{children:["Password",a.jsx("input",{type:"password",value:d,onChange:g=>h(g.target.value),autoFocus:!0})]}),o&&a.jsx("p",{className:"vault-error",children:o}),a.jsxs("div",{className:"vault-modal-actions",children:[a.jsx("button",{type:"button",onClick:n,className:"secondary-btn",children:"Cancel"}),a.jsx("button",{type:"submit",className:"primary-btn",disabled:l,children:l?"Unlocking...":"Unlock"})]})]})]})})},uv=n=>{if(!n)return null;try{return JSON.parse(n)}catch{return null}},kk=()=>{const[n,s]=f.useState(Mt.isUnlocked()),[l,o]=f.useState(!1),[d,h]=f.useState(""),[m,g]=f.useState(!1),[v,y]=f.useState(()=>uv(Nt("userIdentity")));f.useEffect(()=>{const w=()=>{y(uv(Nt("userIdentity")))},T=()=>{s(Mt.isUnlocked())};return window.addEventListener("identity-updated",w),window.addEventListener("vault-locked",T),window.addEventListener("vault-unlocked",T),window.addEventListener("luna-current-user-changed",w),()=>{window.removeEventListener("identity-updated",w),window.removeEventListener("vault-locked",T),window.removeEventListener("vault-unlocked",T),window.removeEventListener("luna-current-user-changed",w)}},[]);const x=async w=>{if(!v?.userId||!v?.vaultSalt){h("Vault metadata is missing.");return}g(!0),h("");try{await eN({password:w,userId:v.userId,vaultSalt:v.vaultSalt,vaultKdf:v.vaultKdf}),o(!1)}catch(T){h(T?.message||"Unable to unlock the vault.")}finally{g(!1)}},j=()=>{ah("manual")};return a.jsxs("div",{className:"vault-lock-controls",children:[a.jsxs("p",{children:["Vault status: ",a.jsx("strong",{children:n?"Unlocked":"Locked"})]}),n?a.jsx("button",{className:"secondary-btn",type:"button",onClick:j,children:"Lock vault"}):a.jsx("button",{className:"primary-btn",type:"button",onClick:()=>o(!0),children:"Unlock vault"}),l&&a.jsx(Mk,{onClose:()=>o(!1),onUnlock:x,loading:m,error:d})]})},Dk=[{title:"Identity Isolation",state:"Dual silos",detail:"Billing identity (email + Stripe) lives in one silo while your encrypted financial vault lives in another. They connect only through an anonymous UUID.",icon:"link"},{title:"Cloud-Isolated Vault",state:"Encrypted + private",detail:"Your money profile is encrypted inside Lunas vault silo. Only you hold the key to read it.",icon:"cloud"},{title:"Zero-Knowledge AI",state:"Score-only view",detail:"Lunas AI sees verified snapshots, never your bank credentials or raw tokens.",icon:"shield"}],Lk=[{title:"Security & Privacy Manifest",description:"An executive-level story of identity isolation, encryption, and consent-first logging.",href:"/docs/security-manifest.md"},{title:"Data Contract",description:"A technical breakdown of every schema field, encryption expectation, and storage guarantee.",href:"/docs/data-contract.md"},{title:"Score Integrity Notes",description:"Why the five-pillar score is local-first and how verified activity fuels Lunas intelligence.",href:"/docs/score-readme.md"},{title:"Swagger API Docs",description:"Live interactive documentation for every auth, purge, and hardware key endpoint.",href:"/api-docs"}],Ok=()=>{const{nuclearWipe:n}=_k(),s=o=>{typeof window>"u"||window.dispatchEvent(new CustomEvent("luna-navigate",{detail:{view:o}}))},l=()=>{if(typeof window>"u")return;window.confirm("Delete everything? This clears local data and wipes the encrypted vault from the cloud.")&&n()};return a.jsxs("main",{className:"security-page",children:[a.jsxs("section",{className:"security-hero",children:[a.jsx("p",{className:"eyebrow",children:"Luna 1.0"}),a.jsxs("div",{className:"security-hero-menu",children:[a.jsx(St,{activePage:"security",onNavigate:s}),a.jsx(kk,{})]}),a.jsx("h1",{children:"Security & Privacy"}),a.jsx("p",{className:"subtitle",children:"The Gatekeeper, Health Brain, and AI chat work because you stay in control. This live scorecard shows exactly how Luna protects your data."}),a.jsx("p",{className:"vault-tradeoff",children:"The vault stays sealed until you unlock it with your password, which keeps Luna from reading your encrypted profile. Dashboards, syncing, and AI guidance all pause while the vault is locked, so unlock when you want to work and lock again before stepping away."})]}),a.jsxs("section",{className:"manifest-section",children:[a.jsx("p",{className:"manifest-lede",children:"Identity Isolation: Your billing identity (email + Stripe) and your encrypted financial vault live in two separate silos. They only share a blind UUID so no one can correlate your name with your spending."}),a.jsxs("div",{className:"manifest-diagram",children:[a.jsxs("div",{className:"diagram-box",children:[a.jsx("strong",{children:"Identity silo"}),a.jsx("p",{children:"Email, billing, Stripe IDs"})]}),a.jsx("div",{className:"diagram-connector",children:a.jsx("span",{children:"Blind UUID"})}),a.jsxs("div",{className:"diagram-box",children:[a.jsx("strong",{children:"Vault silo"}),a.jsx("p",{children:"Encrypted financial profile"})]})]}),a.jsx("p",{className:"manifest-lede",children:"Only you hold the key that decrypts the vaultLuna cannot read it, and Stripe sees no direct match to your spending."})]}),a.jsxs("section",{className:"privacy-score",children:[a.jsxs("div",{className:"privacy-score-header",children:[a.jsx("h2",{children:"Data sovereignty"}),a.jsx("p",{children:"Cloud-Isolated: Your money profile stays inside an encrypted vault silo that only you can unlock."})]}),a.jsx("div",{className:"security-status-grid",children:Dk.map(o=>a.jsxs("article",{className:"security-status-card",children:[a.jsx("div",{className:"status-icon","aria-hidden":"true",children:o.icon}),a.jsxs("div",{className:"status-content",children:[a.jsx("h3",{children:o.title}),a.jsx("p",{className:"status-state",children:o.state}),a.jsx("p",{className:"status-detail",children:o.detail})]})]},o.title))})]}),a.jsxs("section",{className:"security-features",children:[a.jsx("h2",{children:"Fortress-grade controls"}),a.jsx("p",{children:"The layers you enabledprivacy shield, WebAuthn hardware keys, and transparent docsare all reflected below. Security shouldnt feel scary; it should feel calm, steady, and under your control."}),a.jsxs("div",{className:"security-feature-grid",children:[a.jsxs("article",{className:"feature-chip",children:[a.jsx("h3",{children:"Privacy Shield"}),a.jsx("p",{children:"Automatically blurs sensitive numbers whenever someone might be looking over your shoulder."}),a.jsx("span",{className:"feature-pill",children:"Opt-in"})]}),a.jsxs("article",{className:"feature-chip",children:[a.jsx("h3",{children:"Hardware Vault"}),a.jsx("p",{children:"FIDO2/WebAuthn keys guard the vault and require a physical touch before decrypting snapshots."}),a.jsx("span",{className:"feature-pill",children:"Luna Pro"})]}),a.jsxs("article",{className:"feature-chip",children:[a.jsx("h3",{children:"Swagger Transparency"}),a.jsx("p",{children:"The API docs expose your purge, hardware registration, and auth flows for auditors."}),a.jsx("span",{className:"feature-pill",children:"/api-docs"})]}),a.jsxs("article",{className:"feature-chip",children:[a.jsx("h3",{children:"Consent-first Logging"}),a.jsx("p",{children:"Every nuclear purge emits `[PURGE_EVENT]` and `[PURGE_COMPLETE]` logs so regulators can verify destruction."}),a.jsx("span",{className:"feature-pill",children:"Full audit trail"})]})]})]}),a.jsxs("section",{className:"security-docs",children:[a.jsx("h2",{children:"Proof & policies"}),a.jsx("p",{children:"Every assertion on this page is backed by living documentation you can visit at any time."}),a.jsx("div",{className:"security-doc-grid",children:Lk.map(o=>a.jsxs("a",{className:"security-doc-card",href:o.href,target:"_blank",rel:"noreferrer",children:[a.jsx("h3",{children:o.title}),a.jsx("p",{children:o.description}),a.jsx("span",{className:"doc-link-label",children:"View document"})]},o.title))}),a.jsx("p",{className:"compliance-note",children:"Luna delivers modeling insights with traceable docs; it is not providing individualized financial advice."}),a.jsxs("section",{className:"integrity-report",children:[a.jsx("h2",{children:"System Integrity Report"}),a.jsxs("div",{className:"integrity-grid",children:[a.jsxs("article",{children:[a.jsx("div",{className:"integrity-key",children:"Data Source"}),a.jsx("p",{children:"Luna Financial OS (Encrypted Vault). Every export is derived straight from the encrypted snapshot."})]}),a.jsxs("article",{children:[a.jsx("div",{className:"integrity-key",children:"Silo Isolation"}),a.jsx("p",{children:"This export carries only B-Silo (Business) ledger entries; personal PII and spending remain cryptographically filtered."})]}),a.jsxs("article",{children:[a.jsx("div",{className:"integrity-key",children:"Integrity Hash"}),a.jsx("p",{children:"A SHA-256 fingerprint is recorded so auditors can verify the file has not been altered since export."})]}),a.jsxs("article",{children:[a.jsx("div",{className:"integrity-key",children:"Compliance Note"}),a.jsx("p",{children:"Generated via Lunas deterministic classification logic to support, not replace, professional tax preparation."})]})]}),a.jsx("p",{className:"helper-note",children:"Every export is logged with an [EXPORT_EVENT] and tied to your consent-first audit trail so you can trace what left the vault and when."})]})]}),a.jsxs("section",{className:"security-nuclear",children:[a.jsx("h2",{children:"Right to be Forgotten"}),a.jsx("p",{children:"Tap the button below to wipe every trace of your Luna data locally and on the backend. This cannot be undone, so we ask you to confirm that you really want to start over."}),a.jsx("button",{type:"button",className:"nuclear-btn",onClick:l,children:"Nuclear option: Delete my data"})]})]})},dv=50,zk=["moneyProfile","liveBudgetTransactions","financialHealthScore","debtPlanType","dashboardHiddenCards"],Rk=["periodHistory_","periodHistoryIndex_"],$k=["profile-updated","live-budget-updated","health-score-updated","debt-cash-updated","credit-cards-updated","auth-updated","storage-collision"],hv=n=>n&&typeof n=="object"&&!Array.isArray(n),bn=n=>{if(n==null)return null;try{return JSON.parse(n)}catch{return n}},Bk=n=>{if(!n)return!1;const s=l=>n===l||n.endsWith(`_${l}`);return zk.some(s)?!0:Rk.some(l=>n.startsWith(l))},mv=n=>{const s=Number(n);return Number.isFinite(s)?s.toFixed(2):"0"},Uk=(n,s)=>{if(Array.isArray(n)||Array.isArray(s)){const l=Array.isArray(n)?n.length:0,o=Array.isArray(s)?s.length:0;return l===o?"array length unchanged":`array length ${l} -> ${o}`}if(hv(n)&&hv(s)){const l=new Set([...Object.keys(n),...Object.keys(s)]),o=[];return l.forEach(d=>{n[d]!==s[d]&&o.push(d)}),o.length?`changed keys: ${o.slice(0,12).join(", ")}${o.length>12?"...":""}`:"no object changes"}return n===s?"no change":`${String(n)} -> ${String(s)}`},co=()=>{if(typeof window>"u")return{periodKey:"n/a",profile:{incomes:0,expenses:0,incomeTotal:"0.00",expenseTotal:"0.00"},transactions:{total:0,personal:0,business:0},score:{status:"n/a",score:"--"},debtPlan:"n/a",hiddenCards:0};const n=Nt("moneyProfile"),s=bn(n)||{},l=xo(We("moneyProfile"),s),o=Array.isArray(s.incomes)?s.incomes:[],d=Array.isArray(s.expenses)?s.expenses:[],h=o.reduce((B,R)=>B+(Number(R?.monthly??R?.amount??0)||0),0),m=d.reduce((B,R)=>B+(Number(R?.monthly??R?.amount??0)||0),0),g=Nt("liveBudgetTransactions"),v=bn(g)||[],y=xo(We("liveBudgetTransactions"),v),x=Array.isArray(v)?v:[],j=x.filter(B=>(B?.type==="income"?B?.incomeType:B?.expenseType)!=="business").length,w=x.length-j,T=bn(localStorage.getItem("lunaPreferences"))||{},A=Gn(T,x),E=bn(Nt("financialHealthScore"))||{},z=Number.isFinite(E?.score)?E.score:"--",Z=Nt("debtPlanType")||"snowball",D=bn(Nt("dashboardHiddenCards"))||[];return{periodKey:A?.key||"no-period",profile:{incomes:o.length,expenses:d.length,incomeTotal:mv(h),expenseTotal:mv(m),version:l},transactions:{total:x.length,personal:j,business:w,version:y},score:{status:E?.status||"unknown",score:z},debtPlan:Z,hiddenCards:Array.isArray(D)?D.length:0}},fv=n=>{if(n==null)return"";try{const s=JSON.stringify(n,null,2);return s.length>1200?`${s.slice(0,1200)}...`:s}catch{return String(n)}},Sh="healthConsolePosition",oi=(n,s,l)=>Math.min(Math.max(n,s),l),Pk=()=>{if(typeof window>"u")return{x:null,y:null};try{const n=localStorage.getItem(Sh);if(!n)return{x:null,y:null,dock:"br"};const s=JSON.parse(n),l=Number(s?.x),o=Number(s?.y),d=typeof s?.dock=="string"?s.dock:null;return!Number.isFinite(l)||!Number.isFinite(o)?{x:null,y:null,dock:d||"br"}:{x:l,y:o,dock:d}}catch{return{x:null,y:null,dock:"br"}}},Ik=n=>{if(!(typeof window>"u"))try{localStorage.setItem(Sh,JSON.stringify(n))}catch{}},Hk=3,Yk=1500,Zk=({enabled:n=!1,debugEnabled:s=!1})=>{const[l,o]=f.useState(!1),[d,h]=f.useState([]),[m,g]=f.useState(()=>co()),[v,y]=f.useState([]),[x,j]=f.useState(()=>Pk()),[w,T]=f.useState(!1),A=f.useRef(null),E=f.useRef(null),z=f.useRef(null),Z=f.useRef(null),D=f.useRef(0),B=U=>{h(se=>{const k=[...se,U];return k.length>dv?k.slice(-dv):k})},R=({key:U,prevValue:se,nextValue:k,source:ne})=>{if(U!=="liveBudgetTransactions")return;const L=Date.now();if(L-D.current<Yk)return;D.current=L;const C=Array.isArray(se)?se.length:null,M=Array.isArray(k)?k.length:null,G=C&&M===0,F=new Error("liveBudgetTransactions write").stack||"",he={periodKey:m?.periodKey||"unknown",previousLength:C,nextLength:M,wipeDetected:!!G,source:ne};y(S=>[{id:`${L}-${Math.random().toString(16).slice(2)}`,time:new Date,trace:F,context:he},...S].slice(0,Hk))},W=({key:U,prevValue:se,nextValue:k,source:ne})=>{if(!Bk(U))return;const L={id:`${Date.now()}-${Math.random().toString(16).slice(2)}`,type:"storage",key:U,source:ne,time:new Date,diff:Uk(se,k),data:k};B(L),g(co()),R({key:U,prevValue:se,nextValue:k,source:ne})},fe=U=>{const se={id:`${Date.now()}-${Math.random().toString(16).slice(2)}`,type:"event",key:U,source:"this tab",time:new Date,diff:"",data:null};B(se),g(co())};f.useEffect(()=>{if(!n||typeof window>"u")return;g(co());const U=localStorage.setItem.bind(localStorage),se=localStorage.removeItem.bind(localStorage),k=sessionStorage.setItem.bind(sessionStorage),ne=sessionStorage.removeItem.bind(sessionStorage);z.current={localSet:U,localRemove:se,sessionSet:k,sessionRemove:ne},localStorage.setItem=(M,G)=>{const F=bn(localStorage.getItem(M)),he=U(M,G);return W({key:M,prevValue:F,nextValue:bn(G),source:"local (this tab)"}),he},localStorage.removeItem=M=>{const G=bn(localStorage.getItem(M)),F=se(M);return W({key:M,prevValue:G,nextValue:null,source:"local (this tab)"}),F},sessionStorage.setItem=(M,G)=>{const F=bn(sessionStorage.getItem(M)),he=k(M,G);return W({key:M,prevValue:F,nextValue:bn(G),source:"session (this tab)"}),he},sessionStorage.removeItem=M=>{const G=bn(sessionStorage.getItem(M)),F=ne(M);return W({key:M,prevValue:G,nextValue:null,source:"session (this tab)"}),F};const L=M=>{M.key&&W({key:M.key,prevValue:bn(M.oldValue),nextValue:bn(M.newValue),source:"storage (other tab)"})};window.addEventListener("storage",L);const C=$k.map(M=>{const G=()=>fe(M);return window.addEventListener(M,G),{evt:M,handler:G}});return()=>{window.removeEventListener("storage",L),C.forEach(({evt:M,handler:G})=>window.removeEventListener(M,G)),z.current&&(localStorage.setItem=z.current.localSet,localStorage.removeItem=z.current.localRemove,sessionStorage.setItem=z.current.sessionSet,sessionStorage.removeItem=z.current.sessionRemove)}},[n]),f.useEffect(()=>{s||y([])},[s]),f.useEffect(()=>{if(!n||!w)return;const U=k=>{if(!Z.current||!E.current)return;const{offsetX:ne,offsetY:L}=Z.current,C=E.current.offsetWidth,M=E.current.offsetHeight,G=window.innerWidth-C-8,F=window.innerHeight-M-8,he=oi(k.clientX-ne,8,Math.max(8,G)),S=oi(k.clientY-L,8,Math.max(8,F));j({x:he,y:S})},se=()=>{if(E.current){const k=E.current.getBoundingClientRect(),ne=E.current.offsetWidth,L=E.current.offsetHeight,C=window.innerWidth-ne-8,M=window.innerHeight-L-8,G=24,F=oi(k.left,8,Math.max(8,C)),he=oi(k.top,8,Math.max(8,M)),S=F<=8+G,P=F>=C-G,pe=he<=8+G,ue=he>=M-G;j((S||P)&&(pe||ue)?{x:null,y:null,dock:pe&&S?"tl":pe&&P?"tr":ue&&S?"bl":"br"}:{x:F,y:he,dock:null})}T(!1),Z.current=null};return window.addEventListener("mousemove",U),window.addEventListener("mouseup",se),()=>{window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",se)}},[n,w]),f.useEffect(()=>{Ik(x)},[x]),f.useEffect(()=>{if(!n)return;const U=()=>{if(!E.current||x?.dock||x?.x==null||x?.y==null)return;const se=E.current.offsetWidth,k=E.current.offsetHeight,ne=window.innerWidth-se-8,L=window.innerHeight-k-8,C=oi(x.x,8,Math.max(8,ne)),M=oi(x.y,8,Math.max(8,L));(C!==x.x||M!==x.y)&&j({x:C,y:M,dock:null})};return U(),window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[n,x]),f.useEffect(()=>{l||A.current&&(A.current.scrollTop=A.current.scrollHeight)},[l,d]);const re=async()=>{const U=d.map(se=>{const k=se.time.toLocaleTimeString(),ne=`[${se.type}] ${se.key} @ ${k} (${se.source})`,L=se.diff?`diff: ${se.diff}`:"",C=se.data?`data: ${fv(se.data)}`:"";return[ne,L,C].filter(Boolean).join(`
`)}).join(`

`);try{await navigator.clipboard.writeText(U),fe("log-copied")}catch{fe("copy-failed")}},K=()=>h([]),te=()=>{if(j({x:null,y:null,dock:"br"}),typeof window<"u")try{localStorage.removeItem(Sh)}catch{}},xe=f.useMemo(()=>[{label:"Period key",value:m.periodKey},{label:"Profile incomes",value:`${m.profile.incomes} ($${m.profile.incomeTotal}) v${m.profile.version||1}`},{label:"Profile expenses",value:`${m.profile.expenses} ($${m.profile.expenseTotal})`},{label:"Live transactions",value:`${m.transactions.total} (P${m.transactions.personal} / B${m.transactions.business}) v${m.transactions.version||1}`},{label:"Score",value:`${m.score.status} ${m.score.score}`},{label:"Debt plan",value:m.debtPlan},{label:"Hidden cards",value:`${m.hiddenCards}`}],[m]);return n?a.jsxs("div",{ref:E,className:`health-console ${l?"is-collapsed":""} ${w?"is-dragging":""}`,style:x?.dock?{left:x.dock.includes("l")?8:"auto",right:x.dock.includes("r")?8:"auto",top:x.dock.includes("t")?8:"auto",bottom:x.dock.includes("b")?8:"auto"}:x?.x!=null&&x?.y!=null?{left:x.x,top:x.y,right:"auto",bottom:"auto"}:void 0,children:[a.jsxs("div",{className:"health-console-header",onMouseDown:U=>{if(U.button!==0||!E.current)return;const se=E.current.getBoundingClientRect();Z.current={offsetX:U.clientX-se.left,offsetY:U.clientY-se.top},j(k=>({x:se.left,y:se.top,dock:null})),T(!0)},children:[a.jsx("div",{className:"health-console-title",children:"Health Console"}),a.jsxs("div",{className:"health-console-actions",children:[a.jsx("button",{type:"button",className:"health-console-btn",onClick:re,children:"Copy"}),a.jsx("button",{type:"button",className:"health-console-btn",onClick:K,children:"Clear"}),a.jsx("button",{type:"button",className:"health-console-btn",onClick:te,children:"Reset now"}),a.jsx("button",{type:"button",className:"health-console-btn",onClick:()=>o(U=>!U),children:l?"Expand":"Collapse"})]})]}),!l&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"health-console-snapshot",children:[xe.map(U=>a.jsxs("div",{className:"health-console-row",children:[a.jsx("span",{children:U.label}),a.jsx("strong",{children:U.value})]},U.label)),a.jsx("div",{className:"health-console-reset-note",children:"Reset automatically if out of bounds."}),s&&v.length>0&&a.jsxs("div",{className:"health-console-traces",children:[a.jsx("div",{className:"health-console-trace-title",children:"Recent traces"}),v.map(U=>a.jsxs("div",{className:"health-console-trace",children:[a.jsxs("div",{className:"health-console-trace-head",children:["[trace] liveBudgetTransactions @ ",U.time.toLocaleTimeString()]}),a.jsxs("div",{className:"health-console-trace-meta",children:[U.context.source," | period: ",U.context.periodKey," | prev: ",U.context.previousLength," | next: ",U.context.nextLength]}),a.jsx("pre",{className:"health-console-trace-stack",children:U.trace})]},U.id))]})]}),a.jsx("div",{className:"health-console-log",ref:A,children:d.length===0?a.jsx("div",{className:"health-console-empty",children:"Waiting for events..."}):d.map(U=>a.jsxs("div",{className:`health-console-entry ${U.type}`,children:[a.jsxs("div",{className:"health-console-entry-head",children:[a.jsxs("span",{className:"health-console-entry-label",children:["[",U.type,"] ",U.key]}),a.jsxs("span",{className:"health-console-entry-time",children:[U.time.toLocaleTimeString()," | ",U.source]})]}),U.diff&&a.jsxs("div",{className:"health-console-diff",children:["diff: ",U.diff]}),U.data!==null&&U.data!==void 0&&a.jsx("pre",{className:"health-console-data",children:fv(U.data)})]},U.id))})]})]}):null},Vk="needs-review",qk=4320*60*1e3,pv=()=>it.get(We("liveBudgetTransactions"))||[],Gk=(n,s)=>{if(!s.length)return null;const l=new Date(n.date||Date.now()).getTime();return s.find(o=>{const d=new Date(o.date||Date.now()).getTime(),h=Math.abs(d-l),m=Math.abs(Number(o.amount||0)-Number(n.amount||0));return(o.type===n.type||n.type==="expense")&&h<=qk&&m<=1})},yv=n=>{const s=Number(n);return Number.isFinite(s)?`$${s.toFixed(2)}`:"$0.00"},Kk=()=>{const[n,s]=f.useState([]),[l,o]=f.useState([]),[d,h]=f.useState(!0),m=f.useRef(0),g=f.useCallback(()=>{const A=pv();o(A),s(A.filter(E=>E.reconciliationStatus===Vk))},[]);f.useEffect(()=>{g();const A=()=>g();return window.addEventListener("live-budget-updated",A),window.addEventListener("storage",A),()=>{window.removeEventListener("live-budget-updated",A),window.removeEventListener("storage",A)}},[g]);const v=f.useMemo(()=>l.filter(A=>!A.source||A.source==="manual"||A.source==="user"||A.reconciliationStatus==="verified"),[l]),y=f.useCallback((A,E)=>{const Z=pv().map(D=>D.id===A?{...D,...E}:D);it.set(We("liveBudgetTransactions"),Z),window.dispatchEvent(new CustomEvent("live-budget-updated"))},[]),x=f.useCallback(A=>{y(A.id,{reconciliationStatus:"verified",matchConfidence:Math.max((A.matchConfidence||0)+.1,.9)})},[y]),j=f.useCallback(A=>{const E=window.prompt("New category",A.category||A.originalName||"Uncategorized");E&&y(A.id,{category:E.trim(),reconciliationStatus:"verified",matchConfidence:.8})},[y]),w=f.useCallback(A=>{y(A.id,{reconciliationStatus:"matched",excluded:!0})},[y]),T=f.useCallback(A=>Gk(A,v),[v]);return f.useEffect(()=>{if(n.length===0){m.current=0,h(!1);return}n.length>m.current&&h(!0),m.current=n.length},[n.length]),!n.length||!d?null:a.jsx("div",{className:"recon-explorer-overlay",children:a.jsxs("div",{className:"recon-explorer-card",children:[a.jsxs("header",{className:"recon-header",children:[a.jsxs("div",{children:[a.jsx("h3",{children:"Verify New Activity"}),a.jsxs("p",{children:["Track Spending found ",n.length," new transaction(s) that need your attention."]})]}),a.jsx("button",{type:"button",className:"recon-close","aria-label":"Close verification alert",onClick:()=>h(!1),children:""})]}),a.jsx("div",{className:"recon-list",children:n.map(A=>{const E=T(A),z=Math.round((A.matchConfidence||0)*100);return a.jsxs("article",{className:"recon-item",children:[a.jsxs("div",{className:"recon-item-info",children:[a.jsxs("div",{className:"recon-item-name",children:[a.jsx("strong",{children:A.name||A.originalName||"Bank activity"}),a.jsx("span",{children:yv(A.amount)})]}),a.jsxs("div",{className:"recon-item-meta",children:[a.jsxs("span",{children:["Category: ",A.category||"Uncategorized"]}),a.jsxs("span",{children:["Confidence: ",z,"%"]})]}),A.originalName&&A.originalName!==A.name&&a.jsxs("div",{className:"recon-original",children:["Bank label: ",a.jsx("em",{children:A.originalName})]}),E&&a.jsxs("div",{className:"recon-match",children:[a.jsx("strong",{children:"Possible match:"})," ",E.name||"Manual entry"," "," ",yv(E.amount),"  ",E.category||"Uncategorized"]})]}),a.jsxs("div",{className:"recon-actions",children:[a.jsx("button",{type:"button",className:"btn-confirm",onClick:()=>x(A),children:"Confirm"}),a.jsx("button",{type:"button",className:"btn-edit",onClick:()=>j(A),children:"Recategorize"}),a.jsx("button",{type:"button",className:"btn-exclude",onClick:()=>w(A),children:"Exclude"})]})]},A.id)})})]})})},Fk=()=>{f.useEffect(()=>{if(typeof window>"u")return;const n=()=>{try{Jb({forceRefresh:!0})}catch(s){console.error("Health Score runner failed",s)}};return n(),window.addEventListener("live-budget-updated",n),window.addEventListener("profile-updated",n),()=>{window.removeEventListener("live-budget-updated",n),window.removeEventListener("profile-updated",n)}},[])},Xk=typeof window<"u",Qk=n=>{const[s,l]=f.useState(!1);return f.useEffect(()=>{if(!n||!Xk){l(!1);return}const o=()=>l(!0),d=()=>l(!1);return window.addEventListener("blur",o),window.addEventListener("focus",d),()=>{window.removeEventListener("blur",o),window.removeEventListener("focus",d)}},[n]),s},Jk=({message:n="Luna only sees your health score, never your credentials."})=>{const[s,l]=f.useState(!1);return f.useEffect(()=>{if(!s)return;const o=window.setTimeout(()=>l(!1),3500);return()=>window.clearTimeout(o)},[s]),a.jsxs("div",{className:"privacy-nut",children:[a.jsx("button",{type:"button",className:"privacy-nut-button",onClick:()=>l(o=>!o),"aria-label":"Explain privacy",children:""}),s&&a.jsx("div",{className:"privacy-nut-popover",role:"status",children:n})]})},Wk=[{label:"How am I doing?",prompt:"Show me the latest insight based on verified activity."},{label:"Help me save",prompt:"Model how to increase cash saved this month."},{label:"Can I buy coffee?",prompt:"Model whether a $12 purchase fits this cycle."}],gv="lunaChatIsOpen",eD=(n="",s={})=>{const l=n.toLowerCase(),o=s?.score||0,d=s?.verifiedCount||0,h=s?.pillars?.liquidity?.label||"steady";return d===0?"Hey! My dashboard is still quiet. Once you verify a few transactions in the explorer, I can give you the real inside scoop.":d<5?"I don't yet have enough verified history to respond confidently. Verify a few more transactions and I'll bring the numbers you can trust.":l.includes("hi")||l.includes("hello")||l.includes("hey")?o>80?`Hi! You're killing itscore ${o} is impressive. Anything you want to optimize today?`:`Hey there! We're steady at ${o}, and ${h} liquidity means there's room to breathe. Want some ideas?`:l.includes("afford")||l.includes("buy")?"Great question. Since I only read your verified activity, let's open your Adherence pillar together and see how a purchase affects the plan.":`I'm modeling your ${h.toLowerCase()} liquidity and ${o} score to keep the insights aligned with the data. What's on your mind?`},tD=(n="",s={},l={})=>{const o=s?.score??"--",d=s?.trend??0,h=Math.round(s?.pillarInsights?.liquidity?.score||0),m=s?.verifiedCount||0;if(/afford|buy/i.test(n))return h>=70?"You have a healthy buffer right now. That purchase keeps you above the 3-month cushion, so it looks doable without disturbing the plan.":h>=40?'You can afford it, but it dips liquidity below "strong." Maybe pause until the next income pulse to keep the trend steady.':"Hold off for now. Liquidity is still building and that purchase would stretch the verified runway.";if(/score|trend|change|why/i.test(n)){const g=d>=3?"upward":d<=-3?"downward":"steady";return`Score ${o} is ${g}. Verified data (${m} txns) keeps me honest. Focused wins in liquidity or savings will tip it upward.`}return/liquidity|buffer|months/i.test(n)?`Liquidity is ${h}/100 and ${s?.pillarInsights?.liquidity?.label||"steady"} buffer status. Keep building that cushion and you're golden.`:eD(n,s)},nD=(n={})=>{const s=new Map;(n.expenses||[]).forEach(o=>{const d=(o.category||o.name||"Other").trim();d&&s.set(d,(s.get(d)||0)+Number(o.amount||0))});let l=null;return s.forEach((o,d)=>{(!l||o>l.value)&&(l={key:d,value:o})}),l?`${l.key} ($${Math.round(Math.abs(l.value))})`:"No spend yet"},aD=(n={},s={})=>{const l=Math.round(n?.pillarInsights?.liquidity?.score||0),o=Math.round(n?.pillarInsights?.savingsRate?.score||0),d=n?.verifiedCount||0,h=n?.statusDetail||"Score not ready yet",m=nD(s);return`Liquidity ${l}/100 - Savings ${o}/100 - Verified ${d} txns - Focus: ${m} - ${h}`},sD=()=>{const n=it.get(We("financialHealthScore"))||{},s=it.get(We("moneyProfile"))||{},l=f.useMemo(()=>aD(n,s),[n,s]),o=f.useMemo(()=>(n?.verifiedCount||0)>=5&&!!l,[n,l]),[d,h]=f.useState(!1),[m,g]=f.useState([]),[v,y]=f.useState(""),[x,j]=f.useState(!1),[w,T]=f.useState(()=>typeof window>"u"?!1:window.localStorage.getItem(gv)==="true"),[A,E]=f.useState(!1);f.useEffect(()=>{if(d)return;const K=setTimeout(()=>h(!0),6500);return()=>clearTimeout(K)},[d]),f.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(gv,w?"true":"false")},[w]);const z=()=>{typeof window>"u"||window.dispatchEvent(new CustomEvent("luna-navigate",{detail:{view:"security"}}))},Z=K=>{const te=K.trim();te&&(g(xe=>[...xe,{role:"user",text:te}]),y(""),j(!0),E(!0),window.setTimeout(()=>{const xe=tD(te,n,s);g(U=>[...U,{role:"assistant",text:xe}]),j(!1)},600))},D=K=>{E(!0),Z(K)},B=()=>T(!0),R=()=>T(!1),W=f.useMemo(()=>{const K=Math.round(n?.pillarInsights?.liquidity?.score||0),te=Math.round(n?.score||0),xe=n?.statusDetail||"Score not ready yet";return o?`Activity Score ${te} - Liquidity ${K}/100 - ${xe}`:"Verify a handful of transactions to unlock contextual insights."},[n,o]),fe=()=>E(!0),re="Deterministic insights modeled from verified activity. These comments are descriptive, not personalized financial advice.";return a.jsxs("div",{className:`luna-chat-shell ${w?"is-open":"is-collapsed"}`,children:[!w&&a.jsxs("button",{type:"button",className:"luna-chat-tab",onClick:B,"aria-label":"Open Luna AI",children:[a.jsx("span",{className:"luna-chat-tab-icon","aria-hidden":"true",children:"+"}),a.jsx("span",{className:"luna-chat-tab-label",children:"Luna AI"})]}),w&&a.jsx("section",{className:"luna-chat-widget","aria-live":"polite",children:a.jsxs("div",{className:"chat-panel",children:[a.jsxs("header",{className:"chat-header",children:[a.jsx("button",{type:"button",className:"chat-minimize",onClick:R,"aria-label":"Minimize Luna chat",children:a.jsx("span",{"aria-hidden":"true",children:""})}),a.jsxs("div",{className:"chat-header-main",children:[a.jsx("div",{className:"chat-status-badge","aria-live":"polite",children:W}),a.jsxs("h3",{className:"chat-title",children:["Luna AI",a.jsxs("span",{className:"chat-title-subtext",children:["Contextual insights share calm summaries of your verified activity.",a.jsx("span",{className:"chat-legal-link",title:re,children:"Deterministic observations, not personalized advice."})]})]}),o&&!d&&a.jsx("div",{className:"chat-tooltip",role:"status",children:"Insights here stay grounded in your real numbers."})]}),a.jsx("div",{className:"chat-header-actions",children:a.jsx(Jk,{message:"Luna only sees your Health Scorenever your password."})})]}),a.jsx("div",{className:"chat-context",children:a.jsx("p",{children:l})}),a.jsxs("div",{className:"chat-messages",role:"log",children:[m.map((K,te)=>a.jsx("article",{className:`chat-message chat-message-${K.role}`,children:a.jsx("p",{children:K.text})},`${K.role}-${te}`)),x&&a.jsxs("div",{className:"chat-typing",role:"status","aria-live":"polite",children:[a.jsx("span",{className:"dot"}),a.jsx("span",{className:"dot"}),a.jsx("span",{className:"dot"}),a.jsx("span",{className:"typing-label",children:"Thinking..."})]})]}),A&&a.jsx("div",{className:"chat-actions",children:Wk.map(K=>a.jsx("button",{type:"button",className:"chat-quick-action",onClick:()=>D(K.prompt),children:K.label},K.label))}),a.jsxs("footer",{className:"chat-footer",children:[a.jsx("input",{placeholder:"Ask Luna...",value:v,onChange:K=>y(K.target.value),onFocus:fe,onKeyDown:K=>{K.key==="Enter"&&(K.preventDefault(),Z(v))}}),a.jsx("button",{type:"button",onClick:()=>Z(v),className:"chat-send",children:"Send"})]}),a.jsx("div",{className:"chat-footer-meta",children:a.jsx("button",{type:"button",className:"chat-footer-link",onClick:z,title:re,children:"Security & Privacy"})})]})})]})},iD=()=>{const[n,s]=f.useState("verifying"),[l,o]=f.useState("");return f.useEffect(()=>{let d;const h=async()=>{try{const m=await fetch(Fa("/api/user/subscription-status"));if(!m.ok)throw new Error("Unable to fetch subscription status.");if((await m.json()).status==="PRO"){s("verified");return}d=setTimeout(h,2e3)}catch(m){o(m.message),d=setTimeout(h,4e3)}};return h(),()=>clearTimeout(d)},[]),a.jsx("div",{className:"success-page",children:n==="verifying"?a.jsxs("div",{className:"success-spinner",children:[a.jsx("div",{className:"success-spinner__icon"}),a.jsx("h1",{children:"Verifying Your Fortress..."}),a.jsx("p",{children:"Communicating with the Identity Silo."}),l&&a.jsx("p",{className:"success-error",children:l})]}):a.jsxs("div",{className:"success-verified",children:[a.jsx(Hd,{className:"success-check"}),a.jsx("h1",{children:"Fortress Verified"}),a.jsx("p",{children:"Your Hardware Keys and Pro insights are now unlocked."}),a.jsx("button",{className:"primary-btn success-enter",onClick:()=>window.location.href="/dashboard",children:"Enter the Vault"})]})})},uo="lunaLoggedIn",ho="healthConsoleEnabled",vv="health-console-toggle",vo="hideLunaChat",xd="luna-chat-visibility",Xd="userIdentity",bv={1:{"--fortress-glow":"rgba(148, 163, 184, 0.2)","--accent-color":"#94a3b8"},2:{"--fortress-glow":"rgba(59, 130, 246, 0.2)","--accent-color":"#3b82f6"},3:{"--fortress-glow":"rgba(16, 185, 129, 0.2)","--accent-color":"#10b981"},4:{"--fortress-glow":"rgba(168, 85, 247, 0.2)","--accent-color":"#a855f7"}},jd=()=>{if(typeof window>"u")return null;try{const n=localStorage.getItem(Xd);return n?JSON.parse(n):null}catch{return null}},xv={dashboard:Db,livebudget:NA,budget:dC,"split-gps":QC,"credit-payoff":nA,"total-debt":__,"snowball-explainer":P_,goals:oA,savings:RA,assets:UA,import:hA,onboardingWelcome:SA,onboardingPayRhythm:TA,onboardingMonthlyPicture:CA,onboardingSnapshot:AA,"snapshot-intro":mM,"snapshot-result":xM,refine:NM,settings:x_,profile:DA,"user-profile":OA,loans:Z_,fico:X_,"payment-options":Q_,"business-tools":DM,"budget-period-guide":LM,"features-guide":RM,"score-details":Ck,security:Ok,success:iD,"create-account":oM,"forgot-password":hM,login:dM},Wb={dashboard:"dashboard-page",livebudget:"live-budget-page",budget:"budget-page","split-gps":"split-gps-page","credit-payoff":"cc-page","total-debt":"total-debt-page","snowball-explainer":"snowball-page",goals:"goals-page",savings:"savings-page",assets:"assets-page",import:"import-page",onboardingWelcome:"onboarding-welcome-page",onboardingPayRhythm:"onboarding-pay-rhythm-page",onboardingMonthlyPicture:"onboarding-monthly-picture-page",onboardingSnapshot:"onboarding-snapshot-page","snapshot-intro":"snapshot-intro-page","snapshot-result":"snapshot-result-page",refine:"refine-page",settings:"settings-page",profile:"profile-page","user-profile":"profile-page",loans:"loan-page",fico:"fico-score-page","payment-options":"payment-options-page","business-tools":"business-tools-page","budget-period-guide":"budget-period-guide-page","features-guide":"features-guide-page","score-details":"score-details-page",security:"security-page",success:"success-page","create-account":"create-account-page","forgot-password":"forgot-password-page",login:"login-page"},rD=Object.values(Wb).filter(Boolean),Eh=["onboardingWelcome","onboardingPayRhythm","onboardingMonthlyPicture","onboardingSnapshot"],mo=Eh[0],lD=new Set(["login","create-account","security",...Eh,"snapshot-intro","snapshot-result"]),wd=new Set([...Eh,"snapshot-intro","snapshot-result"]),jv=()=>typeof window>"u"?!0:localStorage.getItem(vo)!=="false",ex=()=>typeof window>"u"||!window.matchMedia?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",oD=n=>n==="dark"||n==="light"?n:ex();function cD(){const{preferences:n,setThemePreference:s}=xt(),l=f.useCallback(()=>typeof window>"u"?!1:localStorage.getItem(uo)==="true"||sessionStorage.getItem(uo)==="true",[]),o=l(),d=ps(),h=Xu(d),[m,g]=f.useState(()=>o?h?"dashboard":mo:"login"),[v,y]=f.useState(()=>oD(n.theme)),[x,j]=f.useState(o),[w,T]=f.useState(h),[A,E]=f.useState(()=>typeof window>"u"?!1:new URLSearchParams(window.location.search).get("debug")==="health"?!0:localStorage.getItem(ho)==="true"),[z,Z]=f.useState(!1),[D,B]=f.useState(()=>jv()),[R,W]=f.useState(()=>jd());Fk();const fe=f.useCallback(L=>{y(C=>(typeof L=="function"?L(C):L)||"light")},[]),re=f.useRef(n.theme);f.useEffect(()=>{re.current!==v&&(re.current=v,s(v))},[s,v]),f.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const L=window.matchMedia("(prefers-color-scheme: dark)"),C=()=>{n.theme==="system"&&y(L.matches?"dark":"light")};if(C(),n.theme!=="system")return;const M=()=>C();return L.addEventListener?(L.addEventListener("change",M),()=>L.removeEventListener("change",M)):(L.addListener(M),()=>L.removeListener(M))},[n.theme]),f.useEffect(()=>{const L=()=>{T(Xu(ps()))};return window.addEventListener(Sd,L),()=>window.removeEventListener(Sd,L)},[]),f.useEffect(()=>{const L=()=>{T(Xu(ps()))};return window.addEventListener(Ed,L),()=>window.removeEventListener(Ed,L)},[]),f.useEffect(()=>{if(x){if(!w&&!wd.has(m)){g(mo);return}w&&wd.has(m)&&g("dashboard")}},[x,w,m]),f.useEffect(()=>{if(n.theme==="system"){y(ex());return}y(n.theme)},[n.theme]),f.useEffect(()=>{it.init([We("moneyProfile"),We("liveBudgetTransactions")]),it.setState("localOnly"),Z(!0)},[]),f.useEffect(()=>{if(typeof window>"u")return;const L=M=>{const G=M?.detail?.hidden;if(typeof G=="boolean"){const F=localStorage.getItem(vo);if(G===!1&&F==="true")return;B(G)}},C=M=>{M.key===vo&&B(M.newValue==="true")};return window.addEventListener(xd,L),window.addEventListener("storage",C),()=>{window.removeEventListener(xd,L),window.removeEventListener("storage",C)}},[]),f.useEffect(()=>{if(typeof window>"u")return;const L=()=>W(jd()),C=M=>{(!M.key||M.key===Xd)&&L()};return window.addEventListener("storage",C),window.addEventListener("identity-updated",L),()=>{window.removeEventListener("storage",C),window.removeEventListener("identity-updated",L)}},[]);const K=f.useCallback(L=>{if(typeof window>"u"||!L)return;const M={...jd()||{},...L};try{localStorage.setItem(Xd,JSON.stringify(M)),window.dispatchEvent(new Event("identity-updated"))}catch(G){console.error("Unable to persist identity data",G)}W(M)},[W]),te=f.useCallback(async()=>{if(!(typeof window>"u"))try{const L=await fetch(Fa("/api/user/identity"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!L.ok)return;if(!(L.headers.get("content-type")||"").toLowerCase().includes("application/json")){console.warn("Identity fetch returned non-JSON payload, skipping refresh.");return}const M=await L.json();K(M)}catch(L){console.error("Failed to refresh identity",L)}},[K]);f.useEffect(()=>{te()},[te]),f.useEffect(()=>{if(typeof window>"u")return;const L=jv();try{localStorage.setItem(vo,L?"true":"false"),window.dispatchEvent(new CustomEvent(xd,{detail:{hidden:L}}))}catch{}},[]),f.useEffect(()=>{if(typeof window>"u")return;const L=(M,G)=>M===G||M?.endsWith(`_${G}`),C=async M=>{const G=M?.detail?.key;G&&(console.error(`DATA OUT OF SYNC: ${G} was updated in another tab.`),it.setState("collision"),L(G,"moneyProfile")&&(it.get(We("moneyProfile")),window.dispatchEvent(new CustomEvent("profile-updated"))),L(G,"liveBudgetTransactions")&&(it.get(We("liveBudgetTransactions")),window.dispatchEvent(new CustomEvent("live-budget-updated"))),it.setState("synced"))};return window.addEventListener("storage-collision",C),()=>window.removeEventListener("storage-collision",C)},[]),f.useEffect(()=>{const L=()=>it.setState("synced");return window.addEventListener("profile-updated",L),window.addEventListener("live-budget-updated",L),()=>{window.removeEventListener("profile-updated",L),window.removeEventListener("live-budget-updated",L)}},[]),f.useEffect(()=>{const L=tN();return()=>L()},[]),f.useEffect(()=>{const L=()=>ah("auth_change");return window.addEventListener("auth-updated",L),()=>window.removeEventListener("auth-updated",L)},[]),f.useEffect(()=>{if(typeof window>"u")return;const C=new URLSearchParams(window.location.search).get("debug")==="health";if(C){try{localStorage.setItem(ho,"true")}catch{}E(!0)}const M=()=>{const F=C||localStorage.getItem(ho)==="true";E(F)},G=F=>{F.key===ho&&M()};return window.addEventListener("storage",G),window.addEventListener(vv,M),()=>{window.removeEventListener("storage",G),window.removeEventListener(vv,M)}},[]),f.useEffect(()=>{if(typeof document>"u")return;document.body.classList.toggle("dark-mode",v==="dark")},[v]),f.useEffect(()=>{if(typeof document>"u")return;const L=document.body;L.classList.remove(...rD);const C=Wb[m];C&&L.classList.add(C)},[m]),f.useEffect(()=>{if(typeof window>"u")return;const L=()=>{const C=localStorage.getItem(uo)==="true"||sessionStorage.getItem(uo)==="true";j(C)};return L(),window.addEventListener("storage",L),window.addEventListener("auth-updated",L),()=>{window.removeEventListener("storage",L),window.removeEventListener("auth-updated",L)}},[]),f.useEffect(()=>{!x&&!lD.has(m)&&g("login")},[x,m]);const xe=f.useMemo(()=>xv[m]||Db,[m]),U=f.useCallback(L=>{if(!xv[L]||L===m)return;const C=x||l();if(L!=="login"&&L!=="create-account"&&!C){g("login");return}if(L==="refine"&&!w){g(mo);return}if(C&&!w&&!wd.has(L)){g(mo);return}g(L)},[x,w,m,l]);f.useEffect(()=>{const L=C=>{const M=C?.detail?.view;typeof M=="string"&&U(M)};return window.addEventListener("luna-navigate",L),()=>window.removeEventListener("luna-navigate",L)},[U]);const se=Qk(n.privacyShieldEnabled??!1),k=R?.ecosystem_level??R?.ecosystemLevel??1,ne=bv[k]||bv[1];return z?a.jsxs("div",{className:`app-shell ${se?"privacy-shield-active":""}`,style:ne,children:[a.jsxs("div",{className:"app-shell__content",children:[a.jsx(xe,{onNavigate:U,theme:v,setTheme:fe,healthConsoleEnabled:A,setHealthConsoleEnabled:E}),a.jsx(Kk,{}),a.jsx(Zk,{enabled:A,debugEnabled:A}),!D&&a.jsx(sD,{})]}),se&&a.jsx("div",{className:"privacy-shield-overlay","aria-hidden":"true"})]}):null}w0.createRoot(document.getElementById("root")).render(a.jsx(f.StrictMode,{children:a.jsx(E0,{children:a.jsx(f_,{children:a.jsx(cD,{})})})}));
